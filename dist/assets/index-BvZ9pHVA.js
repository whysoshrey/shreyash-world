function pP(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function P_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var x0={exports:{}},Id={},_0={exports:{}},an={};var HS;function mP(){if(HS)return an;HS=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function v(W){return W===null||typeof W!="object"?null:(W=m&&W[m]||W["@@iterator"],typeof W=="function"?W:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,w={};function M(W,re,ke){this.props=W,this.context=re,this.refs=w,this.updater=ke||y}M.prototype.isReactComponent={},M.prototype.setState=function(W,re){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,re,"setState")},M.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function S(){}S.prototype=M.prototype;function T(W,re,ke){this.props=W,this.context=re,this.refs=w,this.updater=ke||y}var b=T.prototype=new S;b.constructor=T,A(b,M.prototype),b.isPureReactComponent=!0;var B=Array.isArray,F=Object.prototype.hasOwnProperty,N={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function G(W,re,ke){var fe,Ce={},Ne=null,Ue=null;if(re!=null)for(fe in re.ref!==void 0&&(Ue=re.ref),re.key!==void 0&&(Ne=""+re.key),re)F.call(re,fe)&&!z.hasOwnProperty(fe)&&(Ce[fe]=re[fe]);var qe=arguments.length-2;if(qe===1)Ce.children=ke;else if(1<qe){for(var vt=Array(qe),ft=0;ft<qe;ft++)vt[ft]=arguments[ft+2];Ce.children=vt}if(W&&W.defaultProps)for(fe in qe=W.defaultProps,qe)Ce[fe]===void 0&&(Ce[fe]=qe[fe]);return{$$typeof:i,type:W,key:Ne,ref:Ue,props:Ce,_owner:N.current}}function U(W,re){return{$$typeof:i,type:W.type,key:re,ref:W.ref,props:W.props,_owner:W._owner}}function L(W){return typeof W=="object"&&W!==null&&W.$$typeof===i}function j(W){var re={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ke){return re[ke]})}var se=/\/+/g;function ie(W,re){return typeof W=="object"&&W!==null&&W.key!=null?j(""+W.key):re.toString(36)}function he(W,re,ke,fe,Ce){var Ne=typeof W;(Ne==="undefined"||Ne==="boolean")&&(W=null);var Ue=!1;if(W===null)Ue=!0;else switch(Ne){case"string":case"number":Ue=!0;break;case"object":switch(W.$$typeof){case i:case e:Ue=!0}}if(Ue)return Ue=W,Ce=Ce(Ue),W=fe===""?"."+ie(Ue,0):fe,B(Ce)?(ke="",W!=null&&(ke=W.replace(se,"$&/")+"/"),he(Ce,re,ke,"",function(ft){return ft})):Ce!=null&&(L(Ce)&&(Ce=U(Ce,ke+(!Ce.key||Ue&&Ue.key===Ce.key?"":(""+Ce.key).replace(se,"$&/")+"/")+W)),re.push(Ce)),1;if(Ue=0,fe=fe===""?".":fe+":",B(W))for(var qe=0;qe<W.length;qe++){Ne=W[qe];var vt=fe+ie(Ne,qe);Ue+=he(Ne,re,ke,vt,Ce)}else if(vt=v(W),typeof vt=="function")for(W=vt.call(W),qe=0;!(Ne=W.next()).done;)Ne=Ne.value,vt=fe+ie(Ne,qe++),Ue+=he(Ne,re,ke,vt,Ce);else if(Ne==="object")throw re=String(W),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return Ue}function xe(W,re,ke){if(W==null)return W;var fe=[],Ce=0;return he(W,fe,"","",function(Ne){return re.call(ke,Ne,Ce++)}),fe}function me(W){if(W._status===-1){var re=W._result;re=re(),re.then(function(ke){(W._status===0||W._status===-1)&&(W._status=1,W._result=ke)},function(ke){(W._status===0||W._status===-1)&&(W._status=2,W._result=ke)}),W._status===-1&&(W._status=0,W._result=re)}if(W._status===1)return W._result.default;throw W._result}var ge={current:null},H={transition:null},q={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:H,ReactCurrentOwner:N};function Q(){throw Error("act(...) is not supported in production builds of React.")}return an.Children={map:xe,forEach:function(W,re,ke){xe(W,function(){re.apply(this,arguments)},ke)},count:function(W){var re=0;return xe(W,function(){re++}),re},toArray:function(W){return xe(W,function(re){return re})||[]},only:function(W){if(!L(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},an.Component=M,an.Fragment=t,an.Profiler=r,an.PureComponent=T,an.StrictMode=n,an.Suspense=u,an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,an.act=Q,an.cloneElement=function(W,re,ke){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var fe=A({},W.props),Ce=W.key,Ne=W.ref,Ue=W._owner;if(re!=null){if(re.ref!==void 0&&(Ne=re.ref,Ue=N.current),re.key!==void 0&&(Ce=""+re.key),W.type&&W.type.defaultProps)var qe=W.type.defaultProps;for(vt in re)F.call(re,vt)&&!z.hasOwnProperty(vt)&&(fe[vt]=re[vt]===void 0&&qe!==void 0?qe[vt]:re[vt])}var vt=arguments.length-2;if(vt===1)fe.children=ke;else if(1<vt){qe=Array(vt);for(var ft=0;ft<vt;ft++)qe[ft]=arguments[ft+2];fe.children=qe}return{$$typeof:i,type:W.type,key:Ce,ref:Ne,props:fe,_owner:Ue}},an.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:s,_context:W},W.Consumer=W},an.createElement=G,an.createFactory=function(W){var re=G.bind(null,W);return re.type=W,re},an.createRef=function(){return{current:null}},an.forwardRef=function(W){return{$$typeof:l,render:W}},an.isValidElement=L,an.lazy=function(W){return{$$typeof:p,_payload:{_status:-1,_result:W},_init:me}},an.memo=function(W,re){return{$$typeof:d,type:W,compare:re===void 0?null:re}},an.startTransition=function(W){var re=H.transition;H.transition={};try{W()}finally{H.transition=re}},an.unstable_act=Q,an.useCallback=function(W,re){return ge.current.useCallback(W,re)},an.useContext=function(W){return ge.current.useContext(W)},an.useDebugValue=function(){},an.useDeferredValue=function(W){return ge.current.useDeferredValue(W)},an.useEffect=function(W,re){return ge.current.useEffect(W,re)},an.useId=function(){return ge.current.useId()},an.useImperativeHandle=function(W,re,ke){return ge.current.useImperativeHandle(W,re,ke)},an.useInsertionEffect=function(W,re){return ge.current.useInsertionEffect(W,re)},an.useLayoutEffect=function(W,re){return ge.current.useLayoutEffect(W,re)},an.useMemo=function(W,re){return ge.current.useMemo(W,re)},an.useReducer=function(W,re,ke){return ge.current.useReducer(W,re,ke)},an.useRef=function(W){return ge.current.useRef(W)},an.useState=function(W){return ge.current.useState(W)},an.useSyncExternalStore=function(W,re,ke){return ge.current.useSyncExternalStore(W,re,ke)},an.useTransition=function(){return ge.current.useTransition()},an.version="18.3.1",an}var zS;function ny(){return zS||(zS=1,_0.exports=mP()),_0.exports}var GS;function gP(){if(GS)return Id;GS=1;var i=ny(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,d){var p,m={},v=null,y=null;d!==void 0&&(v=""+d),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(y=u.ref);for(p in u)n.call(u,p)&&!s.hasOwnProperty(p)&&(m[p]=u[p]);if(l&&l.defaultProps)for(p in u=l.defaultProps,u)m[p]===void 0&&(m[p]=u[p]);return{$$typeof:e,type:l,key:v,ref:y,props:m,_owner:r.current}}return Id.Fragment=t,Id.jsx=o,Id.jsxs=o,Id}var VS;function vP(){return VS||(VS=1,x0.exports=gP()),x0.exports}var D=vP(),Z=ny();const NC=P_(Z),yP=pP({__proto__:null,default:NC},[Z]);var Ym={},A0={exports:{}},Hr={},S0={exports:{}},M0={};var WS;function xP(){return WS||(WS=1,(function(i){function e(H,q){var Q=H.length;H.push(q);e:for(;0<Q;){var W=Q-1>>>1,re=H[W];if(0<r(re,q))H[W]=q,H[Q]=re,Q=W;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var q=H[0],Q=H.pop();if(Q!==q){H[0]=Q;e:for(var W=0,re=H.length,ke=re>>>1;W<ke;){var fe=2*(W+1)-1,Ce=H[fe],Ne=fe+1,Ue=H[Ne];if(0>r(Ce,Q))Ne<re&&0>r(Ue,Ce)?(H[W]=Ue,H[Ne]=Q,W=Ne):(H[W]=Ce,H[fe]=Q,W=fe);else if(Ne<re&&0>r(Ue,Q))H[W]=Ue,H[Ne]=Q,W=Ne;else break e}}return q}function r(H,q){var Q=H.sortIndex-q.sortIndex;return Q!==0?Q:H.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,m=null,v=3,y=!1,A=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var q=t(d);q!==null;){if(q.callback===null)n(d);else if(q.startTime<=H)n(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=t(d)}}function B(H){if(w=!1,b(H),!A)if(t(u)!==null)A=!0,me(F);else{var q=t(d);q!==null&&ge(B,q.startTime-H)}}function F(H,q){A=!1,w&&(w=!1,S(G),G=-1),y=!0;var Q=v;try{for(b(q),m=t(u);m!==null&&(!(m.expirationTime>q)||H&&!j());){var W=m.callback;if(typeof W=="function"){m.callback=null,v=m.priorityLevel;var re=W(m.expirationTime<=q);q=i.unstable_now(),typeof re=="function"?m.callback=re:m===t(u)&&n(u),b(q)}else n(u);m=t(u)}if(m!==null)var ke=!0;else{var fe=t(d);fe!==null&&ge(B,fe.startTime-q),ke=!1}return ke}finally{m=null,v=Q,y=!1}}var N=!1,z=null,G=-1,U=5,L=-1;function j(){return!(i.unstable_now()-L<U)}function se(){if(z!==null){var H=i.unstable_now();L=H;var q=!0;try{q=z(!0,H)}finally{q?ie():(N=!1,z=null)}}else N=!1}var ie;if(typeof T=="function")ie=function(){T(se)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,xe=he.port2;he.port1.onmessage=se,ie=function(){xe.postMessage(null)}}else ie=function(){M(se,0)};function me(H){z=H,N||(N=!0,ie())}function ge(H,q){G=M(function(){H(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){A||y||(A=!0,me(F))},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(H){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var Q=v;v=q;try{return H()}finally{v=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=v;v=H;try{return q()}finally{v=Q}},i.unstable_scheduleCallback=function(H,q,Q){var W=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,H){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Q+re,H={id:p++,callback:q,priorityLevel:H,startTime:Q,expirationTime:re,sortIndex:-1},Q>W?(H.sortIndex=Q,e(d,H),t(u)===null&&H===t(d)&&(w?(S(G),G=-1):w=!0,ge(B,Q-W))):(H.sortIndex=re,e(u,H),A||y||(A=!0,me(F))),H},i.unstable_shouldYield=j,i.unstable_wrapCallback=function(H){var q=v;return function(){var Q=v;v=q;try{return H.apply(this,arguments)}finally{v=Q}}}})(M0)),M0}var jS;function _P(){return jS||(jS=1,S0.exports=xP()),S0.exports}var XS;function AP(){if(XS)return Hr;XS=1;var i=ny(),e=_P();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,g=1;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(r[a]=c,a=0;a<c.length;a++)n.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function v(a){return u.call(m,a)?!0:u.call(p,a)?!1:d.test(a)?m[a]=!0:(p[a]=!0,!1)}function y(a,c,g,_){if(g!==null&&g.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return _?!1:g!==null?!g.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function A(a,c,g,_){if(c===null||typeof c>"u"||y(a,c,g,_))return!0;if(_)return!1;if(g!==null)switch(g.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function w(a,c,g,_,C,P,k){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=_,this.attributeNamespace=C,this.mustUseProperty=g,this.propertyName=a,this.type=c,this.sanitizeURL=P,this.removeEmptyString=k}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){M[a]=new w(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];M[c]=new w(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){M[a]=new w(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){M[a]=new w(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){M[a]=new w(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){M[a]=new w(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){M[a]=new w(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){M[a]=new w(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){M[a]=new w(a,5,!1,a.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function T(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(S,T);M[c]=new w(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(S,T);M[c]=new w(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(S,T);M[c]=new w(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){M[a]=new w(a,1,!1,a.toLowerCase(),null,!1,!1)}),M.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){M[a]=new w(a,1,!1,a.toLowerCase(),null,!0,!0)});function b(a,c,g,_){var C=M.hasOwnProperty(c)?M[c]:null;(C!==null?C.type!==0:_||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(A(c,g,C,_)&&(g=null),_||C===null?v(c)&&(g===null?a.removeAttribute(c):a.setAttribute(c,""+g)):C.mustUseProperty?a[C.propertyName]=g===null?C.type===3?!1:"":g:(c=C.attributeName,_=C.attributeNamespace,g===null?a.removeAttribute(c):(C=C.type,g=C===3||C===4&&g===!0?"":""+g,_?a.setAttributeNS(_,c,g):a.setAttribute(c,g))))}var B=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),N=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),j=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),H=Symbol.iterator;function q(a){return a===null||typeof a!="object"?null:(a=H&&a[H]||a["@@iterator"],typeof a=="function"?a:null)}var Q=Object.assign,W;function re(a){if(W===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);W=c&&c[1]||""}return`
`+W+a}var ke=!1;function fe(a,c){if(!a||ke)return"";ke=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Se){var _=Se}Reflect.construct(a,[],c)}else{try{c.call()}catch(Se){_=Se}a.call(c.prototype)}else{try{throw Error()}catch(Se){_=Se}a()}}catch(Se){if(Se&&_&&typeof Se.stack=="string"){for(var C=Se.stack.split(`
`),P=_.stack.split(`
`),k=C.length-1,Y=P.length-1;1<=k&&0<=Y&&C[k]!==P[Y];)Y--;for(;1<=k&&0<=Y;k--,Y--)if(C[k]!==P[Y]){if(k!==1||Y!==1)do if(k--,Y--,0>Y||C[k]!==P[Y]){var ne=`
`+C[k].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=k&&0<=Y);break}}}finally{ke=!1,Error.prepareStackTrace=g}return(a=a?a.displayName||a.name:"")?re(a):""}function Ce(a){switch(a.tag){case 5:return re(a.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return a=fe(a.type,!1),a;case 11:return a=fe(a.type.render,!1),a;case 1:return a=fe(a.type,!0),a;default:return""}}function Ne(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case z:return"Fragment";case N:return"Portal";case U:return"Profiler";case G:return"StrictMode";case ie:return"Suspense";case he:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case j:return(a.displayName||"Context")+".Consumer";case L:return(a._context.displayName||"Context")+".Provider";case se:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case xe:return c=a.displayName||null,c!==null?c:Ne(a.type)||"Memo";case me:c=a._payload,a=a._init;try{return Ne(a(c))}catch{}}return null}function Ue(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(c);case 8:return c===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function qe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function vt(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ft(a){var c=vt(a)?"checked":"value",g=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),_=""+a[c];if(!a.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,P=g.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return C.call(this)},set:function(k){_=""+k,P.call(this,k)}}),Object.defineProperty(a,c,{enumerable:g.enumerable}),{getValue:function(){return _},setValue:function(k){_=""+k},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Ut(a){a._valueTracker||(a._valueTracker=ft(a))}function tn(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var g=c.getValue(),_="";return a&&(_=vt(a)?a.checked?"true":"false":a.value),a=_,a!==g?(c.setValue(a),!0):!1}function Ct(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function $(a,c){var g=c.checked;return Q({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??a._wrapperState.initialChecked})}function Mn(a,c){var g=c.defaultValue==null?"":c.defaultValue,_=c.checked!=null?c.checked:c.defaultChecked;g=qe(c.value!=null?c.value:g),a._wrapperState={initialChecked:_,initialValue:g,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Fe(a,c){c=c.checked,c!=null&&b(a,"checked",c,!1)}function Oe(a,c){Fe(a,c);var g=qe(c.value),_=c.type;if(g!=null)_==="number"?(g===0&&a.value===""||a.value!=g)&&(a.value=""+g):a.value!==""+g&&(a.value=""+g);else if(_==="submit"||_==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?Qe(a,c.type,g):c.hasOwnProperty("defaultValue")&&Qe(a,c.type,qe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function Be(a,c,g){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var _=c.type;if(!(_!=="submit"&&_!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,g||c===a.value||(a.value=c),a.defaultValue=c}g=a.name,g!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,g!==""&&(a.name=g)}function Qe(a,c,g){(c!=="number"||Ct(a.ownerDocument)!==a)&&(g==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+g&&(a.defaultValue=""+g))}var Re=Array.isArray;function X(a,c,g,_){if(a=a.options,c){c={};for(var C=0;C<g.length;C++)c["$"+g[C]]=!0;for(g=0;g<a.length;g++)C=c.hasOwnProperty("$"+a[g].value),a[g].selected!==C&&(a[g].selected=C),C&&_&&(a[g].defaultSelected=!0)}else{for(g=""+qe(g),c=null,C=0;C<a.length;C++){if(a[C].value===g){a[C].selected=!0,_&&(a[C].defaultSelected=!0);return}c!==null||a[C].disabled||(c=a[C])}c!==null&&(c.selected=!0)}}function O(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function le(a,c){var g=c.value;if(g==null){if(g=c.children,c=c.defaultValue,g!=null){if(c!=null)throw Error(t(92));if(Re(g)){if(1<g.length)throw Error(t(93));g=g[0]}c=g}c==null&&(c=""),g=c}a._wrapperState={initialValue:qe(g)}}function Ee(a,c){var g=qe(c.value),_=qe(c.defaultValue);g!=null&&(g=""+g,g!==a.value&&(a.value=g),c.defaultValue==null&&a.defaultValue!==g&&(a.defaultValue=g)),_!=null&&(a.defaultValue=""+_)}function Ie(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Te(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Te(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Xe,ot=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,g,_,C){MSApp.execUnsafeLocalFunction(function(){return a(c,g,_,C)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Xe=Xe||document.createElement("div"),Xe.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Xe.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Ht(a,c){if(c){var g=a.firstChild;if(g&&g===a.lastChild&&g.nodeType===3){g.nodeValue=c;return}}a.textContent=c}var Ge={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ht=["Webkit","ms","Moz","O"];Object.keys(Ge).forEach(function(a){ht.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Ge[c]=Ge[a]})});function bt(a,c,g){return c==null||typeof c=="boolean"||c===""?"":g||typeof c!="number"||c===0||Ge.hasOwnProperty(a)&&Ge[a]?(""+c).trim():c+"px"}function Rt(a,c){a=a.style;for(var g in c)if(c.hasOwnProperty(g)){var _=g.indexOf("--")===0,C=bt(g,c[g],_);g==="float"&&(g="cssFloat"),_?a.setProperty(g,C):a[g]=C}}var at=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function te(a,c){if(c){if(at[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function Pe(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var et=null;function ee(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var We=null,Me=null,De=null;function st(a){if(a=Xs(a)){if(typeof We!="function")throw Error(t(280));var c=a.stateNode;c&&(c=gh(c),We(a.stateNode,a.type,c))}}function $e(a){Me?De?De.push(a):De=[a]:Me=a}function Tt(){if(Me){var a=Me,c=De;if(De=Me=null,st(a),c)for(a=0;a<c.length;a++)st(c[a])}}function ln(a,c){return a(c)}function Cn(){}var Kt=!1;function Vn(a,c,g){if(Kt)return a(c,g);Kt=!0;try{return ln(a,c,g)}finally{Kt=!1,(Me!==null||De!==null)&&(Cn(),Tt())}}function Yn(a,c){var g=a.stateNode;if(g===null)return null;var _=gh(g);if(_===null)return null;g=_[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(a=a.type,_=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!_;break e;default:a=!1}if(a)return null;if(g&&typeof g!="function")throw Error(t(231,c,typeof g));return g}var Wa=!1;if(l)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{Wa=!1}function ps(a,c,g,_,C,P,k,Y,ne){var Se=Array.prototype.slice.call(arguments,3);try{c.apply(g,Se)}catch(ze){this.onError(ze)}}var Xr=!1,Vo=null,Jr=!1,_o=null,Pu={onError:function(a){Xr=!0,Vo=a}};function ja(a,c,g,_,C,P,k,Y,ne){Xr=!1,Vo=null,ps.apply(Pu,arguments)}function Bu(a,c,g,_,C,P,k,Y,ne){if(ja.apply(this,arguments),Xr){if(Xr){var Se=Vo;Xr=!1,Vo=null}else throw Error(t(198));Jr||(Jr=!0,_o=Se)}}function ms(a){var c=a,g=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(g=c.return),a=c.return;while(a)}return c.tag===3?g:null}function Iu(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Du(a){if(ms(a)!==a)throw Error(t(188))}function Lu(a){var c=a.alternate;if(!c){if(c=ms(a),c===null)throw Error(t(188));return c!==a?null:a}for(var g=a,_=c;;){var C=g.return;if(C===null)break;var P=C.alternate;if(P===null){if(_=C.return,_!==null){g=_;continue}break}if(C.child===P.child){for(P=C.child;P;){if(P===g)return Du(C),a;if(P===_)return Du(C),c;P=P.sibling}throw Error(t(188))}if(g.return!==_.return)g=C,_=P;else{for(var k=!1,Y=C.child;Y;){if(Y===g){k=!0,g=C,_=P;break}if(Y===_){k=!0,_=C,g=P;break}Y=Y.sibling}if(!k){for(Y=P.child;Y;){if(Y===g){k=!0,g=P,_=C;break}if(Y===_){k=!0,_=P,g=C;break}Y=Y.sibling}if(!k)throw Error(t(189))}}if(g.alternate!==_)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?a:c}function Nu(a){return a=Lu(a),a!==null?Fu(a):null}function Fu(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=Fu(a);if(c!==null)return c;a=a.sibling}return null}var Uu=e.unstable_scheduleCallback,V=e.unstable_cancelCallback,de=e.unstable_shouldYield,Ae=e.unstable_requestPaint,pe=e.unstable_now,ue=e.unstable_getCurrentPriorityLevel,Ve=e.unstable_ImmediatePriority,tt=e.unstable_UserBlockingPriority,ct=e.unstable_NormalPriority,pt=e.unstable_LowPriority,Pt=e.unstable_IdlePriority,Et=null,Ke=null;function _t(a){if(Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Et,a,void 0,(a.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:Yt,nn=Math.log,rn=Math.LN2;function Yt(a){return a>>>=0,a===0?32:31-(nn(a)/rn|0)|0}var xt=64,cn=4194304;function Zt(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function xi(a,c){var g=a.pendingLanes;if(g===0)return 0;var _=0,C=a.suspendedLanes,P=a.pingedLanes,k=g&268435455;if(k!==0){var Y=k&~C;Y!==0?_=Zt(Y):(P&=k,P!==0&&(_=Zt(P)))}else k=g&~C,k!==0?_=Zt(k):P!==0&&(_=Zt(P));if(_===0)return 0;if(c!==0&&c!==_&&(c&C)===0&&(C=_&-_,P=c&-c,C>=P||C===16&&(P&4194240)!==0))return c;if((_&4)!==0&&(_|=g&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=_;0<c;)g=31-Ft(c),C=1<<g,_|=a[g],c&=~C;return _}function Us(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ci(a,c){for(var g=a.suspendedLanes,_=a.pingedLanes,C=a.expirationTimes,P=a.pendingLanes;0<P;){var k=31-Ft(P),Y=1<<k,ne=C[k];ne===-1?((Y&g)===0||(Y&_)!==0)&&(C[k]=Us(Y,c)):ne<=c&&(a.expiredLanes|=Y),P&=~Y}}function gs(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function sn(){var a=xt;return xt<<=1,(xt&4194240)===0&&(xt=64),a}function Bi(a){for(var c=[],g=0;31>g;g++)c.push(a);return c}function ui(a,c,g){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Ft(c),a[c]=g}function _i(a,c){var g=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var _=a.eventTimes;for(a=a.expirationTimes;0<g;){var C=31-Ft(g),P=1<<C;c[C]=0,_[C]=-1,a[C]=-1,g&=~P}}function Wn(a,c){var g=a.entangledLanes|=c;for(a=a.entanglements;g;){var _=31-Ft(g),C=1<<_;C&c|a[_]&c&&(a[_]|=c),g&=~C}}var on=0;function qi(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Xl,Of,im,Ou,ku,Wo=!1,Hu=[],vs=null,$t=null,Os=null,jo=new Map,Xa=new Map,Ao=[],Wy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(a,c){switch(a){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":$t=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":jo.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xa.delete(c.pointerId)}}function Xo(a,c,g,_,C,P){return a===null||a.nativeEvent!==P?(a={blockedOn:c,domEventName:g,eventSystemFlags:_,nativeEvent:P,targetContainers:[C]},c!==null&&(c=Xs(c),c!==null&&Of(c)),a):(a.eventSystemFlags|=_,c=a.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),a)}function jy(a,c,g,_,C){switch(c){case"focusin":return vs=Xo(vs,a,c,g,_,C),!0;case"dragenter":return $t=Xo($t,a,c,g,_,C),!0;case"mouseover":return Os=Xo(Os,a,c,g,_,C),!0;case"pointerover":var P=C.pointerId;return jo.set(P,Xo(jo.get(P)||null,a,c,g,_,C)),!0;case"gotpointercapture":return P=C.pointerId,Xa.set(P,Xo(Xa.get(P)||null,a,c,g,_,C)),!0}return!1}function zu(a){var c=bo(a.target);if(c!==null){var g=ms(c);if(g!==null){if(c=g.tag,c===13){if(c=Iu(g),c!==null){a.blockedOn=c,ku(a.priority,function(){im(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){a.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Gu(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var g=Pr(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(g===null){g=a.nativeEvent;var _=new g.constructor(g.type,g);et=_,g.target.dispatchEvent(_),et=null}else return c=Xs(g),c!==null&&Of(c),a.blockedOn=g,!1;c.shift()}return!0}function Jl(a,c,g){Gu(a)&&g.delete(c)}function ys(){Wo=!1,vs!==null&&Gu(vs)&&(vs=null),$t!==null&&Gu($t)&&($t=null),Os!==null&&Gu(Os)&&(Os=null),jo.forEach(Jl),Xa.forEach(Jl)}function Kl(a,c){a.blockedOn===c&&(a.blockedOn=null,Wo||(Wo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ys)))}function Yl(a){function c(C){return Kl(C,a)}if(0<Hu.length){Kl(Hu[0],a);for(var g=1;g<Hu.length;g++){var _=Hu[g];_.blockedOn===a&&(_.blockedOn=null)}}for(vs!==null&&Kl(vs,a),$t!==null&&Kl($t,a),Os!==null&&Kl(Os,a),jo.forEach(c),Xa.forEach(c),g=0;g<Ao.length;g++)_=Ao[g],_.blockedOn===a&&(_.blockedOn=null);for(;0<Ao.length&&(g=Ao[0],g.blockedOn===null);)zu(g),g.blockedOn===null&&Ao.shift()}var Hi=B.ReactCurrentBatchConfig,Rr=!0;function Vu(a,c,g,_){var C=on,P=Hi.transition;Hi.transition=null;try{on=1,Wu(a,c,g,_)}finally{on=C,Hi.transition=P}}function kf(a,c,g,_){var C=on,P=Hi.transition;Hi.transition=null;try{on=4,Wu(a,c,g,_)}finally{on=C,Hi.transition=P}}function Wu(a,c,g,_){if(Rr){var C=Pr(a,c,g,_);if(C===null)uh(a,c,_,ju,g),ii(a,_);else if(jy(C,a,c,g,_))_.stopPropagation();else if(ii(a,_),c&4&&-1<Wy.indexOf(a)){for(;C!==null;){var P=Xs(C);if(P!==null&&Xl(P),P=Pr(a,c,g,_),P===null&&uh(a,c,_,ju,g),P===C)break;C=P}C!==null&&_.stopPropagation()}else uh(a,c,_,null,g)}}var ju=null;function Pr(a,c,g,_){if(ju=null,a=ee(_),a=bo(a),a!==null)if(c=ms(a),c===null)a=null;else if(g=c.tag,g===13){if(a=Iu(c),a!==null)return a;a=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return ju=a,null}function rm(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ue()){case Ve:return 1;case tt:return 4;case ct:case pt:return 16;case Pt:return 536870912;default:return 16}default:return 16}}var Kr=null,Hf=null,Zi=null;function Ql(){if(Zi)return Zi;var a,c=Hf,g=c.length,_,C="value"in Kr?Kr.value:Kr.textContent,P=C.length;for(a=0;a<g&&c[a]===C[a];a++);var k=g-a;for(_=1;_<=k&&c[g-_]===C[P-_];_++);return Zi=C.slice(a,1<_?1-_:void 0)}function Jo(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function ks(){return!0}function Xu(){return!1}function zi(a){function c(g,_,C,P,k){this._reactName=g,this._targetInst=C,this.type=_,this.nativeEvent=P,this.target=k,this.currentTarget=null;for(var Y in a)a.hasOwnProperty(Y)&&(g=a[Y],this[Y]=g?g(P):P[Y]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?ks:Xu,this.isPropagationStopped=Xu,this}return Q(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),c}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ql=zi(Ko),Yo=Q({},Ko,{view:0,detail:0}),Ja=zi(Yo),$i,Br,Ir,Ka=Q({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ir&&(Ir&&a.type==="mousemove"?($i=a.screenX-Ir.screenX,Br=a.screenY-Ir.screenY):Br=$i=0,Ir=a),$i)},movementY:function(a){return"movementY"in a?a.movementY:Br}}),zf=zi(Ka),Hs=Q({},Ka,{dataTransfer:0}),So=zi(Hs),Ju=Q({},Yo,{relatedTarget:0}),Ku=zi(Ju),Yu=Q({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),sm=zi(Yu),om=Q({},Ko,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Gf=zi(om),Qu=Q({},Ko,{data:0}),Vf=zi(Qu),am={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ya(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Wf[a])?!!c[a]:!1}function Mo(){return Ya}var qu=Q({},Yo,{key:function(a){if(a.key){var c=am[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Jo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?lm[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(a){return a.type==="keypress"?Jo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Jo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Zu=zi(qu),Dr=Q({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pr=zi(Dr),Qo=Q({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),zs=zi(Qo),Gs=Q({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),qo=zi(Gs),cm=Q({},Ka,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),jf=zi(cm),Xf=[9,13,27,32],Gi=l&&"CompositionEvent"in window,Ai=null;l&&"documentMode"in document&&(Ai=document.documentMode);var In=l&&"TextEvent"in window&&!Ai,Qa=l&&(!Gi||Ai&&8<Ai&&11>=Ai),Lr=" ",Jf=!1;function Kf(a,c){switch(a){case"keyup":return Xf.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $u(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Eo=!1;function um(a,c){switch(a){case"compositionend":return $u(c);case"keypress":return c.which!==32?null:(Jf=!0,Lr);case"textInput":return a=c.data,a===Lr&&Jf?null:a;default:return null}}function Zl(a,c){if(Eo)return a==="compositionend"||!Gi&&Kf(a,c)?(a=Ql(),Zi=Hf=Kr=null,Eo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Qa&&c.locale!=="ko"?null:c.data;default:return null}}var qa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eh(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!qa[a.type]:c==="textarea"}function Za(a,c,g,_){$e(_),c=hh(c,"onChange"),0<c.length&&(g=new ql("onChange","change",null,g,_),a.push({event:g,listeners:c}))}var wo=null,$a=null;function hm(a){il(a,0)}function Vs(a){var c=jn(a);if(tn(c))return a}function fm(a,c){if(a==="change")return c}var el=!1;if(l){var er;if(l){var Zo="oninput"in document;if(!Zo){var $o=document.createElement("div");$o.setAttribute("oninput","return;"),Zo=typeof $o.oninput=="function"}er=Zo}else er=!1;el=er&&(!document.documentMode||9<document.documentMode)}function Yr(){wo&&(wo.detachEvent("onpropertychange",th),$a=wo=null)}function th(a){if(a.propertyName==="value"&&Vs($a)){var c=[];Za(c,$a,a,ee(a)),Vn(hm,c)}}function tl(a,c,g){a==="focusin"?(Yr(),wo=c,$a=g,wo.attachEvent("onpropertychange",th)):a==="focusout"&&Yr()}function dm(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Vs($a)}function Yf(a,c){if(a==="click")return Vs(c)}function Fn(a,c){if(a==="input"||a==="change")return Vs(c)}function nh(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var mr=typeof Object.is=="function"?Object.is:nh;function ea(a,c){if(mr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var g=Object.keys(a),_=Object.keys(c);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var C=g[_];if(!u.call(c,C)||!mr(a[C],c[C]))return!1}return!0}function $l(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function gr(a,c){var g=$l(a);a=0;for(var _;g;){if(g.nodeType===3){if(_=a+g.textContent.length,a<=c&&_>=c)return{node:g,offset:c-a};a=_}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=$l(g)}}function ta(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?ta(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Un(){for(var a=window,c=Ct();c instanceof a.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)a=c.contentWindow;else break;c=Ct(a.document)}return c}function hi(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function fi(a){var c=Un(),g=a.focusedElem,_=a.selectionRange;if(c!==g&&g&&g.ownerDocument&&ta(g.ownerDocument.documentElement,g)){if(_!==null&&hi(g)){if(c=_.start,a=_.end,a===void 0&&(a=c),"selectionStart"in g)g.selectionStart=c,g.selectionEnd=Math.min(a,g.value.length);else if(a=(c=g.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var C=g.textContent.length,P=Math.min(_.start,C);_=_.end===void 0?P:Math.min(_.end,C),!a.extend&&P>_&&(C=_,_=P,P=C),C=gr(g,P);var k=gr(g,_);C&&k&&(a.rangeCount!==1||a.anchorNode!==C.node||a.anchorOffset!==C.offset||a.focusNode!==k.node||a.focusOffset!==k.offset)&&(c=c.createRange(),c.setStart(C.node,C.offset),a.removeAllRanges(),P>_?(a.addRange(c),a.extend(k.node,k.offset)):(c.setEnd(k.node,k.offset),a.addRange(c)))}}for(c=[],a=g;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<c.length;g++)a=c[g],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var ih=l&&"documentMode"in document&&11>=document.documentMode,xs=null,na=null,ec=null,di=!1;function rh(a,c,g){var _=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;di||xs==null||xs!==Ct(_)||(_=xs,"selectionStart"in _&&hi(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),ec&&ea(ec,_)||(ec=_,_=hh(na,"onSelect"),0<_.length&&(c=new ql("onSelect","select",null,c,g),a.push({event:c,listeners:_}),c.target=xs)))}function nl(a,c){var g={};return g[a.toLowerCase()]=c.toLowerCase(),g["Webkit"+a]="webkit"+c,g["Moz"+a]="moz"+c,g}var Co={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionend:nl("Transition","TransitionEnd")},Qr={},qr={};l&&(qr=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function _s(a){if(Qr[a])return Qr[a];if(!Co[a])return a;var c=Co[a],g;for(g in c)if(c.hasOwnProperty(g)&&g in qr)return Qr[a]=c[g];return a}var tc=_s("animationend"),nc=_s("animationiteration"),Qf=_s("animationstart"),qf=_s("transitionend"),Zf=new Map,$f="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ws(a,c){Zf.set(a,c),s(c,[a])}for(var sh=0;sh<$f.length;sh++){var ic=$f[sh],rc=ic.toLowerCase(),pm=ic[0].toUpperCase()+ic.slice(1);Ws(rc,"on"+pm)}Ws(tc,"onAnimationEnd"),Ws(nc,"onAnimationIteration"),Ws(Qf,"onAnimationStart"),Ws("dblclick","onDoubleClick"),Ws("focusin","onFocus"),Ws("focusout","onBlur"),Ws(qf,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oh=new Set("cancel close invalid load scroll toggle".split(" ").concat(To));function ah(a,c,g){var _=a.type||"unknown-event";a.currentTarget=g,Bu(_,c,void 0,a),a.currentTarget=null}function il(a,c){c=(c&4)!==0;for(var g=0;g<a.length;g++){var _=a[g],C=_.event;_=_.listeners;e:{var P=void 0;if(c)for(var k=_.length-1;0<=k;k--){var Y=_[k],ne=Y.instance,Se=Y.currentTarget;if(Y=Y.listener,ne!==P&&C.isPropagationStopped())break e;ah(C,Y,Se),P=ne}else for(k=0;k<_.length;k++){if(Y=_[k],ne=Y.instance,Se=Y.currentTarget,Y=Y.listener,ne!==P&&C.isPropagationStopped())break e;ah(C,Y,Se),P=ne}}}if(Jr)throw a=_o,Jr=!1,_o=null,a}function Tn(a,c){var g=c[sa];g===void 0&&(g=c[sa]=new Set);var _=a+"__bubble";g.has(_)||(ch(c,a,2,!1),g.add(_))}function lh(a,c,g){var _=0;c&&(_|=4),ch(g,a,_,c)}var sc="_reactListening"+Math.random().toString(36).slice(2);function rl(a){if(!a[sc]){a[sc]=!0,n.forEach(function(g){g!=="selectionchange"&&(oh.has(g)||lh(g,!1,a),lh(g,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[sc]||(c[sc]=!0,lh("selectionchange",!1,c))}}function ch(a,c,g,_){switch(rm(c)){case 1:var C=Vu;break;case 4:C=kf;break;default:C=Wu}g=C.bind(null,c,g,a),C=void 0,!Wa||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),_?C!==void 0?a.addEventListener(c,g,{capture:!0,passive:C}):a.addEventListener(c,g,!0):C!==void 0?a.addEventListener(c,g,{passive:C}):a.addEventListener(c,g,!1)}function uh(a,c,g,_,C){var P=_;if((c&1)===0&&(c&2)===0&&_!==null)e:for(;;){if(_===null)return;var k=_.tag;if(k===3||k===4){var Y=_.stateNode.containerInfo;if(Y===C||Y.nodeType===8&&Y.parentNode===C)break;if(k===4)for(k=_.return;k!==null;){var ne=k.tag;if((ne===3||ne===4)&&(ne=k.stateNode.containerInfo,ne===C||ne.nodeType===8&&ne.parentNode===C))return;k=k.return}for(;Y!==null;){if(k=bo(Y),k===null)return;if(ne=k.tag,ne===5||ne===6){_=P=k;continue e}Y=Y.parentNode}}_=_.return}Vn(function(){var Se=P,ze=ee(g),je=[];e:{var He=Zf.get(a);if(He!==void 0){var dt=ql,yt=a;switch(a){case"keypress":if(Jo(g)===0)break e;case"keydown":case"keyup":dt=Zu;break;case"focusin":yt="focus",dt=Ku;break;case"focusout":yt="blur",dt=Ku;break;case"beforeblur":case"afterblur":dt=Ku;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=So;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=zs;break;case tc:case nc:case Qf:dt=sm;break;case qf:dt=qo;break;case"scroll":dt=Ja;break;case"wheel":dt=jf;break;case"copy":case"cut":case"paste":dt=Gf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=pr}var At=(c&4)!==0,si=!At&&a==="scroll",ve=At?He!==null?He+"Capture":null:He;At=[];for(var oe=Se,ye;oe!==null;){ye=oe;var Ye=ye.stateNode;if(ye.tag===5&&Ye!==null&&(ye=Ye,ve!==null&&(Ye=Yn(oe,ve),Ye!=null&&At.push(sl(oe,Ye,ye)))),si)break;oe=oe.return}0<At.length&&(He=new dt(He,yt,null,g,ze),je.push({event:He,listeners:At}))}}if((c&7)===0){e:{if(He=a==="mouseover"||a==="pointerover",dt=a==="mouseout"||a==="pointerout",He&&g!==et&&(yt=g.relatedTarget||g.fromElement)&&(bo(yt)||yt[vr]))break e;if((dt||He)&&(He=ze.window===ze?ze:(He=ze.ownerDocument)?He.defaultView||He.parentWindow:window,dt?(yt=g.relatedTarget||g.toElement,dt=Se,yt=yt?bo(yt):null,yt!==null&&(si=ms(yt),yt!==si||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(dt=null,yt=Se),dt!==yt)){if(At=zf,Ye="onMouseLeave",ve="onMouseEnter",oe="mouse",(a==="pointerout"||a==="pointerover")&&(At=pr,Ye="onPointerLeave",ve="onPointerEnter",oe="pointer"),si=dt==null?He:jn(dt),ye=yt==null?He:jn(yt),He=new At(Ye,oe+"leave",dt,g,ze),He.target=si,He.relatedTarget=ye,Ye=null,bo(ze)===Se&&(At=new At(ve,oe+"enter",yt,g,ze),At.target=ye,At.relatedTarget=si,Ye=At),si=Ye,dt&&yt)t:{for(At=dt,ve=yt,oe=0,ye=At;ye;ye=ia(ye))oe++;for(ye=0,Ye=ve;Ye;Ye=ia(Ye))ye++;for(;0<oe-ye;)At=ia(At),oe--;for(;0<ye-oe;)ve=ia(ve),ye--;for(;oe--;){if(At===ve||ve!==null&&At===ve.alternate)break t;At=ia(At),ve=ia(ve)}At=null}else At=null;dt!==null&&mm(je,He,dt,At,!1),yt!==null&&si!==null&&mm(je,si,yt,At,!0)}}e:{if(He=Se?jn(Se):window,dt=He.nodeName&&He.nodeName.toLowerCase(),dt==="select"||dt==="input"&&He.type==="file")var wt=fm;else if(eh(He))if(el)wt=Fn;else{wt=dm;var It=tl}else(dt=He.nodeName)&&dt.toLowerCase()==="input"&&(He.type==="checkbox"||He.type==="radio")&&(wt=Yf);if(wt&&(wt=wt(a,Se))){Za(je,wt,g,ze);break e}It&&It(a,He,Se),a==="focusout"&&(It=He._wrapperState)&&It.controlled&&He.type==="number"&&Qe(He,"number",He.value)}switch(It=Se?jn(Se):window,a){case"focusin":(eh(It)||It.contentEditable==="true")&&(xs=It,na=Se,ec=null);break;case"focusout":ec=na=xs=null;break;case"mousedown":di=!0;break;case"contextmenu":case"mouseup":case"dragend":di=!1,rh(je,g,ze);break;case"selectionchange":if(ih)break;case"keydown":case"keyup":rh(je,g,ze)}var Dt;if(Gi)e:{switch(a){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else Eo?Kf(a,g)&&(kt="onCompositionEnd"):a==="keydown"&&g.keyCode===229&&(kt="onCompositionStart");kt&&(Qa&&g.locale!=="ko"&&(Eo||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&Eo&&(Dt=Ql()):(Kr=ze,Hf="value"in Kr?Kr.value:Kr.textContent,Eo=!0)),It=hh(Se,kt),0<It.length&&(kt=new Vf(kt,a,null,g,ze),je.push({event:kt,listeners:It}),Dt?kt.data=Dt:(Dt=$u(g),Dt!==null&&(kt.data=Dt)))),(Dt=In?um(a,g):Zl(a,g))&&(Se=hh(Se,"onBeforeInput"),0<Se.length&&(ze=new Vf("onBeforeInput","beforeinput",null,g,ze),je.push({event:ze,listeners:Se}),ze.data=Dt))}il(je,c)})}function sl(a,c,g){return{instance:a,listener:c,currentTarget:g}}function hh(a,c){for(var g=c+"Capture",_=[];a!==null;){var C=a,P=C.stateNode;C.tag===5&&P!==null&&(C=P,P=Yn(a,g),P!=null&&_.unshift(sl(a,P,C)),P=Yn(a,c),P!=null&&_.push(sl(a,P,C))),a=a.return}return _}function ia(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function mm(a,c,g,_,C){for(var P=c._reactName,k=[];g!==null&&g!==_;){var Y=g,ne=Y.alternate,Se=Y.stateNode;if(ne!==null&&ne===_)break;Y.tag===5&&Se!==null&&(Y=Se,C?(ne=Yn(g,P),ne!=null&&k.unshift(sl(g,ne,Y))):C||(ne=Yn(g,P),ne!=null&&k.push(sl(g,ne,Y)))),g=g.return}k.length!==0&&a.push({event:c,listeners:k})}var Xy=/\r\n?/g,gm=/\u0000|\uFFFD/g;function ed(a){return(typeof a=="string"?a:""+a).replace(Xy,`
`).replace(gm,"")}function oc(a,c,g){if(c=ed(c),ed(a)!==c&&g)throw Error(t(425))}function ac(){}var ol=null,td=null;function nd(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var id=typeof setTimeout=="function"?setTimeout:void 0,rd=typeof clearTimeout=="function"?clearTimeout:void 0,fh=typeof Promise=="function"?Promise:void 0,Jy=typeof queueMicrotask=="function"?queueMicrotask:typeof fh<"u"?function(a){return fh.resolve(null).then(a).catch(vm)}:id;function vm(a){setTimeout(function(){throw a})}function dh(a,c){var g=c,_=0;do{var C=g.nextSibling;if(a.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"){if(_===0){a.removeChild(C),Yl(c);return}_--}else g!=="$"&&g!=="$?"&&g!=="$!"||_++;g=C}while(g);Yl(c)}function js(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function sd(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var g=a.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return a;c--}else g==="/$"&&c++}a=a.previousSibling}return null}var ra=Math.random().toString(36).slice(2),ri="__reactFiber$"+ra,al="__reactProps$"+ra,vr="__reactContainer$"+ra,sa="__reactEvents$"+ra,ph="__reactListeners$"+ra,mh="__reactHandles$"+ra;function bo(a){var c=a[ri];if(c)return c;for(var g=a.parentNode;g;){if(c=g[vr]||g[ri]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(a=sd(a);a!==null;){if(g=a[ri])return g;a=sd(a)}return c}a=g,g=a.parentNode}return null}function Xs(a){return a=a[ri]||a[vr],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function jn(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function gh(a){return a[al]||null}var od=[],pi=-1;function kn(a){return{current:a}}function bn(a){0>pi||(a.current=od[pi],od[pi]=null,pi--)}function En(a,c){pi++,od[pi]=a.current,a.current=c}var Js={},Si=kn(Js),Vi=kn(!1),Ks=Js;function oa(a,c){var g=a.type.contextTypes;if(!g)return Js;var _=a.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===c)return _.__reactInternalMemoizedMaskedChildContext;var C={},P;for(P in g)C[P]=c[P];return _&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=C),C}function Ii(a){return a=a.childContextTypes,a!=null}function lc(){bn(Vi),bn(Si)}function ad(a,c,g){if(Si.current!==Js)throw Error(t(168));En(Si,c),En(Vi,g)}function cc(a,c,g){var _=a.stateNode;if(c=c.childContextTypes,typeof _.getChildContext!="function")return g;_=_.getChildContext();for(var C in _)if(!(C in c))throw Error(t(108,Ue(a)||"Unknown",C));return Q({},g,_)}function aa(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Js,Ks=Si.current,En(Si,a),En(Vi,Vi.current),!0}function ld(a,c,g){var _=a.stateNode;if(!_)throw Error(t(169));g?(a=cc(a,c,Ks),_.__reactInternalMemoizedMergedChildContext=a,bn(Vi),bn(Si),En(Si,a)):bn(Vi),En(Vi,g)}var Zr=null,uc=!1,vh=!1;function hc(a){Zr===null?Zr=[a]:Zr.push(a)}function ym(a){uc=!0,hc(a)}function As(){if(!vh&&Zr!==null){vh=!0;var a=0,c=on;try{var g=Zr;for(on=1;a<g.length;a++){var _=g[a];do _=_(!0);while(_!==null)}Zr=null,uc=!1}catch(C){throw Zr!==null&&(Zr=Zr.slice(a+1)),Uu(Ve,As),C}finally{on=c,vh=!1}}return null}var la=[],tr=0,yh=null,xh=0,Wi=[],mi=0,ca=null,Ze=1,Nr="";function Ys(a,c){la[tr++]=xh,la[tr++]=yh,yh=a,xh=c}function cd(a,c,g){Wi[mi++]=Ze,Wi[mi++]=Nr,Wi[mi++]=ca,ca=a;var _=Ze;a=Nr;var C=32-Ft(_)-1;_&=~(1<<C),g+=1;var P=32-Ft(c)+C;if(30<P){var k=C-C%5;P=(_&(1<<k)-1).toString(32),_>>=k,C-=k,Ze=1<<32-Ft(c)+C|g<<C|_,Nr=P+a}else Ze=1<<P|g<<C|_,Nr=a}function ud(a){a.return!==null&&(Ys(a,1),cd(a,1,0))}function Qs(a){for(;a===yh;)yh=la[--tr],la[tr]=null,xh=la[--tr],la[tr]=null;for(;a===ca;)ca=Wi[--mi],Wi[mi]=null,Nr=Wi[--mi],Wi[mi]=null,Ze=Wi[--mi],Wi[mi]=null}var Mi=null,ji=null,Pn=!1,Fr=null;function hd(a,c){var g=Cs(5,null,null,0);g.elementType="DELETED",g.stateNode=c,g.return=a,c=a.deletions,c===null?(a.deletions=[g],a.flags|=16):c.push(g)}function fd(a,c){switch(a.tag){case 5:var g=a.type;return c=c.nodeType!==1||g.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Mi=a,ji=js(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Mi=a,ji=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(g=ca!==null?{id:Ze,overflow:Nr}:null,a.memoizedState={dehydrated:c,treeContext:g,retryLane:1073741824},g=Cs(18,null,null,0),g.stateNode=c,g.return=a,a.child=g,Mi=a,ji=null,!0):!1;default:return!1}}function _h(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Ah(a){if(Pn){var c=ji;if(c){var g=c;if(!fd(a,c)){if(_h(a))throw Error(t(418));c=js(g.nextSibling);var _=Mi;c&&fd(a,c)?hd(_,g):(a.flags=a.flags&-4097|2,Pn=!1,Mi=a)}}else{if(_h(a))throw Error(t(418));a.flags=a.flags&-4097|2,Pn=!1,Mi=a}}}function Sh(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Mi=a}function ll(a){if(a!==Mi)return!1;if(!Pn)return Sh(a),Pn=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!nd(a.type,a.memoizedProps)),c&&(c=ji)){if(_h(a))throw dd(),Error(t(418));for(;c;)hd(a,c),c=js(c.nextSibling)}if(Sh(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var g=a.data;if(g==="/$"){if(c===0){ji=js(a.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++}a=a.nextSibling}ji=null}}else ji=Mi?js(a.stateNode.nextSibling):null;return!0}function dd(){for(var a=ji;a;)a=js(a.nextSibling)}function Ro(){ji=Mi=null,Pn=!1}function cl(a){Fr===null?Fr=[a]:Fr.push(a)}var Ky=B.ReactCurrentBatchConfig;function fc(a,c,g){if(a=g.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var _=g.stateNode}if(!_)throw Error(t(147,a));var C=_,P=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(k){var Y=C.refs;k===null?delete Y[P]:Y[P]=k},c._stringRef=P,c)}if(typeof a!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,a))}return a}function dc(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function pd(a){var c=a._init;return c(a._payload)}function md(a){function c(ve,oe){if(a){var ye=ve.deletions;ye===null?(ve.deletions=[oe],ve.flags|=16):ye.push(oe)}}function g(ve,oe){if(!a)return null;for(;oe!==null;)c(ve,oe),oe=oe.sibling;return null}function _(ve,oe){for(ve=new Map;oe!==null;)oe.key!==null?ve.set(oe.key,oe):ve.set(oe.index,oe),oe=oe.sibling;return ve}function C(ve,oe){return ve=_l(ve,oe),ve.index=0,ve.sibling=null,ve}function P(ve,oe,ye){return ve.index=ye,a?(ye=ve.alternate,ye!==null?(ye=ye.index,ye<oe?(ve.flags|=2,oe):ye):(ve.flags|=2,oe)):(ve.flags|=1048576,oe)}function k(ve){return a&&ve.alternate===null&&(ve.flags|=2),ve}function Y(ve,oe,ye,Ye){return oe===null||oe.tag!==6?(oe=d0(ye,ve.mode,Ye),oe.return=ve,oe):(oe=C(oe,ye),oe.return=ve,oe)}function ne(ve,oe,ye,Ye){var wt=ye.type;return wt===z?ze(ve,oe,ye.props.children,Ye,ye.key):oe!==null&&(oe.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===me&&pd(wt)===oe.type)?(Ye=C(oe,ye.props),Ye.ref=fc(ve,oe,ye),Ye.return=ve,Ye):(Ye=zm(ye.type,ye.key,ye.props,null,ve.mode,Ye),Ye.ref=fc(ve,oe,ye),Ye.return=ve,Ye)}function Se(ve,oe,ye,Ye){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ye.containerInfo||oe.stateNode.implementation!==ye.implementation?(oe=p0(ye,ve.mode,Ye),oe.return=ve,oe):(oe=C(oe,ye.children||[]),oe.return=ve,oe)}function ze(ve,oe,ye,Ye,wt){return oe===null||oe.tag!==7?(oe=Pc(ye,ve.mode,Ye,wt),oe.return=ve,oe):(oe=C(oe,ye),oe.return=ve,oe)}function je(ve,oe,ye){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=d0(""+oe,ve.mode,ye),oe.return=ve,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case F:return ye=zm(oe.type,oe.key,oe.props,null,ve.mode,ye),ye.ref=fc(ve,null,oe),ye.return=ve,ye;case N:return oe=p0(oe,ve.mode,ye),oe.return=ve,oe;case me:var Ye=oe._init;return je(ve,Ye(oe._payload),ye)}if(Re(oe)||q(oe))return oe=Pc(oe,ve.mode,ye,null),oe.return=ve,oe;dc(ve,oe)}return null}function He(ve,oe,ye,Ye){var wt=oe!==null?oe.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return wt!==null?null:Y(ve,oe,""+ye,Ye);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case F:return ye.key===wt?ne(ve,oe,ye,Ye):null;case N:return ye.key===wt?Se(ve,oe,ye,Ye):null;case me:return wt=ye._init,He(ve,oe,wt(ye._payload),Ye)}if(Re(ye)||q(ye))return wt!==null?null:ze(ve,oe,ye,Ye,null);dc(ve,ye)}return null}function dt(ve,oe,ye,Ye,wt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return ve=ve.get(ye)||null,Y(oe,ve,""+Ye,wt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case F:return ve=ve.get(Ye.key===null?ye:Ye.key)||null,ne(oe,ve,Ye,wt);case N:return ve=ve.get(Ye.key===null?ye:Ye.key)||null,Se(oe,ve,Ye,wt);case me:var It=Ye._init;return dt(ve,oe,ye,It(Ye._payload),wt)}if(Re(Ye)||q(Ye))return ve=ve.get(ye)||null,ze(oe,ve,Ye,wt,null);dc(oe,Ye)}return null}function yt(ve,oe,ye,Ye){for(var wt=null,It=null,Dt=oe,kt=oe=0,Fi=null;Dt!==null&&kt<ye.length;kt++){Dt.index>kt?(Fi=Dt,Dt=null):Fi=Dt.sibling;var _n=He(ve,Dt,ye[kt],Ye);if(_n===null){Dt===null&&(Dt=Fi);break}a&&Dt&&_n.alternate===null&&c(ve,Dt),oe=P(_n,oe,kt),It===null?wt=_n:It.sibling=_n,It=_n,Dt=Fi}if(kt===ye.length)return g(ve,Dt),Pn&&Ys(ve,kt),wt;if(Dt===null){for(;kt<ye.length;kt++)Dt=je(ve,ye[kt],Ye),Dt!==null&&(oe=P(Dt,oe,kt),It===null?wt=Dt:It.sibling=Dt,It=Dt);return Pn&&Ys(ve,kt),wt}for(Dt=_(ve,Dt);kt<ye.length;kt++)Fi=dt(Dt,ve,kt,ye[kt],Ye),Fi!==null&&(a&&Fi.alternate!==null&&Dt.delete(Fi.key===null?kt:Fi.key),oe=P(Fi,oe,kt),It===null?wt=Fi:It.sibling=Fi,It=Fi);return a&&Dt.forEach(function(Al){return c(ve,Al)}),Pn&&Ys(ve,kt),wt}function At(ve,oe,ye,Ye){var wt=q(ye);if(typeof wt!="function")throw Error(t(150));if(ye=wt.call(ye),ye==null)throw Error(t(151));for(var It=wt=null,Dt=oe,kt=oe=0,Fi=null,_n=ye.next();Dt!==null&&!_n.done;kt++,_n=ye.next()){Dt.index>kt?(Fi=Dt,Dt=null):Fi=Dt.sibling;var Al=He(ve,Dt,_n.value,Ye);if(Al===null){Dt===null&&(Dt=Fi);break}a&&Dt&&Al.alternate===null&&c(ve,Dt),oe=P(Al,oe,kt),It===null?wt=Al:It.sibling=Al,It=Al,Dt=Fi}if(_n.done)return g(ve,Dt),Pn&&Ys(ve,kt),wt;if(Dt===null){for(;!_n.done;kt++,_n=ye.next())_n=je(ve,_n.value,Ye),_n!==null&&(oe=P(_n,oe,kt),It===null?wt=_n:It.sibling=_n,It=_n);return Pn&&Ys(ve,kt),wt}for(Dt=_(ve,Dt);!_n.done;kt++,_n=ye.next())_n=dt(Dt,ve,kt,_n.value,Ye),_n!==null&&(a&&_n.alternate!==null&&Dt.delete(_n.key===null?kt:_n.key),oe=P(_n,oe,kt),It===null?wt=_n:It.sibling=_n,It=_n);return a&&Dt.forEach(function(dP){return c(ve,dP)}),Pn&&Ys(ve,kt),wt}function si(ve,oe,ye,Ye){if(typeof ye=="object"&&ye!==null&&ye.type===z&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case F:e:{for(var wt=ye.key,It=oe;It!==null;){if(It.key===wt){if(wt=ye.type,wt===z){if(It.tag===7){g(ve,It.sibling),oe=C(It,ye.props.children),oe.return=ve,ve=oe;break e}}else if(It.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===me&&pd(wt)===It.type){g(ve,It.sibling),oe=C(It,ye.props),oe.ref=fc(ve,It,ye),oe.return=ve,ve=oe;break e}g(ve,It);break}else c(ve,It);It=It.sibling}ye.type===z?(oe=Pc(ye.props.children,ve.mode,Ye,ye.key),oe.return=ve,ve=oe):(Ye=zm(ye.type,ye.key,ye.props,null,ve.mode,Ye),Ye.ref=fc(ve,oe,ye),Ye.return=ve,ve=Ye)}return k(ve);case N:e:{for(It=ye.key;oe!==null;){if(oe.key===It)if(oe.tag===4&&oe.stateNode.containerInfo===ye.containerInfo&&oe.stateNode.implementation===ye.implementation){g(ve,oe.sibling),oe=C(oe,ye.children||[]),oe.return=ve,ve=oe;break e}else{g(ve,oe);break}else c(ve,oe);oe=oe.sibling}oe=p0(ye,ve.mode,Ye),oe.return=ve,ve=oe}return k(ve);case me:return It=ye._init,si(ve,oe,It(ye._payload),Ye)}if(Re(ye))return yt(ve,oe,ye,Ye);if(q(ye))return At(ve,oe,ye,Ye);dc(ve,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,oe!==null&&oe.tag===6?(g(ve,oe.sibling),oe=C(oe,ye),oe.return=ve,ve=oe):(g(ve,oe),oe=d0(ye,ve.mode,Ye),oe.return=ve,ve=oe),k(ve)):g(ve,oe)}return si}var ua=md(!0),pc=md(!1),ha=kn(null),fa=null,qs=null,ul=null;function da(){ul=qs=fa=null}function mc(a){var c=ha.current;bn(ha),a._currentValue=c}function gc(a,c,g){for(;a!==null;){var _=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),a===g)break;a=a.return}}function Po(a,c){fa=a,ul=qs=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(Qt=!0),a.firstContext=null)}function yr(a){var c=a._currentValue;if(ul!==a)if(a={context:a,memoizedValue:c,next:null},qs===null){if(fa===null)throw Error(t(308));qs=a,fa.dependencies={lanes:0,firstContext:a}}else qs=qs.next=a;return c}var Zs=null;function gd(a){Zs===null?Zs=[a]:Zs.push(a)}function vc(a,c,g,_){var C=c.interleaved;return C===null?(g.next=g,gd(c)):(g.next=C.next,C.next=g),c.interleaved=g,$r(a,_)}function $r(a,c){a.lanes|=c;var g=a.alternate;for(g!==null&&(g.lanes|=c),g=a,a=a.return;a!==null;)a.childLanes|=c,g=a.alternate,g!==null&&(g.childLanes|=c),g=a,a=a.return;return g.tag===3?g.stateNode:null}var An=!1;function jt(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xn(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Sn(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function Dn(a,c,g){var _=a.updateQueue;if(_===null)return null;if(_=_.shared,(vn&2)!==0){var C=_.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),_.pending=c,$r(a,g)}return C=_.interleaved,C===null?(c.next=c,gd(_)):(c.next=C.next,C.next=c),_.interleaved=c,$r(a,g)}function Di(a,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194240)!==0)){var _=c.lanes;_&=a.pendingLanes,g|=_,c.lanes=g,Wn(a,g)}}function pa(a,c){var g=a.updateQueue,_=a.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var C=null,P=null;if(g=g.firstBaseUpdate,g!==null){do{var k={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};P===null?C=P=k:P=P.next=k,g=g.next}while(g!==null);P===null?C=P=c:P=P.next=c}else C=P=c;g={baseState:_.baseState,firstBaseUpdate:C,lastBaseUpdate:P,shared:_.shared,effects:_.effects},a.updateQueue=g;return}a=g.lastBaseUpdate,a===null?g.firstBaseUpdate=c:a.next=c,g.lastBaseUpdate=c}function Hn(a,c,g,_){var C=a.updateQueue;An=!1;var P=C.firstBaseUpdate,k=C.lastBaseUpdate,Y=C.shared.pending;if(Y!==null){C.shared.pending=null;var ne=Y,Se=ne.next;ne.next=null,k===null?P=Se:k.next=Se,k=ne;var ze=a.alternate;ze!==null&&(ze=ze.updateQueue,Y=ze.lastBaseUpdate,Y!==k&&(Y===null?ze.firstBaseUpdate=Se:Y.next=Se,ze.lastBaseUpdate=ne))}if(P!==null){var je=C.baseState;k=0,ze=Se=ne=null,Y=P;do{var He=Y.lane,dt=Y.eventTime;if((_&He)===He){ze!==null&&(ze=ze.next={eventTime:dt,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var yt=a,At=Y;switch(He=c,dt=g,At.tag){case 1:if(yt=At.payload,typeof yt=="function"){je=yt.call(dt,je,He);break e}je=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=At.payload,He=typeof yt=="function"?yt.call(dt,je,He):yt,He==null)break e;je=Q({},je,He);break e;case 2:An=!0}}Y.callback!==null&&Y.lane!==0&&(a.flags|=64,He=C.effects,He===null?C.effects=[Y]:He.push(Y))}else dt={eventTime:dt,lane:He,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},ze===null?(Se=ze=dt,ne=je):ze=ze.next=dt,k|=He;if(Y=Y.next,Y===null){if(Y=C.shared.pending,Y===null)break;He=Y,Y=He.next,He.next=null,C.lastBaseUpdate=He,C.shared.pending=null}}while(!0);if(ze===null&&(ne=je),C.baseState=ne,C.firstBaseUpdate=Se,C.lastBaseUpdate=ze,c=C.shared.interleaved,c!==null){C=c;do k|=C.lane,C=C.next;while(C!==c)}else P===null&&(C.shared.lanes=0);Cc|=k,a.lanes=k,a.memoizedState=je}}function hl(a,c,g){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var _=a[c],C=_.callback;if(C!==null){if(_.callback=null,_=g,typeof C!="function")throw Error(t(191,C));C.call(_)}}}var Ss={},xr=kn(Ss),ma=kn(Ss),$s=kn(Ss);function Qn(a){if(a===Ss)throw Error(t(174));return a}function yc(a,c){switch(En($s,c),En(ma,a),En(xr,Ss),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ut(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=ut(c,a)}bn(xr),En(xr,c)}function Bo(){bn(xr),bn(ma),bn($s)}function ga(a){Qn($s.current);var c=Qn(xr.current),g=ut(c,a.type);c!==g&&(En(ma,a),En(xr,g))}function fl(a){ma.current===a&&(bn(xr),bn(ma))}var Bn=kn(0);function es(a){for(var c=a;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var dl=[];function Ms(){for(var a=0;a<dl.length;a++)dl[a]._workInProgressVersionPrimary=null;dl.length=0}var va=B.ReactCurrentDispatcher,ya=B.ReactCurrentBatchConfig,eo=0,Rn=null,zn=null,pn=null,ts=!1,Li=!1,Io=0,nr=0;function Ei(){throw Error(t(321))}function xc(a,c){if(c===null)return!1;for(var g=0;g<c.length&&g<a.length;g++)if(!mr(a[g],c[g]))return!1;return!0}function _c(a,c,g,_,C,P){if(eo=P,Rn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,va.current=a===null||a.memoizedState===null?wm:Cm,a=g(_,C),Li){P=0;do{if(Li=!1,Io=0,25<=P)throw Error(t(301));P+=1,pn=zn=null,c.updateQueue=null,va.current=Tm,a=g(_,C)}while(Li)}if(va.current=Rh,c=zn!==null&&zn.next!==null,eo=0,pn=zn=Rn=null,ts=!1,c)throw Error(t(300));return a}function vd(){var a=Io!==0;return Io=0,a}function wi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Rn.memoizedState=pn=a:pn=pn.next=a,pn}function _r(){if(zn===null){var a=Rn.alternate;a=a!==null?a.memoizedState:null}else a=zn.next;var c=pn===null?Rn.memoizedState:pn.next;if(c!==null)pn=c,zn=a;else{if(a===null)throw Error(t(310));zn=a,a={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},pn===null?Rn.memoizedState=pn=a:pn=pn.next=a}return pn}function pl(a,c){return typeof c=="function"?c(a):c}function Ac(a){var c=_r(),g=c.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var _=zn,C=_.baseQueue,P=g.pending;if(P!==null){if(C!==null){var k=C.next;C.next=P.next,P.next=k}_.baseQueue=C=P,g.pending=null}if(C!==null){P=C.next,_=_.baseState;var Y=k=null,ne=null,Se=P;do{var ze=Se.lane;if((eo&ze)===ze)ne!==null&&(ne=ne.next={lane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),_=Se.hasEagerState?Se.eagerState:a(_,Se.action);else{var je={lane:ze,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null};ne===null?(Y=ne=je,k=_):ne=ne.next=je,Rn.lanes|=ze,Cc|=ze}Se=Se.next}while(Se!==null&&Se!==P);ne===null?k=_:ne.next=Y,mr(_,c.memoizedState)||(Qt=!0),c.memoizedState=_,c.baseState=k,c.baseQueue=ne,g.lastRenderedState=_}if(a=g.interleaved,a!==null){C=a;do P=C.lane,Rn.lanes|=P,Cc|=P,C=C.next;while(C!==a)}else C===null&&(g.lanes=0);return[c.memoizedState,g.dispatch]}function to(a){var c=_r(),g=c.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var _=g.dispatch,C=g.pending,P=c.memoizedState;if(C!==null){g.pending=null;var k=C=C.next;do P=a(P,k.action),k=k.next;while(k!==C);mr(P,c.memoizedState)||(Qt=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),g.lastRenderedState=P}return[P,_]}function yd(){}function xd(a,c){var g=Rn,_=_r(),C=c(),P=!mr(_.memoizedState,C);if(P&&(_.memoizedState=C,Qt=!0),_=_.queue,Sd(xm.bind(null,g,_,a),[a]),_.getSnapshot!==c||P||pn!==null&&pn.memoizedState.tag&1){if(g.flags|=2048,ns(9,Sc.bind(null,g,_,C,c),void 0,null),Ni===null)throw Error(t(349));(eo&30)!==0||Mh(g,c,C)}return C}function Mh(a,c,g){a.flags|=16384,a={getSnapshot:c,value:g},c=Rn.updateQueue,c===null?(c={lastEffect:null,stores:null},Rn.updateQueue=c,c.stores=[a]):(g=c.stores,g===null?c.stores=[a]:g.push(a))}function Sc(a,c,g,_){c.value=g,c.getSnapshot=_,_m(c)&&_d(a)}function xm(a,c,g){return g(function(){_m(c)&&_d(a)})}function _m(a){var c=a.getSnapshot;a=a.value;try{var g=c();return!mr(a,g)}catch{return!0}}function _d(a){var c=$r(a,1);c!==null&&oo(c,a,1,-1)}function Ad(a){var c=wi();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:a},c.queue=a,a=a.dispatch=xa.bind(null,Rn,a),[c.memoizedState,a]}function ns(a,c,g,_){return a={tag:a,create:c,destroy:g,deps:_,next:null},c=Rn.updateQueue,c===null?(c={lastEffect:null,stores:null},Rn.updateQueue=c,c.lastEffect=a.next=a):(g=c.lastEffect,g===null?c.lastEffect=a.next=a:(_=g.next,g.next=a,a.next=_,c.lastEffect=a)),a}function Am(){return _r().memoizedState}function Es(a,c,g,_){var C=wi();Rn.flags|=a,C.memoizedState=ns(1|c,g,void 0,_===void 0?null:_)}function Mc(a,c,g,_){var C=_r();_=_===void 0?null:_;var P=void 0;if(zn!==null){var k=zn.memoizedState;if(P=k.destroy,_!==null&&xc(_,k.deps)){C.memoizedState=ns(c,g,P,_);return}}Rn.flags|=a,C.memoizedState=ns(1|c,g,P,_)}function Xi(a,c){return Es(8390656,8,a,c)}function Sd(a,c){return Mc(2048,8,a,c)}function Md(a,c){return Mc(4,2,a,c)}function Sm(a,c){return Mc(4,4,a,c)}function Mm(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Ed(a,c,g){return g=g!=null?g.concat([a]):null,Mc(4,4,Mm.bind(null,c,a),g)}function Eh(){}function Em(a,c){var g=_r();c=c===void 0?null:c;var _=g.memoizedState;return _!==null&&c!==null&&xc(c,_[1])?_[0]:(g.memoizedState=[a,c],a)}function Ar(a,c){var g=_r();c=c===void 0?null:c;var _=g.memoizedState;return _!==null&&c!==null&&xc(c,_[1])?_[0]:(a=a(),g.memoizedState=[a,c],a)}function wh(a,c,g){return(eo&21)===0?(a.baseState&&(a.baseState=!1,Qt=!0),a.memoizedState=g):(mr(g,c)||(g=sn(),Rn.lanes|=g,Cc|=g,a.baseState=!0),c)}function Yy(a,c){var g=on;on=g!==0&&4>g?g:4,a(!0);var _=ya.transition;ya.transition={};try{a(!1),c()}finally{on=g,ya.transition=_}}function no(){return _r().memoizedState}function Ch(a,c,g){var _=yl(a);if(g={lane:_,action:g,hasEagerState:!1,eagerState:null,next:null},Ec(a))Th(c,g);else if(g=vc(a,c,g,_),g!==null){var C=Mr();oo(g,a,_,C),bh(g,c,_)}}function xa(a,c,g){var _=yl(a),C={lane:_,action:g,hasEagerState:!1,eagerState:null,next:null};if(Ec(a))Th(c,C);else{var P=a.alternate;if(a.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var k=c.lastRenderedState,Y=P(k,g);if(C.hasEagerState=!0,C.eagerState=Y,mr(Y,k)){var ne=c.interleaved;ne===null?(C.next=C,gd(c)):(C.next=ne.next,ne.next=C),c.interleaved=C;return}}catch{}g=vc(a,c,C,_),g!==null&&(C=Mr(),oo(g,a,_,C),bh(g,c,_))}}function Ec(a){var c=a.alternate;return a===Rn||c!==null&&c===Rn}function Th(a,c){Li=ts=!0;var g=a.pending;g===null?c.next=c:(c.next=g.next,g.next=c),a.pending=c}function bh(a,c,g){if((g&4194240)!==0){var _=c.lanes;_&=a.pendingLanes,g|=_,c.lanes=g,Wn(a,g)}}var Rh={readContext:yr,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},wm={readContext:yr,useCallback:function(a,c){return wi().memoizedState=[a,c===void 0?null:c],a},useContext:yr,useEffect:Xi,useImperativeHandle:function(a,c,g){return g=g!=null?g.concat([a]):null,Es(4194308,4,Mm.bind(null,c,a),g)},useLayoutEffect:function(a,c){return Es(4194308,4,a,c)},useInsertionEffect:function(a,c){return Es(4,2,a,c)},useMemo:function(a,c){var g=wi();return c=c===void 0?null:c,a=a(),g.memoizedState=[a,c],a},useReducer:function(a,c,g){var _=wi();return c=g!==void 0?g(c):c,_.memoizedState=_.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},_.queue=a,a=a.dispatch=Ch.bind(null,Rn,a),[_.memoizedState,a]},useRef:function(a){var c=wi();return a={current:a},c.memoizedState=a},useState:Ad,useDebugValue:Eh,useDeferredValue:function(a){return wi().memoizedState=a},useTransition:function(){var a=Ad(!1),c=a[0];return a=Yy.bind(null,a[1]),wi().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,g){var _=Rn,C=wi();if(Pn){if(g===void 0)throw Error(t(407));g=g()}else{if(g=c(),Ni===null)throw Error(t(349));(eo&30)!==0||Mh(_,c,g)}C.memoizedState=g;var P={value:g,getSnapshot:c};return C.queue=P,Xi(xm.bind(null,_,P,a),[a]),_.flags|=2048,ns(9,Sc.bind(null,_,P,g,c),void 0,null),g},useId:function(){var a=wi(),c=Ni.identifierPrefix;if(Pn){var g=Nr,_=Ze;g=(_&~(1<<32-Ft(_)-1)).toString(32)+g,c=":"+c+"R"+g,g=Io++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=nr++,c=":"+c+"r"+g.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},Cm={readContext:yr,useCallback:Em,useContext:yr,useEffect:Sd,useImperativeHandle:Ed,useInsertionEffect:Md,useLayoutEffect:Sm,useMemo:Ar,useReducer:Ac,useRef:Am,useState:function(){return Ac(pl)},useDebugValue:Eh,useDeferredValue:function(a){var c=_r();return wh(c,zn.memoizedState,a)},useTransition:function(){var a=Ac(pl)[0],c=_r().memoizedState;return[a,c]},useMutableSource:yd,useSyncExternalStore:xd,useId:no,unstable_isNewReconciler:!1},Tm={readContext:yr,useCallback:Em,useContext:yr,useEffect:Sd,useImperativeHandle:Ed,useInsertionEffect:Md,useLayoutEffect:Sm,useMemo:Ar,useReducer:to,useRef:Am,useState:function(){return to(pl)},useDebugValue:Eh,useDeferredValue:function(a){var c=_r();return zn===null?c.memoizedState=a:wh(c,zn.memoizedState,a)},useTransition:function(){var a=to(pl)[0],c=_r().memoizedState;return[a,c]},useMutableSource:yd,useSyncExternalStore:xd,useId:no,unstable_isNewReconciler:!1};function Ur(a,c){if(a&&a.defaultProps){c=Q({},c),a=a.defaultProps;for(var g in a)c[g]===void 0&&(c[g]=a[g]);return c}return c}function wc(a,c,g,_){c=a.memoizedState,g=g(_,c),g=g==null?c:Q({},c,g),a.memoizedState=g,a.lanes===0&&(a.updateQueue.baseState=g)}var Ph={isMounted:function(a){return(a=a._reactInternals)?ms(a)===a:!1},enqueueSetState:function(a,c,g){a=a._reactInternals;var _=Mr(),C=yl(a),P=Sn(_,C);P.payload=c,g!=null&&(P.callback=g),c=Dn(a,P,C),c!==null&&(oo(c,a,C,_),Di(c,a,C))},enqueueReplaceState:function(a,c,g){a=a._reactInternals;var _=Mr(),C=yl(a),P=Sn(_,C);P.tag=1,P.payload=c,g!=null&&(P.callback=g),c=Dn(a,P,C),c!==null&&(oo(c,a,C,_),Di(c,a,C))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var g=Mr(),_=yl(a),C=Sn(g,_);C.tag=2,c!=null&&(C.callback=c),c=Dn(a,C,_),c!==null&&(oo(c,a,_,g),Di(c,a,_))}};function bm(a,c,g,_,C,P,k){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(_,P,k):c.prototype&&c.prototype.isPureReactComponent?!ea(g,_)||!ea(C,P):!0}function h(a,c,g){var _=!1,C=Js,P=c.contextType;return typeof P=="object"&&P!==null?P=yr(P):(C=Ii(c)?Ks:Si.current,_=c.contextTypes,P=(_=_!=null)?oa(a,C):Js),c=new c(g,P),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Ph,a.stateNode=c,c._reactInternals=a,_&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=C,a.__reactInternalMemoizedMaskedChildContext=P),c}function f(a,c,g,_){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,_),c.state!==a&&Ph.enqueueReplaceState(c,c.state,null)}function x(a,c,g,_){var C=a.stateNode;C.props=g,C.state=a.memoizedState,C.refs={},jt(a);var P=c.contextType;typeof P=="object"&&P!==null?C.context=yr(P):(P=Ii(c)?Ks:Si.current,C.context=oa(a,P)),C.state=a.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(wc(a,c,P,g),C.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(c=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),c!==C.state&&Ph.enqueueReplaceState(C,C.state,null),Hn(a,g,C,_),C.state=a.memoizedState),typeof C.componentDidMount=="function"&&(a.flags|=4194308)}function E(a,c){try{var g="",_=c;do g+=Ce(_),_=_.return;while(_);var C=g}catch(P){C=`
Error generating stack: `+P.message+`
`+P.stack}return{value:a,source:c,stack:C,digest:null}}function R(a,c,g){return{value:a,source:null,stack:g??null,digest:c??null}}function I(a,c){try{console.error(c.value)}catch(g){setTimeout(function(){throw g})}}var K=typeof WeakMap=="function"?WeakMap:Map;function ae(a,c,g){g=Sn(-1,g),g.tag=3,g.payload={element:null};var _=c.value;return g.callback=function(){Nm||(Nm=!0,s0=_),I(a,c)},g}function be(a,c,g){g=Sn(-1,g),g.tag=3;var _=a.type.getDerivedStateFromError;if(typeof _=="function"){var C=c.value;g.payload=function(){return _(C)},g.callback=function(){I(a,c)}}var P=a.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(g.callback=function(){I(a,c),typeof _!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var k=c.stack;this.componentDidCatch(c.value,{componentStack:k!==null?k:""})}),g}function Je(a,c,g){var _=a.pingCache;if(_===null){_=a.pingCache=new K;var C=new Set;_.set(c,C)}else C=_.get(c),C===void 0&&(C=new Set,_.set(c,C));C.has(g)||(C.add(g),a=nP.bind(null,a,c,g),c.then(a,a))}function mt(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function zt(a,c,g,_,C){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(c=Sn(-1,1),c.tag=2,Dn(g,c,1))),g.lanes|=1),a):(a.flags|=65536,a.lanes=C,a)}var Bt=B.ReactCurrentOwner,Qt=!1;function lt(a,c,g,_){c.child=a===null?pc(c,null,g,_):ua(c,a.child,g,_)}function Ci(a,c,g,_,C){g=g.render;var P=c.ref;return Po(c,C),_=_c(a,c,g,_,P,C),g=vd(),a!==null&&!Qt?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~C,_a(a,c,C)):(Pn&&g&&ud(c),c.flags|=1,lt(a,c,_,C),c.child)}function Sr(a,c,g,_,C){if(a===null){var P=g.type;return typeof P=="function"&&!f0(P)&&P.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(c.tag=15,c.type=P,_e(a,c,P,_,C)):(a=zm(g.type,null,_,c,c.mode,C),a.ref=c.ref,a.return=c,c.child=a)}if(P=a.child,(a.lanes&C)===0){var k=P.memoizedProps;if(g=g.compare,g=g!==null?g:ea,g(k,_)&&a.ref===c.ref)return _a(a,c,C)}return c.flags|=1,a=_l(P,_),a.ref=c.ref,a.return=c,c.child=a}function _e(a,c,g,_,C){if(a!==null){var P=a.memoizedProps;if(ea(P,_)&&a.ref===c.ref)if(Qt=!1,c.pendingProps=_=P,(a.lanes&C)!==0)(a.flags&131072)!==0&&(Qt=!0);else return c.lanes=a.lanes,_a(a,c,C)}return it(a,c,g,_,C)}function ce(a,c,g){var _=c.pendingProps,C=_.children,P=a!==null?a.memoizedState:null;if(_.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},En(Ih,is),is|=g;else{if((g&1073741824)===0)return a=P!==null?P.baseLanes|g:g,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,En(Ih,is),is|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=P!==null?P.baseLanes:g,En(Ih,is),is|=_}else P!==null?(_=P.baseLanes|g,c.memoizedState=null):_=g,En(Ih,is),is|=_;return lt(a,c,C,g),c.child}function we(a,c){var g=c.ref;(a===null&&g!==null||a!==null&&a.ref!==g)&&(c.flags|=512,c.flags|=2097152)}function it(a,c,g,_,C){var P=Ii(g)?Ks:Si.current;return P=oa(c,P),Po(c,C),g=_c(a,c,g,_,P,C),_=vd(),a!==null&&!Qt?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~C,_a(a,c,C)):(Pn&&_&&ud(c),c.flags|=1,lt(a,c,g,C),c.child)}function St(a,c,g,_,C){if(Ii(g)){var P=!0;aa(c)}else P=!1;if(Po(c,C),c.stateNode===null)Pm(a,c),h(c,g,_),x(c,g,_,C),_=!0;else if(a===null){var k=c.stateNode,Y=c.memoizedProps;k.props=Y;var ne=k.context,Se=g.contextType;typeof Se=="object"&&Se!==null?Se=yr(Se):(Se=Ii(g)?Ks:Si.current,Se=oa(c,Se));var ze=g.getDerivedStateFromProps,je=typeof ze=="function"||typeof k.getSnapshotBeforeUpdate=="function";je||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Y!==_||ne!==Se)&&f(c,k,_,Se),An=!1;var He=c.memoizedState;k.state=He,Hn(c,_,k,C),ne=c.memoizedState,Y!==_||He!==ne||Vi.current||An?(typeof ze=="function"&&(wc(c,g,ze,_),ne=c.memoizedState),(Y=An||bm(c,g,Y,_,He,ne,Se))?(je||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(c.flags|=4194308)):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=ne),k.props=_,k.state=ne,k.context=Se,_=Y):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{k=c.stateNode,Xn(a,c),Y=c.memoizedProps,Se=c.type===c.elementType?Y:Ur(c.type,Y),k.props=Se,je=c.pendingProps,He=k.context,ne=g.contextType,typeof ne=="object"&&ne!==null?ne=yr(ne):(ne=Ii(g)?Ks:Si.current,ne=oa(c,ne));var dt=g.getDerivedStateFromProps;(ze=typeof dt=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Y!==je||He!==ne)&&f(c,k,_,ne),An=!1,He=c.memoizedState,k.state=He,Hn(c,_,k,C);var yt=c.memoizedState;Y!==je||He!==yt||Vi.current||An?(typeof dt=="function"&&(wc(c,g,dt,_),yt=c.memoizedState),(Se=An||bm(c,g,Se,_,He,yt,ne)||!1)?(ze||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(_,yt,ne),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(_,yt,ne)),typeof k.componentDidUpdate=="function"&&(c.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof k.componentDidUpdate!="function"||Y===a.memoizedProps&&He===a.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&He===a.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=yt),k.props=_,k.state=yt,k.context=ne,_=Se):(typeof k.componentDidUpdate!="function"||Y===a.memoizedProps&&He===a.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&He===a.memoizedState||(c.flags|=1024),_=!1)}return Vt(a,c,g,_,P,C)}function Vt(a,c,g,_,C,P){we(a,c);var k=(c.flags&128)!==0;if(!_&&!k)return C&&ld(c,g,!1),_a(a,c,P);_=c.stateNode,Bt.current=c;var Y=k&&typeof g.getDerivedStateFromError!="function"?null:_.render();return c.flags|=1,a!==null&&k?(c.child=ua(c,a.child,null,P),c.child=ua(c,null,Y,P)):lt(a,c,Y,P),c.memoizedState=_.state,C&&ld(c,g,!0),c.child}function Gt(a){var c=a.stateNode;c.pendingContext?ad(a,c.pendingContext,c.pendingContext!==c.context):c.context&&ad(a,c.context,!1),yc(a,c.containerInfo)}function fn(a,c,g,_,C){return Ro(),cl(C),c.flags|=256,lt(a,c,g,_),c.child}var qn={dehydrated:null,treeContext:null,retryLane:0};function hn(a){return{baseLanes:a,cachePool:null,transitions:null}}function io(a,c,g){var _=c.pendingProps,C=Bn.current,P=!1,k=(c.flags&128)!==0,Y;if((Y=k)||(Y=a!==null&&a.memoizedState===null?!1:(C&2)!==0),Y?(P=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(C|=1),En(Bn,C&1),a===null)return Ah(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(k=_.children,a=_.fallback,P?(_=c.mode,P=c.child,k={mode:"hidden",children:k},(_&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=k):P=Gm(k,_,0,null),a=Pc(a,_,g,null),P.return=c,a.return=c,P.sibling=a,c.child=P,c.child.memoizedState=hn(g),c.memoizedState=qn,a):wd(c,k));if(C=a.memoizedState,C!==null&&(Y=C.dehydrated,Y!==null))return WR(a,c,k,_,Y,C,g);if(P){P=_.fallback,k=c.mode,C=a.child,Y=C.sibling;var ne={mode:"hidden",children:_.children};return(k&1)===0&&c.child!==C?(_=c.child,_.childLanes=0,_.pendingProps=ne,c.deletions=null):(_=_l(C,ne),_.subtreeFlags=C.subtreeFlags&14680064),Y!==null?P=_l(Y,P):(P=Pc(P,k,g,null),P.flags|=2),P.return=c,_.return=c,_.sibling=P,c.child=_,_=P,P=c.child,k=a.child.memoizedState,k=k===null?hn(g):{baseLanes:k.baseLanes|g,cachePool:null,transitions:k.transitions},P.memoizedState=k,P.childLanes=a.childLanes&~g,c.memoizedState=qn,_}return P=a.child,a=P.sibling,_=_l(P,{mode:"visible",children:_.children}),(c.mode&1)===0&&(_.lanes=g),_.return=c,_.sibling=null,a!==null&&(g=c.deletions,g===null?(c.deletions=[a],c.flags|=16):g.push(a)),c.child=_,c.memoizedState=null,_}function wd(a,c){return c=Gm({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function Rm(a,c,g,_){return _!==null&&cl(_),ua(c,a.child,null,g),a=wd(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function WR(a,c,g,_,C,P,k){if(g)return c.flags&256?(c.flags&=-257,_=R(Error(t(422))),Rm(a,c,k,_)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(P=_.fallback,C=c.mode,_=Gm({mode:"visible",children:_.children},C,0,null),P=Pc(P,C,k,null),P.flags|=2,_.return=c,P.return=c,_.sibling=P,c.child=_,(c.mode&1)!==0&&ua(c,a.child,null,k),c.child.memoizedState=hn(k),c.memoizedState=qn,P);if((c.mode&1)===0)return Rm(a,c,k,null);if(C.data==="$!"){if(_=C.nextSibling&&C.nextSibling.dataset,_)var Y=_.dgst;return _=Y,P=Error(t(419)),_=R(P,_,void 0),Rm(a,c,k,_)}if(Y=(k&a.childLanes)!==0,Qt||Y){if(_=Ni,_!==null){switch(k&-k){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(_.suspendedLanes|k))!==0?0:C,C!==0&&C!==P.retryLane&&(P.retryLane=C,$r(a,C),oo(_,a,C,-1))}return h0(),_=R(Error(t(421))),Rm(a,c,k,_)}return C.data==="$?"?(c.flags|=128,c.child=a.child,c=iP.bind(null,a),C._reactRetry=c,null):(a=P.treeContext,ji=js(C.nextSibling),Mi=c,Pn=!0,Fr=null,a!==null&&(Wi[mi++]=Ze,Wi[mi++]=Nr,Wi[mi++]=ca,Ze=a.id,Nr=a.overflow,ca=c),c=wd(c,_.children),c.flags|=4096,c)}function cS(a,c,g){a.lanes|=c;var _=a.alternate;_!==null&&(_.lanes|=c),gc(a.return,c,g)}function Qy(a,c,g,_,C){var P=a.memoizedState;P===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:C}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=_,P.tail=g,P.tailMode=C)}function uS(a,c,g){var _=c.pendingProps,C=_.revealOrder,P=_.tail;if(lt(a,c,_.children,g),_=Bn.current,(_&2)!==0)_=_&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&cS(a,g,c);else if(a.tag===19)cS(a,g,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}_&=1}if(En(Bn,_),(c.mode&1)===0)c.memoizedState=null;else switch(C){case"forwards":for(g=c.child,C=null;g!==null;)a=g.alternate,a!==null&&es(a)===null&&(C=g),g=g.sibling;g=C,g===null?(C=c.child,c.child=null):(C=g.sibling,g.sibling=null),Qy(c,!1,C,g,P);break;case"backwards":for(g=null,C=c.child,c.child=null;C!==null;){if(a=C.alternate,a!==null&&es(a)===null){c.child=C;break}a=C.sibling,C.sibling=g,g=C,C=a}Qy(c,!0,g,null,P);break;case"together":Qy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Pm(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function _a(a,c,g){if(a!==null&&(c.dependencies=a.dependencies),Cc|=c.lanes,(g&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,g=_l(a,a.pendingProps),c.child=g,g.return=c;a.sibling!==null;)a=a.sibling,g=g.sibling=_l(a,a.pendingProps),g.return=c;g.sibling=null}return c.child}function jR(a,c,g){switch(c.tag){case 3:Gt(c),Ro();break;case 5:ga(c);break;case 1:Ii(c.type)&&aa(c);break;case 4:yc(c,c.stateNode.containerInfo);break;case 10:var _=c.type._context,C=c.memoizedProps.value;En(ha,_._currentValue),_._currentValue=C;break;case 13:if(_=c.memoizedState,_!==null)return _.dehydrated!==null?(En(Bn,Bn.current&1),c.flags|=128,null):(g&c.child.childLanes)!==0?io(a,c,g):(En(Bn,Bn.current&1),a=_a(a,c,g),a!==null?a.sibling:null);En(Bn,Bn.current&1);break;case 19:if(_=(g&c.childLanes)!==0,(a.flags&128)!==0){if(_)return uS(a,c,g);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),En(Bn,Bn.current),_)break;return null;case 22:case 23:return c.lanes=0,ce(a,c,g)}return _a(a,c,g)}var hS,qy,fS,dS;hS=function(a,c){for(var g=c.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},qy=function(){},fS=function(a,c,g,_){var C=a.memoizedProps;if(C!==_){a=c.stateNode,Qn(xr.current);var P=null;switch(g){case"input":C=$(a,C),_=$(a,_),P=[];break;case"select":C=Q({},C,{value:void 0}),_=Q({},_,{value:void 0}),P=[];break;case"textarea":C=O(a,C),_=O(a,_),P=[];break;default:typeof C.onClick!="function"&&typeof _.onClick=="function"&&(a.onclick=ac)}te(g,_);var k;g=null;for(Se in C)if(!_.hasOwnProperty(Se)&&C.hasOwnProperty(Se)&&C[Se]!=null)if(Se==="style"){var Y=C[Se];for(k in Y)Y.hasOwnProperty(k)&&(g||(g={}),g[k]="")}else Se!=="dangerouslySetInnerHTML"&&Se!=="children"&&Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&Se!=="autoFocus"&&(r.hasOwnProperty(Se)?P||(P=[]):(P=P||[]).push(Se,null));for(Se in _){var ne=_[Se];if(Y=C?.[Se],_.hasOwnProperty(Se)&&ne!==Y&&(ne!=null||Y!=null))if(Se==="style")if(Y){for(k in Y)!Y.hasOwnProperty(k)||ne&&ne.hasOwnProperty(k)||(g||(g={}),g[k]="");for(k in ne)ne.hasOwnProperty(k)&&Y[k]!==ne[k]&&(g||(g={}),g[k]=ne[k])}else g||(P||(P=[]),P.push(Se,g)),g=ne;else Se==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,Y=Y?Y.__html:void 0,ne!=null&&Y!==ne&&(P=P||[]).push(Se,ne)):Se==="children"?typeof ne!="string"&&typeof ne!="number"||(P=P||[]).push(Se,""+ne):Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&(r.hasOwnProperty(Se)?(ne!=null&&Se==="onScroll"&&Tn("scroll",a),P||Y===ne||(P=[])):(P=P||[]).push(Se,ne))}g&&(P=P||[]).push("style",g);var Se=P;(c.updateQueue=Se)&&(c.flags|=4)}},dS=function(a,c,g,_){g!==_&&(c.flags|=4)};function Cd(a,c){if(!Pn)switch(a.tailMode){case"hidden":c=a.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?a.tail=null:g.sibling=null;break;case"collapsed":g=a.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:_.sibling=null}}function ir(a){var c=a.alternate!==null&&a.alternate.child===a.child,g=0,_=0;if(c)for(var C=a.child;C!==null;)g|=C.lanes|C.childLanes,_|=C.subtreeFlags&14680064,_|=C.flags&14680064,C.return=a,C=C.sibling;else for(C=a.child;C!==null;)g|=C.lanes|C.childLanes,_|=C.subtreeFlags,_|=C.flags,C.return=a,C=C.sibling;return a.subtreeFlags|=_,a.childLanes=g,c}function XR(a,c,g){var _=c.pendingProps;switch(Qs(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(c),null;case 1:return Ii(c.type)&&lc(),ir(c),null;case 3:return _=c.stateNode,Bo(),bn(Vi),bn(Si),Ms(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(a===null||a.child===null)&&(ll(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Fr!==null&&(l0(Fr),Fr=null))),qy(a,c),ir(c),null;case 5:fl(c);var C=Qn($s.current);if(g=c.type,a!==null&&c.stateNode!=null)fS(a,c,g,_,C),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!_){if(c.stateNode===null)throw Error(t(166));return ir(c),null}if(a=Qn(xr.current),ll(c)){_=c.stateNode,g=c.type;var P=c.memoizedProps;switch(_[ri]=c,_[al]=P,a=(c.mode&1)!==0,g){case"dialog":Tn("cancel",_),Tn("close",_);break;case"iframe":case"object":case"embed":Tn("load",_);break;case"video":case"audio":for(C=0;C<To.length;C++)Tn(To[C],_);break;case"source":Tn("error",_);break;case"img":case"image":case"link":Tn("error",_),Tn("load",_);break;case"details":Tn("toggle",_);break;case"input":Mn(_,P),Tn("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!P.multiple},Tn("invalid",_);break;case"textarea":le(_,P),Tn("invalid",_)}te(g,P),C=null;for(var k in P)if(P.hasOwnProperty(k)){var Y=P[k];k==="children"?typeof Y=="string"?_.textContent!==Y&&(P.suppressHydrationWarning!==!0&&oc(_.textContent,Y,a),C=["children",Y]):typeof Y=="number"&&_.textContent!==""+Y&&(P.suppressHydrationWarning!==!0&&oc(_.textContent,Y,a),C=["children",""+Y]):r.hasOwnProperty(k)&&Y!=null&&k==="onScroll"&&Tn("scroll",_)}switch(g){case"input":Ut(_),Be(_,P,!0);break;case"textarea":Ut(_),Ie(_);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(_.onclick=ac)}_=C,c.updateQueue=_,_!==null&&(c.flags|=4)}else{k=C.nodeType===9?C:C.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Te(g)),a==="http://www.w3.org/1999/xhtml"?g==="script"?(a=k.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof _.is=="string"?a=k.createElement(g,{is:_.is}):(a=k.createElement(g),g==="select"&&(k=a,_.multiple?k.multiple=!0:_.size&&(k.size=_.size))):a=k.createElementNS(a,g),a[ri]=c,a[al]=_,hS(a,c,!1,!1),c.stateNode=a;e:{switch(k=Pe(g,_),g){case"dialog":Tn("cancel",a),Tn("close",a),C=_;break;case"iframe":case"object":case"embed":Tn("load",a),C=_;break;case"video":case"audio":for(C=0;C<To.length;C++)Tn(To[C],a);C=_;break;case"source":Tn("error",a),C=_;break;case"img":case"image":case"link":Tn("error",a),Tn("load",a),C=_;break;case"details":Tn("toggle",a),C=_;break;case"input":Mn(a,_),C=$(a,_),Tn("invalid",a);break;case"option":C=_;break;case"select":a._wrapperState={wasMultiple:!!_.multiple},C=Q({},_,{value:void 0}),Tn("invalid",a);break;case"textarea":le(a,_),C=O(a,_),Tn("invalid",a);break;default:C=_}te(g,C),Y=C;for(P in Y)if(Y.hasOwnProperty(P)){var ne=Y[P];P==="style"?Rt(a,ne):P==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&ot(a,ne)):P==="children"?typeof ne=="string"?(g!=="textarea"||ne!=="")&&Ht(a,ne):typeof ne=="number"&&Ht(a,""+ne):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(r.hasOwnProperty(P)?ne!=null&&P==="onScroll"&&Tn("scroll",a):ne!=null&&b(a,P,ne,k))}switch(g){case"input":Ut(a),Be(a,_,!1);break;case"textarea":Ut(a),Ie(a);break;case"option":_.value!=null&&a.setAttribute("value",""+qe(_.value));break;case"select":a.multiple=!!_.multiple,P=_.value,P!=null?X(a,!!_.multiple,P,!1):_.defaultValue!=null&&X(a,!!_.multiple,_.defaultValue,!0);break;default:typeof C.onClick=="function"&&(a.onclick=ac)}switch(g){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return ir(c),null;case 6:if(a&&c.stateNode!=null)dS(a,c,a.memoizedProps,_);else{if(typeof _!="string"&&c.stateNode===null)throw Error(t(166));if(g=Qn($s.current),Qn(xr.current),ll(c)){if(_=c.stateNode,g=c.memoizedProps,_[ri]=c,(P=_.nodeValue!==g)&&(a=Mi,a!==null))switch(a.tag){case 3:oc(_.nodeValue,g,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&oc(_.nodeValue,g,(a.mode&1)!==0)}P&&(c.flags|=4)}else _=(g.nodeType===9?g:g.ownerDocument).createTextNode(_),_[ri]=c,c.stateNode=_}return ir(c),null;case 13:if(bn(Bn),_=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Pn&&ji!==null&&(c.mode&1)!==0&&(c.flags&128)===0)dd(),Ro(),c.flags|=98560,P=!1;else if(P=ll(c),_!==null&&_.dehydrated!==null){if(a===null){if(!P)throw Error(t(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[ri]=c}else Ro(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ir(c),P=!1}else Fr!==null&&(l0(Fr),Fr=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=g,c):(_=_!==null,_!==(a!==null&&a.memoizedState!==null)&&_&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(Bn.current&1)!==0?Ti===0&&(Ti=3):h0())),c.updateQueue!==null&&(c.flags|=4),ir(c),null);case 4:return Bo(),qy(a,c),a===null&&rl(c.stateNode.containerInfo),ir(c),null;case 10:return mc(c.type._context),ir(c),null;case 17:return Ii(c.type)&&lc(),ir(c),null;case 19:if(bn(Bn),P=c.memoizedState,P===null)return ir(c),null;if(_=(c.flags&128)!==0,k=P.rendering,k===null)if(_)Cd(P,!1);else{if(Ti!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(k=es(a),k!==null){for(c.flags|=128,Cd(P,!1),_=k.updateQueue,_!==null&&(c.updateQueue=_,c.flags|=4),c.subtreeFlags=0,_=g,g=c.child;g!==null;)P=g,a=_,P.flags&=14680066,k=P.alternate,k===null?(P.childLanes=0,P.lanes=a,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=k.childLanes,P.lanes=k.lanes,P.child=k.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=k.memoizedProps,P.memoizedState=k.memoizedState,P.updateQueue=k.updateQueue,P.type=k.type,a=k.dependencies,P.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),g=g.sibling;return En(Bn,Bn.current&1|2),c.child}a=a.sibling}P.tail!==null&&pe()>Dh&&(c.flags|=128,_=!0,Cd(P,!1),c.lanes=4194304)}else{if(!_)if(a=es(k),a!==null){if(c.flags|=128,_=!0,g=a.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),Cd(P,!0),P.tail===null&&P.tailMode==="hidden"&&!k.alternate&&!Pn)return ir(c),null}else 2*pe()-P.renderingStartTime>Dh&&g!==1073741824&&(c.flags|=128,_=!0,Cd(P,!1),c.lanes=4194304);P.isBackwards?(k.sibling=c.child,c.child=k):(g=P.last,g!==null?g.sibling=k:c.child=k,P.last=k)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=pe(),c.sibling=null,g=Bn.current,En(Bn,_?g&1|2:g&1),c):(ir(c),null);case 22:case 23:return u0(),_=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==_&&(c.flags|=8192),_&&(c.mode&1)!==0?(is&1073741824)!==0&&(ir(c),c.subtreeFlags&6&&(c.flags|=8192)):ir(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function JR(a,c){switch(Qs(c),c.tag){case 1:return Ii(c.type)&&lc(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Bo(),bn(Vi),bn(Si),Ms(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return fl(c),null;case 13:if(bn(Bn),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Ro()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return bn(Bn),null;case 4:return Bo(),null;case 10:return mc(c.type._context),null;case 22:case 23:return u0(),null;case 24:return null;default:return null}}var Bm=!1,rr=!1,KR=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Bh(a,c){var g=a.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(_){Zn(a,c,_)}else g.current=null}function Zy(a,c,g){try{g()}catch(_){Zn(a,c,_)}}var pS=!1;function YR(a,c){if(ol=Rr,a=Un(),hi(a)){if("selectionStart"in a)var g={start:a.selectionStart,end:a.selectionEnd};else e:{g=(g=a.ownerDocument)&&g.defaultView||window;var _=g.getSelection&&g.getSelection();if(_&&_.rangeCount!==0){g=_.anchorNode;var C=_.anchorOffset,P=_.focusNode;_=_.focusOffset;try{g.nodeType,P.nodeType}catch{g=null;break e}var k=0,Y=-1,ne=-1,Se=0,ze=0,je=a,He=null;t:for(;;){for(var dt;je!==g||C!==0&&je.nodeType!==3||(Y=k+C),je!==P||_!==0&&je.nodeType!==3||(ne=k+_),je.nodeType===3&&(k+=je.nodeValue.length),(dt=je.firstChild)!==null;)He=je,je=dt;for(;;){if(je===a)break t;if(He===g&&++Se===C&&(Y=k),He===P&&++ze===_&&(ne=k),(dt=je.nextSibling)!==null)break;je=He,He=je.parentNode}je=dt}g=Y===-1||ne===-1?null:{start:Y,end:ne}}else g=null}g=g||{start:0,end:0}}else g=null;for(td={focusedElem:a,selectionRange:g},Rr=!1,gt=c;gt!==null;)if(c=gt,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,gt=a;else for(;gt!==null;){c=gt;try{var yt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var At=yt.memoizedProps,si=yt.memoizedState,ve=c.stateNode,oe=ve.getSnapshotBeforeUpdate(c.elementType===c.type?At:Ur(c.type,At),si);ve.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var ye=c.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ye){Zn(c,c.return,Ye)}if(a=c.sibling,a!==null){a.return=c.return,gt=a;break}gt=c.return}return yt=pS,pS=!1,yt}function Td(a,c,g){var _=c.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var C=_=_.next;do{if((C.tag&a)===a){var P=C.destroy;C.destroy=void 0,P!==void 0&&Zy(c,g,P)}C=C.next}while(C!==_)}}function Im(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var g=c=c.next;do{if((g.tag&a)===a){var _=g.create;g.destroy=_()}g=g.next}while(g!==c)}}function $y(a){var c=a.ref;if(c!==null){var g=a.stateNode;a.tag,a=g,typeof c=="function"?c(a):c.current=a}}function mS(a){var c=a.alternate;c!==null&&(a.alternate=null,mS(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[ri],delete c[al],delete c[sa],delete c[ph],delete c[mh])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function gS(a){return a.tag===5||a.tag===3||a.tag===4}function vS(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||gS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function e0(a,c,g){var _=a.tag;if(_===5||_===6)a=a.stateNode,c?g.nodeType===8?g.parentNode.insertBefore(a,c):g.insertBefore(a,c):(g.nodeType===8?(c=g.parentNode,c.insertBefore(a,g)):(c=g,c.appendChild(a)),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=ac));else if(_!==4&&(a=a.child,a!==null))for(e0(a,c,g),a=a.sibling;a!==null;)e0(a,c,g),a=a.sibling}function t0(a,c,g){var _=a.tag;if(_===5||_===6)a=a.stateNode,c?g.insertBefore(a,c):g.appendChild(a);else if(_!==4&&(a=a.child,a!==null))for(t0(a,c,g),a=a.sibling;a!==null;)t0(a,c,g),a=a.sibling}var Ji=null,ro=!1;function ml(a,c,g){for(g=g.child;g!==null;)yS(a,c,g),g=g.sibling}function yS(a,c,g){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Et,g)}catch{}switch(g.tag){case 5:rr||Bh(g,c);case 6:var _=Ji,C=ro;Ji=null,ml(a,c,g),Ji=_,ro=C,Ji!==null&&(ro?(a=Ji,g=g.stateNode,a.nodeType===8?a.parentNode.removeChild(g):a.removeChild(g)):Ji.removeChild(g.stateNode));break;case 18:Ji!==null&&(ro?(a=Ji,g=g.stateNode,a.nodeType===8?dh(a.parentNode,g):a.nodeType===1&&dh(a,g),Yl(a)):dh(Ji,g.stateNode));break;case 4:_=Ji,C=ro,Ji=g.stateNode.containerInfo,ro=!0,ml(a,c,g),Ji=_,ro=C;break;case 0:case 11:case 14:case 15:if(!rr&&(_=g.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){C=_=_.next;do{var P=C,k=P.destroy;P=P.tag,k!==void 0&&((P&2)!==0||(P&4)!==0)&&Zy(g,c,k),C=C.next}while(C!==_)}ml(a,c,g);break;case 1:if(!rr&&(Bh(g,c),_=g.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=g.memoizedProps,_.state=g.memoizedState,_.componentWillUnmount()}catch(Y){Zn(g,c,Y)}ml(a,c,g);break;case 21:ml(a,c,g);break;case 22:g.mode&1?(rr=(_=rr)||g.memoizedState!==null,ml(a,c,g),rr=_):ml(a,c,g);break;default:ml(a,c,g)}}function xS(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var g=a.stateNode;g===null&&(g=a.stateNode=new KR),c.forEach(function(_){var C=rP.bind(null,a,_);g.has(_)||(g.add(_),_.then(C,C))})}}function so(a,c){var g=c.deletions;if(g!==null)for(var _=0;_<g.length;_++){var C=g[_];try{var P=a,k=c,Y=k;e:for(;Y!==null;){switch(Y.tag){case 5:Ji=Y.stateNode,ro=!1;break e;case 3:Ji=Y.stateNode.containerInfo,ro=!0;break e;case 4:Ji=Y.stateNode.containerInfo,ro=!0;break e}Y=Y.return}if(Ji===null)throw Error(t(160));yS(P,k,C),Ji=null,ro=!1;var ne=C.alternate;ne!==null&&(ne.return=null),C.return=null}catch(Se){Zn(C,c,Se)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)_S(c,a),c=c.sibling}function _S(a,c){var g=a.alternate,_=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(so(c,a),Do(a),_&4){try{Td(3,a,a.return),Im(3,a)}catch(At){Zn(a,a.return,At)}try{Td(5,a,a.return)}catch(At){Zn(a,a.return,At)}}break;case 1:so(c,a),Do(a),_&512&&g!==null&&Bh(g,g.return);break;case 5:if(so(c,a),Do(a),_&512&&g!==null&&Bh(g,g.return),a.flags&32){var C=a.stateNode;try{Ht(C,"")}catch(At){Zn(a,a.return,At)}}if(_&4&&(C=a.stateNode,C!=null)){var P=a.memoizedProps,k=g!==null?g.memoizedProps:P,Y=a.type,ne=a.updateQueue;if(a.updateQueue=null,ne!==null)try{Y==="input"&&P.type==="radio"&&P.name!=null&&Fe(C,P),Pe(Y,k);var Se=Pe(Y,P);for(k=0;k<ne.length;k+=2){var ze=ne[k],je=ne[k+1];ze==="style"?Rt(C,je):ze==="dangerouslySetInnerHTML"?ot(C,je):ze==="children"?Ht(C,je):b(C,ze,je,Se)}switch(Y){case"input":Oe(C,P);break;case"textarea":Ee(C,P);break;case"select":var He=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!P.multiple;var dt=P.value;dt!=null?X(C,!!P.multiple,dt,!1):He!==!!P.multiple&&(P.defaultValue!=null?X(C,!!P.multiple,P.defaultValue,!0):X(C,!!P.multiple,P.multiple?[]:"",!1))}C[al]=P}catch(At){Zn(a,a.return,At)}}break;case 6:if(so(c,a),Do(a),_&4){if(a.stateNode===null)throw Error(t(162));C=a.stateNode,P=a.memoizedProps;try{C.nodeValue=P}catch(At){Zn(a,a.return,At)}}break;case 3:if(so(c,a),Do(a),_&4&&g!==null&&g.memoizedState.isDehydrated)try{Yl(c.containerInfo)}catch(At){Zn(a,a.return,At)}break;case 4:so(c,a),Do(a);break;case 13:so(c,a),Do(a),C=a.child,C.flags&8192&&(P=C.memoizedState!==null,C.stateNode.isHidden=P,!P||C.alternate!==null&&C.alternate.memoizedState!==null||(r0=pe())),_&4&&xS(a);break;case 22:if(ze=g!==null&&g.memoizedState!==null,a.mode&1?(rr=(Se=rr)||ze,so(c,a),rr=Se):so(c,a),Do(a),_&8192){if(Se=a.memoizedState!==null,(a.stateNode.isHidden=Se)&&!ze&&(a.mode&1)!==0)for(gt=a,ze=a.child;ze!==null;){for(je=gt=ze;gt!==null;){switch(He=gt,dt=He.child,He.tag){case 0:case 11:case 14:case 15:Td(4,He,He.return);break;case 1:Bh(He,He.return);var yt=He.stateNode;if(typeof yt.componentWillUnmount=="function"){_=He,g=He.return;try{c=_,yt.props=c.memoizedProps,yt.state=c.memoizedState,yt.componentWillUnmount()}catch(At){Zn(_,g,At)}}break;case 5:Bh(He,He.return);break;case 22:if(He.memoizedState!==null){MS(je);continue}}dt!==null?(dt.return=He,gt=dt):MS(je)}ze=ze.sibling}e:for(ze=null,je=a;;){if(je.tag===5){if(ze===null){ze=je;try{C=je.stateNode,Se?(P=C.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(Y=je.stateNode,ne=je.memoizedProps.style,k=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,Y.style.display=bt("display",k))}catch(At){Zn(a,a.return,At)}}}else if(je.tag===6){if(ze===null)try{je.stateNode.nodeValue=Se?"":je.memoizedProps}catch(At){Zn(a,a.return,At)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===a)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===a)break e;for(;je.sibling===null;){if(je.return===null||je.return===a)break e;ze===je&&(ze=null),je=je.return}ze===je&&(ze=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:so(c,a),Do(a),_&4&&xS(a);break;case 21:break;default:so(c,a),Do(a)}}function Do(a){var c=a.flags;if(c&2){try{e:{for(var g=a.return;g!==null;){if(gS(g)){var _=g;break e}g=g.return}throw Error(t(160))}switch(_.tag){case 5:var C=_.stateNode;_.flags&32&&(Ht(C,""),_.flags&=-33);var P=vS(a);t0(a,P,C);break;case 3:case 4:var k=_.stateNode.containerInfo,Y=vS(a);e0(a,Y,k);break;default:throw Error(t(161))}}catch(ne){Zn(a,a.return,ne)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function QR(a,c,g){gt=a,AS(a)}function AS(a,c,g){for(var _=(a.mode&1)!==0;gt!==null;){var C=gt,P=C.child;if(C.tag===22&&_){var k=C.memoizedState!==null||Bm;if(!k){var Y=C.alternate,ne=Y!==null&&Y.memoizedState!==null||rr;Y=Bm;var Se=rr;if(Bm=k,(rr=ne)&&!Se)for(gt=C;gt!==null;)k=gt,ne=k.child,k.tag===22&&k.memoizedState!==null?ES(C):ne!==null?(ne.return=k,gt=ne):ES(C);for(;P!==null;)gt=P,AS(P),P=P.sibling;gt=C,Bm=Y,rr=Se}SS(a)}else(C.subtreeFlags&8772)!==0&&P!==null?(P.return=C,gt=P):SS(a)}}function SS(a){for(;gt!==null;){var c=gt;if((c.flags&8772)!==0){var g=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:rr||Im(5,c);break;case 1:var _=c.stateNode;if(c.flags&4&&!rr)if(g===null)_.componentDidMount();else{var C=c.elementType===c.type?g.memoizedProps:Ur(c.type,g.memoizedProps);_.componentDidUpdate(C,g.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&hl(c,P,_);break;case 3:var k=c.updateQueue;if(k!==null){if(g=null,c.child!==null)switch(c.child.tag){case 5:g=c.child.stateNode;break;case 1:g=c.child.stateNode}hl(c,k,g)}break;case 5:var Y=c.stateNode;if(g===null&&c.flags&4){g=Y;var ne=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&g.focus();break;case"img":ne.src&&(g.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Se=c.alternate;if(Se!==null){var ze=Se.memoizedState;if(ze!==null){var je=ze.dehydrated;je!==null&&Yl(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}rr||c.flags&512&&$y(c)}catch(He){Zn(c,c.return,He)}}if(c===a){gt=null;break}if(g=c.sibling,g!==null){g.return=c.return,gt=g;break}gt=c.return}}function MS(a){for(;gt!==null;){var c=gt;if(c===a){gt=null;break}var g=c.sibling;if(g!==null){g.return=c.return,gt=g;break}gt=c.return}}function ES(a){for(;gt!==null;){var c=gt;try{switch(c.tag){case 0:case 11:case 15:var g=c.return;try{Im(4,c)}catch(ne){Zn(c,g,ne)}break;case 1:var _=c.stateNode;if(typeof _.componentDidMount=="function"){var C=c.return;try{_.componentDidMount()}catch(ne){Zn(c,C,ne)}}var P=c.return;try{$y(c)}catch(ne){Zn(c,P,ne)}break;case 5:var k=c.return;try{$y(c)}catch(ne){Zn(c,k,ne)}}}catch(ne){Zn(c,c.return,ne)}if(c===a){gt=null;break}var Y=c.sibling;if(Y!==null){Y.return=c.return,gt=Y;break}gt=c.return}}var qR=Math.ceil,Dm=B.ReactCurrentDispatcher,n0=B.ReactCurrentOwner,ws=B.ReactCurrentBatchConfig,vn=0,Ni=null,gi=null,Ki=0,is=0,Ih=kn(0),Ti=0,bd=null,Cc=0,Lm=0,i0=0,Rd=null,Or=null,r0=0,Dh=1/0,Aa=null,Nm=!1,s0=null,gl=null,Fm=!1,vl=null,Um=0,Pd=0,o0=null,Om=-1,km=0;function Mr(){return(vn&6)!==0?pe():Om!==-1?Om:Om=pe()}function yl(a){return(a.mode&1)===0?1:(vn&2)!==0&&Ki!==0?Ki&-Ki:Ky.transition!==null?(km===0&&(km=sn()),km):(a=on,a!==0||(a=window.event,a=a===void 0?16:rm(a.type)),a)}function oo(a,c,g,_){if(50<Pd)throw Pd=0,o0=null,Error(t(185));ui(a,g,_),((vn&2)===0||a!==Ni)&&(a===Ni&&((vn&2)===0&&(Lm|=g),Ti===4&&xl(a,Ki)),kr(a,_),g===1&&vn===0&&(c.mode&1)===0&&(Dh=pe()+500,uc&&As()))}function kr(a,c){var g=a.callbackNode;ci(a,c);var _=xi(a,a===Ni?Ki:0);if(_===0)g!==null&&V(g),a.callbackNode=null,a.callbackPriority=0;else if(c=_&-_,a.callbackPriority!==c){if(g!=null&&V(g),c===1)a.tag===0?ym(CS.bind(null,a)):hc(CS.bind(null,a)),Jy(function(){(vn&6)===0&&As()}),g=null;else{switch(qi(_)){case 1:g=Ve;break;case 4:g=tt;break;case 16:g=ct;break;case 536870912:g=Pt;break;default:g=ct}g=LS(g,wS.bind(null,a))}a.callbackPriority=c,a.callbackNode=g}}function wS(a,c){if(Om=-1,km=0,(vn&6)!==0)throw Error(t(327));var g=a.callbackNode;if(Lh()&&a.callbackNode!==g)return null;var _=xi(a,a===Ni?Ki:0);if(_===0)return null;if((_&30)!==0||(_&a.expiredLanes)!==0||c)c=Hm(a,_);else{c=_;var C=vn;vn|=2;var P=bS();(Ni!==a||Ki!==c)&&(Aa=null,Dh=pe()+500,bc(a,c));do try{eP();break}catch(Y){TS(a,Y)}while(!0);da(),Dm.current=P,vn=C,gi!==null?c=0:(Ni=null,Ki=0,c=Ti)}if(c!==0){if(c===2&&(C=gs(a),C!==0&&(_=C,c=a0(a,C))),c===1)throw g=bd,bc(a,0),xl(a,_),kr(a,pe()),g;if(c===6)xl(a,_);else{if(C=a.current.alternate,(_&30)===0&&!ZR(C)&&(c=Hm(a,_),c===2&&(P=gs(a),P!==0&&(_=P,c=a0(a,P))),c===1))throw g=bd,bc(a,0),xl(a,_),kr(a,pe()),g;switch(a.finishedWork=C,a.finishedLanes=_,c){case 0:case 1:throw Error(t(345));case 2:Rc(a,Or,Aa);break;case 3:if(xl(a,_),(_&130023424)===_&&(c=r0+500-pe(),10<c)){if(xi(a,0)!==0)break;if(C=a.suspendedLanes,(C&_)!==_){Mr(),a.pingedLanes|=a.suspendedLanes&C;break}a.timeoutHandle=id(Rc.bind(null,a,Or,Aa),c);break}Rc(a,Or,Aa);break;case 4:if(xl(a,_),(_&4194240)===_)break;for(c=a.eventTimes,C=-1;0<_;){var k=31-Ft(_);P=1<<k,k=c[k],k>C&&(C=k),_&=~P}if(_=C,_=pe()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*qR(_/1960))-_,10<_){a.timeoutHandle=id(Rc.bind(null,a,Or,Aa),_);break}Rc(a,Or,Aa);break;case 5:Rc(a,Or,Aa);break;default:throw Error(t(329))}}}return kr(a,pe()),a.callbackNode===g?wS.bind(null,a):null}function a0(a,c){var g=Rd;return a.current.memoizedState.isDehydrated&&(bc(a,c).flags|=256),a=Hm(a,c),a!==2&&(c=Or,Or=g,c!==null&&l0(c)),a}function l0(a){Or===null?Or=a:Or.push.apply(Or,a)}function ZR(a){for(var c=a;;){if(c.flags&16384){var g=c.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var _=0;_<g.length;_++){var C=g[_],P=C.getSnapshot;C=C.value;try{if(!mr(P(),C))return!1}catch{return!1}}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function xl(a,c){for(c&=~i0,c&=~Lm,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var g=31-Ft(c),_=1<<g;a[g]=-1,c&=~_}}function CS(a){if((vn&6)!==0)throw Error(t(327));Lh();var c=xi(a,0);if((c&1)===0)return kr(a,pe()),null;var g=Hm(a,c);if(a.tag!==0&&g===2){var _=gs(a);_!==0&&(c=_,g=a0(a,_))}if(g===1)throw g=bd,bc(a,0),xl(a,c),kr(a,pe()),g;if(g===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Rc(a,Or,Aa),kr(a,pe()),null}function c0(a,c){var g=vn;vn|=1;try{return a(c)}finally{vn=g,vn===0&&(Dh=pe()+500,uc&&As())}}function Tc(a){vl!==null&&vl.tag===0&&(vn&6)===0&&Lh();var c=vn;vn|=1;var g=ws.transition,_=on;try{if(ws.transition=null,on=1,a)return a()}finally{on=_,ws.transition=g,vn=c,(vn&6)===0&&As()}}function u0(){is=Ih.current,bn(Ih)}function bc(a,c){a.finishedWork=null,a.finishedLanes=0;var g=a.timeoutHandle;if(g!==-1&&(a.timeoutHandle=-1,rd(g)),gi!==null)for(g=gi.return;g!==null;){var _=g;switch(Qs(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&lc();break;case 3:Bo(),bn(Vi),bn(Si),Ms();break;case 5:fl(_);break;case 4:Bo();break;case 13:bn(Bn);break;case 19:bn(Bn);break;case 10:mc(_.type._context);break;case 22:case 23:u0()}g=g.return}if(Ni=a,gi=a=_l(a.current,null),Ki=is=c,Ti=0,bd=null,i0=Lm=Cc=0,Or=Rd=null,Zs!==null){for(c=0;c<Zs.length;c++)if(g=Zs[c],_=g.interleaved,_!==null){g.interleaved=null;var C=_.next,P=g.pending;if(P!==null){var k=P.next;P.next=C,_.next=k}g.pending=_}Zs=null}return a}function TS(a,c){do{var g=gi;try{if(da(),va.current=Rh,ts){for(var _=Rn.memoizedState;_!==null;){var C=_.queue;C!==null&&(C.pending=null),_=_.next}ts=!1}if(eo=0,pn=zn=Rn=null,Li=!1,Io=0,n0.current=null,g===null||g.return===null){Ti=1,bd=c,gi=null;break}e:{var P=a,k=g.return,Y=g,ne=c;if(c=Ki,Y.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Se=ne,ze=Y,je=ze.tag;if((ze.mode&1)===0&&(je===0||je===11||je===15)){var He=ze.alternate;He?(ze.updateQueue=He.updateQueue,ze.memoizedState=He.memoizedState,ze.lanes=He.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var dt=mt(k);if(dt!==null){dt.flags&=-257,zt(dt,k,Y,P,c),dt.mode&1&&Je(P,Se,c),c=dt,ne=Se;var yt=c.updateQueue;if(yt===null){var At=new Set;At.add(ne),c.updateQueue=At}else yt.add(ne);break e}else{if((c&1)===0){Je(P,Se,c),h0();break e}ne=Error(t(426))}}else if(Pn&&Y.mode&1){var si=mt(k);if(si!==null){(si.flags&65536)===0&&(si.flags|=256),zt(si,k,Y,P,c),cl(E(ne,Y));break e}}P=ne=E(ne,Y),Ti!==4&&(Ti=2),Rd===null?Rd=[P]:Rd.push(P),P=k;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var ve=ae(P,ne,c);pa(P,ve);break e;case 1:Y=ne;var oe=P.type,ye=P.stateNode;if((P.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(gl===null||!gl.has(ye)))){P.flags|=65536,c&=-c,P.lanes|=c;var Ye=be(P,Y,c);pa(P,Ye);break e}}P=P.return}while(P!==null)}PS(g)}catch(wt){c=wt,gi===g&&g!==null&&(gi=g=g.return);continue}break}while(!0)}function bS(){var a=Dm.current;return Dm.current=Rh,a===null?Rh:a}function h0(){(Ti===0||Ti===3||Ti===2)&&(Ti=4),Ni===null||(Cc&268435455)===0&&(Lm&268435455)===0||xl(Ni,Ki)}function Hm(a,c){var g=vn;vn|=2;var _=bS();(Ni!==a||Ki!==c)&&(Aa=null,bc(a,c));do try{$R();break}catch(C){TS(a,C)}while(!0);if(da(),vn=g,Dm.current=_,gi!==null)throw Error(t(261));return Ni=null,Ki=0,Ti}function $R(){for(;gi!==null;)RS(gi)}function eP(){for(;gi!==null&&!de();)RS(gi)}function RS(a){var c=DS(a.alternate,a,is);a.memoizedProps=a.pendingProps,c===null?PS(a):gi=c,n0.current=null}function PS(a){var c=a;do{var g=c.alternate;if(a=c.return,(c.flags&32768)===0){if(g=XR(g,c,is),g!==null){gi=g;return}}else{if(g=JR(g,c),g!==null){g.flags&=32767,gi=g;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Ti=6,gi=null;return}}if(c=c.sibling,c!==null){gi=c;return}gi=c=a}while(c!==null);Ti===0&&(Ti=5)}function Rc(a,c,g){var _=on,C=ws.transition;try{ws.transition=null,on=1,tP(a,c,g,_)}finally{ws.transition=C,on=_}return null}function tP(a,c,g,_){do Lh();while(vl!==null);if((vn&6)!==0)throw Error(t(327));g=a.finishedWork;var C=a.finishedLanes;if(g===null)return null;if(a.finishedWork=null,a.finishedLanes=0,g===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var P=g.lanes|g.childLanes;if(_i(a,P),a===Ni&&(gi=Ni=null,Ki=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||Fm||(Fm=!0,LS(ct,function(){return Lh(),null})),P=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||P){P=ws.transition,ws.transition=null;var k=on;on=1;var Y=vn;vn|=4,n0.current=null,YR(a,g),_S(g,a),fi(td),Rr=!!ol,td=ol=null,a.current=g,QR(g),Ae(),vn=Y,on=k,ws.transition=P}else a.current=g;if(Fm&&(Fm=!1,vl=a,Um=C),P=a.pendingLanes,P===0&&(gl=null),_t(g.stateNode),kr(a,pe()),c!==null)for(_=a.onRecoverableError,g=0;g<c.length;g++)C=c[g],_(C.value,{componentStack:C.stack,digest:C.digest});if(Nm)throw Nm=!1,a=s0,s0=null,a;return(Um&1)!==0&&a.tag!==0&&Lh(),P=a.pendingLanes,(P&1)!==0?a===o0?Pd++:(Pd=0,o0=a):Pd=0,As(),null}function Lh(){if(vl!==null){var a=qi(Um),c=ws.transition,g=on;try{if(ws.transition=null,on=16>a?16:a,vl===null)var _=!1;else{if(a=vl,vl=null,Um=0,(vn&6)!==0)throw Error(t(331));var C=vn;for(vn|=4,gt=a.current;gt!==null;){var P=gt,k=P.child;if((gt.flags&16)!==0){var Y=P.deletions;if(Y!==null){for(var ne=0;ne<Y.length;ne++){var Se=Y[ne];for(gt=Se;gt!==null;){var ze=gt;switch(ze.tag){case 0:case 11:case 15:Td(8,ze,P)}var je=ze.child;if(je!==null)je.return=ze,gt=je;else for(;gt!==null;){ze=gt;var He=ze.sibling,dt=ze.return;if(mS(ze),ze===Se){gt=null;break}if(He!==null){He.return=dt,gt=He;break}gt=dt}}}var yt=P.alternate;if(yt!==null){var At=yt.child;if(At!==null){yt.child=null;do{var si=At.sibling;At.sibling=null,At=si}while(At!==null)}}gt=P}}if((P.subtreeFlags&2064)!==0&&k!==null)k.return=P,gt=k;else e:for(;gt!==null;){if(P=gt,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Td(9,P,P.return)}var ve=P.sibling;if(ve!==null){ve.return=P.return,gt=ve;break e}gt=P.return}}var oe=a.current;for(gt=oe;gt!==null;){k=gt;var ye=k.child;if((k.subtreeFlags&2064)!==0&&ye!==null)ye.return=k,gt=ye;else e:for(k=oe;gt!==null;){if(Y=gt,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:Im(9,Y)}}catch(wt){Zn(Y,Y.return,wt)}if(Y===k){gt=null;break e}var Ye=Y.sibling;if(Ye!==null){Ye.return=Y.return,gt=Ye;break e}gt=Y.return}}if(vn=C,As(),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Et,a)}catch{}_=!0}return _}finally{on=g,ws.transition=c}}return!1}function BS(a,c,g){c=E(g,c),c=ae(a,c,1),a=Dn(a,c,1),c=Mr(),a!==null&&(ui(a,1,c),kr(a,c))}function Zn(a,c,g){if(a.tag===3)BS(a,a,g);else for(;c!==null;){if(c.tag===3){BS(c,a,g);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(gl===null||!gl.has(_))){a=E(g,a),a=be(c,a,1),c=Dn(c,a,1),a=Mr(),c!==null&&(ui(c,1,a),kr(c,a));break}}c=c.return}}function nP(a,c,g){var _=a.pingCache;_!==null&&_.delete(c),c=Mr(),a.pingedLanes|=a.suspendedLanes&g,Ni===a&&(Ki&g)===g&&(Ti===4||Ti===3&&(Ki&130023424)===Ki&&500>pe()-r0?bc(a,0):i0|=g),kr(a,c)}function IS(a,c){c===0&&((a.mode&1)===0?c=1:(c=cn,cn<<=1,(cn&130023424)===0&&(cn=4194304)));var g=Mr();a=$r(a,c),a!==null&&(ui(a,c,g),kr(a,g))}function iP(a){var c=a.memoizedState,g=0;c!==null&&(g=c.retryLane),IS(a,g)}function rP(a,c){var g=0;switch(a.tag){case 13:var _=a.stateNode,C=a.memoizedState;C!==null&&(g=C.retryLane);break;case 19:_=a.stateNode;break;default:throw Error(t(314))}_!==null&&_.delete(c),IS(a,g)}var DS;DS=function(a,c,g){if(a!==null)if(a.memoizedProps!==c.pendingProps||Vi.current)Qt=!0;else{if((a.lanes&g)===0&&(c.flags&128)===0)return Qt=!1,jR(a,c,g);Qt=(a.flags&131072)!==0}else Qt=!1,Pn&&(c.flags&1048576)!==0&&cd(c,xh,c.index);switch(c.lanes=0,c.tag){case 2:var _=c.type;Pm(a,c),a=c.pendingProps;var C=oa(c,Si.current);Po(c,g),C=_c(null,c,_,a,C,g);var P=vd();return c.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ii(_)?(P=!0,aa(c)):P=!1,c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,jt(c),C.updater=Ph,c.stateNode=C,C._reactInternals=c,x(c,_,a,g),c=Vt(null,c,_,!0,P,g)):(c.tag=0,Pn&&P&&ud(c),lt(null,c,C,g),c=c.child),c;case 16:_=c.elementType;e:{switch(Pm(a,c),a=c.pendingProps,C=_._init,_=C(_._payload),c.type=_,C=c.tag=oP(_),a=Ur(_,a),C){case 0:c=it(null,c,_,a,g);break e;case 1:c=St(null,c,_,a,g);break e;case 11:c=Ci(null,c,_,a,g);break e;case 14:c=Sr(null,c,_,Ur(_.type,a),g);break e}throw Error(t(306,_,""))}return c;case 0:return _=c.type,C=c.pendingProps,C=c.elementType===_?C:Ur(_,C),it(a,c,_,C,g);case 1:return _=c.type,C=c.pendingProps,C=c.elementType===_?C:Ur(_,C),St(a,c,_,C,g);case 3:e:{if(Gt(c),a===null)throw Error(t(387));_=c.pendingProps,P=c.memoizedState,C=P.element,Xn(a,c),Hn(c,_,null,g);var k=c.memoizedState;if(_=k.element,P.isDehydrated)if(P={element:_,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){C=E(Error(t(423)),c),c=fn(a,c,_,g,C);break e}else if(_!==C){C=E(Error(t(424)),c),c=fn(a,c,_,g,C);break e}else for(ji=js(c.stateNode.containerInfo.firstChild),Mi=c,Pn=!0,Fr=null,g=pc(c,null,_,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ro(),_===C){c=_a(a,c,g);break e}lt(a,c,_,g)}c=c.child}return c;case 5:return ga(c),a===null&&Ah(c),_=c.type,C=c.pendingProps,P=a!==null?a.memoizedProps:null,k=C.children,nd(_,C)?k=null:P!==null&&nd(_,P)&&(c.flags|=32),we(a,c),lt(a,c,k,g),c.child;case 6:return a===null&&Ah(c),null;case 13:return io(a,c,g);case 4:return yc(c,c.stateNode.containerInfo),_=c.pendingProps,a===null?c.child=ua(c,null,_,g):lt(a,c,_,g),c.child;case 11:return _=c.type,C=c.pendingProps,C=c.elementType===_?C:Ur(_,C),Ci(a,c,_,C,g);case 7:return lt(a,c,c.pendingProps,g),c.child;case 8:return lt(a,c,c.pendingProps.children,g),c.child;case 12:return lt(a,c,c.pendingProps.children,g),c.child;case 10:e:{if(_=c.type._context,C=c.pendingProps,P=c.memoizedProps,k=C.value,En(ha,_._currentValue),_._currentValue=k,P!==null)if(mr(P.value,k)){if(P.children===C.children&&!Vi.current){c=_a(a,c,g);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var Y=P.dependencies;if(Y!==null){k=P.child;for(var ne=Y.firstContext;ne!==null;){if(ne.context===_){if(P.tag===1){ne=Sn(-1,g&-g),ne.tag=2;var Se=P.updateQueue;if(Se!==null){Se=Se.shared;var ze=Se.pending;ze===null?ne.next=ne:(ne.next=ze.next,ze.next=ne),Se.pending=ne}}P.lanes|=g,ne=P.alternate,ne!==null&&(ne.lanes|=g),gc(P.return,g,c),Y.lanes|=g;break}ne=ne.next}}else if(P.tag===10)k=P.type===c.type?null:P.child;else if(P.tag===18){if(k=P.return,k===null)throw Error(t(341));k.lanes|=g,Y=k.alternate,Y!==null&&(Y.lanes|=g),gc(k,g,c),k=P.sibling}else k=P.child;if(k!==null)k.return=P;else for(k=P;k!==null;){if(k===c){k=null;break}if(P=k.sibling,P!==null){P.return=k.return,k=P;break}k=k.return}P=k}lt(a,c,C.children,g),c=c.child}return c;case 9:return C=c.type,_=c.pendingProps.children,Po(c,g),C=yr(C),_=_(C),c.flags|=1,lt(a,c,_,g),c.child;case 14:return _=c.type,C=Ur(_,c.pendingProps),C=Ur(_.type,C),Sr(a,c,_,C,g);case 15:return _e(a,c,c.type,c.pendingProps,g);case 17:return _=c.type,C=c.pendingProps,C=c.elementType===_?C:Ur(_,C),Pm(a,c),c.tag=1,Ii(_)?(a=!0,aa(c)):a=!1,Po(c,g),h(c,_,C),x(c,_,C,g),Vt(null,c,_,!0,a,g);case 19:return uS(a,c,g);case 22:return ce(a,c,g)}throw Error(t(156,c.tag))};function LS(a,c){return Uu(a,c)}function sP(a,c,g,_){this.tag=a,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(a,c,g,_){return new sP(a,c,g,_)}function f0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function oP(a){if(typeof a=="function")return f0(a)?1:0;if(a!=null){if(a=a.$$typeof,a===se)return 11;if(a===xe)return 14}return 2}function _l(a,c){var g=a.alternate;return g===null?(g=Cs(a.tag,c,a.key,a.mode),g.elementType=a.elementType,g.type=a.type,g.stateNode=a.stateNode,g.alternate=a,a.alternate=g):(g.pendingProps=c,g.type=a.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=a.flags&14680064,g.childLanes=a.childLanes,g.lanes=a.lanes,g.child=a.child,g.memoizedProps=a.memoizedProps,g.memoizedState=a.memoizedState,g.updateQueue=a.updateQueue,c=a.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=a.sibling,g.index=a.index,g.ref=a.ref,g}function zm(a,c,g,_,C,P){var k=2;if(_=a,typeof a=="function")f0(a)&&(k=1);else if(typeof a=="string")k=5;else e:switch(a){case z:return Pc(g.children,C,P,c);case G:k=8,C|=8;break;case U:return a=Cs(12,g,c,C|2),a.elementType=U,a.lanes=P,a;case ie:return a=Cs(13,g,c,C),a.elementType=ie,a.lanes=P,a;case he:return a=Cs(19,g,c,C),a.elementType=he,a.lanes=P,a;case ge:return Gm(g,C,P,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case L:k=10;break e;case j:k=9;break e;case se:k=11;break e;case xe:k=14;break e;case me:k=16,_=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=Cs(k,g,c,C),c.elementType=a,c.type=_,c.lanes=P,c}function Pc(a,c,g,_){return a=Cs(7,a,_,c),a.lanes=g,a}function Gm(a,c,g,_){return a=Cs(22,a,_,c),a.elementType=ge,a.lanes=g,a.stateNode={isHidden:!1},a}function d0(a,c,g){return a=Cs(6,a,null,c),a.lanes=g,a}function p0(a,c,g){return c=Cs(4,a.children!==null?a.children:[],a.key,c),c.lanes=g,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function aP(a,c,g,_,C){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=_,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function m0(a,c,g,_,C,P,k,Y,ne){return a=new aP(a,c,g,Y,ne),c===1?(c=1,P===!0&&(c|=8)):c=0,P=Cs(3,null,null,c),a.current=P,P.stateNode=a,P.memoizedState={element:_,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},jt(P),a}function lP(a,c,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:_==null?null:""+_,children:a,containerInfo:c,implementation:g}}function NS(a){if(!a)return Js;a=a._reactInternals;e:{if(ms(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ii(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var g=a.type;if(Ii(g))return cc(a,g,c)}return c}function FS(a,c,g,_,C,P,k,Y,ne){return a=m0(g,_,!0,a,C,P,k,Y,ne),a.context=NS(null),g=a.current,_=Mr(),C=yl(g),P=Sn(_,C),P.callback=c??null,Dn(g,P,C),a.current.lanes=C,ui(a,C,_),kr(a,_),a}function Vm(a,c,g,_){var C=c.current,P=Mr(),k=yl(C);return g=NS(g),c.context===null?c.context=g:c.pendingContext=g,c=Sn(P,k),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=Dn(C,c,k),a!==null&&(oo(a,C,k,P),Di(a,C,k)),k}function Wm(a){return a=a.current,a.child?(a.child.tag===5,a.child.stateNode):null}function US(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var g=a.retryLane;a.retryLane=g!==0&&g<c?g:c}}function g0(a,c){US(a,c),(a=a.alternate)&&US(a,c)}function cP(){return null}var OS=typeof reportError=="function"?reportError:function(a){console.error(a)};function v0(a){this._internalRoot=a}jm.prototype.render=v0.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));Vm(a,c,null,null)},jm.prototype.unmount=v0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Tc(function(){Vm(null,a,null,null)}),c[vr]=null}};function jm(a){this._internalRoot=a}jm.prototype.unstable_scheduleHydration=function(a){if(a){var c=Ou();a={blockedOn:null,target:a,priority:c};for(var g=0;g<Ao.length&&c!==0&&c<Ao[g].priority;g++);Ao.splice(g,0,a),g===0&&zu(a)}};function y0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Xm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function kS(){}function uP(a,c,g,_,C){if(C){if(typeof _=="function"){var P=_;_=function(){var Se=Wm(k);P.call(Se)}}var k=FS(c,_,a,0,null,!1,!1,"",kS);return a._reactRootContainer=k,a[vr]=k.current,rl(a.nodeType===8?a.parentNode:a),Tc(),k}for(;C=a.lastChild;)a.removeChild(C);if(typeof _=="function"){var Y=_;_=function(){var Se=Wm(ne);Y.call(Se)}}var ne=m0(a,0,!1,null,null,!1,!1,"",kS);return a._reactRootContainer=ne,a[vr]=ne.current,rl(a.nodeType===8?a.parentNode:a),Tc(function(){Vm(c,ne,g,_)}),ne}function Jm(a,c,g,_,C){var P=g._reactRootContainer;if(P){var k=P;if(typeof C=="function"){var Y=C;C=function(){var ne=Wm(k);Y.call(ne)}}Vm(c,k,a,C)}else k=uP(g,c,a,C,_);return Wm(k)}Xl=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var g=Zt(c.pendingLanes);g!==0&&(Wn(c,g|1),kr(c,pe()),(vn&6)===0&&(Dh=pe()+500,As()))}break;case 13:Tc(function(){var _=$r(a,1);if(_!==null){var C=Mr();oo(_,a,1,C)}}),g0(a,1)}},Of=function(a){if(a.tag===13){var c=$r(a,134217728);if(c!==null){var g=Mr();oo(c,a,134217728,g)}g0(a,134217728)}},im=function(a){if(a.tag===13){var c=yl(a),g=$r(a,c);if(g!==null){var _=Mr();oo(g,a,c,_)}g0(a,c)}},Ou=function(){return on},ku=function(a,c){var g=on;try{return on=a,c()}finally{on=g}},We=function(a,c,g){switch(c){case"input":if(Oe(a,g),c=g.name,g.type==="radio"&&c!=null){for(g=a;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<g.length;c++){var _=g[c];if(_!==a&&_.form===a.form){var C=gh(_);if(!C)throw Error(t(90));tn(_),Oe(_,C)}}}break;case"textarea":Ee(a,g);break;case"select":c=g.value,c!=null&&X(a,!!g.multiple,c,!1)}},ln=c0,Cn=Tc;var hP={usingClientEntryPoint:!1,Events:[Xs,jn,gh,$e,Tt,c0]},Bd={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fP={bundleType:Bd.bundleType,version:Bd.version,rendererPackageName:Bd.rendererPackageName,rendererConfig:Bd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Nu(a),a===null?null:a.stateNode},findFiberByHostInstance:Bd.findFiberByHostInstance||cP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Km=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Km.isDisabled&&Km.supportsFiber)try{Et=Km.inject(fP),Ke=Km}catch{}}return Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hP,Hr.createPortal=function(a,c){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y0(c))throw Error(t(200));return lP(a,c,null,g)},Hr.createRoot=function(a,c){if(!y0(a))throw Error(t(299));var g=!1,_="",C=OS;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=m0(a,1,!1,null,null,g,!1,_,C),a[vr]=c.current,rl(a.nodeType===8?a.parentNode:a),new v0(c)},Hr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Nu(c),a=a===null?null:a.stateNode,a},Hr.flushSync=function(a){return Tc(a)},Hr.hydrate=function(a,c,g){if(!Xm(c))throw Error(t(200));return Jm(null,a,c,!0,g)},Hr.hydrateRoot=function(a,c,g){if(!y0(a))throw Error(t(405));var _=g!=null&&g.hydratedSources||null,C=!1,P="",k=OS;if(g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(P=g.identifierPrefix),g.onRecoverableError!==void 0&&(k=g.onRecoverableError)),c=FS(c,null,a,1,g??null,C,!1,P,k),a[vr]=c.current,rl(a),_)for(a=0;a<_.length;a++)g=_[a],C=g._getVersion,C=C(g._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[g,C]:c.mutableSourceEagerHydrationData.push(g,C);return new jm(c)},Hr.render=function(a,c,g){if(!Xm(c))throw Error(t(200));return Jm(null,a,c,!1,g)},Hr.unmountComponentAtNode=function(a){if(!Xm(a))throw Error(t(40));return a._reactRootContainer?(Tc(function(){Jm(null,null,a,!1,function(){a._reactRootContainer=null,a[vr]=null})}),!0):!1},Hr.unstable_batchedUpdates=c0,Hr.unstable_renderSubtreeIntoContainer=function(a,c,g,_){if(!Xm(g))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Jm(a,c,g,!1,_)},Hr.version="18.3.1-next-f1338f8080-20240426",Hr}var JS;function FC(){if(JS)return A0.exports;JS=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),A0.exports=AP(),A0.exports}var KS;function SP(){if(KS)return Ym;KS=1;var i=FC();return Ym.createRoot=i.createRoot,Ym.hydrateRoot=i.hydrateRoot,Ym}var MP=SP();const EP=P_(MP);FC();function vp(){return vp=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},vp.apply(this,arguments)}var Dl;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Dl||(Dl={}));const YS="popstate";function wP(i){i===void 0&&(i={});function e(r,s){let{pathname:o="/",search:l="",hash:u=""}=Au(r.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),jx("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){let o=r.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=r.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof s=="string"?s:ov(s))}function n(r,s){iy(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return TP(e,t,n,i)}function yi(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function iy(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CP(){return Math.random().toString(36).substr(2,8)}function QS(i,e){return{usr:i.state,key:i.key,idx:e}}function jx(i,e,t,n){return t===void 0&&(t=null),vp({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?Au(e):e,{state:t,key:e&&e.key||n||CP()})}function ov(i){let{pathname:e="/",search:t="",hash:n=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Au(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substr(n),i=i.substr(0,n)),i&&(e.pathname=i)}return e}function TP(i,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:s=!1}=n,o=r.history,l=Dl.Pop,u=null,d=p();d==null&&(d=0,o.replaceState(vp({},o.state,{idx:d}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=Dl.Pop;let M=p(),S=M==null?null:M-d;d=M,u&&u({action:l,location:w.location,delta:S})}function v(M,S){l=Dl.Push;let T=jx(w.location,M,S);t&&t(T,M),d=p()+1;let b=QS(T,d),B=w.createHref(T);try{o.pushState(b,"",B)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;r.location.assign(B)}s&&u&&u({action:l,location:w.location,delta:1})}function y(M,S){l=Dl.Replace;let T=jx(w.location,M,S);t&&t(T,M),d=p();let b=QS(T,d),B=w.createHref(T);o.replaceState(b,"",B),s&&u&&u({action:l,location:w.location,delta:0})}function A(M){let S=r.location.origin!=="null"?r.location.origin:r.location.href,T=typeof M=="string"?M:ov(M);return T=T.replace(/ $/,"%20"),yi(S,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,S)}let w={get action(){return l},get location(){return i(r,o)},listen(M){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(YS,m),u=M,()=>{r.removeEventListener(YS,m),u=null}},createHref(M){return e(r,M)},createURL:A,encodeLocation(M){let S=A(M);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:y,go(M){return o.go(M)}};return w}var qS;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(qS||(qS={}));function bP(i,e,t){return t===void 0&&(t="/"),RP(i,e,t)}function RP(i,e,t,n){let r=typeof e=="string"?Au(e):e,s=B_(r.pathname||"/",t);if(s==null)return null;let o=UC(i);PP(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=GP(s);l=kP(o[u],d)}return l}function UC(i,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let r=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(yi(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=Nl([n,u.relativePath]),p=t.concat(u);s.children&&s.children.length>0&&(yi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),UC(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:UP(d,s.index),routesMeta:p})};return i.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,o);else for(let u of OC(s.path))r(s,o,u)}),e}function OC(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let o=OC(n.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),r&&l.push(...o),l.map(u=>i.startsWith("/")&&u===""?"/":u)}function PP(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:OP(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const BP=/^:[\w-]+$/,IP=3,DP=2,LP=1,NP=10,FP=-2,ZS=i=>i==="*";function UP(i,e){let t=i.split("/"),n=t.length;return t.some(ZS)&&(n+=FP),e&&(n+=DP),t.filter(r=>!ZS(r)).reduce((r,s)=>r+(BP.test(s)?IP:s===""?LP:NP),n)}function OP(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function kP(i,e,t){let{routesMeta:n}=i,r={},s="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],d=l===n.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=HP({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),v=u.route;if(!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:Nl([s,m.pathname]),pathnameBase:JP(Nl([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=Nl([s,m.pathnameBase]))}return o}function HP(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=zP(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((d,p,m)=>{let{paramName:v,isOptional:y}=p;if(v==="*"){let w=l[m]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const A=l[m];return y&&!A?d[v]=void 0:d[v]=(A||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:i}}function zP(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),iy(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function GP(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return iy(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function B_(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}const VP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WP=i=>VP.test(i);function jP(i,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?Au(i):i,s;if(t)if(WP(t))s=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),iy(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+t))}t.startsWith("/")?s=$S(t.substring(1),"/"):s=$S(t,e)}else s=e;return{pathname:s,search:KP(n),hash:YP(r)}}function $S(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function E0(i,e,t,n){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XP(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function kC(i,e){let t=XP(i);return e?t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function HC(i,e,t,n){n===void 0&&(n=!1);let r;typeof i=="string"?r=Au(i):(r=vp({},i),yi(!r.pathname||!r.pathname.includes("?"),E0("?","pathname","search",r)),yi(!r.pathname||!r.pathname.includes("#"),E0("#","pathname","hash",r)),yi(!r.search||!r.search.includes("#"),E0("#","search","hash",r)));let s=i===""||r.pathname==="",o=s?"/":r.pathname,l;if(o==null)l=t;else{let m=e.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),m-=1;r.pathname=v.join("/")}l=m>=0?e[m]:"/"}let u=jP(r,l),d=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}const Nl=i=>i.join("/").replace(/\/\/+/g,"/"),JP=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),KP=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,YP=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function QP(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const zC=["post","put","patch","delete"];new Set(zC);const qP=["get",...zC];new Set(qP);function yp(){return yp=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},yp.apply(this,arguments)}const I_=Z.createContext(null),ZP=Z.createContext(null),Su=Z.createContext(null),ry=Z.createContext(null),Mu=Z.createContext({outlet:null,matches:[],isDataRoute:!1}),GC=Z.createContext(null);function $P(i,e){let{relative:t}=e===void 0?{}:e;Fp()||yi(!1);let{basename:n,navigator:r}=Z.useContext(Su),{hash:s,pathname:o,search:l}=WC(i,{relative:t}),u=o;return n!=="/"&&(u=o==="/"?n:Nl([n,o])),r.createHref({pathname:u,search:l,hash:s})}function Fp(){return Z.useContext(ry)!=null}function Pf(){return Fp()||yi(!1),Z.useContext(ry).location}function VC(i){Z.useContext(Su).static||Z.useLayoutEffect(i)}function D_(){let{isDataRoute:i}=Z.useContext(Mu);return i?fB():eB()}function eB(){Fp()||yi(!1);let i=Z.useContext(I_),{basename:e,future:t,navigator:n}=Z.useContext(Su),{matches:r}=Z.useContext(Mu),{pathname:s}=Pf(),o=JSON.stringify(kC(r,t.v7_relativeSplatPath)),l=Z.useRef(!1);return VC(()=>{l.current=!0}),Z.useCallback(function(d,p){if(p===void 0&&(p={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=HC(d,JSON.parse(o),s,p.relative==="path");i==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Nl([e,m.pathname])),(p.replace?n.replace:n.push)(m,p.state,p)},[e,n,o,s,i])}function WC(i,e){let{relative:t}=e===void 0?{}:e,{future:n}=Z.useContext(Su),{matches:r}=Z.useContext(Mu),{pathname:s}=Pf(),o=JSON.stringify(kC(r,n.v7_relativeSplatPath));return Z.useMemo(()=>HC(i,JSON.parse(o),s,t==="path"),[i,o,s,t])}function tB(i,e){return nB(i,e)}function nB(i,e,t,n){Fp()||yi(!1);let{navigator:r}=Z.useContext(Su),{matches:s}=Z.useContext(Mu),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Pf(),p;if(e){var m;let M=typeof e=="string"?Au(e):e;u==="/"||(m=M.pathname)!=null&&m.startsWith(u)||yi(!1),p=M}else p=d;let v=p.pathname||"/",y=v;if(u!=="/"){let M=u.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(M.length).join("/")}let A=bP(i,{pathname:y}),w=aB(A&&A.map(M=>Object.assign({},M,{params:Object.assign({},l,M.params),pathname:Nl([u,r.encodeLocation?r.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?u:Nl([u,r.encodeLocation?r.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),s,t,n);return e&&w?Z.createElement(ry.Provider,{value:{location:yp({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Dl.Pop}},w):w}function iB(){let i=hB(),e=QP(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),t?Z.createElement("pre",{style:r},t):null,null)}const rB=Z.createElement(iB,null);class sB extends Z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Z.createElement(Mu.Provider,{value:this.props.routeContext},Z.createElement(GC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oB(i){let{routeContext:e,match:t,children:n}=i,r=Z.useContext(I_);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),Z.createElement(Mu.Provider,{value:e},n)}function aB(i,e,t,n){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),i==null){var s;if(!t)return null;if(t.errors)i=t.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let o=i,l=(r=t)==null?void 0:r.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);p>=0||yi(!1),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(t&&n&&n.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:v,errors:y}=t,A=m.route.loader&&v[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||A){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,m,v)=>{let y,A=!1,w=null,M=null;t&&(y=l&&m.route.id?l[m.route.id]:void 0,w=m.route.errorElement||rB,u&&(d<0&&v===0?(dB("route-fallback"),A=!0,M=null):d===v&&(A=!0,M=m.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,v+1)),T=()=>{let b;return y?b=w:A?b=M:m.route.Component?b=Z.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=p,Z.createElement(oB,{match:m,routeContext:{outlet:p,matches:S,isDataRoute:t!=null},children:b})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?Z.createElement(sB,{location:t.location,revalidation:t.revalidation,component:w,error:y,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):T()},null)}var jC=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(jC||{}),XC=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(XC||{});function lB(i){let e=Z.useContext(I_);return e||yi(!1),e}function cB(i){let e=Z.useContext(ZP);return e||yi(!1),e}function uB(i){let e=Z.useContext(Mu);return e||yi(!1),e}function JC(i){let e=uB(),t=e.matches[e.matches.length-1];return t.route.id||yi(!1),t.route.id}function hB(){var i;let e=Z.useContext(GC),t=cB(),n=JC();return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function fB(){let{router:i}=lB(jC.UseNavigateStable),e=JC(XC.UseNavigateStable),t=Z.useRef(!1);return VC(()=>{t.current=!0}),Z.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?i.navigate(r):i.navigate(r,yp({fromRouteId:e},s)))},[i,e])}const eM={};function dB(i,e,t){eM[i]||(eM[i]=!0)}function pB(i,e){i?.v7_startTransition,i?.v7_relativeSplatPath}function qg(i){yi(!1)}function mB(i){let{basename:e="/",children:t=null,location:n,navigationType:r=Dl.Pop,navigator:s,static:o=!1,future:l}=i;Fp()&&yi(!1);let u=e.replace(/^\/*/,"/"),d=Z.useMemo(()=>({basename:u,navigator:s,static:o,future:yp({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof n=="string"&&(n=Au(n));let{pathname:p="/",search:m="",hash:v="",state:y=null,key:A="default"}=n,w=Z.useMemo(()=>{let M=B_(p,u);return M==null?null:{location:{pathname:M,search:m,hash:v,state:y,key:A},navigationType:r}},[u,p,m,v,y,A,r]);return w==null?null:Z.createElement(Su.Provider,{value:d},Z.createElement(ry.Provider,{children:t,value:w}))}function gB(i){let{children:e,location:t}=i;return tB(Xx(e),t)}new Promise(()=>{});function Xx(i,e){e===void 0&&(e=[]);let t=[];return Z.Children.forEach(i,(n,r)=>{if(!Z.isValidElement(n))return;let s=[...e,r];if(n.type===Z.Fragment){t.push.apply(t,Xx(n.props.children,s));return}n.type!==qg&&yi(!1),!n.props.index||!n.props.children||yi(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Xx(n.props.children,s)),t.push(o)}),t}function Jx(){return Jx=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Jx.apply(this,arguments)}function vB(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function yB(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function xB(i,e){return i.button===0&&(!e||e==="_self")&&!yB(i)}const _B=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AB="6";try{window.__reactRouterVersion=AB}catch{}const SB="startTransition",tM=yP[SB];function MB(i){let{basename:e,children:t,future:n,window:r}=i,s=Z.useRef();s.current==null&&(s.current=wP({window:r,v5Compat:!0}));let o=s.current,[l,u]=Z.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},p=Z.useCallback(m=>{d&&tM?tM(()=>u(m)):u(m)},[u,d]);return Z.useLayoutEffect(()=>o.listen(p),[o,p]),Z.useEffect(()=>pB(n),[n]),Z.createElement(mB,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:n})}const EB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ip=Z.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:s,replace:o,state:l,target:u,to:d,preventScrollReset:p,viewTransition:m}=e,v=vB(e,_B),{basename:y}=Z.useContext(Su),A,w=!1;if(typeof d=="string"&&wB.test(d)&&(A=d,EB))try{let b=new URL(window.location.href),B=d.startsWith("//")?new URL(b.protocol+d):new URL(d),F=B_(B.pathname,y);B.origin===b.origin&&F!=null?d=F+B.search+B.hash:w=!0}catch{}let M=$P(d,{relative:r}),S=CB(d,{replace:o,state:l,target:u,preventScrollReset:p,relative:r,viewTransition:m});function T(b){n&&n(b),b.defaultPrevented||S(b)}return Z.createElement("a",Jx({},v,{href:A||M,onClick:w||s?n:T,ref:t,target:u}))});var nM;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(nM||(nM={}));var iM;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(iM||(iM={}));function CB(i,e){let{target:t,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=D_(),d=Pf(),p=WC(i,{relative:o});return Z.useCallback(m=>{if(xB(m,t)){m.preventDefault();let v=n!==void 0?n:ov(d)===ov(p);u(i,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,p,n,r,t,i,s,o,l])}const L_=Z.createContext({});function N_(i){const e=Z.useRef(null);return e.current===null&&(e.current=i()),e.current}const sy=Z.createContext(null),F_=Z.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});class TB extends Z.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function bB({children:i,isPresent:e}){const t=Z.useId(),n=Z.useRef(null),r=Z.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Z.useContext(F_);return Z.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:d}=r.current;if(e||!n.current||!o||!l)return;n.current.dataset.motionPopId=t;const p=document.createElement("style");return s&&(p.nonce=s),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${u}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),D.jsx(TB,{isPresent:e,childRef:n,sizeRef:r,children:Z.cloneElement(i,{ref:n})})}const RB=({children:i,initial:e,isPresent:t,onExitComplete:n,custom:r,presenceAffectsLayout:s,mode:o})=>{const l=N_(PB),u=Z.useId(),d=Z.useCallback(m=>{l.set(m,!0);for(const v of l.values())if(!v)return;n&&n()},[l,n]),p=Z.useMemo(()=>({id:u,initial:e,isPresent:t,custom:r,onExitComplete:d,register:m=>(l.set(m,!1),()=>l.delete(m))}),s?[Math.random(),d]:[t,d]);return Z.useMemo(()=>{l.forEach((m,v)=>l.set(v,!1))},[t]),Z.useEffect(()=>{!t&&!l.size&&n&&n()},[t]),o==="popLayout"&&(i=D.jsx(bB,{isPresent:t,children:i})),D.jsx(sy.Provider,{value:p,children:i})};function PB(){return new Map}function KC(i=!0){const e=Z.useContext(sy);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=Z.useId();Z.useEffect(()=>{i&&r(s)},[i]);const o=Z.useCallback(()=>i&&n&&n(s),[s,n,i]);return!t&&n?[!1,o]:[!0]}const Qm=i=>i.key||"";function rM(i){const e=[];return Z.Children.forEach(i,t=>{Z.isValidElement(t)&&e.push(t)}),e}const U_=typeof window<"u",YC=U_?Z.useLayoutEffect:Z.useEffect,lu=({children:i,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1})=>{const[l,u]=KC(o),d=Z.useMemo(()=>rM(i),[i]),p=o&&!l?[]:d.map(Qm),m=Z.useRef(!0),v=Z.useRef(d),y=N_(()=>new Map),[A,w]=Z.useState(d),[M,S]=Z.useState(d);YC(()=>{m.current=!1,v.current=d;for(let B=0;B<M.length;B++){const F=Qm(M[B]);p.includes(F)?y.delete(F):y.get(F)!==!0&&y.set(F,!1)}},[M,p.length,p.join("-")]);const T=[];if(d!==A){let B=[...d];for(let F=0;F<M.length;F++){const N=M[F],z=Qm(N);p.includes(z)||(B.splice(F,0,N),T.push(N))}s==="wait"&&T.length&&(B=T),S(rM(B)),w(d);return}const{forceRender:b}=Z.useContext(L_);return D.jsx(D.Fragment,{children:M.map(B=>{const F=Qm(B),N=o&&!l?!1:d===M||p.includes(F),z=()=>{if(y.has(F))y.set(F,!0);else return;let G=!0;y.forEach(U=>{U||(G=!1)}),G&&(b?.(),S(v.current),o&&u?.(),n&&n())};return D.jsx(RB,{isPresent:N,initial:!m.current||t?void 0:!1,custom:N?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:N?void 0:z,children:B},F)})})},ls=i=>i;let QC=ls;function O_(i){let e;return()=>(e===void 0&&(e=i()),e)}const mf=(i,e,t)=>{const n=e-i;return n===0?1:(t-i)/n},La=i=>i*1e3,Na=i=>i/1e3,BB={useManualTiming:!1};function IB(i){let e=new Set,t=new Set,n=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){s.has(d)&&(u.schedule(d),i()),d(o)}const u={schedule:(d,p=!1,m=!1)=>{const y=m&&n?e:t;return p&&s.add(d),y.has(d)||y.add(d),d},cancel:d=>{t.delete(d),s.delete(d)},process:d=>{if(o=d,n){r=!0;return}n=!0,[e,t]=[t,e],e.forEach(l),e.clear(),n=!1,r&&(r=!1,u.process(d))}};return u}const qm=["read","resolveKeyframes","update","preRender","render","postRender"],DB=40;function qC(i,e){let t=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=qm.reduce((S,T)=>(S[T]=IB(s),S),{}),{read:l,resolveKeyframes:u,update:d,preRender:p,render:m,postRender:v}=o,y=()=>{const S=performance.now();t=!1,r.delta=n?1e3/60:Math.max(Math.min(S-r.timestamp,DB),1),r.timestamp=S,r.isProcessing=!0,l.process(r),u.process(r),d.process(r),p.process(r),m.process(r),v.process(r),r.isProcessing=!1,t&&e&&(n=!1,i(y))},A=()=>{t=!0,n=!0,r.isProcessing||i(y)};return{schedule:qm.reduce((S,T)=>{const b=o[T];return S[T]=(B,F=!1,N=!1)=>(t||A(),b.schedule(B,F,N)),S},{}),cancel:S=>{for(let T=0;T<qm.length;T++)o[qm[T]].cancel(S)},state:r,steps:o}}const{schedule:On,cancel:Ul,state:Yi,steps:w0}=qC(typeof requestAnimationFrame<"u"?requestAnimationFrame:ls,!0),ZC=Z.createContext({strict:!1}),sM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gf={};for(const i in sM)gf[i]={isEnabled:e=>sM[i].some(t=>!!e[t])};function LB(i){for(const e in i)gf[e]={...gf[e],...i[e]}}const NB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function av(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||NB.has(i)}let $C=i=>!av(i);function FB(i){i&&($C=e=>e.startsWith("on")?!av(e):i(e))}try{FB(require("@emotion/is-prop-valid").default)}catch{}function UB(i,e,t){const n={};for(const r in i)r==="values"&&typeof i.values=="object"||($C(r)||t===!0&&av(r)||!e&&!av(r)||i.draggable&&r.startsWith("onDrag"))&&(n[r]=i[r]);return n}function OB(i){if(typeof Proxy>"u")return i;const e=new Map,t=(...n)=>i(...n);return new Proxy(t,{get:(n,r)=>r==="create"?i:(e.has(r)||e.set(r,i(r)),e.get(r))})}const oy=Z.createContext({});function xp(i){return typeof i=="string"||Array.isArray(i)}function ay(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}const k_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],H_=["initial",...k_];function ly(i){return ay(i.animate)||H_.some(e=>xp(i[e]))}function e1(i){return!!(ly(i)||i.variants)}function kB(i,e){if(ly(i)){const{initial:t,animate:n}=i;return{initial:t===!1||xp(t)?t:void 0,animate:xp(n)?n:void 0}}return i.inherit!==!1?e:{}}function HB(i){const{initial:e,animate:t}=kB(i,Z.useContext(oy));return Z.useMemo(()=>({initial:e,animate:t}),[oM(e),oM(t)])}function oM(i){return Array.isArray(i)?i.join(" "):i}const zB=Symbol.for("motionComponentSymbol");function rf(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function GB(i,e,t){return Z.useCallback(n=>{n&&i.onMount&&i.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):rf(t)&&(t.current=n))},[e])}const z_=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),VB="framerAppearId",t1="data-"+z_(VB),{schedule:G_}=qC(queueMicrotask,!1),n1=Z.createContext({});function WB(i,e,t,n,r){var s,o;const{visualElement:l}=Z.useContext(oy),u=Z.useContext(ZC),d=Z.useContext(sy),p=Z.useContext(F_).reducedMotion,m=Z.useRef(null);n=n||u.renderer,!m.current&&n&&(m.current=n(i,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p}));const v=m.current,y=Z.useContext(n1);v&&!v.projection&&r&&(v.type==="html"||v.type==="svg")&&jB(m.current,t,r,y);const A=Z.useRef(!1);Z.useInsertionEffect(()=>{v&&A.current&&v.update(t,d)});const w=t[t1],M=Z.useRef(!!w&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,w))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,w)));return YC(()=>{v&&(A.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),G_.render(v.render),M.current&&v.animationState&&v.animationState.animateChanges())}),Z.useEffect(()=>{v&&(!M.current&&v.animationState&&v.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)===null||S===void 0||S.call(window,w)}),M.current=!1))}),v}function jB(i,e,t,n){const{layoutId:r,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d}=e;i.projection=new t(i.latestValues,e["data-framer-portal-id"]?void 0:i1(i.parent)),i.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||l&&rf(l),visualElement:i,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:u,layoutRoot:d})}function i1(i){if(i)return i.options.allowProjection!==!1?i.projection:i1(i.parent)}function XB({preloadedFeatures:i,createVisualElement:e,useRender:t,useVisualState:n,Component:r}){var s,o;i&&LB(i);function l(d,p){let m;const v={...Z.useContext(F_),...d,layoutId:JB(d)},{isStatic:y}=v,A=HB(d),w=n(d,y);if(!y&&U_){KB();const M=YB(v);m=M.MeasureLayout,A.visualElement=WB(r,w,v,e,M.ProjectionNode)}return D.jsxs(oy.Provider,{value:A,children:[m&&A.visualElement?D.jsx(m,{visualElement:A.visualElement,...v}):null,t(r,d,GB(w,A.visualElement,p),w,y,A.visualElement)]})}l.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const u=Z.forwardRef(l);return u[zB]=r,u}function JB({layoutId:i}){const e=Z.useContext(L_).id;return e&&i!==void 0?e+"-"+i:i}function KB(i,e){Z.useContext(ZC).strict}function YB(i){const{drag:e,layout:t}=gf;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e?.isEnabled(i)||t?.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const QB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function V_(i){return typeof i!="string"||i.includes("-")?!1:!!(QB.indexOf(i)>-1||/[A-Z]/u.test(i))}function aM(i){const e=[{},{}];return i?.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function W_(i,e,t,n){if(typeof e=="function"){const[r,s]=aM(n);e=e(t!==void 0?t:i.custom,r,s)}if(typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"){const[r,s]=aM(n);e=e(t!==void 0?t:i.custom,r,s)}return e}const Kx=i=>Array.isArray(i),qB=i=>!!(i&&typeof i=="object"&&i.mix&&i.toValue),ZB=i=>Kx(i)?i[i.length-1]||0:i,cr=i=>!!(i&&i.getVelocity);function Zg(i){const e=cr(i)?i.get():i;return qB(e)?e.toValue():e}function $B({scrapeMotionValuesFromProps:i,createRenderState:e,onUpdate:t},n,r,s){const o={latestValues:eI(n,r,s,i),renderState:e()};return t&&(o.onMount=l=>t({props:n,current:l,...o}),o.onUpdate=l=>t(l)),o}const r1=i=>(e,t)=>{const n=Z.useContext(oy),r=Z.useContext(sy),s=()=>$B(i,e,n,r);return t?s():N_(s)};function eI(i,e,t,n){const r={},s=n(i,{});for(const v in s)r[v]=Zg(s[v]);let{initial:o,animate:l}=i;const u=ly(i),d=e1(i);e&&d&&!u&&i.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||o===!1;const m=p?l:o;if(m&&typeof m!="boolean"&&!ay(m)){const v=Array.isArray(m)?m:[m];for(let y=0;y<v.length;y++){const A=W_(i,v[y]);if(A){const{transitionEnd:w,transition:M,...S}=A;for(const T in S){let b=S[T];if(Array.isArray(b)){const B=p?b.length-1:0;b=b[B]}b!==null&&(r[T]=b)}for(const T in w)r[T]=w[T]}}}return r}const Bf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Eu=new Set(Bf),s1=i=>e=>typeof e=="string"&&e.startsWith(i),o1=s1("--"),tI=s1("var(--"),j_=i=>tI(i)?nI.test(i.split("/*")[0].trim()):!1,nI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,a1=(i,e)=>e&&typeof i=="number"?e.transform(i):i,Ha=(i,e,t)=>t>e?e:t<i?i:t,If={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},_p={...If,transform:i=>Ha(0,1,i)},Zm={...If,default:1},Up=i=>({test:e=>typeof e=="string"&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),Bl=Up("deg"),Fo=Up("%"),Ot=Up("px"),iI=Up("vh"),rI=Up("vw"),lM={...Fo,parse:i=>Fo.parse(i)/100,transform:i=>Fo.transform(i*100)},sI={borderWidth:Ot,borderTopWidth:Ot,borderRightWidth:Ot,borderBottomWidth:Ot,borderLeftWidth:Ot,borderRadius:Ot,radius:Ot,borderTopLeftRadius:Ot,borderTopRightRadius:Ot,borderBottomRightRadius:Ot,borderBottomLeftRadius:Ot,width:Ot,maxWidth:Ot,height:Ot,maxHeight:Ot,top:Ot,right:Ot,bottom:Ot,left:Ot,padding:Ot,paddingTop:Ot,paddingRight:Ot,paddingBottom:Ot,paddingLeft:Ot,margin:Ot,marginTop:Ot,marginRight:Ot,marginBottom:Ot,marginLeft:Ot,backgroundPositionX:Ot,backgroundPositionY:Ot},oI={rotate:Bl,rotateX:Bl,rotateY:Bl,rotateZ:Bl,scale:Zm,scaleX:Zm,scaleY:Zm,scaleZ:Zm,skew:Bl,skewX:Bl,skewY:Bl,distance:Ot,translateX:Ot,translateY:Ot,translateZ:Ot,x:Ot,y:Ot,z:Ot,perspective:Ot,transformPerspective:Ot,opacity:_p,originX:lM,originY:lM,originZ:Ot},cM={...If,transform:Math.round},X_={...sI,...oI,zIndex:cM,size:Ot,fillOpacity:_p,strokeOpacity:_p,numOctaves:cM},aI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lI=Bf.length;function cI(i,e,t){let n="",r=!0;for(let s=0;s<lI;s++){const o=Bf[s],l=i[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||t){const d=a1(l,X_[o]);if(!u){r=!1;const p=aI[o]||o;n+=`${p}(${d}) `}t&&(e[o]=d)}}return n=n.trim(),t?n=t(e,r?"":n):r&&(n="none"),n}function J_(i,e,t){const{style:n,vars:r,transformOrigin:s}=i;let o=!1,l=!1;for(const u in e){const d=e[u];if(Eu.has(u)){o=!0;continue}else if(o1(u)){r[u]=d;continue}else{const p=a1(d,X_[u]);u.startsWith("origin")?(l=!0,s[u]=p):n[u]=p}}if(e.transform||(o||t?n.transform=cI(e,i.transform,t):n.transform&&(n.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:p=0}=s;n.transformOrigin=`${u} ${d} ${p}`}}const uI={offset:"stroke-dashoffset",array:"stroke-dasharray"},hI={offset:"strokeDashoffset",array:"strokeDasharray"};function fI(i,e,t=1,n=0,r=!0){i.pathLength=1;const s=r?uI:hI;i[s.offset]=Ot.transform(-n);const o=Ot.transform(e),l=Ot.transform(t);i[s.array]=`${o} ${l}`}function uM(i,e,t){return typeof i=="string"?i:Ot.transform(e+t*i)}function dI(i,e,t){const n=uM(e,i.x,i.width),r=uM(t,i.y,i.height);return`${n} ${r}`}function K_(i,{attrX:e,attrY:t,attrScale:n,originX:r,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...d},p,m){if(J_(i,d,m),p){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:v,style:y,dimensions:A}=i;v.transform&&(A&&(y.transform=v.transform),delete v.transform),A&&(r!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=dI(A,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),n!==void 0&&(v.scale=n),o!==void 0&&fI(v,o,l,u,!1)}const Y_=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),l1=()=>({...Y_(),attrs:{}}),Q_=i=>typeof i=="string"&&i.toLowerCase()==="svg";function c1(i,{style:e,vars:t},n,r){Object.assign(i.style,e,r&&r.getProjectionStyles(n));for(const s in t)i.style.setProperty(s,t[s])}const u1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function h1(i,e,t,n){c1(i,e,void 0,n);for(const r in e.attrs)i.setAttribute(u1.has(r)?r:z_(r),e.attrs[r])}const lv={};function pI(i){Object.assign(lv,i)}function f1(i,{layout:e,layoutId:t}){return Eu.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!lv[i]||i==="opacity")}function q_(i,e,t){var n;const{style:r}=i,s={};for(const o in r)(cr(r[o])||e.style&&cr(e.style[o])||f1(o,i)||((n=t?.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function d1(i,e,t){const n=q_(i,e,t);for(const r in i)if(cr(i[r])||cr(e[r])){const s=Bf.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=i[r]}return n}function mI(i,e){try{e.dimensions=typeof i.getBBox=="function"?i.getBBox():i.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const hM=["x","y","width","height","cx","cy","r"],gI={useVisualState:r1({scrapeMotionValuesFromProps:d1,createRenderState:l1,onUpdate:({props:i,prevProps:e,current:t,renderState:n,latestValues:r})=>{if(!t)return;let s=!!i.drag;if(!s){for(const l in r)if(Eu.has(l)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let l=0;l<hM.length;l++){const u=hM[l];i[u]!==e[u]&&(o=!0)}o&&On.read(()=>{mI(t,n),On.render(()=>{K_(n,r,Q_(t.tagName),i.transformTemplate),h1(t,n)})})}})},vI={useVisualState:r1({scrapeMotionValuesFromProps:q_,createRenderState:Y_})};function p1(i,e,t){for(const n in e)!cr(e[n])&&!f1(n,t)&&(i[n]=e[n])}function yI({transformTemplate:i},e){return Z.useMemo(()=>{const t=Y_();return J_(t,e,i),Object.assign({},t.vars,t.style)},[e])}function xI(i,e){const t=i.style||{},n={};return p1(n,t,i),Object.assign(n,yI(i,e)),n}function _I(i,e){const t={},n=xI(i,e);return i.drag&&i.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(t.tabIndex=0),t.style=n,t}function AI(i,e,t,n){const r=Z.useMemo(()=>{const s=l1();return K_(s,e,Q_(n),i.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(i.style){const s={};p1(s,i.style,i),r.style={...s,...r.style}}return r}function SI(i=!1){return(t,n,r,{latestValues:s},o)=>{const u=(V_(t)?AI:_I)(n,s,o,t),d=UB(n,typeof t=="string",i),p=t!==Z.Fragment?{...d,...u,ref:r}:{},{children:m}=n,v=Z.useMemo(()=>cr(m)?m.get():m,[m]);return Z.createElement(t,{...p,children:v})}}function MI(i,e){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...V_(n)?gI:vI,preloadedFeatures:i,useRender:SI(r),createVisualElement:e,Component:n};return XB(o)}}function m1(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}function cy(i,e,t){const n=i.getProps();return W_(n,e,t!==void 0?t:n.custom,i)}const EI=O_(()=>window.ScrollTimeline!==void 0);class wI{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map(r=>{if(EI()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class CI extends wI{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function Z_(i,e){return i?i[e]||i.default||i:void 0}const Yx=2e4;function g1(i){let e=0;const t=50;let n=i.next(e);for(;!n.done&&e<Yx;)e+=t,n=i.next(e);return e>=Yx?1/0:e}function $_(i){return typeof i=="function"}function fM(i,e){i.timeline=e,i.onfinish=null}const eA=i=>Array.isArray(i)&&typeof i[0]=="number",TI={linearEasing:void 0};function bI(i,e){const t=O_(i);return()=>{var n;return(n=TI[e])!==null&&n!==void 0?n:t()}}const cv=bI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),v1=(i,e,t=10)=>{let n="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)n+=i(mf(0,r-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function y1(i){return!!(typeof i=="function"&&cv()||!i||typeof i=="string"&&(i in Qx||cv())||eA(i)||Array.isArray(i)&&i.every(y1))}const qd=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`,Qx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qd([0,.65,.55,1]),circOut:qd([.55,0,1,.45]),backIn:qd([.31,.01,.66,-.59]),backOut:qd([.33,1.53,.69,.99])};function x1(i,e){if(i)return typeof i=="function"&&cv()?v1(i,e):eA(i)?qd(i):Array.isArray(i)?i.map(t=>x1(t,e)||Qx.easeOut):Qx[i]}const uo={x:!1,y:!1};function _1(){return uo.x||uo.y}function RI(i,e,t){var n;if(i instanceof Element)return[i];if(typeof i=="string"){let r=document;const s=(n=void 0)!==null&&n!==void 0?n:r.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i)}function A1(i,e){const t=RI(i),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[t,r,()=>n.abort()]}function dM(i){return e=>{e.pointerType==="touch"||_1()||i(e)}}function PI(i,e,t={}){const[n,r,s]=A1(i,t),o=dM(l=>{const{target:u}=l,d=e(l);if(typeof d!="function"||!u)return;const p=dM(m=>{d(m),u.removeEventListener("pointerleave",p)});u.addEventListener("pointerleave",p,r)});return n.forEach(l=>{l.addEventListener("pointerenter",o,r)}),s}const S1=(i,e)=>e?i===e?!0:S1(i,e.parentElement):!1,tA=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,BI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function II(i){return BI.has(i.tagName)||i.tabIndex!==-1}const Zd=new WeakSet;function pM(i){return e=>{e.key==="Enter"&&i(e)}}function C0(i,e){i.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const DI=(i,e)=>{const t=i.currentTarget;if(!t)return;const n=pM(()=>{if(Zd.has(t))return;C0(t,"down");const r=pM(()=>{C0(t,"up")}),s=()=>C0(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function mM(i){return tA(i)&&!_1()}function LI(i,e,t={}){const[n,r,s]=A1(i,t),o=l=>{const u=l.currentTarget;if(!mM(l)||Zd.has(u))return;Zd.add(u);const d=e(l),p=(y,A)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),!(!mM(y)||!Zd.has(u))&&(Zd.delete(u),typeof d=="function"&&d(y,{success:A}))},m=y=>{p(y,t.useGlobalTarget||S1(u,y.target))},v=y=>{p(y,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",v,r)};return n.forEach(l=>{!II(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),l.addEventListener("focus",d=>DI(d,r),r)}),s}function NI(i){return i==="x"||i==="y"?uo[i]?null:(uo[i]=!0,()=>{uo[i]=!1}):uo.x||uo.y?null:(uo.x=uo.y=!0,()=>{uo.x=uo.y=!1})}const M1=new Set(["width","height","top","left","right","bottom",...Bf]);let $g;function FI(){$g=void 0}const Uo={now:()=>($g===void 0&&Uo.set(Yi.isProcessing||BB.useManualTiming?Yi.timestamp:performance.now()),$g),set:i=>{$g=i,queueMicrotask(FI)}};function nA(i,e){i.indexOf(e)===-1&&i.push(e)}function iA(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}class rA{constructor(){this.subscriptions=[]}add(e){return nA(this.subscriptions,e),()=>iA(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function E1(i,e){return e?i*(1e3/e):0}const gM=30,UI=i=>!isNaN(parseFloat(i));class OI{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,r=!0)=>{const s=Uo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Uo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=UI(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new rA);const n=this.events[e].add(t);return e==="change"?()=>{n(),On.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Uo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>gM)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,gM);return E1(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ap(i,e){return new OI(i,e)}function kI(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,Ap(t))}function HI(i,e){const t=cy(i,e);let{transitionEnd:n={},transition:r={},...s}=t||{};s={...s,...n};for(const o in s){const l=ZB(s[o]);kI(i,o,l)}}function zI(i){return!!(cr(i)&&i.add)}function qx(i,e){const t=i.getValue("willChange");if(zI(t))return t.add(e)}function w1(i){return i.props[t1]}const C1=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,GI=1e-7,VI=12;function WI(i,e,t,n,r){let s,o,l=0;do o=e+(t-e)/2,s=C1(o,n,r)-i,s>0?t=o:e=o;while(Math.abs(s)>GI&&++l<VI);return o}function Op(i,e,t,n){if(i===e&&t===n)return ls;const r=s=>WI(s,0,1,i,t);return s=>s===0||s===1?s:C1(r(s),e,n)}const T1=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,b1=i=>e=>1-i(1-e),R1=Op(.33,1.53,.69,.99),sA=b1(R1),P1=T1(sA),B1=i=>(i*=2)<1?.5*sA(i):.5*(2-Math.pow(2,-10*(i-1))),oA=i=>1-Math.sin(Math.acos(i)),I1=b1(oA),D1=T1(oA),L1=i=>/^0[^.\s]+$/u.test(i);function jI(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||L1(i):!0}const rp=i=>Math.round(i*1e5)/1e5,aA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XI(i){return i==null}const JI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lA=(i,e)=>t=>!!(typeof t=="string"&&JI.test(t)&&t.startsWith(i)||e&&!XI(t)&&Object.prototype.hasOwnProperty.call(t,e)),N1=(i,e,t)=>n=>{if(typeof n!="string")return n;const[r,s,o,l]=n.match(aA);return{[i]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},KI=i=>Ha(0,255,i),T0={...If,transform:i=>Math.round(KI(i))},tu={test:lA("rgb","red"),parse:N1("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:n=1})=>"rgba("+T0.transform(i)+", "+T0.transform(e)+", "+T0.transform(t)+", "+rp(_p.transform(n))+")"};function YI(i){let e="",t="",n="",r="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),n=i.substring(5,7),r=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),n=i.substring(3,4),r=i.substring(4,5),e+=e,t+=t,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const Zx={test:lA("#"),parse:YI,transform:tu.transform},sf={test:lA("hsl","hue"),parse:N1("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(i)+", "+Fo.transform(rp(e))+", "+Fo.transform(rp(t))+", "+rp(_p.transform(n))+")"},lr={test:i=>tu.test(i)||Zx.test(i)||sf.test(i),parse:i=>tu.test(i)?tu.parse(i):sf.test(i)?sf.parse(i):Zx.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?tu.transform(i):sf.transform(i)},QI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qI(i){var e,t;return isNaN(i)&&typeof i=="string"&&(((e=i.match(aA))===null||e===void 0?void 0:e.length)||0)+(((t=i.match(QI))===null||t===void 0?void 0:t.length)||0)>0}const F1="number",U1="color",ZI="var",$I="var(",vM="${}",eD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sp(i){const e=i.toString(),t=[],n={color:[],number:[],var:[]},r=[];let s=0;const l=e.replace(eD,u=>(lr.test(u)?(n.color.push(s),r.push(U1),t.push(lr.parse(u))):u.startsWith($I)?(n.var.push(s),r.push(ZI),t.push(u)):(n.number.push(s),r.push(F1),t.push(parseFloat(u))),++s,vM)).split(vM);return{values:t,split:l,indexes:n,types:r}}function O1(i){return Sp(i).values}function k1(i){const{split:e,types:t}=Sp(i),n=e.length;return r=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],r[o]!==void 0){const l=t[o];l===F1?s+=rp(r[o]):l===U1?s+=lr.transform(r[o]):s+=r[o]}return s}}const tD=i=>typeof i=="number"?0:i;function nD(i){const e=O1(i);return k1(i)(e.map(tD))}const Ol={test:qI,parse:O1,createTransformer:k1,getAnimatableNone:nD},iD=new Set(["brightness","contrast","saturate","opacity"]);function rD(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[n]=t.match(aA)||[];if(!n)return i;const r=t.replace(n,"");let s=iD.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+r+")"}const sD=/\b([a-z-]*)\(.*?\)/gu,$x={...Ol,getAnimatableNone:i=>{const e=i.match(sD);return e?e.map(rD).join(" "):i}},oD={...X_,color:lr,backgroundColor:lr,outlineColor:lr,fill:lr,stroke:lr,borderColor:lr,borderTopColor:lr,borderRightColor:lr,borderBottomColor:lr,borderLeftColor:lr,filter:$x,WebkitFilter:$x},cA=i=>oD[i];function H1(i,e){let t=cA(i);return t!==$x&&(t=Ol),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const aD=new Set(["auto","none","0"]);function lD(i,e,t){let n=0,r;for(;n<i.length&&!r;){const s=i[n];typeof s=="string"&&!aD.has(s)&&Sp(s).values.length&&(r=i[n]),n++}if(r&&t)for(const s of e)i[s]=H1(t,r)}const yM=i=>i===If||i===Ot,xM=(i,e)=>parseFloat(i.split(", ")[e]),_M=(i,e)=>(t,{transform:n})=>{if(n==="none"||!n)return 0;const r=n.match(/^matrix3d\((.+)\)$/u);if(r)return xM(r[1],e);{const s=n.match(/^matrix\((.+)\)$/u);return s?xM(s[1],i):0}},cD=new Set(["x","y","z"]),uD=Bf.filter(i=>!cD.has(i));function hD(i){const e=[];return uD.forEach(t=>{const n=i.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const vf={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:_M(4,13),y:_M(5,14)};vf.translateX=vf.x;vf.translateY=vf.y;const cu=new Set;let e_=!1,t_=!1;function z1(){if(t_){const i=Array.from(cu).filter(n=>n.needsMeasurement),e=new Set(i.map(n=>n.element)),t=new Map;e.forEach(n=>{const r=hD(n);r.length&&(t.set(n,r),n.render())}),i.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=t.get(n);r&&r.forEach(([s,o])=>{var l;(l=n.getValue(s))===null||l===void 0||l.set(o)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}t_=!1,e_=!1,cu.forEach(i=>i.complete()),cu.clear()}function G1(){cu.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(t_=!0)})}function fD(){G1(),z1()}class uA{constructor(e,t,n,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(cu.add(this),e_||(e_=!0,On.read(G1),On.resolveKeyframes(z1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&t){const u=n.readValue(t,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),cu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,cu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const V1=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i),dD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pD(i){const e=dD.exec(i);if(!e)return[,];const[,t,n,r]=e;return[`--${t??n}`,r]}function W1(i,e,t=1){const[n,r]=pD(i);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return V1(o)?parseFloat(o):o}return j_(r)?W1(r,e,t+1):r}const j1=i=>e=>e.test(i),mD={test:i=>i==="auto",parse:i=>i},X1=[If,Ot,Fo,Bl,rI,iI,mD],AM=i=>X1.find(j1(i));class J1 extends uA{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),j_(d))){const p=W1(d,t.current);p!==void 0&&(e[u]=p),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!M1.has(n)||e.length!==2)return;const[r,s]=e,o=AM(r),l=AM(s);if(o!==l)if(yM(o)&&yM(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)jI(e[r])&&n.push(r);n.length&&lD(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vf[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=vf[n](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,d])=>{t.getValue(u).set(d)}),this.resolveNoneKeyframes()}}const SM=(i,e)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Ol.test(i)||i==="0")&&!i.startsWith("url("));function gD(i){const e=i[0];if(i.length===1)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e)return!0}function vD(i,e,t,n){const r=i[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=i[i.length-1],o=SM(r,e),l=SM(s,e);return!o||!l?!1:gD(i)||(t==="spring"||$_(t))&&n}const yD=i=>i!==null;function uy(i,{repeat:e,repeatType:t="loop"},n){const r=i.filter(yD),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||n===void 0?r[s]:n}const xD=40;class K1{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Uo.now(),this.options={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>xD?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&fD(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Uo.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:s,delay:o,onComplete:l,onUpdate:u,isGenerator:d}=this.options;if(!d&&!vD(e,n,r,s))if(o)this.options.duration=0;else{u&&u(uy(e,this.options,t)),l&&l(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,t);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...p},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Jn=(i,e,t)=>i+(e-i)*t;function b0(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function _D({hue:i,saturation:e,lightness:t,alpha:n}){i/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,u=2*t-l;r=b0(u,l,i+1/3),s=b0(u,l,i),o=b0(u,l,i-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function uv(i,e){return t=>t>0?e:i}const R0=(i,e,t)=>{const n=i*i,r=t*(e*e-n)+n;return r<0?0:Math.sqrt(r)},AD=[Zx,tu,sf],SD=i=>AD.find(e=>e.test(i));function MM(i){const e=SD(i);if(!e)return!1;let t=e.parse(i);return e===sf&&(t=_D(t)),t}const EM=(i,e)=>{const t=MM(i),n=MM(e);if(!t||!n)return uv(i,e);const r={...t};return s=>(r.red=R0(t.red,n.red,s),r.green=R0(t.green,n.green,s),r.blue=R0(t.blue,n.blue,s),r.alpha=Jn(t.alpha,n.alpha,s),tu.transform(r))},MD=(i,e)=>t=>e(i(t)),kp=(...i)=>i.reduce(MD),n_=new Set(["none","hidden"]);function ED(i,e){return n_.has(i)?t=>t<=0?i:e:t=>t>=1?e:i}function wD(i,e){return t=>Jn(i,e,t)}function hA(i){return typeof i=="number"?wD:typeof i=="string"?j_(i)?uv:lr.test(i)?EM:bD:Array.isArray(i)?Y1:typeof i=="object"?lr.test(i)?EM:CD:uv}function Y1(i,e){const t=[...i],n=t.length,r=i.map((s,o)=>hA(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)t[o]=r[o](s);return t}}function CD(i,e){const t={...i,...e},n={};for(const r in t)i[r]!==void 0&&e[r]!==void 0&&(n[r]=hA(i[r])(i[r],e[r]));return r=>{for(const s in n)t[s]=n[s](r);return t}}function TD(i,e){var t;const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=i.indexes[o][r[o]],u=(t=i.values[l])!==null&&t!==void 0?t:0;n[s]=u,r[o]++}return n}const bD=(i,e)=>{const t=Ol.createTransformer(e),n=Sp(i),r=Sp(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?n_.has(i)&&!r.values.length||n_.has(e)&&!n.values.length?ED(i,e):kp(Y1(TD(n,r),r.values),t):uv(i,e)};function Q1(i,e,t){return typeof i=="number"&&typeof e=="number"&&typeof t=="number"?Jn(i,e,t):hA(i)(i,e)}const RD=5;function q1(i,e,t){const n=Math.max(e-RD,0);return E1(t-i(n),e-n)}const ei={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},P0=.001;function PD({duration:i=ei.duration,bounce:e=ei.bounce,velocity:t=ei.velocity,mass:n=ei.mass}){let r,s,o=1-e;o=Ha(ei.minDamping,ei.maxDamping,o),i=Ha(ei.minDuration,ei.maxDuration,Na(i)),o<1?(r=d=>{const p=d*o,m=p*i,v=p-t,y=i_(d,o),A=Math.exp(-m);return P0-v/y*A},s=d=>{const m=d*o*i,v=m*t+t,y=Math.pow(o,2)*Math.pow(d,2)*i,A=Math.exp(-m),w=i_(Math.pow(d,2),o);return(-r(d)+P0>0?-1:1)*((v-y)*A)/w}):(r=d=>{const p=Math.exp(-d*i),m=(d-t)*i+1;return-P0+p*m},s=d=>{const p=Math.exp(-d*i),m=(t-d)*(i*i);return p*m});const l=5/i,u=ID(r,s,l);if(i=La(i),isNaN(u))return{stiffness:ei.stiffness,damping:ei.damping,duration:i};{const d=Math.pow(u,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:i}}}const BD=12;function ID(i,e,t){let n=t;for(let r=1;r<BD;r++)n=n-i(n)/e(n);return n}function i_(i,e){return i*Math.sqrt(1-e*e)}const DD=["duration","bounce"],LD=["stiffness","damping","mass"];function wM(i,e){return e.some(t=>i[t]!==void 0)}function ND(i){let e={velocity:ei.velocity,stiffness:ei.stiffness,damping:ei.damping,mass:ei.mass,isResolvedFromDuration:!1,...i};if(!wM(i,LD)&&wM(i,DD))if(i.visualDuration){const t=i.visualDuration,n=2*Math.PI/(t*1.2),r=n*n,s=2*Ha(.05,1,1-(i.bounce||0))*Math.sqrt(r);e={...e,mass:ei.mass,stiffness:r,damping:s}}else{const t=PD(i);e={...e,...t,mass:ei.mass},e.isResolvedFromDuration=!0}return e}function Z1(i=ei.visualDuration,e=ei.bounce){const t=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:e}:i;let{restSpeed:n,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:p,duration:m,velocity:v,isResolvedFromDuration:y}=ND({...t,velocity:-Na(t.velocity||0)}),A=v||0,w=d/(2*Math.sqrt(u*p)),M=o-s,S=Na(Math.sqrt(u/p)),T=Math.abs(M)<5;n||(n=T?ei.restSpeed.granular:ei.restSpeed.default),r||(r=T?ei.restDelta.granular:ei.restDelta.default);let b;if(w<1){const F=i_(S,w);b=N=>{const z=Math.exp(-w*S*N);return o-z*((A+w*S*M)/F*Math.sin(F*N)+M*Math.cos(F*N))}}else if(w===1)b=F=>o-Math.exp(-S*F)*(M+(A+S*M)*F);else{const F=S*Math.sqrt(w*w-1);b=N=>{const z=Math.exp(-w*S*N),G=Math.min(F*N,300);return o-z*((A+w*S*M)*Math.sinh(G)+F*M*Math.cosh(G))/F}}const B={calculatedDuration:y&&m||null,next:F=>{const N=b(F);if(y)l.done=F>=m;else{let z=0;w<1&&(z=F===0?La(A):q1(b,F,N));const G=Math.abs(z)<=n,U=Math.abs(o-N)<=r;l.done=G&&U}return l.value=l.done?o:N,l},toString:()=>{const F=Math.min(g1(B),Yx),N=v1(z=>B.next(F*z).value,F,30);return F+"ms "+N}};return B}function CM({keyframes:i,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:p}){const m=i[0],v={done:!1,value:m},y=G=>l!==void 0&&G<l||u!==void 0&&G>u,A=G=>l===void 0?u:u===void 0||Math.abs(l-G)<Math.abs(u-G)?l:u;let w=t*e;const M=m+w,S=o===void 0?M:o(M);S!==M&&(w=S-m);const T=G=>-w*Math.exp(-G/n),b=G=>S+T(G),B=G=>{const U=T(G),L=b(G);v.done=Math.abs(U)<=d,v.value=v.done?S:L};let F,N;const z=G=>{y(v.value)&&(F=G,N=Z1({keyframes:[v.value,A(v.value)],velocity:q1(b,G,v.value),damping:r,stiffness:s,restDelta:d,restSpeed:p}))};return z(0),{calculatedDuration:null,next:G=>{let U=!1;return!N&&F===void 0&&(U=!0,B(G),z(G)),F!==void 0&&G>=F?N.next(G-F):(!U&&B(G),v)}}}const FD=Op(.42,0,1,1),UD=Op(0,0,.58,1),$1=Op(.42,0,.58,1),OD=i=>Array.isArray(i)&&typeof i[0]!="number",kD={linear:ls,easeIn:FD,easeInOut:$1,easeOut:UD,circIn:oA,circInOut:D1,circOut:I1,backIn:sA,backInOut:P1,backOut:R1,anticipate:B1},TM=i=>{if(eA(i)){QC(i.length===4);const[e,t,n,r]=i;return Op(e,t,n,r)}else if(typeof i=="string")return kD[i];return i};function HD(i,e,t){const n=[],r=t||Q1,s=i.length-1;for(let o=0;o<s;o++){let l=r(i[o],i[o+1]);if(e){const u=Array.isArray(e)?e[o]||ls:e;l=kp(u,l)}n.push(l)}return n}function zD(i,e,{clamp:t=!0,ease:n,mixer:r}={}){const s=i.length;if(QC(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=i[0]===i[1];i[0]>i[s-1]&&(i=[...i].reverse(),e=[...e].reverse());const l=HD(e,n,r),u=l.length,d=p=>{if(o&&p<i[0])return e[0];let m=0;if(u>1)for(;m<i.length-2&&!(p<i[m+1]);m++);const v=mf(i[m],i[m+1],p);return l[m](v)};return t?p=>d(Ha(i[0],i[s-1],p)):d}function GD(i,e){const t=i[i.length-1];for(let n=1;n<=e;n++){const r=mf(0,e,n);i.push(Jn(t,1,r))}}function VD(i){const e=[0];return GD(e,i.length-1),e}function WD(i,e){return i.map(t=>t*e)}function jD(i,e){return i.map(()=>e||$1).splice(0,i.length-1)}function hv({duration:i=300,keyframes:e,times:t,ease:n="easeInOut"}){const r=OD(n)?n.map(TM):TM(n),s={done:!1,value:e[0]},o=WD(t&&t.length===e.length?t:VD(e),i),l=zD(o,e,{ease:Array.isArray(r)?r:jD(e,r)});return{calculatedDuration:i,next:u=>(s.value=l(u),s.done=u>=i,s)}}const XD=i=>{const e=({timestamp:t})=>i(t);return{start:()=>On.update(e,!0),stop:()=>Ul(e),now:()=>Yi.isProcessing?Yi.timestamp:Uo.now()}},JD={decay:CM,inertia:CM,tween:hv,keyframes:hv,spring:Z1},KD=i=>i/100;class fA extends K1{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:t,motionValue:n,element:r,keyframes:s}=this.options,o=r?.KeyframeResolver||uA,l=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new o(s,l,t,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,l=$_(t)?t:JD[t]||hv;let u,d;l!==hv&&typeof e[0]!="number"&&(u=kp(KD,Q1(e[0],e[1])),e=[0,100]);const p=l({...this.options,keyframes:e});s==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),p.calculatedDuration===null&&(p.calculatedDuration=g1(p));const{calculatedDuration:m}=p,v=m+r,y=v*(n+1)-r;return{generator:p,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:m,resolvedDuration:v,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:n}=this;if(!n){const{keyframes:G}=this.options;return{done:!0,value:G[G.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:d,totalDuration:p,resolvedDuration:m}=n;if(this.startTime===null)return s.next(0);const{delay:v,repeat:y,repeatType:A,repeatDelay:w,onUpdate:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const S=this.currentTime-v*(this.speed>=0?1:-1),T=this.speed>=0?S<0:S>p;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let b=this.currentTime,B=s;if(y){const G=Math.min(this.currentTime,p)/m;let U=Math.floor(G),L=G%1;!L&&G>=1&&(L=1),L===1&&U--,U=Math.min(U,y+1),U%2&&(A==="reverse"?(L=1-L,w&&(L-=w/m)):A==="mirror"&&(B=o)),b=Ha(0,1,L)*m}const F=T?{done:!1,value:u[0]}:B.next(b);l&&(F.value=l(F.value));let{done:N}=F;!T&&d!==null&&(N=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return z&&r!==void 0&&(F.value=uy(u,this.options,r)),M&&M(F.value),z&&this.finish(),F}get duration(){const{resolved:e}=this;return e?Na(e.calculatedDuration):0}get time(){return Na(this.currentTime)}set time(e){e=La(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Na(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=XD,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const YD=new Set(["opacity","clipPath","filter","transform"]);function QD(i,e,t,{delay:n=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:u}={}){const d={[e]:t};u&&(d.offset=u);const p=x1(l,r);return Array.isArray(p)&&(d.easing=p),i.animate(d,{delay:n,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const qD=O_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),fv=10,ZD=2e4;function $D(i){return $_(i.type)||i.type==="spring"||!y1(i.ease)}function eL(i,e){const t=new fA({...e,keyframes:i,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:i[0]};const r=[];let s=0;for(;!n.done&&s<ZD;)n=t.sample(s),r.push(n.value),s+=fv;return{times:void 0,keyframes:r,duration:s-fv,ease:"linear"}}const eT={anticipate:B1,backInOut:P1,circInOut:D1};function tL(i){return i in eT}class bM extends K1{constructor(e){super(e);const{name:t,motionValue:n,element:r,keyframes:s}=this.options;this.resolver=new J1(s,(o,l)=>this.onKeyframesResolved(o,l),t,n,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:r,ease:s,type:o,motionValue:l,name:u,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&cv()&&tL(s)&&(s=eT[s]),$D(this.options)){const{onComplete:m,onUpdate:v,motionValue:y,element:A,...w}=this.options,M=eL(e,w);e=M.keyframes,e.length===1&&(e[1]=e[0]),n=M.duration,r=M.times,s=M.ease,o="keyframes"}const p=QD(l.owner.current,u,e,{...this.options,duration:n,times:r,ease:s});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(fM(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:m}=this.options;l.set(uy(e,this.options,t)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:n,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Na(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Na(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=La(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return ls;const{animation:n}=t;fM(n,e)}return ls}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:r,type:s,ease:o,times:l}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:p,onComplete:m,element:v,...y}=this.options,A=new fA({...y,keyframes:n,duration:r,type:s,ease:o,times:l,isGenerator:!0}),w=La(this.time);d.setWithVelocity(A.sample(w-fv).value,A.sample(w).value,fv)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:o,type:l}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return qD()&&n&&YD.has(n)&&!u&&!d&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}}const nL={type:"spring",stiffness:500,damping:25,restSpeed:10},iL=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),rL={type:"keyframes",duration:.8},sL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oL=(i,{keyframes:e})=>e.length>2?rL:Eu.has(i)?i.startsWith("scale")?iL(e[1]):nL:sL;function aL({when:i,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...p}){return!!Object.keys(p).length}const dA=(i,e,t,n={},r,s)=>o=>{const l=Z_(n,i)||{},u=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-La(u);let p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:i,motionValue:e,element:s?void 0:r};aL(l)||(p={...p,...oL(i,p)}),p.duration&&(p.duration=La(p.duration)),p.repeatDelay&&(p.repeatDelay=La(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(m=!0)),m&&!s&&e.get()!==void 0){const v=uy(p.keyframes,l);if(v!==void 0)return On.update(()=>{p.onUpdate(v),p.onComplete()}),new CI([])}return!s&&bM.supports(p)?new bM(p):new fA(p)};function lL({protectedKeys:i,needsAnimating:e},t){const n=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function tT(i,e,{delay:t=0,transitionOverride:n,type:r}={}){var s;let{transition:o=i.getDefaultTransition(),transitionEnd:l,...u}=e;n&&(o=n);const d=[],p=r&&i.animationState&&i.animationState.getState()[r];for(const m in u){const v=i.getValue(m,(s=i.latestValues[m])!==null&&s!==void 0?s:null),y=u[m];if(y===void 0||p&&lL(p,m))continue;const A={delay:t,...Z_(o||{},m)};let w=!1;if(window.MotionHandoffAnimation){const S=w1(i);if(S){const T=window.MotionHandoffAnimation(S,m,On);T!==null&&(A.startTime=T,w=!0)}}qx(i,m),v.start(dA(m,v,y,i.shouldReduceMotion&&M1.has(m)?{type:!1}:A,i,w));const M=v.animation;M&&d.push(M)}return l&&Promise.all(d).then(()=>{On.update(()=>{l&&HI(i,l)})}),d}function r_(i,e,t={}){var n;const r=cy(i,e,t.type==="exit"?(n=i.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(tT(i,r,t)):()=>Promise.resolve(),l=i.variantChildren&&i.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:v}=s;return cL(i,e,p+d,m,v,t)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,p]=u==="beforeChildren"?[o,l]:[l,o];return d().then(()=>p())}else return Promise.all([o(),l(t.delay)])}function cL(i,e,t=0,n=0,r=1,s){const o=[],l=(i.variantChildren.size-1)*n,u=r===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(i.variantChildren).sort(uL).forEach((d,p)=>{d.notify("AnimationStart",e),o.push(r_(d,e,{...s,delay:t+u(p)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function uL(i,e){return i.sortNodePosition(e)}function hL(i,e,t={}){i.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(s=>r_(i,s,t));n=Promise.all(r)}else if(typeof e=="string")n=r_(i,e,t);else{const r=typeof e=="function"?cy(i,e,t.custom):e;n=Promise.all(tT(i,r,t))}return n.then(()=>{i.notify("AnimationComplete",e)})}const fL=H_.length;function nT(i){if(!i)return;if(!i.isControllingVariants){const t=i.parent?nT(i.parent)||{}:{};return i.props.initial!==void 0&&(t.initial=i.props.initial),t}const e={};for(let t=0;t<fL;t++){const n=H_[t],r=i.props[n];(xp(r)||r===!1)&&(e[n]=r)}return e}const dL=[...k_].reverse(),pL=k_.length;function mL(i){return e=>Promise.all(e.map(({animation:t,options:n})=>hL(i,t,n)))}function gL(i){let e=mL(i),t=RM(),n=!0;const r=u=>(d,p)=>{var m;const v=cy(i,p,u==="exit"?(m=i.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(v){const{transition:y,transitionEnd:A,...w}=v;d={...d,...w,...A}}return d};function s(u){e=u(i)}function o(u){const{props:d}=i,p=nT(i.parent)||{},m=[],v=new Set;let y={},A=1/0;for(let M=0;M<pL;M++){const S=dL[M],T=t[S],b=d[S]!==void 0?d[S]:p[S],B=xp(b),F=S===u?T.isActive:null;F===!1&&(A=M);let N=b===p[S]&&b!==d[S]&&B;if(N&&n&&i.manuallyAnimateOnMount&&(N=!1),T.protectedKeys={...y},!T.isActive&&F===null||!b&&!T.prevProp||ay(b)||typeof b=="boolean")continue;const z=vL(T.prevProp,b);let G=z||S===u&&T.isActive&&!N&&B||M>A&&B,U=!1;const L=Array.isArray(b)?b:[b];let j=L.reduce(r(S),{});F===!1&&(j={});const{prevResolvedValues:se={}}=T,ie={...se,...j},he=ge=>{G=!0,v.has(ge)&&(U=!0,v.delete(ge)),T.needsAnimating[ge]=!0;const H=i.getValue(ge);H&&(H.liveStyle=!1)};for(const ge in ie){const H=j[ge],q=se[ge];if(y.hasOwnProperty(ge))continue;let Q=!1;Kx(H)&&Kx(q)?Q=!m1(H,q):Q=H!==q,Q?H!=null?he(ge):v.add(ge):H!==void 0&&v.has(ge)?he(ge):T.protectedKeys[ge]=!0}T.prevProp=b,T.prevResolvedValues=j,T.isActive&&(y={...y,...j}),n&&i.blockInitialAnimation&&(G=!1),G&&(!(N&&z)||U)&&m.push(...L.map(ge=>({animation:ge,options:{type:S}})))}if(v.size){const M={};v.forEach(S=>{const T=i.getBaseTarget(S),b=i.getValue(S);b&&(b.liveStyle=!0),M[S]=T??null}),m.push({animation:M})}let w=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!i.manuallyAnimateOnMount&&(w=!1),n=!1,w?e(m):Promise.resolve()}function l(u,d){var p;if(t[u].isActive===d)return Promise.resolve();(p=i.variantChildren)===null||p===void 0||p.forEach(v=>{var y;return(y=v.animationState)===null||y===void 0?void 0:y.setActive(u,d)}),t[u].isActive=d;const m=o(u);for(const v in t)t[v].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=RM(),n=!0}}}function vL(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!m1(e,i):!1}function Bc(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function RM(){return{animate:Bc(!0),whileInView:Bc(),whileHover:Bc(),whileTap:Bc(),whileDrag:Bc(),whileFocus:Bc(),exit:Bc()}}class Gl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class yL extends Gl{constructor(e){super(e),e.animationState||(e.animationState=gL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ay(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let xL=0;class _L extends Gl{constructor(){super(...arguments),this.id=xL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const AL={animation:{Feature:yL},exit:{Feature:_L}};function Mp(i,e,t,n={passive:!0}){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t)}function Hp(i){return{point:{x:i.pageX,y:i.pageY}}}const SL=i=>e=>tA(e)&&i(e,Hp(e));function sp(i,e,t,n){return Mp(i,e,SL(t),n)}const PM=(i,e)=>Math.abs(i-e);function ML(i,e){const t=PM(i.x,e.x),n=PM(i.y,e.y);return Math.sqrt(t**2+n**2)}class iT{constructor(e,t,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=I0(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,y=ML(m.offset,{x:0,y:0})>=3;if(!v&&!y)return;const{point:A}=m,{timestamp:w}=Yi;this.history.push({...A,timestamp:w});const{onStart:M,onMove:S}=this.handlers;v||(M&&M(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=B0(v,this.transformPagePoint),On.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:y,onSessionEnd:A,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=I0(m.type==="pointercancel"?this.lastMoveEventInfo:B0(v,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,M),A&&A(m,M)},!tA(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const o=Hp(e),l=B0(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=Yi;this.history=[{...u,timestamp:d}];const{onSessionStart:p}=t;p&&p(e,I0(l,this.history)),this.removeListeners=kp(sp(this.contextWindow,"pointermove",this.handlePointerMove),sp(this.contextWindow,"pointerup",this.handlePointerUp),sp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ul(this.updatePoint)}}function B0(i,e){return e?{point:e(i.point)}:i}function BM(i,e){return{x:i.x-e.x,y:i.y-e.y}}function I0({point:i},e){return{point:i,delta:BM(i,rT(e)),offset:BM(i,EL(e)),velocity:wL(e,.1)}}function EL(i){return i[0]}function rT(i){return i[i.length-1]}function wL(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,n=null;const r=rT(i);for(;t>=0&&(n=i[t],!(r.timestamp-n.timestamp>La(e)));)t--;if(!n)return{x:0,y:0};const s=Na(r.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-n.x)/s,y:(r.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const sT=1e-4,CL=1-sT,TL=1+sT,oT=.01,bL=0-oT,RL=0+oT;function us(i){return i.max-i.min}function PL(i,e,t){return Math.abs(i-e)<=t}function IM(i,e,t,n=.5){i.origin=n,i.originPoint=Jn(e.min,e.max,i.origin),i.scale=us(t)/us(e),i.translate=Jn(t.min,t.max,i.origin)-i.originPoint,(i.scale>=CL&&i.scale<=TL||isNaN(i.scale))&&(i.scale=1),(i.translate>=bL&&i.translate<=RL||isNaN(i.translate))&&(i.translate=0)}function op(i,e,t,n){IM(i.x,e.x,t.x,n?n.originX:void 0),IM(i.y,e.y,t.y,n?n.originY:void 0)}function DM(i,e,t){i.min=t.min+e.min,i.max=i.min+us(e)}function BL(i,e,t){DM(i.x,e.x,t.x),DM(i.y,e.y,t.y)}function LM(i,e,t){i.min=e.min-t.min,i.max=i.min+us(e)}function ap(i,e,t){LM(i.x,e.x,t.x),LM(i.y,e.y,t.y)}function IL(i,{min:e,max:t},n){return e!==void 0&&i<e?i=n?Jn(e,i,n.min):Math.max(i,e):t!==void 0&&i>t&&(i=n?Jn(t,i,n.max):Math.min(i,t)),i}function NM(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function DL(i,{top:e,left:t,bottom:n,right:r}){return{x:NM(i.x,t,r),y:NM(i.y,e,n)}}function FM(i,e){let t=e.min-i.min,n=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,n]=[n,t]),{min:t,max:n}}function LL(i,e){return{x:FM(i.x,e.x),y:FM(i.y,e.y)}}function NL(i,e){let t=.5;const n=us(i),r=us(e);return r>n?t=mf(e.min,e.max-n,i.min):n>r&&(t=mf(i.min,i.max-r,e.min)),Ha(0,1,t)}function FL(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const s_=.35;function UL(i=s_){return i===!1?i=0:i===!0&&(i=s_),{x:UM(i,"left","right"),y:UM(i,"top","bottom")}}function UM(i,e,t){return{min:OM(i,e),max:OM(i,t)}}function OM(i,e){return typeof i=="number"?i:i[e]||0}const kM=()=>({translate:0,scale:1,origin:0,originPoint:0}),of=()=>({x:kM(),y:kM()}),HM=()=>({min:0,max:0}),ai=()=>({x:HM(),y:HM()});function Bs(i){return[i("x"),i("y")]}function aT({top:i,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:i,max:n}}}function OL({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function kL(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),n=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function D0(i){return i===void 0||i===1}function o_({scale:i,scaleX:e,scaleY:t}){return!D0(i)||!D0(e)||!D0(t)}function Kc(i){return o_(i)||lT(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function lT(i){return zM(i.x)||zM(i.y)}function zM(i){return i&&i!=="0%"}function dv(i,e,t){const n=i-t,r=e*n;return t+r}function GM(i,e,t,n,r){return r!==void 0&&(i=dv(i,r,n)),dv(i,t,n)+e}function a_(i,e=0,t=1,n,r){i.min=GM(i.min,e,t,n,r),i.max=GM(i.max,e,t,n,r)}function cT(i,{x:e,y:t}){a_(i.x,e.translate,e.scale,e.originPoint),a_(i.y,t.translate,t.scale,t.originPoint)}const VM=.999999999999,WM=1.0000000000001;function HL(i,e,t,n=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let l=0;l<r;l++){s=t[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&lf(i,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,cT(i,o)),n&&Kc(s.latestValues)&&lf(i,s.latestValues))}e.x<WM&&e.x>VM&&(e.x=1),e.y<WM&&e.y>VM&&(e.y=1)}function af(i,e){i.min=i.min+e,i.max=i.max+e}function jM(i,e,t,n,r=.5){const s=Jn(i.min,i.max,r);a_(i,e,t,s,n)}function lf(i,e){jM(i.x,e.x,e.scaleX,e.scale,e.originX),jM(i.y,e.y,e.scaleY,e.scale,e.originY)}function uT(i,e){return aT(kL(i.getBoundingClientRect(),e))}function zL(i,e,t){const n=uT(i,t),{scroll:r}=e;return r&&(af(n.x,r.offset.x),af(n.y,r.offset.y)),n}const hT=({current:i})=>i?i.ownerDocument.defaultView:null,GL=new WeakMap;class VL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ai(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Hp(p).point)},s=(p,m)=>{const{drag:v,dragPropagation:y,onDragStart:A}=this.getProps();if(v&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=NI(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bs(M=>{let S=this.getAxisMotionValue(M).get()||0;if(Fo.test(S)){const{projection:T}=this.visualElement;if(T&&T.layout){const b=T.layout.layoutBox[M];b&&(S=us(b)*(parseFloat(S)/100))}}this.originPoint[M]=S}),A&&On.postRender(()=>A(p,m)),qx(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(p,m)=>{const{dragPropagation:v,dragDirectionLock:y,onDirectionLock:A,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:M}=m;if(y&&this.currentDirection===null){this.currentDirection=WL(M),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",m.point,M),this.updateAxis("y",m.point,M),this.visualElement.render(),w&&w(p,m)},l=(p,m)=>this.stop(p,m),u=()=>Bs(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new iT(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:hT(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&On.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!$m(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=IL(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&rf(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=DL(r.layoutBox,t):this.constraints=!1,this.elastic=UL(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Bs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=FL(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!rf(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=zL(n,r.root,this.visualElement.getTransformPagePoint());let o=LL(r.layout.layoutBox,s);if(t){const l=t(OL(o));this.hasMutatedConstraints=!!l,l&&(o=aT(l))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=Bs(p=>{if(!$m(p,t,this.currentDirection))return;let m=u&&u[p]||{};o&&(m={min:0,max:0});const v=r?200:1e6,y=r?40:1e7,A={type:"inertia",velocity:n?e[p]:0,bounceStiffness:v,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(p,A)});return Promise.all(d).then(l)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return qx(this.visualElement,e),n.start(dA(e,n,0,t,this.visualElement,!1))}stopAnimation(){Bs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Bs(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Bs(t=>{const{drag:n}=this.getProps();if(!$m(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[t];s.set(e[t]-Jn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!rf(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Bs(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();r[o]=NL({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Bs(o=>{if(!$m(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(Jn(u,d,r[o]))})}addListeners(){if(!this.visualElement.current)return;GL.set(this.visualElement,this);const e=this.visualElement.current,t=sp(e,"pointerdown",u=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();rf(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),On.read(n);const o=Mp(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Bs(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=u[p].translate,m.set(m.get()+u[p].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=s_,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function $m(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function WL(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class jL extends Gl{constructor(e){super(e),this.removeGroupControls=ls,this.removeListeners=ls,this.controls=new VL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ls}unmount(){this.removeGroupControls(),this.removeListeners()}}const XM=i=>(e,t)=>{i&&On.postRender(()=>i(e,t))};class XL extends Gl{constructor(){super(...arguments),this.removePointerDownListener=ls}onPointerDown(e){this.session=new iT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:XM(e),onStart:XM(t),onMove:n,onEnd:(s,o)=>{delete this.session,r&&On.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=sp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ev={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function JM(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const Dd={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(Ot.test(i))i=parseFloat(i);else return i;const t=JM(i,e.target.x),n=JM(i,e.target.y);return`${t}% ${n}%`}},JL={correct:(i,{treeScale:e,projectionDelta:t})=>{const n=i,r=Ol.parse(i);if(r.length>5)return n;const s=Ol.createTransformer(i),o=typeof r[0]!="number"?1:0,l=t.x.scale*e.x,u=t.y.scale*e.y;r[0+o]/=l,r[1+o]/=u;const d=Jn(l,u,.5);return typeof r[2+o]=="number"&&(r[2+o]/=d),typeof r[3+o]=="number"&&(r[3+o]/=d),s(r)}};class KL extends Z.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;pI(YL),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ev.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||On.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),G_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function fT(i){const[e,t]=KC(),n=Z.useContext(L_);return D.jsx(KL,{...i,layoutGroup:n,switchLayoutGroup:Z.useContext(n1),isPresent:e,safeToRemove:t})}const YL={borderRadius:{...Dd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dd,borderTopRightRadius:Dd,borderBottomLeftRadius:Dd,borderBottomRightRadius:Dd,boxShadow:JL};function QL(i,e,t){const n=cr(i)?i:Ap(i);return n.start(dA("",n,e,t)),n.animation}function qL(i){return i instanceof SVGElement&&i.tagName!=="svg"}const ZL=(i,e)=>i.depth-e.depth;class $L{constructor(){this.children=[],this.isDirty=!1}add(e){nA(this.children,e),this.isDirty=!0}remove(e){iA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ZL),this.isDirty=!1,this.children.forEach(e)}}function e2(i,e){const t=Uo.now(),n=({timestamp:r})=>{const s=r-t;s>=e&&(Ul(n),i(s-e))};return On.read(n,!0),()=>Ul(n)}const dT=["TopLeft","TopRight","BottomLeft","BottomRight"],t2=dT.length,KM=i=>typeof i=="string"?parseFloat(i):i,YM=i=>typeof i=="number"||Ot.test(i);function n2(i,e,t,n,r,s){r?(i.opacity=Jn(0,t.opacity!==void 0?t.opacity:1,i2(n)),i.opacityExit=Jn(e.opacity!==void 0?e.opacity:1,0,r2(n))):s&&(i.opacity=Jn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,n));for(let o=0;o<t2;o++){const l=`border${dT[o]}Radius`;let u=QM(e,l),d=QM(t,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||YM(u)===YM(d)?(i[l]=Math.max(Jn(KM(u),KM(d),n),0),(Fo.test(d)||Fo.test(u))&&(i[l]+="%")):i[l]=d}(e.rotate||t.rotate)&&(i.rotate=Jn(e.rotate||0,t.rotate||0,n))}function QM(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const i2=pT(0,.5,I1),r2=pT(.5,.95,ls);function pT(i,e,t){return n=>n<i?0:n>e?1:t(mf(i,e,n))}function qM(i,e){i.min=e.min,i.max=e.max}function Ts(i,e){qM(i.x,e.x),qM(i.y,e.y)}function ZM(i,e){i.translate=e.translate,i.scale=e.scale,i.originPoint=e.originPoint,i.origin=e.origin}function $M(i,e,t,n,r){return i-=e,i=dv(i,1/t,n),r!==void 0&&(i=dv(i,1/r,n)),i}function s2(i,e=0,t=1,n=.5,r,s=i,o=i){if(Fo.test(e)&&(e=parseFloat(e),e=Jn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Jn(s.min,s.max,n);i===s&&(l-=e),i.min=$M(i.min,e,t,l,r),i.max=$M(i.max,e,t,l,r)}function eE(i,e,[t,n,r],s,o){s2(i,e[t],e[n],e[r],e.scale,s,o)}const o2=["x","scaleX","originX"],a2=["y","scaleY","originY"];function tE(i,e,t,n){eE(i.x,e,o2,t?t.x:void 0,n?n.x:void 0),eE(i.y,e,a2,t?t.y:void 0,n?n.y:void 0)}function nE(i){return i.translate===0&&i.scale===1}function mT(i){return nE(i.x)&&nE(i.y)}function iE(i,e){return i.min===e.min&&i.max===e.max}function l2(i,e){return iE(i.x,e.x)&&iE(i.y,e.y)}function rE(i,e){return Math.round(i.min)===Math.round(e.min)&&Math.round(i.max)===Math.round(e.max)}function gT(i,e){return rE(i.x,e.x)&&rE(i.y,e.y)}function sE(i){return us(i.x)/us(i.y)}function oE(i,e){return i.translate===e.translate&&i.scale===e.scale&&i.originPoint===e.originPoint}class c2{constructor(){this.members=[]}add(e){nA(this.members,e),e.scheduleRender()}remove(e){if(iA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let n;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function u2(i,e,t){let n="";const r=i.x.translate/e.x,s=i.y.translate/e.y,o=t?.z||0;if((r||s||o)&&(n=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:p,rotateX:m,rotateY:v,skewX:y,skewY:A}=t;d&&(n=`perspective(${d}px) ${n}`),p&&(n+=`rotate(${p}deg) `),m&&(n+=`rotateX(${m}deg) `),v&&(n+=`rotateY(${v}deg) `),y&&(n+=`skewX(${y}deg) `),A&&(n+=`skewY(${A}deg) `)}const l=i.x.scale*e.x,u=i.y.scale*e.y;return(l!==1||u!==1)&&(n+=`scale(${l}, ${u})`),n||"none"}const Yc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},$d=typeof window<"u"&&window.MotionDebug!==void 0,L0=["","X","Y","Z"],h2={visibility:"hidden"},aE=1e3;let f2=0;function N0(i,e,t,n){const{latestValues:r}=e;r[i]&&(t[i]=r[i],e.setStaticValue(i,0),n&&(n[i]=0))}function vT(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:e}=i.options;if(!e)return;const t=w1(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=i.options;window.MotionCancelOptimisedAnimation(t,"transform",On,!(r||s))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&vT(n)}function yT({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},l=e?.()){this.id=f2++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$d&&(Yc.totalNodes=Yc.resolvedTargetDeltas=Yc.recalculatedProjection=0),this.nodes.forEach(m2),this.nodes.forEach(_2),this.nodes.forEach(A2),this.nodes.forEach(g2),$d&&window.MotionDebug.record(Yc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new $L)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new rA),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=qL(o),this.instance=o;const{layoutId:u,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||u)&&(this.isLayoutDirty=!0),i){let m;const v=()=>this.root.updateBlockedByResize=!1;i(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=e2(v,250),ev.hasAnimatedSinceResize&&(ev.hasAnimatedSinceResize=!1,this.nodes.forEach(cE))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v,hasRelativeTargetChanged:y,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||p.getDefaultTransition()||C2,{onLayoutAnimationStart:M,onLayoutAnimationComplete:S}=p.getProps(),T=!this.targetLayout||!gT(this.targetLayout,A)||y,b=!v&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||v&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,b);const B={...Z_(w,"layout"),onPlay:M,onComplete:S};(p.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||cE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ul(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S2),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&vT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lE);return}this.isUpdating||this.nodes.forEach(y2),this.isUpdating=!1,this.nodes.forEach(x2),this.nodes.forEach(d2),this.nodes.forEach(p2),this.clearAllSnapshots();const l=Uo.now();Yi.delta=Ha(0,1e3/60,l-Yi.timestamp),Yi.timestamp=l,Yi.isProcessing=!0,w0.update.process(Yi),w0.preRender.process(Yi),w0.render.process(Yi),Yi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,G_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(v2),this.sharedNodes.forEach(M2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,On.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){On.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ai(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!mT(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;o&&(l||Kc(this.latestValues)||p)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),T2(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return ai();const u=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(b2))){const{scroll:p}=this.root;p&&(af(u.x,p.offset.x),af(u.y,p.offset.y))}return u}removeElementScroll(o){var l;const u=ai();if(Ts(u,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return u;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:m,options:v}=p;p!==this.root&&m&&v.layoutScroll&&(m.wasRoot&&Ts(u,o),af(u.x,m.offset.x),af(u.y,m.offset.y))}return u}applyTransform(o,l=!1){const u=ai();Ts(u,o);for(let d=0;d<this.path.length;d++){const p=this.path[d];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&lf(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Kc(p.latestValues)&&lf(u,p.latestValues)}return Kc(this.latestValues)&&lf(u,this.latestValues),u}removeTransform(o){const l=ai();Ts(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Kc(d.latestValues))continue;o_(d.latestValues)&&d.updateSnapshot();const p=ai(),m=d.measurePageBox();Ts(p,m),tE(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return Kc(this.latestValues)&&tE(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:v}=this.options;if(!(!this.layout||!(m||v))){if(this.resolvedRelativeTargetAt=Yi.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ai(),this.relativeTargetOrigin=ai(),ap(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Ts(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ai(),this.targetWithTransforms=ai()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),BL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ts(this.target,this.layout.layoutBox),cT(this.target,this.targetDelta)):Ts(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ai(),this.relativeTargetOrigin=ai(),ap(this.relativeTargetOrigin,this.target,y.target),Ts(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$d&&Yc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||o_(this.parent.latestValues)||lT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Yi.timestamp&&(d=!1),d)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;Ts(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,y=this.treeScale.y;HL(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ai());const{target:A}=l;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ZM(this.prevProjectionDelta.x,this.projectionDelta.x),ZM(this.prevProjectionDelta.y,this.projectionDelta.y)),op(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==y||!oE(this.projectionDelta.x,this.prevProjectionDelta.x)||!oE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),$d&&Yc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=of(),this.projectionDelta=of(),this.projectionDeltaWithTransform=of()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},p={...this.latestValues},m=of();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=ai(),y=u?u.source:void 0,A=this.layout?this.layout.source:void 0,w=y!==A,M=this.getStack(),S=!M||M.members.length<=1,T=!!(w&&!S&&this.options.crossfade===!0&&!this.path.some(w2));this.animationProgress=0;let b;this.mixTargetDelta=B=>{const F=B/1e3;uE(m.x,o.x,F),uE(m.y,o.y,F),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ap(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),E2(this.relativeTarget,this.relativeTargetOrigin,v,F),b&&l2(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ai()),Ts(b,this.relativeTarget)),w&&(this.animationValues=p,n2(p,d,this.latestValues,F,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ul(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=On.update(()=>{ev.hasAnimatedSinceResize=!0,this.currentAnimation=QL(0,aE,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(aE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:p}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&xT(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||ai();const m=us(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+m;const v=us(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+v}Ts(l,u),lf(l,p),op(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new c2),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&N0("z",o,d,this.animationValues);for(let p=0;p<L0.length;p++)N0(`rotate${L0[p]}`,o,d,this.animationValues),N0(`skew${L0[p]}`,o,d,this.animationValues);o.render();for(const p in d)o.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);o.scheduleRender()}getProjectionStyles(o){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return h2;const d={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Zg(o?.pointerEvents)||"",d.transform=p?p(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Zg(o?.pointerEvents)||""),this.hasProjected&&!Kc(this.latestValues)&&(w.transform=p?p({},""):"none",this.hasProjected=!1),w}const v=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=u2(this.projectionDeltaWithTransform,this.treeScale,v),p&&(d.transform=p(v,d.transform));const{x:y,y:A}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${A.origin*100}% 0`,m.animationValues?d.opacity=m===this?(u=(l=v.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:d.opacity=m===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const w in lv){if(v[w]===void 0)continue;const{correct:M,applyTo:S}=lv[w],T=d.transform==="none"?v[w]:M(v[w],m);if(S){const b=S.length;for(let B=0;B<b;B++)d[S[B]]=T}else d[w]=T}return this.options.layoutId&&(d.pointerEvents=m===this?Zg(o?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(lE),this.root.sharedNodes.clear()}}}function d2(i){i.updateLayout()}function p2(i){var e;const t=((e=i.resumeFrom)===null||e===void 0?void 0:e.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=i.layout,{animationType:s}=i.options,o=t.source!==i.layout.source;s==="size"?Bs(m=>{const v=o?t.measuredBox[m]:t.layoutBox[m],y=us(v);v.min=n[m].min,v.max=v.min+y}):xT(s,t.layoutBox,n)&&Bs(m=>{const v=o?t.measuredBox[m]:t.layoutBox[m],y=us(n[m]);v.max=v.min+y,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[m].max=i.relativeTarget[m].min+y)});const l=of();op(l,n,t.layoutBox);const u=of();o?op(u,i.applyTransform(r,!0),t.measuredBox):op(u,n,t.layoutBox);const d=!mT(l);let p=!1;if(!i.resumeFrom){const m=i.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:y}=m;if(v&&y){const A=ai();ap(A,t.layoutBox,v.layoutBox);const w=ai();ap(w,n,y.layoutBox),gT(A,w)||(p=!0),m.options.layoutRoot&&(i.relativeTarget=w,i.relativeTargetOrigin=A,i.relativeParent=m)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:p})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function m2(i){$d&&Yc.totalNodes++,i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function g2(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function v2(i){i.clearSnapshot()}function lE(i){i.clearMeasurements()}function y2(i){i.isLayoutDirty=!1}function x2(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function cE(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function _2(i){i.resolveTargetDelta()}function A2(i){i.calcProjection()}function S2(i){i.resetSkewAndRotation()}function M2(i){i.removeLeadSnapshot()}function uE(i,e,t){i.translate=Jn(e.translate,0,t),i.scale=Jn(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function hE(i,e,t,n){i.min=Jn(e.min,t.min,n),i.max=Jn(e.max,t.max,n)}function E2(i,e,t,n){hE(i.x,e.x,t.x,n),hE(i.y,e.y,t.y,n)}function w2(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const C2={duration:.45,ease:[.4,0,.1,1]},fE=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),dE=fE("applewebkit/")&&!fE("chrome/")?Math.round:ls;function pE(i){i.min=dE(i.min),i.max=dE(i.max)}function T2(i){pE(i.x),pE(i.y)}function xT(i,e,t){return i==="position"||i==="preserve-aspect"&&!PL(sE(e),sE(t),.2)}function b2(i){var e;return i!==i.root&&((e=i.scroll)===null||e===void 0?void 0:e.wasRoot)}const R2=yT({attachResizeListener:(i,e)=>Mp(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),F0={current:void 0},_T=yT({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!F0.current){const i=new R2({});i.mount(window),i.setOptions({layoutScroll:!0}),F0.current=i}return F0.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),P2={pan:{Feature:XL},drag:{Feature:jL,ProjectionNode:_T,MeasureLayout:fT}};function mE(i,e,t){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=n[r];s&&On.postRender(()=>s(e,Hp(e)))}class B2 extends Gl{mount(){const{current:e}=this.node;e&&(this.unmount=PI(e,t=>(mE(this.node,t,"Start"),n=>mE(this.node,n,"End"))))}unmount(){}}class I2 extends Gl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kp(Mp(this.node.current,"focus",()=>this.onFocus()),Mp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function gE(i,e,t){const{props:n}=i;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=n[r];s&&On.postRender(()=>s(e,Hp(e)))}class D2 extends Gl{mount(){const{current:e}=this.node;e&&(this.unmount=LI(e,t=>(gE(this.node,t,"Start"),(n,{success:r})=>gE(this.node,n,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const l_=new WeakMap,U0=new WeakMap,L2=i=>{const e=l_.get(i.target);e&&e(i)},N2=i=>{i.forEach(L2)};function F2({root:i,...e}){const t=i||document;U0.has(t)||U0.set(t,{});const n=U0.get(t),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(N2,{root:i,...e})),n[r]}function U2(i,e,t){const n=F2(e);return l_.set(i,t),n.observe(i),()=>{l_.delete(i),n.unobserve(i)}}const O2={some:0,all:1};class k2 extends Gl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:O2[r]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),v=d?p:m;v&&v(u)};return U2(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(H2(e,t))&&this.startObserver()}unmount(){}}function H2({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const z2={inView:{Feature:k2},tap:{Feature:D2},focus:{Feature:I2},hover:{Feature:B2}},G2={layout:{ProjectionNode:_T,MeasureLayout:fT}},c_={current:null},AT={current:!1};function V2(){if(AT.current=!0,!!U_)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>c_.current=i.matches;i.addListener(e),e()}else c_.current=!1}const W2=[...X1,lr,Ol],j2=i=>W2.find(j1(i)),vE=new WeakMap;function X2(i,e,t){for(const n in e){const r=e[n],s=t[n];if(cr(r))i.addValue(n,r);else if(cr(s))i.addValue(n,Ap(r,{owner:i}));else if(s!==r)if(i.hasValue(n)){const o=i.getValue(n);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=i.getStaticValue(n);i.addValue(n,Ap(o!==void 0?o:r,{owner:i}))}}for(const n in t)e[n]===void 0&&i.removeValue(n);return e}const yE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class J2{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=uA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Uo.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,On.render(this.render,!1,!0))};const{latestValues:u,renderState:d,onUpdate:p}=o;this.onUpdate=p,this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=ly(t),this.isVariantNode=e1(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in v){const A=v[y];u[y]!==void 0&&cr(A)&&A.set(u[y],!1)}}mount(e){this.current=e,vE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),AT.current||V2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:c_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){vE.delete(this.current),this.projection&&this.projection.unmount(),Ul(this.notifyUpdate),Ul(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Eu.has(e),r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&On.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gf){const t=gf[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ai()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<yE.length;n++){const r=yE[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=X2(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=Ap(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(V1(r)||L1(r))?r=parseFloat(r):!j2(r)&&Ol.test(t)&&(r=H1(e,t)),this.setBaseTarget(e,cr(r)?r.get():r)),cr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=W_(this.props,n,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!cr(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new rA),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class ST extends J2{constructor(){super(...arguments),this.KeyframeResolver=J1}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;cr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function K2(i){return window.getComputedStyle(i)}class Y2 extends ST{constructor(){super(...arguments),this.type="html",this.renderInstance=c1}readValueFromInstance(e,t){if(Eu.has(t)){const n=cA(t);return n&&n.default||0}else{const n=K2(e),r=(o1(t)?n.getPropertyValue(t):n[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return uT(e,t)}build(e,t,n){J_(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return q_(e,t,n)}}class Q2 extends ST{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ai}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Eu.has(t)){const n=cA(t);return n&&n.default||0}return t=u1.has(t)?t:z_(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return d1(e,t,n)}build(e,t,n){K_(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){h1(e,t,n,r)}mount(e){this.isSVGTag=Q_(e.tagName),super.mount(e)}}const q2=(i,e)=>V_(i)?new Q2(e):new Y2(e,{allowProjection:i!==Z.Fragment}),Z2=MI({...AL,...z2,...P2,...G2},q2),Nn=OB(Z2);function xE(i){const{inverted:e=!1,enabled:t=!0}=i,n=Z.useRef(null);return Z.useEffect(()=>{const r=n.current;if(!r)return;if(!t){r.pause();return}const s=.02;let o=0,l=s,u=s;const d=.14,p=()=>{r.pause(),u=s,l=s,r.currentTime=s},m=w=>{const M=Math.max(1,window.innerWidth),S=Math.max(0,Math.min(1,w/M)),T=r.duration;if(!T||Number.isNaN(T))return;const b=Math.max(0,T-2*s);l=s+S*b},v=w=>m(w.clientX),y=w=>{w.touches.length>0&&m(w.touches[0].clientX)},A=()=>{if(!r.duration||Number.isNaN(r.duration)){o=requestAnimationFrame(A);return}r.paused||r.pause(),u+=(l-u)*d,r.currentTime=u,o=requestAnimationFrame(A)};return r.addEventListener("loadedmetadata",p),r.readyState>=1&&p(),window.addEventListener("mousemove",v,{passive:!0}),window.addEventListener("touchstart",y,{passive:!0}),window.addEventListener("touchmove",y,{passive:!0}),o=requestAnimationFrame(A),()=>{cancelAnimationFrame(o),window.removeEventListener("mousemove",v),window.removeEventListener("touchstart",y),window.removeEventListener("touchmove",y),r.removeEventListener("loadedmetadata",p)}},[t]),D.jsx("video",{ref:n,className:`bgVideo${e?" bgVideo--inverted":""}${t?"":" bgVideo--hidden"}`,src:"./wallpaper-pingpong.mp4",muted:!0,playsInline:!0,preload:"auto"})}function $2(i){const{positioning:e,links:t,onNavHome:n,showBack:r,wallpaperEnabled:s,onToggleWallpaper:o}=i;return D.jsxs("header",{className:"topbar",children:[D.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[D.jsx("div",{className:"kicker",onClick:n,style:{cursor:"pointer"},children:e}),r?D.jsx("button",{className:"navBtn",type:"button",onClick:n,children:"Back to Hall"}):null]}),D.jsx("div",{className:"topbarCenter",children:D.jsx("button",{className:`pill lightToggle${s?" is-on":" is-off"}`,type:"button",onClick:o,"aria-pressed":s,"aria-label":"Toggle wallpaper",children:D.jsxs("svg",{className:"bulbIcon",viewBox:"0 0 24 24","aria-hidden":"true",children:[D.jsx("path",{className:"bulbGlass",d:"M12 3a6.5 6.5 0 0 0-4.46 11.23c.84.78 1.46 1.77 1.74 2.87h5.44c.28-1.1.9-2.09 1.74-2.87A6.5 6.5 0 0 0 12 3z"}),D.jsx("path",{className:"bulbBase",d:"M9.4 18.3h5.2v1.5H9.4zm.6 2.4h4v1.2h-4z"}),D.jsx("path",{className:"bulbRay r1",d:"M12 1.4v1.9"}),D.jsx("path",{className:"bulbRay r2",d:"m4.9 4.3 1.3 1.3"}),D.jsx("path",{className:"bulbRay r3",d:"M1.6 12h1.9"}),D.jsx("path",{className:"bulbRay r4",d:"m19.1 4.3-1.3 1.3"}),D.jsx("path",{className:"bulbRay r5",d:"M20.5 12h1.9"})]})})}),D.jsx("nav",{className:"pills","aria-label":"Primary",children:t.map(l=>D.jsx("a",{className:"pill",href:l.href,target:"_blank",rel:"noreferrer",children:l.label},l.label))})]})}const No=[.22,.61,.36,1],eg={hidden:{opacity:0,y:14,filter:"blur(10px)"},show:{opacity:1,y:0,filter:"blur(0px)",transition:{duration:.7,ease:No}},exit:{opacity:0,y:-10,filter:"blur(10px)",transition:{duration:.55,ease:No}}};function eN(i){const{door:e,count:t,onOpen:n}=i;return D.jsxs(Nn.button,{type:"button",className:"card",onClick:n,whileHover:{y:-2,transition:{duration:.25,ease:No}},whileTap:{scale:.99},style:{position:"relative",overflow:"hidden"},children:[D.jsx("div",{className:"cardTitle",style:{fontSize:24},children:e.title}),D.jsx("div",{className:"cardContext",children:e.thesis}),D.jsxs("div",{className:"cardProof",style:{marginTop:14},children:[t," exhibits"]})]})}function tN(i){const{content:e,onOpenDoor:t}=i;return D.jsx("section",{className:"hall","aria-label":"Door Hall",children:e.doors.map(n=>D.jsx(eN,{door:n,count:e.exhibits[n.key].length,onOpen:()=>t(n.key)},n.key))})}function nN(i){const{exhibit:e,onOpen:t,layoutId:n}=i;return D.jsxs(Nn.button,{type:"button",className:"card",onClick:t,whileHover:{y:-2,transition:{duration:.25,ease:No}},whileTap:{scale:.99},layoutId:n,children:[D.jsx("div",{className:"cardTitle",children:e.title}),D.jsx("div",{className:"cardContext",children:e.context}),D.jsx("div",{className:"cardProof",children:e.proof})]})}function iN(i){const{content:e,doorKey:t,onOpenExhibit:n}=i,r=e.doors.find(o=>o.key===t),s=e.exhibits[t];return D.jsxs("section",{"aria-label":"Section Gallery",children:[D.jsxs("div",{className:"sectionHead",children:[D.jsxs("div",{className:"breadcrumb",children:["Hall  ",r?.title]}),D.jsx("div",{className:"sectionTitle",children:r?.title}),D.jsx("div",{className:"sectionThesis",children:r?.thesis})]}),D.jsx("div",{className:"gallery",children:s.map(o=>D.jsx(nN,{exhibit:o,layoutId:`exhibit-${o.id}`,onOpen:()=>n(o.id)},o.id))})]})}function rN(i){const{open:e,exhibit:t,onClose:n,onPrev:r,onNext:s,onArtifactAction:o}=i,l=t?.id==="merch-2",[u,d]=Z.useState(null);return D.jsx(lu,{children:e&&t?D.jsxs(D.Fragment,{children:[D.jsx(Nn.div,{className:"modalOverlay",initial:{opacity:0},animate:{opacity:1,transition:{duration:.25,ease:No}},exit:{opacity:0,transition:{duration:.2,ease:No}},onMouseDown:p=>{p.target===p.currentTarget&&n()},children:D.jsxs(Nn.div,{className:"modal",layoutId:`exhibit-${t.id}`,children:[D.jsxs("div",{className:"modalHead",children:[D.jsxs("div",{children:[D.jsx("div",{className:"modalTitle",children:t.title}),D.jsx("div",{className:"modalContext",children:t.context})]}),D.jsx("button",{className:"iconBtn",type:"button",onClick:n,"aria-label":"Close",children:""})]}),D.jsxs("div",{className:"modalBody",children:[l?D.jsx(sN,{exhibit:t,onOpenImage:d}):D.jsxs(D.Fragment,{children:[D.jsx("div",{className:"blockTitle",children:"Problem"}),D.jsx("div",{children:t.problem}),D.jsx("div",{className:"blockTitle",children:"Approach"}),D.jsx("ul",{children:t.approach.map((p,m)=>D.jsx("li",{children:p},m))}),D.jsx("div",{className:"blockTitle",children:"Impact"}),D.jsx("ul",{children:t.impact.map((p,m)=>D.jsx("li",{children:p},m))}),D.jsx("div",{className:"blockTitle",children:"Skills used"}),D.jsx("div",{children:t.skills}),D.jsx("div",{className:"blockTitle",children:"Artifacts"}),D.jsx("div",{className:"artifacts",children:t.artifacts.map(p=>p.actionId?D.jsx("button",{className:"artifact",type:"button",onClick:()=>o?.(p),children:p.label},p.label):D.jsx("a",{className:"artifact",href:p.url,target:"_blank",rel:"noreferrer",children:p.label},p.label))})]}),D.jsxs("div",{className:`footerRow${l?" footerRow--retailVignette":""}`,children:[D.jsx("button",{className:"navBtn",type:"button",onClick:r,children:"Prev"}),D.jsx("button",{className:"navBtn",type:"button",onClick:s,children:"Next"})]})]})]})}),D.jsx(lu,{children:u?D.jsx(Nn.div,{className:"proofLightboxOverlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onMouseDown:p=>{p.target===p.currentTarget&&d(null)},children:D.jsxs(Nn.div,{className:"proofLightboxPanel",initial:{scale:.98},animate:{scale:1},exit:{scale:.98},children:[D.jsx("button",{className:"iconBtn proofLightboxClose",type:"button",onClick:()=>d(null),"aria-label":"Close enlarged feedback image",children:""}),D.jsx("img",{className:"proofLightboxImage",src:u,alt:"Enlarged customer feedback screenshot"})]})}):null})]}):null})}function sN(i){const{exhibit:e,onOpenImage:t}=i,n="/assets/cartier-rogue/merch/Bloomingdales_Customer_Feedback_Crop.jpeg";return D.jsx("section",{className:"retailVignette","aria-label":"Retail clienteling case vignette",children:D.jsxs("div",{className:"retailVignetteGrid",children:[D.jsxs("div",{className:"retailVignetteCopy",children:[D.jsx("div",{className:"blockTitle",children:"Context"}),D.jsx("p",{className:"retailVignetteText",children:"I worked in frontline menswear retail where execution quality directly shaped trust, conversion, and repeat intent. This experience sharpened my ability to resolve fit issues, guide product decisions, and deliver calm, high-standard service in a fast-moving luxury floor environment."}),D.jsx("div",{className:"blockTitle",children:"What I Brought To The Floor"}),D.jsxs("ul",{className:"retailVignetteList",children:[D.jsx("li",{children:"Clienteling and fit-resolution support"}),D.jsx("li",{children:"Product guidance and styling-oriented selling"}),D.jsx("li",{children:"Service recovery and customer reassurance"}),D.jsx("li",{children:"Cross-sell support without breaking trust"})]}),D.jsx("div",{className:"blockTitle",children:"Retail Strengths"}),D.jsx("div",{className:"retailVignetteChips",children:["Clienteling","Fit Resolution","Service Recovery","Luxury Floor Execution","Cross-Sell Support","Customer Trust"].map(r=>D.jsx("span",{className:"retailVignetteChip",children:r},r))}),D.jsx("div",{className:"blockTitle",children:"Category Exposure"}),D.jsx("p",{className:"retailVignetteText",children:"Menswear tailoring, outerwear, footwear, accessories, and fragrance."})]}),D.jsxs("aside",{className:"retailProofCard","aria-label":"Bloomingdale's customer feedback proof",children:[D.jsx("button",{className:"retailProofImageBtn",type:"button",onClick:()=>t(n),"aria-label":"Open customer feedback image in larger view",children:D.jsx("img",{className:"retailProofImage",src:n,alt:"Customer feedback screenshot from Bloomingdales Mens floor support",loading:"lazy"})}),D.jsx("p",{className:"retailProofCaption",children:"Customer feedback received during Bloomingdales Mens floor support (attached image)."}),D.jsx("p",{className:"retailProofLine",children:"The note reflects service clarity, follow-through, and customer trust."})]})]})})}function pA({open:i,text:e="ENTERING CARTIER  MAYBACH"}){const[t,n]=Z.useState(!1);return D.jsx(lu,{children:i?D.jsx(Nn.div,{className:"maybachLoader",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:[.22,.61,.36,1]},children:D.jsxs("div",{className:"maybachLoader__center",children:[D.jsxs("div",{className:"maybachLoader__rings","aria-hidden":"true",children:[D.jsx(Nn.span,{className:"maybachLoader__ring",animate:{scale:[.88,1.12],opacity:[.2,0]},transition:{duration:2.2,ease:"easeOut",repeat:1/0}}),D.jsx(Nn.span,{className:"maybachLoader__ring",animate:{scale:[.86,1.16],opacity:[.16,0]},transition:{duration:2.6,ease:"easeOut",repeat:1/0,delay:.7}})]}),D.jsx(Nn.div,{className:"maybachLoader__logo",animate:{scale:[1,1.05,1],opacity:[.82,1,.82]},transition:{duration:1.65,ease:"easeInOut",repeat:1/0},children:t?D.jsx("span",{className:"maybachLoader__fallback",children:"MAYBACH"}):D.jsx("img",{src:"/branding/maybach-logo.png",alt:"Maybach",onError:()=>n(!0)})}),D.jsx("div",{className:"maybachLoader__text",children:e})]})}):null})}async function oN(){const i=await fetch("./content.json",{cache:"no-store"});if(!i.ok)throw new Error(`Failed to load content.json: ${i.status}`);return await i.json()}function aN(){const i=D_(),[e,t]=Z.useState(null),[n,r]=Z.useState("landing"),[s,o]=Z.useState("ops"),[l,u]=Z.useState(!1),[d,p]=Z.useState(null),[m,v]=Z.useState(!0),[y,A]=Z.useState(!1),[w,M]=Z.useState(!1),S=Z.useRef(null),T=Z.useRef(null);Z.useEffect(()=>{oN().then(t).catch(he=>console.error(he))},[]),Z.useEffect(()=>{const he=xe=>{xe.key==="Escape"&&u(!1)};return window.addEventListener("keydown",he),()=>window.removeEventListener("keydown",he)},[]);const b=Z.useMemo(()=>e?e.exhibits[s]:[],[e,s]),B=Z.useMemo(()=>!e||!d?null:e.exhibits[s].find(he=>he.id===d)??null,[e,s,d]),F=he=>{o(he),r("section")},N=he=>{p(he),u(!0)},z=()=>u(!1),G=()=>{u(!1),r("hall")},U=()=>{u(!1),r("landing")},L=he=>{if(he.actionId==="cartier_maybach_route"){if(y||w)return;u(!1),A(!0),S.current=window.setTimeout(()=>{i("/cartier-maybach",{state:{fromMaybachLoader:!0}}),A(!1),S.current=null},950);return}if(he.actionId==="cartier_rogue_route"){if(y||w)return;u(!1),M(!0),T.current=window.setTimeout(()=>{i("/cartier-rogue",{state:{fromRogueTransition:!0}}),M(!1),T.current=null},840)}};Z.useEffect(()=>()=>{S.current!==null&&window.clearTimeout(S.current),T.current!==null&&window.clearTimeout(T.current)},[]);const j=()=>{if(!d||b.length===0)return;const xe=(b.findIndex(me=>me.id===d)-1+b.length)%b.length;p(b[xe].id)},se=()=>{if(!d||b.length===0)return;const xe=(b.findIndex(me=>me.id===d)+1)%b.length;p(b[xe].id)};if(!e)return D.jsxs("div",{className:"app",children:[D.jsx(xE,{enabled:m}),D.jsx("div",{className:"shell",children:D.jsx("main",{className:"stage",children:D.jsx("div",{className:"panel",style:{padding:40,textAlign:"center"},children:"Loading"})})})]});const ie=n==="section";return D.jsxs("div",{className:"app",children:[D.jsx(xE,{enabled:m}),D.jsxs("div",{className:"shell",children:[D.jsx($2,{positioning:e.site.positioning,links:e.site.links,onNavHome:()=>n==="section"?G():U(),showBack:ie,wallpaperEnabled:m,onToggleWallpaper:()=>v(he=>!he)}),D.jsx("main",{className:"stage",children:D.jsxs(lu,{mode:"wait",children:[n==="landing"?D.jsx("div",{className:"panel",children:D.jsxs(Nn.div,{className:"landing",variants:eg,initial:"hidden",animate:"show",exit:"exit",children:[D.jsx("h1",{className:"name",children:e.site.name}),D.jsx("p",{className:"value",children:"B.F.Tech, NIFT Delhi | MPS FM, Parsons School of Design, TNS."}),D.jsx(Nn.button,{type:"button",className:"enter",onClick:()=>r("hall"),whileHover:{y:-1},whileTap:{scale:.99},transition:{duration:.25,ease:No},children:e.site.cta})]},"landing")}):null,n==="hall"?D.jsx("div",{className:"panel panel--hall",children:D.jsx(Nn.div,{variants:eg,initial:"hidden",animate:"show",exit:"exit",children:D.jsx(tN,{content:e,onOpenDoor:F})},"hall")}):null,n==="section"?D.jsx("div",{className:`panel panel--content panel--${n}`,children:D.jsxs(Nn.div,{className:`contentShell contentShell--${n}${s==="merch"&&e.exhibits.merch.length<=2?" contentShell--compact":""}`,variants:eg,initial:"hidden",animate:"show",exit:"exit",layout:!0,transition:{layout:{duration:.32,ease:No}},children:[D.jsx("div",{className:"glassBackdrop","aria-hidden":"true"}),D.jsx("div",{className:"contentShellInner",children:D.jsx(lu,{mode:"wait",children:n==="section"?D.jsxs(Nn.div,{variants:eg,initial:"hidden",animate:"show",exit:"exit",children:[D.jsx(iN,{content:e,doorKey:s,onOpenExhibit:N}),D.jsxs("div",{style:{padding:"0 18px 22px",display:"flex",justifyContent:"space-between",gap:10},children:[D.jsx("button",{className:"navBtn",type:"button",onClick:G,children:"Back"}),D.jsx("button",{className:"navBtn",type:"button",onClick:()=>r("landing"),children:"Landing"})]})]},"section-content"):null})})]})}):null]})}),D.jsx(rN,{open:l,exhibit:B,onClose:z,onPrev:j,onNext:se,onArtifactAction:L})]}),D.jsx(pA,{open:y}),D.jsx(lu,{children:w?D.jsx(Nn.div,{className:"rogueTransition",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.55,ease:No},children:D.jsxs(Nn.div,{className:"rogueTransitionInner",initial:{opacity:0,scale:1.02},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.99},transition:{duration:.6,ease:No},children:[D.jsx("div",{className:"rogueTransitionKicker",children:"Entering"}),D.jsx("div",{className:"rogueTransitionTitle",children:"Cartier Rogue"})]})}):null})]})}const zp="175",Qc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},MT=0,u_=1,ET=2,lN=3,wT=0,hy=1,lp=2,ho=3,zo=0,br=1,po=2,Fa=0,uu=1,h_=2,f_=3,d_=4,CT=5,Il=100,TT=101,bT=102,RT=103,PT=104,BT=200,IT=201,DT=202,LT=203,pv=204,mv=205,NT=206,FT=207,UT=208,OT=209,kT=210,HT=211,zT=212,GT=213,VT=214,gv=0,vv=1,yv=2,pu=3,xv=4,_v=5,Av=6,Sv=7,Gp=0,WT=1,jT=2,Oo=0,XT=1,JT=2,KT=3,mA=4,YT=5,QT=6,qT=7,p_="attached",ZT="detached",fy=300,za=301,kl=302,Ep=303,wp=304,Df=306,Hl=1e3,os=1001,yf=1002,Oi=1003,dy=1004,cN=1004,nu=1005,uN=1005,li=1006,ff=1007,hN=1007,Ds=1008,fN=1008,go=1009,gA=1010,vA=1011,xf=1012,py=1013,Ga=1014,jr=1015,Lf=1016,my=1017,gy=1018,_f=1020,yA=35902,xA=1021,_A=1022,ur=1023,AA=1024,SA=1025,Af=1026,Sf=1027,vy=1028,Vp=1029,MA=1030,yy=1031,dN=1032,xy=1033,cp=33776,up=33777,hp=33778,fp=33779,Mv=35840,Ev=35841,wv=35842,Cv=35843,Tv=36196,bv=37492,Rv=37496,Pv=37808,Bv=37809,Iv=37810,Dv=37811,Lv=37812,Nv=37813,Fv=37814,Uv=37815,Ov=37816,kv=37817,Hv=37818,zv=37819,Gv=37820,Vv=37821,dp=36492,Wv=36494,jv=36495,EA=36283,Xv=36284,Jv=36285,Kv=36286,$T=2200,eb=2201,tb=2202,Mf=2300,Ef=2301,tv=2302,iu=2400,ru=2401,Cp=2402,_y=2500,wA=2501,nb=0,CA=1,Yv=2,ib=3200,rb=3201,pN=3202,mN=3203,Vl=0,sb=1,Pa="",Vr="srgb",mu="srgb-linear",Tp="linear",wn="srgb",gN=0,Zc=7680,vN=7681,yN=7682,xN=7683,_N=34055,AN=34056,SN=5386,MN=512,EN=513,wN=514,CN=515,TN=516,bN=517,RN=518,m_=519,ob=512,ab=513,lb=514,TA=515,cb=516,ub=517,hb=518,fb=519,bp=35044,PN=35048,BN=35040,IN=35045,DN=35049,LN=35041,NN=35046,FN=35050,UN=35042,ON="100",g_="300 es",mo=2e3,Rp=2001,kN={COMPUTE:"compute",RENDER:"render"};let Go=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const sr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _E=1234567;const hu=Math.PI/180,wf=180/Math.PI;function cs(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(sr[i&255]+sr[i>>8&255]+sr[i>>16&255]+sr[i>>24&255]+"-"+sr[e&255]+sr[e>>8&255]+"-"+sr[e>>16&15|64]+sr[e>>24&255]+"-"+sr[t&63|128]+sr[t>>8&255]+"-"+sr[t>>16&255]+sr[t>>24&255]+sr[n&255]+sr[n>>8&255]+sr[n>>16&255]+sr[n>>24&255]).toLowerCase()}function Wt(i,e,t){return Math.max(e,Math.min(t,i))}function bA(i,e){return(i%e+e)%e}function HN(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function zN(i,e,t){return i!==e?(t-i)/(e-i):0}function pp(i,e,t){return(1-t)*i+t*e}function GN(i,e,t,n){return pp(i,e,1-Math.exp(-t*n))}function VN(i,e=1){return e-Math.abs(bA(i,e*2)-e)}function WN(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function jN(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function XN(i,e){return i+Math.floor(Math.random()*(e-i+1))}function JN(i,e){return i+Math.random()*(e-i)}function KN(i){return i*(.5-Math.random())}function YN(i){i!==void 0&&(_E=i);let e=_E+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function QN(i){return i*hu}function qN(i){return i*wf}function ZN(i){return(i&i-1)===0&&i!==0}function $N(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function eF(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function tF(i,e,t,n,r){const s=Math.cos,o=Math.sin,l=s(t/2),u=o(t/2),d=s((e+n)/2),p=o((e+n)/2),m=s((e-n)/2),v=o((e-n)/2),y=s((n-e)/2),A=o((n-e)/2);switch(r){case"XYX":i.set(l*p,u*m,u*v,l*d);break;case"YZY":i.set(u*v,l*p,u*m,l*d);break;case"ZXZ":i.set(u*m,u*v,l*p,l*d);break;case"XZX":i.set(l*p,u*A,u*y,l*d);break;case"YXY":i.set(u*y,l*p,u*A,l*d);break;case"ZYZ":i.set(u*A,u*y,l*p,l*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Tr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function qt(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const db={DEG2RAD:hu,RAD2DEG:wf,generateUUID:cs,clamp:Wt,euclideanModulo:bA,mapLinear:HN,inverseLerp:zN,lerp:pp,damp:GN,pingpong:VN,smoothstep:WN,smootherstep:jN,randInt:XN,randFloat:JN,randFloatSpread:KN,seededRandom:YN,degToRad:QN,radToDeg:qN,isPowerOfTwo:ZN,ceilPowerOfTwo:$N,floorPowerOfTwo:eF,setQuaternionFromProperEuler:tF,normalize:qt,denormalize:Tr};class Le{constructor(e=0,t=0){Le.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Wt(this.x,e.x,t.x),this.y=Wt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Wt(this.x,e,t),this.y=Wt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Wt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Wt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Xt{constructor(e,t,n,r,s,o,l,u,d){Xt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,u,d)}set(e,t,n,r,s,o,l,u,d){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=s,p[5]=u,p[6]=n,p[7]=o,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[3],u=n[6],d=n[1],p=n[4],m=n[7],v=n[2],y=n[5],A=n[8],w=r[0],M=r[3],S=r[6],T=r[1],b=r[4],B=r[7],F=r[2],N=r[5],z=r[8];return s[0]=o*w+l*T+u*F,s[3]=o*M+l*b+u*N,s[6]=o*S+l*B+u*z,s[1]=d*w+p*T+m*F,s[4]=d*M+p*b+m*N,s[7]=d*S+p*B+m*z,s[2]=v*w+y*T+A*F,s[5]=v*M+y*b+A*N,s[8]=v*S+y*B+A*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],p=e[8];return t*o*p-t*l*d-n*s*p+n*l*u+r*s*d-r*o*u}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],p=e[8],m=p*o-l*d,v=l*u-p*s,y=d*s-o*u,A=t*m+n*v+r*y;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/A;return e[0]=m*w,e[1]=(r*d-p*n)*w,e[2]=(l*n-r*o)*w,e[3]=v*w,e[4]=(p*t-r*u)*w,e[5]=(r*s-l*t)*w,e[6]=y*w,e[7]=(n*u-d*t)*w,e[8]=(o*t-n*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,l){const u=Math.cos(s),d=Math.sin(s);return this.set(n*u,n*d,-n*(u*o+d*l)+o+e,-r*d,r*u,-r*(-d*o+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(O0.makeScale(e,t)),this}rotate(e){return this.premultiply(O0.makeRotation(-e)),this}translate(e,t){return this.premultiply(O0.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const O0=new Xt;function pb(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const nF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function cf(i,e){return new nF[i](e)}function Pp(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function mb(){const i=Pp("canvas");return i.style.display="block",i}const AE={};function nv(i){i in AE||(AE[i]=!0,console.warn(i))}function iF(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function rF(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function sF(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const SE=new Xt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ME=new Xt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function oF(){const i={enabled:!0,workingColorSpace:mu,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===wn&&(r.r=Ua(r.r),r.g=Ua(r.g),r.b=Ua(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===wn&&(r.r=df(r.r),r.g=df(r.g),r.b=df(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Pa?Tp:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[mu]:{primaries:e,whitePoint:n,transfer:Tp,toXYZ:SE,fromXYZ:ME,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Vr},outputColorSpaceConfig:{drawingBufferColorSpace:Vr}},[Vr]:{primaries:e,whitePoint:n,transfer:wn,toXYZ:SE,fromXYZ:ME,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Vr}}}),i}const gn=oF();function Ua(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function df(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Nh;class gb{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Nh===void 0&&(Nh=Pp("canvas")),Nh.width=e.width,Nh.height=e.height;const r=Nh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Nh}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Pp("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Ua(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ua(t[n]/255)*255):t[n]=Ua(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let aF=0;class Ll{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:aF++}),this.uuid=cs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(k0(r[o].image)):s.push(k0(r[o]))}else s=k0(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function k0(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?gb.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let lF=0;class Gn extends Go{constructor(e=Gn.DEFAULT_IMAGE,t=Gn.DEFAULT_MAPPING,n=os,r=os,s=li,o=Ds,l=ur,u=go,d=Gn.DEFAULT_ANISOTROPY,p=Pa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:lF++}),this.uuid=cs(),this.name="",this.source=new Ll(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Le(0,0),this.repeat=new Le(1,1),this.center=new Le(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Xt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==fy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Hl:e.x=e.x-Math.floor(e.x);break;case os:e.x=e.x<0?0:1;break;case yf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Hl:e.y=e.y-Math.floor(e.y);break;case os:e.y=e.y<0?0:1;break;case yf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Gn.DEFAULT_IMAGE=null;Gn.DEFAULT_MAPPING=fy;Gn.DEFAULT_ANISOTROPY=1;class yn{constructor(e=0,t=0,n=0,r=1){yn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const u=e.elements,d=u[0],p=u[4],m=u[8],v=u[1],y=u[5],A=u[9],w=u[2],M=u[6],S=u[10];if(Math.abs(p-v)<.01&&Math.abs(m-w)<.01&&Math.abs(A-M)<.01){if(Math.abs(p+v)<.1&&Math.abs(m+w)<.1&&Math.abs(A+M)<.1&&Math.abs(d+y+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(d+1)/2,B=(y+1)/2,F=(S+1)/2,N=(p+v)/4,z=(m+w)/4,G=(A+M)/4;return b>B&&b>F?b<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(b),r=N/n,s=z/n):B>F?B<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(B),n=N/r,s=G/r):F<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(F),n=z/s,r=G/s),this.set(n,r,s,t),this}let T=Math.sqrt((M-A)*(M-A)+(m-w)*(m-w)+(v-p)*(v-p));return Math.abs(T)<.001&&(T=1),this.x=(M-A)/T,this.y=(m-w)/T,this.z=(v-p)/T,this.w=Math.acos((d+y+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Wt(this.x,e.x,t.x),this.y=Wt(this.y,e.y,t.y),this.z=Wt(this.z,e.z,t.z),this.w=Wt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Wt(this.x,e,t),this.y=Wt(this.y,e,t),this.z=Wt(this.z,e,t),this.w=Wt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Wt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ay extends Go{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new yn(0,0,e,t),this.scissorTest=!1,this.viewport=new yn(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:li,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Gn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let l=0;l<o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Ll(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ls extends Ay{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Wp extends Gn{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Oi,this.minFilter=Oi,this.wrapR=os,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class cF extends Ls{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Wp(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Sy extends Gn{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Oi,this.minFilter=Oi,this.wrapR=os,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class uF extends Ls{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Sy(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ki{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,l){let u=n[r+0],d=n[r+1],p=n[r+2],m=n[r+3];const v=s[o+0],y=s[o+1],A=s[o+2],w=s[o+3];if(l===0){e[t+0]=u,e[t+1]=d,e[t+2]=p,e[t+3]=m;return}if(l===1){e[t+0]=v,e[t+1]=y,e[t+2]=A,e[t+3]=w;return}if(m!==w||u!==v||d!==y||p!==A){let M=1-l;const S=u*v+d*y+p*A+m*w,T=S>=0?1:-1,b=1-S*S;if(b>Number.EPSILON){const F=Math.sqrt(b),N=Math.atan2(F,S*T);M=Math.sin(M*N)/F,l=Math.sin(l*N)/F}const B=l*T;if(u=u*M+v*B,d=d*M+y*B,p=p*M+A*B,m=m*M+w*B,M===1-l){const F=1/Math.sqrt(u*u+d*d+p*p+m*m);u*=F,d*=F,p*=F,m*=F}}e[t]=u,e[t+1]=d,e[t+2]=p,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,r,s,o){const l=n[r],u=n[r+1],d=n[r+2],p=n[r+3],m=s[o],v=s[o+1],y=s[o+2],A=s[o+3];return e[t]=l*A+p*m+u*y-d*v,e[t+1]=u*A+p*v+d*m-l*y,e[t+2]=d*A+p*y+l*v-u*m,e[t+3]=p*A-l*m-u*v-d*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,u=Math.sin,d=l(n/2),p=l(r/2),m=l(s/2),v=u(n/2),y=u(r/2),A=u(s/2);switch(o){case"XYZ":this._x=v*p*m+d*y*A,this._y=d*y*m-v*p*A,this._z=d*p*A+v*y*m,this._w=d*p*m-v*y*A;break;case"YXZ":this._x=v*p*m+d*y*A,this._y=d*y*m-v*p*A,this._z=d*p*A-v*y*m,this._w=d*p*m+v*y*A;break;case"ZXY":this._x=v*p*m-d*y*A,this._y=d*y*m+v*p*A,this._z=d*p*A+v*y*m,this._w=d*p*m-v*y*A;break;case"ZYX":this._x=v*p*m-d*y*A,this._y=d*y*m+v*p*A,this._z=d*p*A-v*y*m,this._w=d*p*m+v*y*A;break;case"YZX":this._x=v*p*m+d*y*A,this._y=d*y*m+v*p*A,this._z=d*p*A-v*y*m,this._w=d*p*m-v*y*A;break;case"XZY":this._x=v*p*m-d*y*A,this._y=d*y*m-v*p*A,this._z=d*p*A+v*y*m,this._w=d*p*m+v*y*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],l=t[5],u=t[9],d=t[2],p=t[6],m=t[10],v=n+l+m;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(p-u)*y,this._y=(s-d)*y,this._z=(o-r)*y}else if(n>l&&n>m){const y=2*Math.sqrt(1+n-l-m);this._w=(p-u)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+d)/y}else if(l>m){const y=2*Math.sqrt(1+l-n-m);this._w=(s-d)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(u+p)/y}else{const y=2*Math.sqrt(1+m-n-l);this._w=(o-r)/y,this._x=(s+d)/y,this._y=(u+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Wt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,l=t._x,u=t._y,d=t._z,p=t._w;return this._x=n*p+o*l+r*d-s*u,this._y=r*p+o*u+s*l-n*d,this._z=s*p+o*d+n*u-r*l,this._w=o*p-n*l-r*u-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+n*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*n+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const d=Math.sqrt(u),p=Math.atan2(d,l),m=Math.sin((1-t)*p)/d,v=Math.sin(t*p)/d;return this._w=o*m+this._w*v,this._x=n*m+this._x*v,this._y=r*m+this._y*v,this._z=s*m+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,t=0,n=0){J.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(EE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(EE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,l=e.z,u=e.w,d=2*(o*r-l*n),p=2*(l*t-s*r),m=2*(s*n-o*t);return this.x=t+u*d+o*m-l*p,this.y=n+u*p+l*d-s*m,this.z=r+u*m+s*p-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Wt(this.x,e.x,t.x),this.y=Wt(this.y,e.y,t.y),this.z=Wt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Wt(this.x,e,t),this.y=Wt(this.y,e,t),this.z=Wt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Wt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,l=t.y,u=t.z;return this.x=r*u-s*l,this.y=s*o-n*u,this.z=n*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return H0.copy(this).projectOnVector(e),this.sub(H0)}reflect(e){return this.sub(H0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Wt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const H0=new J,EE=new ki;class hr{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ao.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ao.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ao.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,ao):ao.fromBufferAttribute(s,o),ao.applyMatrix4(e.matrixWorld),this.expandByPoint(ao);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),tg.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),tg.copy(n.boundingBox)),tg.applyMatrix4(e.matrixWorld),this.union(tg)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ao),ao.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ld),ng.subVectors(this.max,Ld),Fh.subVectors(e.a,Ld),Uh.subVectors(e.b,Ld),Oh.subVectors(e.c,Ld),Sl.subVectors(Uh,Fh),Ml.subVectors(Oh,Uh),Ic.subVectors(Fh,Oh);let t=[0,-Sl.z,Sl.y,0,-Ml.z,Ml.y,0,-Ic.z,Ic.y,Sl.z,0,-Sl.x,Ml.z,0,-Ml.x,Ic.z,0,-Ic.x,-Sl.y,Sl.x,0,-Ml.y,Ml.x,0,-Ic.y,Ic.x,0];return!z0(t,Fh,Uh,Oh,ng)||(t=[1,0,0,0,1,0,0,0,1],!z0(t,Fh,Uh,Oh,ng))?!1:(ig.crossVectors(Sl,Ml),t=[ig.x,ig.y,ig.z],z0(t,Fh,Uh,Oh,ng))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ao).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ao).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Sa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Sa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Sa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Sa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Sa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Sa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Sa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Sa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Sa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Sa=[new J,new J,new J,new J,new J,new J,new J,new J],ao=new J,tg=new hr,Fh=new J,Uh=new J,Oh=new J,Sl=new J,Ml=new J,Ic=new J,Ld=new J,ng=new J,ig=new J,Dc=new J;function z0(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Dc.fromArray(i,s);const l=r.x*Math.abs(Dc.x)+r.y*Math.abs(Dc.y)+r.z*Math.abs(Dc.z),u=e.dot(Dc),d=t.dot(Dc),p=n.dot(Dc);if(Math.max(-Math.max(u,d,p),Math.min(u,d,p))>l)return!1}return!0}const hF=new hr,Nd=new J,G0=new J;class Qi{constructor(e=new J,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):hF.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Nd.subVectors(e,this.center);const t=Nd.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(Nd,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(G0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Nd.copy(e.center).add(G0)),this.expandByPoint(Nd.copy(e.center).sub(G0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ma=new J,V0=new J,rg=new J,El=new J,W0=new J,sg=new J,j0=new J;class wu{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ma)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ma.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ma.copy(this.origin).addScaledVector(this.direction,t),Ma.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){V0.copy(e).add(t).multiplyScalar(.5),rg.copy(t).sub(e).normalize(),El.copy(this.origin).sub(V0);const s=e.distanceTo(t)*.5,o=-this.direction.dot(rg),l=El.dot(this.direction),u=-El.dot(rg),d=El.lengthSq(),p=Math.abs(1-o*o);let m,v,y,A;if(p>0)if(m=o*u-l,v=o*l-u,A=s*p,m>=0)if(v>=-A)if(v<=A){const w=1/p;m*=w,v*=w,y=m*(m+o*v+2*l)+v*(o*m+v+2*u)+d}else v=s,m=Math.max(0,-(o*v+l)),y=-m*m+v*(v+2*u)+d;else v=-s,m=Math.max(0,-(o*v+l)),y=-m*m+v*(v+2*u)+d;else v<=-A?(m=Math.max(0,-(-o*s+l)),v=m>0?-s:Math.min(Math.max(-s,-u),s),y=-m*m+v*(v+2*u)+d):v<=A?(m=0,v=Math.min(Math.max(-s,-u),s),y=v*(v+2*u)+d):(m=Math.max(0,-(o*s+l)),v=m>0?s:Math.min(Math.max(-s,-u),s),y=-m*m+v*(v+2*u)+d);else v=o>0?-s:s,m=Math.max(0,-(o*v+l)),y=-m*m+v*(v+2*u)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(V0).addScaledVector(rg,v),y}intersectSphere(e,t){Ma.subVectors(e.center,this.origin);const n=Ma.dot(this.direction),r=Ma.dot(Ma)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=n-o,u=n+o;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,l,u;const d=1/this.direction.x,p=1/this.direction.y,m=1/this.direction.z,v=this.origin;return d>=0?(n=(e.min.x-v.x)*d,r=(e.max.x-v.x)*d):(n=(e.max.x-v.x)*d,r=(e.min.x-v.x)*d),p>=0?(s=(e.min.y-v.y)*p,o=(e.max.y-v.y)*p):(s=(e.max.y-v.y)*p,o=(e.min.y-v.y)*p),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),m>=0?(l=(e.min.z-v.z)*m,u=(e.max.z-v.z)*m):(l=(e.max.z-v.z)*m,u=(e.min.z-v.z)*m),n>u||l>r)||((l>n||n!==n)&&(n=l),(u<r||r!==r)&&(r=u),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Ma)!==null}intersectTriangle(e,t,n,r,s){W0.subVectors(t,e),sg.subVectors(n,e),j0.crossVectors(W0,sg);let o=this.direction.dot(j0),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;El.subVectors(this.origin,e);const u=l*this.direction.dot(sg.crossVectors(El,sg));if(u<0)return null;const d=l*this.direction.dot(W0.cross(El));if(d<0||u+d>o)return null;const p=-l*El.dot(j0);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Nt{constructor(e,t,n,r,s,o,l,u,d,p,m,v,y,A,w,M){Nt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,u,d,p,m,v,y,A,w,M)}set(e,t,n,r,s,o,l,u,d,p,m,v,y,A,w,M){const S=this.elements;return S[0]=e,S[4]=t,S[8]=n,S[12]=r,S[1]=s,S[5]=o,S[9]=l,S[13]=u,S[2]=d,S[6]=p,S[10]=m,S[14]=v,S[3]=y,S[7]=A,S[11]=w,S[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Nt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/kh.setFromMatrixColumn(e,0).length(),s=1/kh.setFromMatrixColumn(e,1).length(),o=1/kh.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(r),d=Math.sin(r),p=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const v=o*p,y=o*m,A=l*p,w=l*m;t[0]=u*p,t[4]=-u*m,t[8]=d,t[1]=y+A*d,t[5]=v-w*d,t[9]=-l*u,t[2]=w-v*d,t[6]=A+y*d,t[10]=o*u}else if(e.order==="YXZ"){const v=u*p,y=u*m,A=d*p,w=d*m;t[0]=v+w*l,t[4]=A*l-y,t[8]=o*d,t[1]=o*m,t[5]=o*p,t[9]=-l,t[2]=y*l-A,t[6]=w+v*l,t[10]=o*u}else if(e.order==="ZXY"){const v=u*p,y=u*m,A=d*p,w=d*m;t[0]=v-w*l,t[4]=-o*m,t[8]=A+y*l,t[1]=y+A*l,t[5]=o*p,t[9]=w-v*l,t[2]=-o*d,t[6]=l,t[10]=o*u}else if(e.order==="ZYX"){const v=o*p,y=o*m,A=l*p,w=l*m;t[0]=u*p,t[4]=A*d-y,t[8]=v*d+w,t[1]=u*m,t[5]=w*d+v,t[9]=y*d-A,t[2]=-d,t[6]=l*u,t[10]=o*u}else if(e.order==="YZX"){const v=o*u,y=o*d,A=l*u,w=l*d;t[0]=u*p,t[4]=w-v*m,t[8]=A*m+y,t[1]=m,t[5]=o*p,t[9]=-l*p,t[2]=-d*p,t[6]=y*m+A,t[10]=v-w*m}else if(e.order==="XZY"){const v=o*u,y=o*d,A=l*u,w=l*d;t[0]=u*p,t[4]=-m,t[8]=d*p,t[1]=v*m+w,t[5]=o*p,t[9]=y*m-A,t[2]=A*m-y,t[6]=l*p,t[10]=w*m+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(fF,e,dF)}lookAt(e,t,n){const r=this.elements;return rs.subVectors(e,t),rs.lengthSq()===0&&(rs.z=1),rs.normalize(),wl.crossVectors(n,rs),wl.lengthSq()===0&&(Math.abs(n.z)===1?rs.x+=1e-4:rs.z+=1e-4,rs.normalize(),wl.crossVectors(n,rs)),wl.normalize(),og.crossVectors(rs,wl),r[0]=wl.x,r[4]=og.x,r[8]=rs.x,r[1]=wl.y,r[5]=og.y,r[9]=rs.y,r[2]=wl.z,r[6]=og.z,r[10]=rs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[4],u=n[8],d=n[12],p=n[1],m=n[5],v=n[9],y=n[13],A=n[2],w=n[6],M=n[10],S=n[14],T=n[3],b=n[7],B=n[11],F=n[15],N=r[0],z=r[4],G=r[8],U=r[12],L=r[1],j=r[5],se=r[9],ie=r[13],he=r[2],xe=r[6],me=r[10],ge=r[14],H=r[3],q=r[7],Q=r[11],W=r[15];return s[0]=o*N+l*L+u*he+d*H,s[4]=o*z+l*j+u*xe+d*q,s[8]=o*G+l*se+u*me+d*Q,s[12]=o*U+l*ie+u*ge+d*W,s[1]=p*N+m*L+v*he+y*H,s[5]=p*z+m*j+v*xe+y*q,s[9]=p*G+m*se+v*me+y*Q,s[13]=p*U+m*ie+v*ge+y*W,s[2]=A*N+w*L+M*he+S*H,s[6]=A*z+w*j+M*xe+S*q,s[10]=A*G+w*se+M*me+S*Q,s[14]=A*U+w*ie+M*ge+S*W,s[3]=T*N+b*L+B*he+F*H,s[7]=T*z+b*j+B*xe+F*q,s[11]=T*G+b*se+B*me+F*Q,s[15]=T*U+b*ie+B*ge+F*W,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],l=e[5],u=e[9],d=e[13],p=e[2],m=e[6],v=e[10],y=e[14],A=e[3],w=e[7],M=e[11],S=e[15];return A*(+s*u*m-r*d*m-s*l*v+n*d*v+r*l*y-n*u*y)+w*(+t*u*y-t*d*v+s*o*v-r*o*y+r*d*p-s*u*p)+M*(+t*d*m-t*l*y-s*o*m+n*o*y+s*l*p-n*d*p)+S*(-r*l*p-t*u*m+t*l*v+r*o*m-n*o*v+n*u*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],d=e[7],p=e[8],m=e[9],v=e[10],y=e[11],A=e[12],w=e[13],M=e[14],S=e[15],T=m*M*d-w*v*d+w*u*y-l*M*y-m*u*S+l*v*S,b=A*v*d-p*M*d-A*u*y+o*M*y+p*u*S-o*v*S,B=p*w*d-A*m*d+A*l*y-o*w*y-p*l*S+o*m*S,F=A*m*u-p*w*u-A*l*v+o*w*v+p*l*M-o*m*M,N=t*T+n*b+r*B+s*F;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/N;return e[0]=T*z,e[1]=(w*v*s-m*M*s-w*r*y+n*M*y+m*r*S-n*v*S)*z,e[2]=(l*M*s-w*u*s+w*r*d-n*M*d-l*r*S+n*u*S)*z,e[3]=(m*u*s-l*v*s-m*r*d+n*v*d+l*r*y-n*u*y)*z,e[4]=b*z,e[5]=(p*M*s-A*v*s+A*r*y-t*M*y-p*r*S+t*v*S)*z,e[6]=(A*u*s-o*M*s-A*r*d+t*M*d+o*r*S-t*u*S)*z,e[7]=(o*v*s-p*u*s+p*r*d-t*v*d-o*r*y+t*u*y)*z,e[8]=B*z,e[9]=(A*m*s-p*w*s-A*n*y+t*w*y+p*n*S-t*m*S)*z,e[10]=(o*w*s-A*l*s+A*n*d-t*w*d-o*n*S+t*l*S)*z,e[11]=(p*l*s-o*m*s-p*n*d+t*m*d+o*n*y-t*l*y)*z,e[12]=F*z,e[13]=(p*w*r-A*m*r+A*n*v-t*w*v-p*n*M+t*m*M)*z,e[14]=(A*l*r-o*w*r-A*n*u+t*w*u+o*n*M-t*l*M)*z,e[15]=(o*m*r-p*l*r+p*n*u-t*m*u-o*n*v+t*l*v)*z,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,l=e.y,u=e.z,d=s*o,p=s*l;return this.set(d*o+n,d*l-r*u,d*u+r*l,0,d*l+r*u,p*l+n,p*u-r*o,0,d*u-r*l,p*u+r*o,s*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,l=t._z,u=t._w,d=s+s,p=o+o,m=l+l,v=s*d,y=s*p,A=s*m,w=o*p,M=o*m,S=l*m,T=u*d,b=u*p,B=u*m,F=n.x,N=n.y,z=n.z;return r[0]=(1-(w+S))*F,r[1]=(y+B)*F,r[2]=(A-b)*F,r[3]=0,r[4]=(y-B)*N,r[5]=(1-(v+S))*N,r[6]=(M+T)*N,r[7]=0,r[8]=(A+b)*z,r[9]=(M-T)*z,r[10]=(1-(v+w))*z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=kh.set(r[0],r[1],r[2]).length();const o=kh.set(r[4],r[5],r[6]).length(),l=kh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],lo.copy(this);const d=1/s,p=1/o,m=1/l;return lo.elements[0]*=d,lo.elements[1]*=d,lo.elements[2]*=d,lo.elements[4]*=p,lo.elements[5]*=p,lo.elements[6]*=p,lo.elements[8]*=m,lo.elements[9]*=m,lo.elements[10]*=m,t.setFromRotationMatrix(lo),n.x=s,n.y=o,n.z=l,this}makePerspective(e,t,n,r,s,o,l=mo){const u=this.elements,d=2*s/(t-e),p=2*s/(n-r),m=(t+e)/(t-e),v=(n+r)/(n-r);let y,A;if(l===mo)y=-(o+s)/(o-s),A=-2*o*s/(o-s);else if(l===Rp)y=-o/(o-s),A=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=d,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=p,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=y,u[14]=A,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,s,o,l=mo){const u=this.elements,d=1/(t-e),p=1/(n-r),m=1/(o-s),v=(t+e)*d,y=(n+r)*p;let A,w;if(l===mo)A=(o+s)*m,w=-2*m;else if(l===Rp)A=s*m,w=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*d,u[4]=0,u[8]=0,u[12]=-v,u[1]=0,u[5]=2*p,u[9]=0,u[13]=-y,u[2]=0,u[6]=0,u[10]=w,u[14]=-A,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const kh=new J,lo=new Nt,fF=new J(0,0,0),dF=new J(1,1,1),wl=new J,og=new J,rs=new J,wE=new Nt,CE=new ki;class hs{constructor(e=0,t=0,n=0,r=hs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],u=r[1],d=r[5],p=r[9],m=r[2],v=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(Wt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Wt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(u,d)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Wt(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Wt(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(Wt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-p,d),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-Wt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return wE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return CE.setFromEuler(this),this.setFromQuaternion(CE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}hs.DEFAULT_ORDER="XYZ";class fu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let pF=0;const TE=new J,Hh=new ki,Ea=new Nt,ag=new J,Fd=new J,mF=new J,gF=new ki,bE=new J(1,0,0),RE=new J(0,1,0),PE=new J(0,0,1),BE={type:"added"},vF={type:"removed"},zh={type:"childadded",child:null},X0={type:"childremoved",child:null};class dn extends Go{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:pF++}),this.uuid=cs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dn.DEFAULT_UP.clone();const e=new J,t=new hs,n=new ki,r=new J(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Nt},normalMatrix:{value:new Xt}}),this.matrix=new Nt,this.matrixWorld=new Nt,this.matrixAutoUpdate=dn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Hh.setFromAxisAngle(e,t),this.quaternion.multiply(Hh),this}rotateOnWorldAxis(e,t){return Hh.setFromAxisAngle(e,t),this.quaternion.premultiply(Hh),this}rotateX(e){return this.rotateOnAxis(bE,e)}rotateY(e){return this.rotateOnAxis(RE,e)}rotateZ(e){return this.rotateOnAxis(PE,e)}translateOnAxis(e,t){return TE.copy(e).applyQuaternion(this.quaternion),this.position.add(TE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(bE,e)}translateY(e){return this.translateOnAxis(RE,e)}translateZ(e){return this.translateOnAxis(PE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ea.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ag.copy(e):ag.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Fd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ea.lookAt(Fd,ag,this.up):Ea.lookAt(ag,Fd,this.up),this.quaternion.setFromRotationMatrix(Ea),r&&(Ea.extractRotation(r.matrixWorld),Hh.setFromRotationMatrix(Ea),this.quaternion.premultiply(Hh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(BE),zh.child=e,this.dispatchEvent(zh),zh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vF),X0.child=e,this.dispatchEvent(X0),X0.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ea.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ea.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ea),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(BE),zh.child=e,this.dispatchEvent(zh),zh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fd,e,mF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fd,gF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let d=0,p=u.length;d<p;d++){const m=u[d];s(e.shapes,m)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,d=this.material.length;u<d;u++)l.push(s(e.materials,this.material[u]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];r.animations.push(s(e.animations,u))}}if(t){const l=o(e.geometries),u=o(e.materials),d=o(e.textures),p=o(e.images),m=o(e.shapes),v=o(e.skeletons),y=o(e.animations),A=o(e.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),m.length>0&&(n.shapes=m),v.length>0&&(n.skeletons=v),y.length>0&&(n.animations=y),A.length>0&&(n.nodes=A)}return n.object=r,n;function o(l){const u=[];for(const d in l){const p=l[d];delete p.metadata,u.push(p)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}dn.DEFAULT_UP=new J(0,1,0);dn.DEFAULT_MATRIX_AUTO_UPDATE=!0;dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const co=new J,wa=new J,J0=new J,Ca=new J,Gh=new J,Vh=new J,IE=new J,K0=new J,Y0=new J,Q0=new J,q0=new yn,Z0=new yn,$0=new yn;class Wr{constructor(e=new J,t=new J,n=new J){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),co.subVectors(e,t),r.cross(co);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){co.subVectors(r,t),wa.subVectors(n,t),J0.subVectors(e,t);const o=co.dot(co),l=co.dot(wa),u=co.dot(J0),d=wa.dot(wa),p=wa.dot(J0),m=o*d-l*l;if(m===0)return s.set(0,0,0),null;const v=1/m,y=(d*u-l*p)*v,A=(o*p-l*u)*v;return s.set(1-y-A,A,y)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Ca)===null?!1:Ca.x>=0&&Ca.y>=0&&Ca.x+Ca.y<=1}static getInterpolation(e,t,n,r,s,o,l,u){return this.getBarycoord(e,t,n,r,Ca)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,Ca.x),u.addScaledVector(o,Ca.y),u.addScaledVector(l,Ca.z),u)}static getInterpolatedAttribute(e,t,n,r,s,o){return q0.setScalar(0),Z0.setScalar(0),$0.setScalar(0),q0.fromBufferAttribute(e,t),Z0.fromBufferAttribute(e,n),$0.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(q0,s.x),o.addScaledVector(Z0,s.y),o.addScaledVector($0,s.z),o}static isFrontFacing(e,t,n,r){return co.subVectors(n,t),wa.subVectors(e,t),co.cross(wa).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return co.subVectors(this.c,this.b),wa.subVectors(this.a,this.b),co.cross(wa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Wr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Wr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Wr.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Wr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Wr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,l;Gh.subVectors(r,n),Vh.subVectors(s,n),K0.subVectors(e,n);const u=Gh.dot(K0),d=Vh.dot(K0);if(u<=0&&d<=0)return t.copy(n);Y0.subVectors(e,r);const p=Gh.dot(Y0),m=Vh.dot(Y0);if(p>=0&&m<=p)return t.copy(r);const v=u*m-p*d;if(v<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(n).addScaledVector(Gh,o);Q0.subVectors(e,s);const y=Gh.dot(Q0),A=Vh.dot(Q0);if(A>=0&&y<=A)return t.copy(s);const w=y*d-u*A;if(w<=0&&d>=0&&A<=0)return l=d/(d-A),t.copy(n).addScaledVector(Vh,l);const M=p*A-y*m;if(M<=0&&m-p>=0&&y-A>=0)return IE.subVectors(s,r),l=(m-p)/(m-p+(y-A)),t.copy(r).addScaledVector(IE,l);const S=1/(M+w+v);return o=w*S,l=v*S,t.copy(n).addScaledVector(Gh,o).addScaledVector(Vh,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const vb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cl={h:0,s:0,l:0},lg={h:0,s:0,l:0};function ex(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class nt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Vr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,gn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=gn.workingColorSpace){return this.r=e,this.g=t,this.b=n,gn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=gn.workingColorSpace){if(e=bA(e,1),t=Wt(t,0,1),n=Wt(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=ex(o,s,e+1/3),this.g=ex(o,s,e),this.b=ex(o,s,e-1/3)}return gn.toWorkingColorSpace(this,r),this}setStyle(e,t=Vr){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Vr){const n=vb[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ua(e.r),this.g=Ua(e.g),this.b=Ua(e.b),this}copyLinearToSRGB(e){return this.r=df(e.r),this.g=df(e.g),this.b=df(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vr){return gn.fromWorkingColorSpace(or.copy(this),e),Math.round(Wt(or.r*255,0,255))*65536+Math.round(Wt(or.g*255,0,255))*256+Math.round(Wt(or.b*255,0,255))}getHexString(e=Vr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=gn.workingColorSpace){gn.fromWorkingColorSpace(or.copy(this),t);const n=or.r,r=or.g,s=or.b,o=Math.max(n,r,s),l=Math.min(n,r,s);let u,d;const p=(l+o)/2;if(l===o)u=0,d=0;else{const m=o-l;switch(d=p<=.5?m/(o+l):m/(2-o-l),o){case n:u=(r-s)/m+(r<s?6:0);break;case r:u=(s-n)/m+2;break;case s:u=(n-r)/m+4;break}u/=6}return e.h=u,e.s=d,e.l=p,e}getRGB(e,t=gn.workingColorSpace){return gn.fromWorkingColorSpace(or.copy(this),t),e.r=or.r,e.g=or.g,e.b=or.b,e}getStyle(e=Vr){gn.fromWorkingColorSpace(or.copy(this),e);const t=or.r,n=or.g,r=or.b;return e!==Vr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Cl),this.setHSL(Cl.h+e,Cl.s+t,Cl.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Cl),e.getHSL(lg);const n=pp(Cl.h,lg.h,t),r=pp(Cl.s,lg.s,t),s=pp(Cl.l,lg.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const or=new nt;nt.NAMES=vb;let yF=0;class bi extends Go{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yF++}),this.uuid=cs(),this.name="",this.type="Material",this.blending=uu,this.side=zo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=pv,this.blendDst=mv,this.blendEquation=Il,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new nt(0,0,0),this.blendAlpha=0,this.depthFunc=pu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=m_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zc,this.stencilZFail=Zc,this.stencilZPass=Zc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==uu&&(n.blending=this.blending),this.side!==zo&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==pv&&(n.blendSrc=this.blendSrc),this.blendDst!==mv&&(n.blendDst=this.blendDst),this.blendEquation!==Il&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==pu&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==m_&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Zc&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Zc&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Zc&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class as extends bi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hs,this.combine=Gp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ba=xF();function xF(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const d=u-127;d<-27?(n[u]=0,n[u|256]=32768,r[u]=24,r[u|256]=24):d<-14?(n[u]=1024>>-d-14,n[u|256]=1024>>-d-14|32768,r[u]=-d-1,r[u|256]=-d-1):d<=15?(n[u]=d+15<<10,n[u|256]=d+15<<10|32768,r[u]=13,r[u|256]=13):d<128?(n[u]=31744,n[u|256]=64512,r[u]=24,r[u|256]=24):(n[u]=31744,n[u|256]=64512,r[u]=13,r[u|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let d=u<<13,p=0;for(;(d&8388608)===0;)d<<=1,p-=8388608;d&=-8388609,p+=947912704,s[u]=d|p}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)o[u]=u<<23;o[31]=1199570944,o[32]=2147483648;for(let u=33;u<63;++u)o[u]=2147483648+(u-32<<23);o[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function Gr(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Wt(i,-65504,65504),Ba.floatView[0]=i;const e=Ba.uint32View[0],t=e>>23&511;return Ba.baseTable[t]+((e&8388607)>>Ba.shiftTable[t])}function ep(i){const e=i>>10;return Ba.uint32View[0]=Ba.mantissaTable[Ba.offsetTable[e]+(i&1023)]+Ba.exponentTable[e],Ba.floatView[0]}class _F{static toHalfFloat(e){return Gr(e)}static fromHalfFloat(e){return ep(e)}}const vi=new J,cg=new Le;let AF=0;class xn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:AF++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=bp,this.updateRanges=[],this.gpuType=jr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)cg.fromBufferAttribute(this,t),cg.applyMatrix3(e),this.setXY(t,cg.x,cg.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)vi.fromBufferAttribute(this,t),vi.applyMatrix3(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)vi.fromBufferAttribute(this,t),vi.applyMatrix4(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)vi.fromBufferAttribute(this,t),vi.applyNormalMatrix(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)vi.fromBufferAttribute(this,t),vi.transformDirection(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Tr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Tr(t,this.array)),t}setX(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Tr(t,this.array)),t}setY(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Tr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Tr(t,this.array)),t}setW(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array),s=qt(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==bp&&(e.usage=this.usage),e}}class SF extends xn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class MF extends xn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class EF extends xn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class wF extends xn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class RA extends xn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class CF extends xn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class PA extends xn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class TF extends xn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=ep(this.array[e*this.itemSize]);return this.normalized&&(t=Tr(t,this.array)),t}setX(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize]=Gr(t),this}getY(e){let t=ep(this.array[e*this.itemSize+1]);return this.normalized&&(t=Tr(t,this.array)),t}setY(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+1]=Gr(t),this}getZ(e){let t=ep(this.array[e*this.itemSize+2]);return this.normalized&&(t=Tr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+2]=Gr(t),this}getW(e){let t=ep(this.array[e*this.itemSize+3]);return this.normalized&&(t=Tr(t,this.array)),t}setW(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+3]=Gr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array)),this.array[e+0]=Gr(t),this.array[e+1]=Gr(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array)),this.array[e+0]=Gr(t),this.array[e+1]=Gr(n),this.array[e+2]=Gr(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array),s=qt(s,this.array)),this.array[e+0]=Gr(t),this.array[e+1]=Gr(n),this.array[e+2]=Gr(r),this.array[e+3]=Gr(s),this}}class Mt extends xn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let bF=0;const bs=new Nt,tx=new dn,Wh=new J,ss=new hr,Ud=new hr,Ui=new J;class Jt extends Go{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:bF++}),this.uuid=cs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(pb(e)?PA:RA)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Xt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return bs.makeRotationFromQuaternion(e),this.applyMatrix4(bs),this}rotateX(e){return bs.makeRotationX(e),this.applyMatrix4(bs),this}rotateY(e){return bs.makeRotationY(e),this.applyMatrix4(bs),this}rotateZ(e){return bs.makeRotationZ(e),this.applyMatrix4(bs),this}translate(e,t,n){return bs.makeTranslation(e,t,n),this.applyMatrix4(bs),this}scale(e,t,n){return bs.makeScale(e,t,n),this.applyMatrix4(bs),this}lookAt(e){return tx.lookAt(e),tx.updateMatrix(),this.applyMatrix4(tx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wh).negate(),this.translate(Wh.x,Wh.y,Wh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Mt(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];ss.setFromBufferAttribute(s),this.morphTargetsRelative?(Ui.addVectors(this.boundingBox.min,ss.min),this.boundingBox.expandByPoint(Ui),Ui.addVectors(this.boundingBox.max,ss.max),this.boundingBox.expandByPoint(Ui)):(this.boundingBox.expandByPoint(ss.min),this.boundingBox.expandByPoint(ss.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new J,1/0);return}if(e){const n=this.boundingSphere.center;if(ss.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];Ud.setFromBufferAttribute(l),this.morphTargetsRelative?(Ui.addVectors(ss.min,Ud.min),ss.expandByPoint(Ui),Ui.addVectors(ss.max,Ud.max),ss.expandByPoint(Ui)):(ss.expandByPoint(Ud.min),ss.expandByPoint(Ud.max))}ss.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Ui.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Ui));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],u=this.morphTargetsRelative;for(let d=0,p=l.count;d<p;d++)Ui.fromBufferAttribute(l,d),u&&(Wh.fromBufferAttribute(e,d),Ui.add(Wh)),r=Math.max(r,n.distanceToSquared(Ui))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xn(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),l=[],u=[];for(let G=0;G<n.count;G++)l[G]=new J,u[G]=new J;const d=new J,p=new J,m=new J,v=new Le,y=new Le,A=new Le,w=new J,M=new J;function S(G,U,L){d.fromBufferAttribute(n,G),p.fromBufferAttribute(n,U),m.fromBufferAttribute(n,L),v.fromBufferAttribute(s,G),y.fromBufferAttribute(s,U),A.fromBufferAttribute(s,L),p.sub(d),m.sub(d),y.sub(v),A.sub(v);const j=1/(y.x*A.y-A.x*y.y);isFinite(j)&&(w.copy(p).multiplyScalar(A.y).addScaledVector(m,-y.y).multiplyScalar(j),M.copy(m).multiplyScalar(y.x).addScaledVector(p,-A.x).multiplyScalar(j),l[G].add(w),l[U].add(w),l[L].add(w),u[G].add(M),u[U].add(M),u[L].add(M))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let G=0,U=T.length;G<U;++G){const L=T[G],j=L.start,se=L.count;for(let ie=j,he=j+se;ie<he;ie+=3)S(e.getX(ie+0),e.getX(ie+1),e.getX(ie+2))}const b=new J,B=new J,F=new J,N=new J;function z(G){F.fromBufferAttribute(r,G),N.copy(F);const U=l[G];b.copy(U),b.sub(F.multiplyScalar(F.dot(U))).normalize(),B.crossVectors(N,U);const j=B.dot(u[G])<0?-1:1;o.setXYZW(G,b.x,b.y,b.z,j)}for(let G=0,U=T.length;G<U;++G){const L=T[G],j=L.start,se=L.count;for(let ie=j,he=j+se;ie<he;ie+=3)z(e.getX(ie+0)),z(e.getX(ie+1)),z(e.getX(ie+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new xn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,y=n.count;v<y;v++)n.setXYZ(v,0,0,0);const r=new J,s=new J,o=new J,l=new J,u=new J,d=new J,p=new J,m=new J;if(e)for(let v=0,y=e.count;v<y;v+=3){const A=e.getX(v+0),w=e.getX(v+1),M=e.getX(v+2);r.fromBufferAttribute(t,A),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,M),p.subVectors(o,s),m.subVectors(r,s),p.cross(m),l.fromBufferAttribute(n,A),u.fromBufferAttribute(n,w),d.fromBufferAttribute(n,M),l.add(p),u.add(p),d.add(p),n.setXYZ(A,l.x,l.y,l.z),n.setXYZ(w,u.x,u.y,u.z),n.setXYZ(M,d.x,d.y,d.z)}else for(let v=0,y=t.count;v<y;v+=3)r.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),o.fromBufferAttribute(t,v+2),p.subVectors(o,s),m.subVectors(r,s),p.cross(m),n.setXYZ(v+0,p.x,p.y,p.z),n.setXYZ(v+1,p.x,p.y,p.z),n.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ui.fromBufferAttribute(e,t),Ui.normalize(),e.setXYZ(t,Ui.x,Ui.y,Ui.z)}toNonIndexed(){function e(l,u){const d=l.array,p=l.itemSize,m=l.normalized,v=new d.constructor(u.length*p);let y=0,A=0;for(let w=0,M=u.length;w<M;w++){l.isInterleavedBufferAttribute?y=u[w]*l.data.stride+l.offset:y=u[w]*p;for(let S=0;S<p;S++)v[A++]=d[y++]}return new xn(v,p,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Jt,n=this.index.array,r=this.attributes;for(const l in r){const u=r[l],d=e(u,n);t.setAttribute(l,d)}const s=this.morphAttributes;for(const l in s){const u=[],d=s[l];for(let p=0,m=d.length;p<m;p++){const v=d[p],y=e(v,n);u.push(y)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const d=o[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const d in u)u[d]!==void 0&&(e[d]=u[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const d=n[u];e.data.attributes[u]=d.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const d=this.morphAttributes[u],p=[];for(let m=0,v=d.length;m<v;m++){const y=d[m];p.push(y.toJSON(e.data))}p.length>0&&(r[u]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const d in r){const p=r[d];this.setAttribute(d,p.clone(t))}const s=e.morphAttributes;for(const d in s){const p=[],m=s[d];for(let v=0,y=m.length;v<y;v++)p.push(m[v].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,p=o.length;d<p;d++){const m=o[d];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const DE=new Nt,Lc=new wu,ug=new Qi,LE=new J,hg=new J,fg=new J,dg=new J,nx=new J,pg=new J,NE=new J,mg=new J;class ni extends dn{constructor(e=new Jt,t=new as){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){pg.set(0,0,0);for(let u=0,d=s.length;u<d;u++){const p=l[u],m=s[u];p!==0&&(nx.fromBufferAttribute(m,e),o?pg.addScaledVector(nx,p):pg.addScaledVector(nx.sub(t),p))}t.add(pg)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),ug.copy(n.boundingSphere),ug.applyMatrix4(s),Lc.copy(e.ray).recast(e.near),!(ug.containsPoint(Lc.origin)===!1&&(Lc.intersectSphere(ug,LE)===null||Lc.origin.distanceToSquared(LE)>(e.far-e.near)**2))&&(DE.copy(s).invert(),Lc.copy(e.ray).applyMatrix4(DE),!(n.boundingBox!==null&&Lc.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Lc)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,l=s.index,u=s.attributes.position,d=s.attributes.uv,p=s.attributes.uv1,m=s.attributes.normal,v=s.groups,y=s.drawRange;if(l!==null)if(Array.isArray(o))for(let A=0,w=v.length;A<w;A++){const M=v[A],S=o[M.materialIndex],T=Math.max(M.start,y.start),b=Math.min(l.count,Math.min(M.start+M.count,y.start+y.count));for(let B=T,F=b;B<F;B+=3){const N=l.getX(B),z=l.getX(B+1),G=l.getX(B+2);r=gg(this,S,e,n,d,p,m,N,z,G),r&&(r.faceIndex=Math.floor(B/3),r.face.materialIndex=M.materialIndex,t.push(r))}}else{const A=Math.max(0,y.start),w=Math.min(l.count,y.start+y.count);for(let M=A,S=w;M<S;M+=3){const T=l.getX(M),b=l.getX(M+1),B=l.getX(M+2);r=gg(this,o,e,n,d,p,m,T,b,B),r&&(r.faceIndex=Math.floor(M/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(o))for(let A=0,w=v.length;A<w;A++){const M=v[A],S=o[M.materialIndex],T=Math.max(M.start,y.start),b=Math.min(u.count,Math.min(M.start+M.count,y.start+y.count));for(let B=T,F=b;B<F;B+=3){const N=B,z=B+1,G=B+2;r=gg(this,S,e,n,d,p,m,N,z,G),r&&(r.faceIndex=Math.floor(B/3),r.face.materialIndex=M.materialIndex,t.push(r))}}else{const A=Math.max(0,y.start),w=Math.min(u.count,y.start+y.count);for(let M=A,S=w;M<S;M+=3){const T=M,b=M+1,B=M+2;r=gg(this,o,e,n,d,p,m,T,b,B),r&&(r.faceIndex=Math.floor(M/3),t.push(r))}}}}function RF(i,e,t,n,r,s,o,l){let u;if(e.side===br?u=n.intersectTriangle(o,s,r,!0,l):u=n.intersectTriangle(r,s,o,e.side===zo,l),u===null)return null;mg.copy(l),mg.applyMatrix4(i.matrixWorld);const d=t.ray.origin.distanceTo(mg);return d<t.near||d>t.far?null:{distance:d,point:mg.clone(),object:i}}function gg(i,e,t,n,r,s,o,l,u,d){i.getVertexPosition(l,hg),i.getVertexPosition(u,fg),i.getVertexPosition(d,dg);const p=RF(i,e,t,n,hg,fg,dg,NE);if(p){const m=new J;Wr.getBarycoord(NE,hg,fg,dg,m),r&&(p.uv=Wr.getInterpolatedAttribute(r,l,u,d,m,new Le)),s&&(p.uv1=Wr.getInterpolatedAttribute(s,l,u,d,m,new Le)),o&&(p.normal=Wr.getInterpolatedAttribute(o,l,u,d,m,new J),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const v={a:l,b:u,c:d,normal:new J,materialIndex:0};Wr.getNormal(hg,fg,dg,v.normal),p.face=v,p.barycoord=m}return p}class Cu extends Jt{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],d=[],p=[],m=[];let v=0,y=0;A("z","y","x",-1,-1,n,t,e,o,s,0),A("z","y","x",1,-1,n,t,-e,o,s,1),A("x","z","y",1,1,e,n,t,r,o,2),A("x","z","y",1,-1,e,n,-t,r,o,3),A("x","y","z",1,-1,e,t,n,r,s,4),A("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(u),this.setAttribute("position",new Mt(d,3)),this.setAttribute("normal",new Mt(p,3)),this.setAttribute("uv",new Mt(m,2));function A(w,M,S,T,b,B,F,N,z,G,U){const L=B/z,j=F/G,se=B/2,ie=F/2,he=N/2,xe=z+1,me=G+1;let ge=0,H=0;const q=new J;for(let Q=0;Q<me;Q++){const W=Q*j-ie;for(let re=0;re<xe;re++){const ke=re*L-se;q[w]=ke*T,q[M]=W*b,q[S]=he,d.push(q.x,q.y,q.z),q[w]=0,q[M]=0,q[S]=N>0?1:-1,p.push(q.x,q.y,q.z),m.push(re/z),m.push(1-Q/G),ge+=1}}for(let Q=0;Q<G;Q++)for(let W=0;W<z;W++){const re=v+W+xe*Q,ke=v+W+xe*(Q+1),fe=v+(W+1)+xe*(Q+1),Ce=v+(W+1)+xe*Q;u.push(re,ke,Ce),u.push(ke,fe,Ce),H+=6}l.addGroup(y,H,U),y+=H,v+=ge}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Cf(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Cr(i){const e={};for(let t=0;t<i.length;t++){const n=Cf(i[t]);for(const r in n)e[r]=n[r]}return e}function PF(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function yb(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:gn.workingColorSpace}const xb={clone:Cf,merge:Cr};var BF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,IF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class fs extends bi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=BF,this.fragmentShader=IF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Cf(e.uniforms),this.uniformsGroups=PF(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class jp extends dn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Nt,this.projectionMatrix=new Nt,this.projectionMatrixInverse=new Nt,this.coordinateSystem=mo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Tl=new J,FE=new Le,UE=new Le;class ti extends jp{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=wf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(hu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return wf*2*Math.atan(Math.tan(hu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Tl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Tl.x,Tl.y).multiplyScalar(-e/Tl.z),Tl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Tl.x,Tl.y).multiplyScalar(-e/Tl.z)}getViewSize(e,t){return this.getViewBounds(e,FE,UE),t.subVectors(UE,FE)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(hu*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,d=o.fullHeight;s+=o.offsetX*r/u,t-=o.offsetY*n/d,r*=o.width/u,n*=o.height/d}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const jh=-90,Xh=1;class _b extends dn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ti(jh,Xh,e,t);r.layers=this.layers,this.add(r);const s=new ti(jh,Xh,e,t);s.layers=this.layers,this.add(s);const o=new ti(jh,Xh,e,t);o.layers=this.layers,this.add(o);const l=new ti(jh,Xh,e,t);l.layers=this.layers,this.add(l);const u=new ti(jh,Xh,e,t);u.layers=this.layers,this.add(u);const d=new ti(jh,Xh,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,l,u]=t;for(const d of t)this.remove(d);if(e===mo)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===Rp)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,u,d,p]=this.children,m=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;const w=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,l),e.setRenderTarget(n,3,r),e.render(t,u),e.setRenderTarget(n,4,r),e.render(t,d),n.texture.generateMipmaps=w,e.setRenderTarget(n,5,r),e.render(t,p),e.setRenderTarget(m,v,y),e.xr.enabled=A,n.texture.needsPMREMUpdate=!0}}class Xp extends Gn{constructor(e=[],t=za,n,r,s,o,l,u,d,p){super(e,t,n,r,s,o,l,u,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Ab extends Ls{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Xp(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:li}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Cu(5,5,5),s=new fs({name:"CubemapFromEquirect",uniforms:Cf(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:br,blending:Fa});s.uniforms.tEquirect.value=t;const o=new ni(r,s),l=t.minFilter;return t.minFilter===Ds&&(t.minFilter=li),new _b(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}class Ia extends dn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const DF={type:"move"};class iv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ia,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ia,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ia,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const l=this._targetRay,u=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const w of e.hand.values()){const M=t.getJointPose(w,n),S=this._getHandJoint(d,w);M!==null&&(S.matrix.fromArray(M.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=M.radius),S.visible=M!==null}const p=d.joints["index-finger-tip"],m=d.joints["thumb-tip"],v=p.position.distanceTo(m.position),y=.02,A=.005;d.inputState.pinching&&v>y+A?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&v<=y-A&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(DF)))}return l!==null&&(l.visible=r!==null),u!==null&&(u.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Ia;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class My{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new nt(e),this.density=t}clone(){return new My(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Ey{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new nt(e),this.near=t,this.far=n}clone(){return new Ey(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class BA extends dn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new hs,this.environmentIntensity=1,this.environmentRotation=new hs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Jp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=bp,this.updateRanges=[],this.version=0,this.uuid=cs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Er=new J;class zl{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Er.fromBufferAttribute(this,t),Er.applyMatrix4(e),this.setXYZ(t,Er.x,Er.y,Er.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Er.fromBufferAttribute(this,t),Er.applyNormalMatrix(e),this.setXYZ(t,Er.x,Er.y,Er.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Er.fromBufferAttribute(this,t),Er.transformDirection(e),this.setXYZ(t,Er.x,Er.y,Er.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Tr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=qt(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Tr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Tr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Tr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Tr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array),s=qt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new xn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new zl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class IA extends bi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Jh;const Od=new J,Kh=new J,Yh=new J,Qh=new Le,kd=new Le,Sb=new Nt,vg=new J,Hd=new J,yg=new J,OE=new Le,ix=new Le,kE=new Le;class Mb extends dn{constructor(e=new IA){if(super(),this.isSprite=!0,this.type="Sprite",Jh===void 0){Jh=new Jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Jp(t,5);Jh.setIndex([0,1,2,0,2,3]),Jh.setAttribute("position",new zl(n,3,0,!1)),Jh.setAttribute("uv",new zl(n,2,3,!1))}this.geometry=Jh,this.material=e,this.center=new Le(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Kh.setFromMatrixScale(this.matrixWorld),Sb.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Yh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Kh.multiplyScalar(-Yh.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;xg(vg.set(-.5,-.5,0),Yh,o,Kh,r,s),xg(Hd.set(.5,-.5,0),Yh,o,Kh,r,s),xg(yg.set(.5,.5,0),Yh,o,Kh,r,s),OE.set(0,0),ix.set(1,0),kE.set(1,1);let l=e.ray.intersectTriangle(vg,Hd,yg,!1,Od);if(l===null&&(xg(Hd.set(-.5,.5,0),Yh,o,Kh,r,s),ix.set(0,1),l=e.ray.intersectTriangle(vg,yg,Hd,!1,Od),l===null))return;const u=e.ray.origin.distanceTo(Od);u<e.near||u>e.far||t.push({distance:u,point:Od.clone(),uv:Wr.getInterpolation(Od,vg,Hd,yg,OE,ix,kE,new Le),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function xg(i,e,t,n,r,s){Qh.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(kd.x=s*Qh.x-r*Qh.y,kd.y=r*Qh.x+s*Qh.y):kd.copy(Qh),i.copy(e),i.x+=kd.x,i.y+=kd.y,i.applyMatrix4(Sb)}const _g=new J,HE=new J;class Eb extends dn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){_g.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(_g);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){_g.setFromMatrixPosition(e.matrixWorld),HE.setFromMatrixPosition(this.matrixWorld);const n=_g.distanceTo(HE)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),n>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const zE=new J,GE=new yn,VE=new yn,LF=new J,WE=new Nt,Ag=new J,rx=new Qi,jE=new Nt,sx=new wu;class DA extends ni{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=p_,this.bindMatrix=new Nt,this.bindMatrixInverse=new Nt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new hr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ag),this.boundingBox.expandByPoint(Ag)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Qi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ag),this.boundingSphere.expandByPoint(Ag)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),rx.copy(this.boundingSphere),rx.applyMatrix4(r),e.ray.intersectsSphere(rx)!==!1&&(jE.copy(r).invert(),sx.copy(e.ray).applyMatrix4(jE),!(this.boundingBox!==null&&sx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,sx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===p_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ZT?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;GE.fromBufferAttribute(r.attributes.skinIndex,e),VE.fromBufferAttribute(r.attributes.skinWeight,e),zE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=VE.getComponent(s);if(o!==0){const l=GE.getComponent(s);WE.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(LF.copy(zE).applyMatrix4(WE),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class wy extends dn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ko extends Gn{constructor(e=null,t=1,n=1,r,s,o,l,u,d=Oi,p=Oi,m,v){super(null,o,l,u,d,p,r,s,m,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const XE=new Nt,NF=new Nt;class Kp{constructor(e=[],t=[]){this.uuid=cs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Nt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Nt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:NF;XE.multiplyMatrices(l,t[s]),XE.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Kp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new ko(t,e,e,ur,jr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new wy),this.bones.push(o),this.boneInverses.push(new Nt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const l=n[r];e.boneInverses.push(l.toArray())}return e}}class gu extends xn{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const qh=new Nt,JE=new Nt,Sg=[],KE=new hr,FF=new Nt,zd=new ni,Gd=new Qi;class LA extends ni{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new gu(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,FF)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new hr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,qh),KE.copy(e.boundingBox).applyMatrix4(qh),this.boundingBox.union(KE)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Qi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,qh),Gd.copy(e.boundingSphere).applyMatrix4(qh),this.boundingSphere.union(Gd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let l=0;l<n.length;l++)n[l]=r[o+l]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(zd.geometry=this.geometry,zd.material=this.material,zd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Gd.copy(this.boundingSphere),Gd.applyMatrix4(n),e.ray.intersectsSphere(Gd)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,qh),JE.multiplyMatrices(n,qh),zd.matrixWorld=JE,zd.raycast(e,Sg);for(let o=0,l=Sg.length;o<l;o++){const u=Sg[o];u.instanceId=s,u.object=this,t.push(u)}Sg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new gu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new ko(new Float32Array(r*this.count),r,this.count,vy,jr));const s=this.morphTexture.source.data.data;let o=0;for(let d=0;d<n.length;d++)o+=n[d];const l=this.geometry.morphTargetsRelative?1:1-o,u=r*e;s[u]=l,s.set(n,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const ox=new J,UF=new J,OF=new Xt;class Ra{constructor(e=new J(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=ox.subVectors(n,t).cross(UF.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(ox),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||OF.getNormalMatrix(e),r=this.coplanarPoint(ox).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Nc=new Qi,Mg=new J;class Yp{constructor(e=new Ra,t=new Ra,n=new Ra,r=new Ra,s=new Ra,o=new Ra){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=mo){const n=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],u=r[3],d=r[4],p=r[5],m=r[6],v=r[7],y=r[8],A=r[9],w=r[10],M=r[11],S=r[12],T=r[13],b=r[14],B=r[15];if(n[0].setComponents(u-s,v-d,M-y,B-S).normalize(),n[1].setComponents(u+s,v+d,M+y,B+S).normalize(),n[2].setComponents(u+o,v+p,M+A,B+T).normalize(),n[3].setComponents(u-o,v-p,M-A,B-T).normalize(),n[4].setComponents(u-l,v-m,M-w,B-b).normalize(),t===mo)n[5].setComponents(u+l,v+m,M+w,B+b).normalize();else if(t===Rp)n[5].setComponents(l,m,w,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Nc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Nc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Nc)}intersectsSprite(e){return Nc.center.set(0,0,0),Nc.radius=.7071067811865476,Nc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Nc)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Mg.x=r.normal.x>0?e.max.x:e.min.x,Mg.y=r.normal.y>0?e.max.y:e.min.y,Mg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Mg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ax(i,e){return i-e}function kF(i,e){return i.z-e.z}function HF(i,e){return e.z-i.z}class zF{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];o.push(l),this.index++,l.start=e,l.count=t,l.z=n,l.index=r}reset(){this.list.length=0,this.index=0}}const zr=new Nt,GF=new nt(1,1,1),lx=new Yp,Eg=new hr,Fc=new Qi,Vd=new J,YE=new J,VF=new J,cx=new zF,ar=new ni,wg=[];function WF(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,i.getComponent(s,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Uc(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class wb extends ni{constructor(e,t,n=t*2,r){super(new Jt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new ko(t,e,e,ur,jr);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new ko(t,e,e,Vp,Ga);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new ko(t,e,e,ur,jr);n.colorSpace=gn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:l,itemSize:u,normalized:d}=o,p=new l.constructor(n*u),m=new xn(p,u,d);t.setAttribute(s,m)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new xn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new hr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,zr),this.getBoundingBoxAt(s,Eg).applyMatrix4(zr),e.union(Eg)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,zr),this.getBoundingSphereAt(s,Fc).applyMatrix4(zr),e.union(Fc)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ax),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;zr.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(GF.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?o.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ax),u=this._availableGeometryIds.shift(),s[u]=r):(u=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(u,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),l=this._geometryInfo[e];if(r&&o.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,d=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const p in n.attributes){const m=t.getAttribute(p),v=n.getAttribute(p);WF(m,v,u);const y=m.itemSize;for(let A=m.count,w=d;A<w;A++){const M=u+A;for(let S=0;S<y;S++)v.setComponent(M,S,0)}v.needsUpdate=!0,v.addUpdateRange(u*y,d*y)}if(r){const p=l.indexStart,m=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<o.count;v++)s.setX(p+v,u+o.getX(v));for(let v=o.count,y=m;v<y;v++)s.setX(p+v,u);s.needsUpdate=!0,s.addUpdateRange(p,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((o,l)=>l).sort((o,l)=>n[o].vertexStart-n[l].vertexStart),s=this.geometry;for(let o=0,l=n.length;o<l;o++){const u=r[o],d=n[u];if(d.active!==!1){if(s.index!==null){if(d.indexStart!==t){const{indexStart:p,vertexStart:m,reservedIndexCount:v}=d,y=s.index,A=y.array,w=e-m;for(let M=p;M<p+v;M++)A[M]=A[M]+w;y.array.copyWithin(t,p,p+v),y.addUpdateRange(t,v),d.indexStart=t}t+=d.reservedIndexCount}if(d.vertexStart!==e){const{vertexStart:p,reservedVertexCount:m}=d,v=s.attributes;for(const y in v){const A=v[y],{array:w,itemSize:M}=A;w.copyWithin(e*M,p*M,(p+m)*M),A.addUpdateRange(e*M,m*M)}d.vertexStart=e}e+=d.reservedVertexCount,d.start=s.index?d.indexStart:d.vertexStart,this._nextIndexStart=s.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new hr,o=n.index,l=n.attributes.position;for(let u=r.start,d=r.start+r.count;u<d;u++){let p=u;o&&(p=o.getX(p)),s.expandByPoint(Vd.fromBufferAttribute(l,p))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Qi;this.getBoundingBoxAt(e,Eg),Eg.getCenter(s.center);const o=n.index,l=n.attributes.position;let u=0;for(let d=r.start,p=r.start+r.count;d<p;d++){let m=d;o&&(m=o.getX(m)),Vd.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(Vd))}s.radius=Math.sqrt(u),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(ax);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Uc(this._multiDrawCounts,r),Uc(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Uc(o.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Uc(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),Uc(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(u=>u.indexStart+u.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Jt,this._initializeGeometry(s));const o=this.geometry;s.index&&Uc(s.index.array,o.index.array);for(const l in s.attributes)Uc(s.attributes[l].array,o.attributes[l].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;ar.material=this.material,ar.geometry.index=o.index,ar.geometry.attributes=o.attributes,ar.geometry.boundingBox===null&&(ar.geometry.boundingBox=new hr),ar.geometry.boundingSphere===null&&(ar.geometry.boundingSphere=new Qi);for(let l=0,u=n.length;l<u;l++){if(!n[l].visible||!n[l].active)continue;const d=n[l].geometryIndex,p=r[d];ar.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(l,ar.matrixWorld).premultiply(s),this.getBoundingBoxAt(d,ar.geometry.boundingBox),this.getBoundingSphereAt(d,ar.geometry.boundingSphere),ar.raycast(e,wg);for(let m=0,v=wg.length;m<v;m++){const y=wg[m];y.object=this,y.batchId=l,t.push(y)}wg.length=0}ar.material=null,ar.geometry.index=null,ar.geometry.attributes={},ar.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,u=this._instanceInfo,d=this._multiDrawStarts,p=this._multiDrawCounts,m=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,A=y.image.data;v&&(zr.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),lx.setFromProjectionMatrix(zr,e.coordinateSystem));let w=0;if(this.sortObjects){zr.copy(this.matrixWorld).invert(),Vd.setFromMatrixPosition(n.matrixWorld).applyMatrix4(zr),YE.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(zr);for(let T=0,b=u.length;T<b;T++)if(u[T].visible&&u[T].active){const B=u[T].geometryIndex;this.getMatrixAt(T,zr),this.getBoundingSphereAt(B,Fc).applyMatrix4(zr);let F=!1;if(v&&(F=!lx.intersectsSphere(Fc)),!F){const N=m[B],z=VF.subVectors(Fc.center,Vd).dot(YE);cx.push(N.start,N.count,z,T)}}const M=cx.list,S=this.customSort;S===null?M.sort(s.transparent?HF:kF):S.call(this,M,n);for(let T=0,b=M.length;T<b;T++){const B=M[T];d[w]=B.start*l,p[w]=B.count,A[w]=B.index,w++}cx.reset()}else for(let M=0,S=u.length;M<S;M++)if(u[M].visible&&u[M].active){const T=u[M].geometryIndex;let b=!1;if(v&&(this.getMatrixAt(M,zr),this.getBoundingSphereAt(T,Fc).applyMatrix4(zr),b=!lx.intersectsSphere(Fc)),!b){const B=m[T];d[w]=B.start*l,p[w]=B.count,A[w]=M,w++}}y.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class fr extends bi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new nt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Qv=new J,qv=new J,QE=new Nt,Wd=new wu,Cg=new Qi,ux=new J,qE=new J;class Va extends dn{constructor(e=new Jt,t=new fr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)Qv.fromBufferAttribute(t,r-1),qv.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Qv.distanceTo(qv);e.setAttribute("lineDistance",new Mt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Cg.copy(n.boundingSphere),Cg.applyMatrix4(r),Cg.radius+=s,e.ray.intersectsSphere(Cg)===!1)return;QE.copy(r).invert(),Wd.copy(e.ray).applyMatrix4(QE);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,d=this.isLineSegments?2:1,p=n.index,v=n.attributes.position;if(p!==null){const y=Math.max(0,o.start),A=Math.min(p.count,o.start+o.count);for(let w=y,M=A-1;w<M;w+=d){const S=p.getX(w),T=p.getX(w+1),b=Tg(this,e,Wd,u,S,T,w);b&&t.push(b)}if(this.isLineLoop){const w=p.getX(A-1),M=p.getX(y),S=Tg(this,e,Wd,u,w,M,A-1);S&&t.push(S)}}else{const y=Math.max(0,o.start),A=Math.min(v.count,o.start+o.count);for(let w=y,M=A-1;w<M;w+=d){const S=Tg(this,e,Wd,u,w,w+1,w);S&&t.push(S)}if(this.isLineLoop){const w=Tg(this,e,Wd,u,A-1,y,A-1);w&&t.push(w)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Tg(i,e,t,n,r,s,o){const l=i.geometry.attributes.position;if(Qv.fromBufferAttribute(l,r),qv.fromBufferAttribute(l,s),t.distanceSqToSegment(Qv,qv,ux,qE)>n)return;ux.applyMatrix4(i.matrixWorld);const d=e.ray.origin.distanceTo(ux);if(!(d<e.near||d>e.far))return{distance:d,point:qE.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const ZE=new J,$E=new J;class vo extends Va{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)ZE.fromBufferAttribute(t,r),$E.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+ZE.distanceTo($E);e.setAttribute("lineDistance",new Mt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class NA extends Va{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Cy extends bi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ew=new Nt,v_=new wu,bg=new Qi,Rg=new J;class FA extends dn{constructor(e=new Jt,t=new Cy){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),bg.copy(n.boundingSphere),bg.applyMatrix4(r),bg.radius+=s,e.ray.intersectsSphere(bg)===!1)return;ew.copy(r).invert(),v_.copy(e.ray).applyMatrix4(ew);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,d=n.index,m=n.attributes.position;if(d!==null){const v=Math.max(0,o.start),y=Math.min(d.count,o.start+o.count);for(let A=v,w=y;A<w;A++){const M=d.getX(A);Rg.fromBufferAttribute(m,M),tw(Rg,M,u,r,e,t,this)}}else{const v=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let A=v,w=y;A<w;A++)Rg.fromBufferAttribute(m,A),tw(Rg,A,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function tw(i,e,t,n,r,s,o){const l=v_.distanceSqToPoint(i);if(l<t){const u=new J;v_.closestPointToPoint(i,u),u.applyMatrix4(n);const d=r.ray.origin.distanceTo(u);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Cb extends Gn{constructor(e,t,n,r,s=li,o=li,l,u,d){super(e,t,n,r,s,o,l,u,d),this.isVideoTexture=!0,this.generateMipmaps=!1;const p=this;function m(){p.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class jF extends Cb{constructor(e,t,n,r,s,o,l,u){super({},e,t,n,r,s,o,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class XF extends Gn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Oi,this.minFilter=Oi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ty extends Gn{constructor(e,t,n,r,s,o,l,u,d,p,m,v){super(null,o,l,u,d,p,r,s,m,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class JF extends Ty{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=os,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class KF extends Ty{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,za),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class YF extends Gn{constructor(e,t,n,r,s,o,l,u,d){super(e,t,n,r,s,o,l,u,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class UA extends Gn{constructor(e,t,n=Ga,r,s,o,l=Oi,u=Oi,d,p=Af){if(p!==Af&&p!==Sf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,o,l,u,p,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Ll(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class yo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let l=0,u=s-1,d;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),d=n[r]-o,d<0)l=r+1;else if(d>0)u=r-1;else{u=r;break}if(r=u,n[r]===o)return r/(s-1);const p=n[r],v=n[r+1]-p,y=(o-p)/v;return(r+y)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=t||(o.isVector2?new Le:new J);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new J,r=[],s=[],o=[],l=new J,u=new Nt;for(let y=0;y<=e;y++){const A=y/e;r[y]=this.getTangentAt(A,new J)}s[0]=new J,o[0]=new J;let d=Number.MAX_VALUE;const p=Math.abs(r[0].x),m=Math.abs(r[0].y),v=Math.abs(r[0].z);p<=d&&(d=p,n.set(1,0,0)),m<=d&&(d=m,n.set(0,1,0)),v<=d&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),l.crossVectors(r[y-1],r[y]),l.length()>Number.EPSILON){l.normalize();const A=Math.acos(Wt(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(u.makeRotationAxis(l,A))}o[y].crossVectors(r[y],s[y])}if(t===!0){let y=Math.acos(Wt(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(y=-y);for(let A=1;A<=e;A++)s[A].applyMatrix4(u.makeRotationAxis(r[A],y*A)),o[A].crossVectors(r[A],s[A])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class by extends yo{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(e,t=new Le){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),d=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=u-this.aX,y=d-this.aY;u=v*p-y*m+this.aX,d=v*m+y*p+this.aY}return n.set(u,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Tb extends by{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function OA(){let i=0,e=0,t=0,n=0;function r(s,o,l,u){i=s,e=l,t=-3*s+3*o-2*l-u,n=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,d){r(o,l,d*(l-s),d*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,d,p,m){let v=(o-s)/d-(l-s)/(d+p)+(l-o)/p,y=(l-o)/p-(u-o)/(p+m)+(u-l)/m;v*=p,y*=p,r(o,l,v,y)},calc:function(s){const o=s*s,l=o*s;return i+e*s+t*o+n*l}}}const Pg=new J,hx=new OA,fx=new OA,dx=new OA;class bb extends yo{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new J){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&&l===s-1&&(l=s-2,u=1);let d,p;this.closed||l>0?d=r[(l-1)%s]:(Pg.subVectors(r[0],r[1]).add(r[0]),d=Pg);const m=r[l%s],v=r[(l+1)%s];if(this.closed||l+2<s?p=r[(l+2)%s]:(Pg.subVectors(r[s-1],r[s-2]).add(r[s-1]),p=Pg),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let A=Math.pow(d.distanceToSquared(m),y),w=Math.pow(m.distanceToSquared(v),y),M=Math.pow(v.distanceToSquared(p),y);w<1e-4&&(w=1),A<1e-4&&(A=w),M<1e-4&&(M=w),hx.initNonuniformCatmullRom(d.x,m.x,v.x,p.x,A,w,M),fx.initNonuniformCatmullRom(d.y,m.y,v.y,p.y,A,w,M),dx.initNonuniformCatmullRom(d.z,m.z,v.z,p.z,A,w,M)}else this.curveType==="catmullrom"&&(hx.initCatmullRom(d.x,m.x,v.x,p.x,this.tension),fx.initCatmullRom(d.y,m.y,v.y,p.y,this.tension),dx.initCatmullRom(d.z,m.z,v.z,p.z,this.tension));return n.set(hx.calc(u),fx.calc(u),dx.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new J().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function nw(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,l=i*i,u=i*l;return(2*t-2*n+s+o)*u+(-3*t+3*n-2*s-o)*l+s*i+t}function QF(i,e){const t=1-i;return t*t*e}function qF(i,e){return 2*(1-i)*i*e}function ZF(i,e){return i*i*e}function mp(i,e,t,n){return QF(i,e)+qF(i,t)+ZF(i,n)}function $F(i,e){const t=1-i;return t*t*t*e}function e3(i,e){const t=1-i;return 3*t*t*i*e}function t3(i,e){return 3*(1-i)*i*i*e}function n3(i,e){return i*i*i*e}function gp(i,e,t,n,r){return $F(i,e)+e3(i,t)+t3(i,n)+n3(i,r)}class kA extends yo{constructor(e=new Le,t=new Le,n=new Le,r=new Le){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Le){const n=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(gp(e,r.x,s.x,o.x,l.x),gp(e,r.y,s.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Rb extends yo{constructor(e=new J,t=new J,n=new J,r=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new J){const n=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(gp(e,r.x,s.x,o.x,l.x),gp(e,r.y,s.y,o.y,l.y),gp(e,r.z,s.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class HA extends yo{constructor(e=new Le,t=new Le){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Le){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Pb extends yo{constructor(e=new J,t=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new J){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new J){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zA extends yo{constructor(e=new Le,t=new Le,n=new Le){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Le){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(mp(e,r.x,s.x,o.x),mp(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GA extends yo{constructor(e=new J,t=new J,n=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new J){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(mp(e,r.x,s.x,o.x),mp(e,r.y,s.y,o.y),mp(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VA extends yo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Le){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,u=r[o===0?o:o-1],d=r[o],p=r[o>r.length-2?r.length-1:o+1],m=r[o>r.length-3?r.length-1:o+2];return n.set(nw(l,u.x,d.x,p.x,m.x),nw(l,u.y,d.y,p.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new Le().fromArray(r))}return this}}var Zv=Object.freeze({__proto__:null,ArcCurve:Tb,CatmullRomCurve3:bb,CubicBezierCurve:kA,CubicBezierCurve3:Rb,EllipseCurve:by,LineCurve:HA,LineCurve3:Pb,QuadraticBezierCurve:zA,QuadraticBezierCurve3:GA,SplineCurve:VA});class Bb extends yo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Zv[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,l=this.curves[s],u=l.getLength(),d=u===0?0:1-o/u;return l.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(l);for(let d=0;d<u.length;d++){const p=u[d];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new Zv[r.type]().fromJSON(r))}return this}}class Bp extends Bb{constructor(e){super(),this.type="Path",this.currentPoint=new Le,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new HA(this.currentPoint.clone(),new Le(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new zA(this.currentPoint.clone(),new Le(e,t),new Le(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const l=new kA(this.currentPoint.clone(),new Le(e,t),new Le(n,r),new Le(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new VA(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,l,u){const d=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+d,t+p,n,r,s,o,l,u),this}absellipse(e,t,n,r,s,o,l,u){const d=new by(e,t,n,r,s,o,l,u);if(this.curves.length>0){const m=d.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(d);const p=d.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Qp extends Jt{constructor(e=[new Le(0,-.5),new Le(.5,0),new Le(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Wt(r,0,Math.PI*2);const s=[],o=[],l=[],u=[],d=[],p=1/t,m=new J,v=new Le,y=new J,A=new J,w=new J;let M=0,S=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:M=e[T+1].x-e[T].x,S=e[T+1].y-e[T].y,y.x=S*1,y.y=-M,y.z=S*0,w.copy(y),y.normalize(),u.push(y.x,y.y,y.z);break;case e.length-1:u.push(w.x,w.y,w.z);break;default:M=e[T+1].x-e[T].x,S=e[T+1].y-e[T].y,y.x=S*1,y.y=-M,y.z=S*0,A.copy(y),y.x+=w.x,y.y+=w.y,y.z+=w.z,y.normalize(),u.push(y.x,y.y,y.z),w.copy(A)}for(let T=0;T<=t;T++){const b=n+T*p*r,B=Math.sin(b),F=Math.cos(b);for(let N=0;N<=e.length-1;N++){m.x=e[N].x*B,m.y=e[N].y,m.z=e[N].x*F,o.push(m.x,m.y,m.z),v.x=T/t,v.y=N/(e.length-1),l.push(v.x,v.y);const z=u[3*N+0]*B,G=u[3*N+1],U=u[3*N+0]*F;d.push(z,G,U)}}for(let T=0;T<t;T++)for(let b=0;b<e.length-1;b++){const B=b+T*e.length,F=B,N=B+e.length,z=B+e.length+1,G=B+1;s.push(F,N,G),s.push(z,G,N)}this.setIndex(s),this.setAttribute("position",new Mt(o,3)),this.setAttribute("uv",new Mt(l,2)),this.setAttribute("normal",new Mt(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qp(e.points,e.segments,e.phiStart,e.phiLength)}}class Ry extends Qp{constructor(e=1,t=1,n=4,r=8){const s=new Bp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new Ry(e.radius,e.length,e.capSegments,e.radialSegments)}}class Py extends Jt{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],u=[],d=new J,p=new Le;o.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let m=0,v=3;m<=t;m++,v+=3){const y=n+m/t*r;d.x=e*Math.cos(y),d.y=e*Math.sin(y),o.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(o[v]/e+1)/2,p.y=(o[v+1]/e+1)/2,u.push(p.x,p.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new Mt(o,3)),this.setAttribute("normal",new Mt(l,3)),this.setAttribute("uv",new Mt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Py(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Nf extends Jt{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u};const d=this;r=Math.floor(r),s=Math.floor(s);const p=[],m=[],v=[],y=[];let A=0;const w=[],M=n/2;let S=0;T(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(p),this.setAttribute("position",new Mt(m,3)),this.setAttribute("normal",new Mt(v,3)),this.setAttribute("uv",new Mt(y,2));function T(){const B=new J,F=new J;let N=0;const z=(t-e)/n;for(let G=0;G<=s;G++){const U=[],L=G/s,j=L*(t-e)+e;for(let se=0;se<=r;se++){const ie=se/r,he=ie*u+l,xe=Math.sin(he),me=Math.cos(he);F.x=j*xe,F.y=-L*n+M,F.z=j*me,m.push(F.x,F.y,F.z),B.set(xe,z,me).normalize(),v.push(B.x,B.y,B.z),y.push(ie,1-L),U.push(A++)}w.push(U)}for(let G=0;G<r;G++)for(let U=0;U<s;U++){const L=w[U][G],j=w[U+1][G],se=w[U+1][G+1],ie=w[U][G+1];(e>0||U!==0)&&(p.push(L,j,ie),N+=3),(t>0||U!==s-1)&&(p.push(j,se,ie),N+=3)}d.addGroup(S,N,0),S+=N}function b(B){const F=A,N=new Le,z=new J;let G=0;const U=B===!0?e:t,L=B===!0?1:-1;for(let se=1;se<=r;se++)m.push(0,M*L,0),v.push(0,L,0),y.push(.5,.5),A++;const j=A;for(let se=0;se<=r;se++){const he=se/r*u+l,xe=Math.cos(he),me=Math.sin(he);z.x=U*me,z.y=M*L,z.z=U*xe,m.push(z.x,z.y,z.z),v.push(0,L,0),N.x=xe*.5+.5,N.y=me*.5*L+.5,y.push(N.x,N.y),A++}for(let se=0;se<r;se++){const ie=F+se,he=j+se;B===!0?p.push(he,he+1,ie):p.push(he+1,he,ie),G+=3}d.addGroup(S,G,B===!0?1:2),S+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class By extends Nf{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,n,r,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new By(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Wl extends Jt{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];l(r),d(n),p(),this.setAttribute("position",new Mt(s,3)),this.setAttribute("normal",new Mt(s.slice(),3)),this.setAttribute("uv",new Mt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(T){const b=new J,B=new J,F=new J;for(let N=0;N<t.length;N+=3)y(t[N+0],b),y(t[N+1],B),y(t[N+2],F),u(b,B,F,T)}function u(T,b,B,F){const N=F+1,z=[];for(let G=0;G<=N;G++){z[G]=[];const U=T.clone().lerp(B,G/N),L=b.clone().lerp(B,G/N),j=N-G;for(let se=0;se<=j;se++)se===0&&G===N?z[G][se]=U:z[G][se]=U.clone().lerp(L,se/j)}for(let G=0;G<N;G++)for(let U=0;U<2*(N-G)-1;U++){const L=Math.floor(U/2);U%2===0?(v(z[G][L+1]),v(z[G+1][L]),v(z[G][L])):(v(z[G][L+1]),v(z[G+1][L+1]),v(z[G+1][L]))}}function d(T){const b=new J;for(let B=0;B<s.length;B+=3)b.x=s[B+0],b.y=s[B+1],b.z=s[B+2],b.normalize().multiplyScalar(T),s[B+0]=b.x,s[B+1]=b.y,s[B+2]=b.z}function p(){const T=new J;for(let b=0;b<s.length;b+=3){T.x=s[b+0],T.y=s[b+1],T.z=s[b+2];const B=M(T)/2/Math.PI+.5,F=S(T)/Math.PI+.5;o.push(B,1-F)}A(),m()}function m(){for(let T=0;T<o.length;T+=6){const b=o[T+0],B=o[T+2],F=o[T+4],N=Math.max(b,B,F),z=Math.min(b,B,F);N>.9&&z<.1&&(b<.2&&(o[T+0]+=1),B<.2&&(o[T+2]+=1),F<.2&&(o[T+4]+=1))}}function v(T){s.push(T.x,T.y,T.z)}function y(T,b){const B=T*3;b.x=e[B+0],b.y=e[B+1],b.z=e[B+2]}function A(){const T=new J,b=new J,B=new J,F=new J,N=new Le,z=new Le,G=new Le;for(let U=0,L=0;U<s.length;U+=9,L+=6){T.set(s[U+0],s[U+1],s[U+2]),b.set(s[U+3],s[U+4],s[U+5]),B.set(s[U+6],s[U+7],s[U+8]),N.set(o[L+0],o[L+1]),z.set(o[L+2],o[L+3]),G.set(o[L+4],o[L+5]),F.copy(T).add(b).add(B).divideScalar(3);const j=M(F);w(N,L+0,T,j),w(z,L+2,b,j),w(G,L+4,B,j)}}function w(T,b,B,F){F<0&&T.x===1&&(o[b]=T.x-1),B.x===0&&B.z===0&&(o[b]=F/2/Math.PI+.5)}function M(T){return Math.atan2(T.z,-T.x)}function S(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wl(e.vertices,e.indices,e.radius,e.details)}}class Iy extends Wl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Iy(e.radius,e.detail)}}const Bg=new J,Ig=new J,px=new J,Dg=new Wr;class Ib extends Jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(hu*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,d=[0,0,0],p=["a","b","c"],m=new Array(3),v={},y=[];for(let A=0;A<u;A+=3){o?(d[0]=o.getX(A),d[1]=o.getX(A+1),d[2]=o.getX(A+2)):(d[0]=A,d[1]=A+1,d[2]=A+2);const{a:w,b:M,c:S}=Dg;if(w.fromBufferAttribute(l,d[0]),M.fromBufferAttribute(l,d[1]),S.fromBufferAttribute(l,d[2]),Dg.getNormal(px),m[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,m[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,m[2]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let T=0;T<3;T++){const b=(T+1)%3,B=m[T],F=m[b],N=Dg[p[T]],z=Dg[p[b]],G=`${B}_${F}`,U=`${F}_${B}`;U in v&&v[U]?(px.dot(v[U].normal)<=s&&(y.push(N.x,N.y,N.z),y.push(z.x,z.y,z.z)),v[U]=null):G in v||(v[G]={index0:d[T],index1:d[b],normal:px.clone()})}}for(const A in v)if(v[A]){const{index0:w,index1:M}=v[A];Bg.fromBufferAttribute(l,w),Ig.fromBufferAttribute(l,M),y.push(Bg.x,Bg.y,Bg.z),y.push(Ig.x,Ig.y,Ig.z)}this.setAttribute("position",new Mt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class du extends Bp{constructor(e){super(e),this.uuid=cs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new Bp().fromJSON(r))}return this}}function i3(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=Db(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,d;if(n&&(s=l3(i,e,s,t)),i.length>80*t){l=1/0,u=1/0;let p=-1/0,m=-1/0;for(let v=t;v<r;v+=t){const y=i[v],A=i[v+1];y<l&&(l=y),A<u&&(u=A),y>p&&(p=y),A>m&&(m=A)}d=Math.max(p-l,m-u),d=d!==0?32767/d:0}return Ip(s,o,t,l,u,d,0),o}function Db(i,e,t,n,r){let s;if(r===x3(i,e,t,n)>0)for(let o=e;o<t;o+=n)s=iw(o/n|0,i[o],i[o+1],s);else for(let o=t-n;o>=e;o-=n)s=iw(o/n|0,i[o],i[o+1],s);return s&&Tf(s,s.next)&&(Lp(s),s=s.next),s}function vu(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Tf(t,t.next)||Kn(t.prev,t,t.next)===0)){if(Lp(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Ip(i,e,t,n,r,s,o){if(!i)return;!o&&s&&d3(i,n,r,s);let l=i;for(;i.prev!==i.next;){const u=i.prev,d=i.next;if(s?s3(i,n,r,s):r3(i)){e.push(u.i,i.i,d.i),Lp(i),i=d.next,l=d.next;continue}if(i=d,i===l){o?o===1?(i=o3(vu(i),e),Ip(i,e,t,n,r,s,2)):o===2&&a3(i,e,t,n,r,s):Ip(vu(i),e,t,n,r,s,1);break}}}function r3(i){const e=i.prev,t=i,n=i.next;if(Kn(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,l=e.y,u=t.y,d=n.y,p=Math.min(r,s,o),m=Math.min(l,u,d),v=Math.max(r,s,o),y=Math.max(l,u,d);let A=n.next;for(;A!==e;){if(A.x>=p&&A.x<=v&&A.y>=m&&A.y<=y&&tp(r,l,s,u,o,d,A.x,A.y)&&Kn(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function s3(i,e,t,n){const r=i.prev,s=i,o=i.next;if(Kn(r,s,o)>=0)return!1;const l=r.x,u=s.x,d=o.x,p=r.y,m=s.y,v=o.y,y=Math.min(l,u,d),A=Math.min(p,m,v),w=Math.max(l,u,d),M=Math.max(p,m,v),S=y_(y,A,e,t,n),T=y_(w,M,e,t,n);let b=i.prevZ,B=i.nextZ;for(;b&&b.z>=S&&B&&B.z<=T;){if(b.x>=y&&b.x<=w&&b.y>=A&&b.y<=M&&b!==r&&b!==o&&tp(l,p,u,m,d,v,b.x,b.y)&&Kn(b.prev,b,b.next)>=0||(b=b.prevZ,B.x>=y&&B.x<=w&&B.y>=A&&B.y<=M&&B!==r&&B!==o&&tp(l,p,u,m,d,v,B.x,B.y)&&Kn(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;b&&b.z>=S;){if(b.x>=y&&b.x<=w&&b.y>=A&&b.y<=M&&b!==r&&b!==o&&tp(l,p,u,m,d,v,b.x,b.y)&&Kn(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;B&&B.z<=T;){if(B.x>=y&&B.x<=w&&B.y>=A&&B.y<=M&&B!==r&&B!==o&&tp(l,p,u,m,d,v,B.x,B.y)&&Kn(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function o3(i,e){let t=i;do{const n=t.prev,r=t.next.next;!Tf(n,r)&&Nb(n,t,t.next,r)&&Dp(n,r)&&Dp(r,n)&&(e.push(n.i,t.i,r.i),Lp(t),Lp(t.next),t=i=r),t=t.next}while(t!==i);return vu(t)}function a3(i,e,t,n,r,s){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&g3(o,l)){let u=Fb(o,l);o=vu(o,o.next),u=vu(u,u.next),Ip(o,e,t,n,r,s,0),Ip(u,e,t,n,r,s,0);return}l=l.next}o=o.next}while(o!==i)}function l3(i,e,t,n){const r=[];for(let s=0,o=e.length;s<o;s++){const l=e[s]*n,u=s<o-1?e[s+1]*n:i.length,d=Db(i,l,u,n,!1);d===d.next&&(d.steiner=!0),r.push(m3(d))}r.sort(c3);for(let s=0;s<r.length;s++)t=u3(r[s],t);return t}function c3(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function u3(i,e){const t=h3(i,e);if(!t)return e;const n=Fb(t,i);return vu(n,n.next),vu(t,t.next)}function h3(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,o;if(Tf(i,t))return t;do{if(Tf(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const m=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=n&&m>s&&(s=m,o=t.x<t.next.x?t:t.next,m===n))return o}t=t.next}while(t!==e);if(!o)return null;const l=o,u=o.x,d=o.y;let p=1/0;t=o;do{if(n>=t.x&&t.x>=u&&n!==t.x&&Lb(r<d?n:s,r,u,d,r<d?s:n,r,t.x,t.y)){const m=Math.abs(r-t.y)/(n-t.x);Dp(t,i)&&(m<p||m===p&&(t.x>o.x||t.x===o.x&&f3(o,t)))&&(o=t,p=m)}t=t.next}while(t!==l);return o}function f3(i,e){return Kn(i.prev,i,e.prev)<0&&Kn(e.next,i,i.next)<0}function d3(i,e,t,n){let r=i;do r.z===0&&(r.z=y_(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,p3(r)}function p3(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let o=n,l=0;for(let d=0;d<t&&(l++,o=o.nextZ,!!o);d++);let u=t;for(;l>0||u>0&&o;)l!==0&&(u===0||!o||n.z<=o.z)?(r=n,n=n.nextZ,l--):(r=o,o=o.nextZ,u--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=o}s.nextZ=null,t*=2}while(e>1);return i}function y_(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function m3(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Lb(i,e,t,n,r,s,o,l){return(r-o)*(e-l)>=(i-o)*(s-l)&&(i-o)*(n-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(r-o)*(n-l)}function tp(i,e,t,n,r,s,o,l){return!(i===o&&e===l)&&Lb(i,e,t,n,r,s,o,l)}function g3(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!v3(i,e)&&(Dp(i,e)&&Dp(e,i)&&y3(i,e)&&(Kn(i.prev,i,e.prev)||Kn(i,e.prev,e))||Tf(i,e)&&Kn(i.prev,i,i.next)>0&&Kn(e.prev,e,e.next)>0)}function Kn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Tf(i,e){return i.x===e.x&&i.y===e.y}function Nb(i,e,t,n){const r=Ng(Kn(i,e,t)),s=Ng(Kn(i,e,n)),o=Ng(Kn(t,n,i)),l=Ng(Kn(t,n,e));return!!(r!==s&&o!==l||r===0&&Lg(i,t,e)||s===0&&Lg(i,n,e)||o===0&&Lg(t,i,n)||l===0&&Lg(t,e,n))}function Lg(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Ng(i){return i>0?1:i<0?-1:0}function v3(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&Nb(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Dp(i,e){return Kn(i.prev,i,i.next)<0?Kn(i,e,i.next)>=0&&Kn(i,i.prev,e)>=0:Kn(i,e,i.prev)<0||Kn(i,i.next,e)<0}function y3(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function Fb(i,e){const t=x_(i.i,i.x,i.y),n=x_(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function iw(i,e,t,n){const r=x_(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Lp(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function x_(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function x3(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class _3{static triangulate(e,t,n=2){return i3(e,t,n)}}class Ho{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return Ho.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];rw(e),sw(n,e);let o=e.length;t.forEach(rw);for(let u=0;u<t.length;u++)r.push(o),o+=t[u].length,sw(n,t[u]);const l=_3.triangulate(n,r);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function rw(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function sw(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class Dy extends Jt{constructor(e=new du([new Le(.5,.5),new Le(-.5,.5),new Le(-.5,-.5),new Le(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let l=0,u=e.length;l<u;l++){const d=e[l];o(d)}this.setAttribute("position",new Mt(r,3)),this.setAttribute("uv",new Mt(s,2)),this.computeVertexNormals();function o(l){const u=[],d=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,A=t.bevelSize!==void 0?t.bevelSize:y-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:A3;let b,B=!1,F,N,z,G;S&&(b=S.getSpacedPoints(p),B=!0,v=!1,F=S.computeFrenetFrames(p,!1),N=new J,z=new J,G=new J),v||(M=0,y=0,A=0,w=0);const U=l.extractPoints(d);let L=U.shape;const j=U.holes;if(!Ho.isClockWise(L)){L=L.reverse();for(let Fe=0,Oe=j.length;Fe<Oe;Fe++){const Be=j[Fe];Ho.isClockWise(Be)&&(j[Fe]=Be.reverse())}}function ie(Fe){const Be=10000000000000001e-36;let Qe=Fe[0];for(let Re=1;Re<=Fe.length;Re++){const X=Re%Fe.length,O=Fe[X],le=O.x-Qe.x,Ee=O.y-Qe.y,Ie=le*le+Ee*Ee,Te=Math.max(Math.abs(O.x),Math.abs(O.y),Math.abs(Qe.x),Math.abs(Qe.y)),ut=Be*Te*Te;if(Ie<=ut){Fe.splice(X,1),Re--;continue}Qe=O}}ie(L),j.forEach(ie);const he=j.length,xe=L;for(let Fe=0;Fe<he;Fe++){const Oe=j[Fe];L=L.concat(Oe)}function me(Fe,Oe,Be){return Oe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Fe.clone().addScaledVector(Oe,Be)}const ge=L.length;function H(Fe,Oe,Be){let Qe,Re,X;const O=Fe.x-Oe.x,le=Fe.y-Oe.y,Ee=Be.x-Fe.x,Ie=Be.y-Fe.y,Te=O*O+le*le,ut=O*Ie-le*Ee;if(Math.abs(ut)>Number.EPSILON){const Xe=Math.sqrt(Te),ot=Math.sqrt(Ee*Ee+Ie*Ie),Ht=Oe.x-le/Xe,Ge=Oe.y+O/Xe,ht=Be.x-Ie/ot,bt=Be.y+Ee/ot,Rt=((ht-Ht)*Ie-(bt-Ge)*Ee)/(O*Ie-le*Ee);Qe=Ht+O*Rt-Fe.x,Re=Ge+le*Rt-Fe.y;const at=Qe*Qe+Re*Re;if(at<=2)return new Le(Qe,Re);X=Math.sqrt(at/2)}else{let Xe=!1;O>Number.EPSILON?Ee>Number.EPSILON&&(Xe=!0):O<-Number.EPSILON?Ee<-Number.EPSILON&&(Xe=!0):Math.sign(le)===Math.sign(Ie)&&(Xe=!0),Xe?(Qe=-le,Re=O,X=Math.sqrt(Te)):(Qe=O,Re=le,X=Math.sqrt(Te/2))}return new Le(Qe/X,Re/X)}const q=[];for(let Fe=0,Oe=xe.length,Be=Oe-1,Qe=Fe+1;Fe<Oe;Fe++,Be++,Qe++)Be===Oe&&(Be=0),Qe===Oe&&(Qe=0),q[Fe]=H(xe[Fe],xe[Be],xe[Qe]);const Q=[];let W,re=q.concat();for(let Fe=0,Oe=he;Fe<Oe;Fe++){const Be=j[Fe];W=[];for(let Qe=0,Re=Be.length,X=Re-1,O=Qe+1;Qe<Re;Qe++,X++,O++)X===Re&&(X=0),O===Re&&(O=0),W[Qe]=H(Be[Qe],Be[X],Be[O]);Q.push(W),re=re.concat(W)}const ke=[],fe=[];for(let Fe=0;Fe<M;Fe++){const Oe=Fe/M,Be=y*Math.cos(Oe*Math.PI/2),Qe=A*Math.sin(Oe*Math.PI/2)+w;for(let Re=0,X=xe.length;Re<X;Re++){const O=me(xe[Re],q[Re],Qe);Ut(O.x,O.y,-Be),Oe==0&&ke.push(O)}for(let Re=0,X=he;Re<X;Re++){const O=j[Re];W=Q[Re];const le=[];for(let Ee=0,Ie=O.length;Ee<Ie;Ee++){const Te=me(O[Ee],W[Ee],Qe);Ut(Te.x,Te.y,-Be),Oe==0&&le.push(Te)}Oe==0&&fe.push(le)}}const Ce=Ho.triangulateShape(ke,fe),Ne=Ce.length,Ue=A+w;for(let Fe=0;Fe<ge;Fe++){const Oe=v?me(L[Fe],re[Fe],Ue):L[Fe];B?(z.copy(F.normals[0]).multiplyScalar(Oe.x),N.copy(F.binormals[0]).multiplyScalar(Oe.y),G.copy(b[0]).add(z).add(N),Ut(G.x,G.y,G.z)):Ut(Oe.x,Oe.y,0)}for(let Fe=1;Fe<=p;Fe++)for(let Oe=0;Oe<ge;Oe++){const Be=v?me(L[Oe],re[Oe],Ue):L[Oe];B?(z.copy(F.normals[Fe]).multiplyScalar(Be.x),N.copy(F.binormals[Fe]).multiplyScalar(Be.y),G.copy(b[Fe]).add(z).add(N),Ut(G.x,G.y,G.z)):Ut(Be.x,Be.y,m/p*Fe)}for(let Fe=M-1;Fe>=0;Fe--){const Oe=Fe/M,Be=y*Math.cos(Oe*Math.PI/2),Qe=A*Math.sin(Oe*Math.PI/2)+w;for(let Re=0,X=xe.length;Re<X;Re++){const O=me(xe[Re],q[Re],Qe);Ut(O.x,O.y,m+Be)}for(let Re=0,X=j.length;Re<X;Re++){const O=j[Re];W=Q[Re];for(let le=0,Ee=O.length;le<Ee;le++){const Ie=me(O[le],W[le],Qe);B?Ut(Ie.x,Ie.y+b[p-1].y,b[p-1].x+Be):Ut(Ie.x,Ie.y,m+Be)}}}qe(),vt();function qe(){const Fe=r.length/3;if(v){let Oe=0,Be=ge*Oe;for(let Qe=0;Qe<Ne;Qe++){const Re=Ce[Qe];tn(Re[2]+Be,Re[1]+Be,Re[0]+Be)}Oe=p+M*2,Be=ge*Oe;for(let Qe=0;Qe<Ne;Qe++){const Re=Ce[Qe];tn(Re[0]+Be,Re[1]+Be,Re[2]+Be)}}else{for(let Oe=0;Oe<Ne;Oe++){const Be=Ce[Oe];tn(Be[2],Be[1],Be[0])}for(let Oe=0;Oe<Ne;Oe++){const Be=Ce[Oe];tn(Be[0]+ge*p,Be[1]+ge*p,Be[2]+ge*p)}}n.addGroup(Fe,r.length/3-Fe,0)}function vt(){const Fe=r.length/3;let Oe=0;ft(xe,Oe),Oe+=xe.length;for(let Be=0,Qe=j.length;Be<Qe;Be++){const Re=j[Be];ft(Re,Oe),Oe+=Re.length}n.addGroup(Fe,r.length/3-Fe,1)}function ft(Fe,Oe){let Be=Fe.length;for(;--Be>=0;){const Qe=Be;let Re=Be-1;Re<0&&(Re=Fe.length-1);for(let X=0,O=p+M*2;X<O;X++){const le=ge*X,Ee=ge*(X+1),Ie=Oe+Qe+le,Te=Oe+Re+le,ut=Oe+Re+Ee,Xe=Oe+Qe+Ee;Ct(Ie,Te,ut,Xe)}}}function Ut(Fe,Oe,Be){u.push(Fe),u.push(Oe),u.push(Be)}function tn(Fe,Oe,Be){$(Fe),$(Oe),$(Be);const Qe=r.length/3,Re=T.generateTopUV(n,r,Qe-3,Qe-2,Qe-1);Mn(Re[0]),Mn(Re[1]),Mn(Re[2])}function Ct(Fe,Oe,Be,Qe){$(Fe),$(Oe),$(Qe),$(Oe),$(Be),$(Qe);const Re=r.length/3,X=T.generateSideWallUV(n,r,Re-6,Re-3,Re-2,Re-1);Mn(X[0]),Mn(X[1]),Mn(X[3]),Mn(X[1]),Mn(X[2]),Mn(X[3])}function $(Fe){r.push(u[Fe*3+0]),r.push(u[Fe*3+1]),r.push(u[Fe*3+2])}function Mn(Fe){s.push(Fe.x),s.push(Fe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return S3(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];n.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Zv[r.type]().fromJSON(r)),new Dy(n,e.options)}}const A3={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],l=e[n*3],u=e[n*3+1],d=e[r*3],p=e[r*3+1];return[new Le(s,o),new Le(l,u),new Le(d,p)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],l=e[t*3+1],u=e[t*3+2],d=e[n*3],p=e[n*3+1],m=e[n*3+2],v=e[r*3],y=e[r*3+1],A=e[r*3+2],w=e[s*3],M=e[s*3+1],S=e[s*3+2];return Math.abs(l-p)<Math.abs(o-d)?[new Le(o,1-u),new Le(d,1-m),new Le(v,1-A),new Le(w,1-S)]:[new Le(l,1-u),new Le(p,1-m),new Le(y,1-A),new Le(M,1-S)]}};function S3(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ly extends Wl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ly(e.radius,e.detail)}}class qp extends Wl{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qp(e.radius,e.detail)}}class Tu extends Jt{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(n),u=Math.floor(r),d=l+1,p=u+1,m=e/l,v=t/u,y=[],A=[],w=[],M=[];for(let S=0;S<p;S++){const T=S*v-o;for(let b=0;b<d;b++){const B=b*m-s;A.push(B,-T,0),w.push(0,0,1),M.push(b/l),M.push(1-S/u)}}for(let S=0;S<u;S++)for(let T=0;T<l;T++){const b=T+d*S,B=T+d*(S+1),F=T+1+d*(S+1),N=T+1+d*S;y.push(b,B,N),y.push(B,F,N)}this.setIndex(y),this.setAttribute("position",new Mt(A,3)),this.setAttribute("normal",new Mt(w,3)),this.setAttribute("uv",new Mt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tu(e.width,e.height,e.widthSegments,e.heightSegments)}}class Ny extends Jt{constructor(e=.5,t=1,n=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const l=[],u=[],d=[],p=[];let m=e;const v=(t-e)/r,y=new J,A=new Le;for(let w=0;w<=r;w++){for(let M=0;M<=n;M++){const S=s+M/n*o;y.x=m*Math.cos(S),y.y=m*Math.sin(S),u.push(y.x,y.y,y.z),d.push(0,0,1),A.x=(y.x/t+1)/2,A.y=(y.y/t+1)/2,p.push(A.x,A.y)}m+=v}for(let w=0;w<r;w++){const M=w*(n+1);for(let S=0;S<n;S++){const T=S+M,b=T,B=T+n+1,F=T+n+2,N=T+1;l.push(b,B,N),l.push(B,F,N)}}this.setIndex(l),this.setAttribute("position",new Mt(u,3)),this.setAttribute("normal",new Mt(d,3)),this.setAttribute("uv",new Mt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ny(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Fy extends Jt{constructor(e=new du([new Le(0,.5),new Le(-.5,-.5),new Le(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let l=0,u=0;if(Array.isArray(e)===!1)d(e);else for(let p=0;p<e.length;p++)d(e[p]),this.addGroup(l,u,p),l+=u,u=0;this.setIndex(n),this.setAttribute("position",new Mt(r,3)),this.setAttribute("normal",new Mt(s,3)),this.setAttribute("uv",new Mt(o,2));function d(p){const m=r.length/3,v=p.extractPoints(t);let y=v.shape;const A=v.holes;Ho.isClockWise(y)===!1&&(y=y.reverse());for(let M=0,S=A.length;M<S;M++){const T=A[M];Ho.isClockWise(T)===!0&&(A[M]=T.reverse())}const w=Ho.triangulateShape(y,A);for(let M=0,S=A.length;M<S;M++){const T=A[M];y=y.concat(T)}for(let M=0,S=y.length;M<S;M++){const T=y[M];r.push(T.x,T.y,0),s.push(0,0,1),o.push(T.x,T.y)}for(let M=0,S=w.length;M<S;M++){const T=w[M],b=T[0]+m,B=T[1]+m,F=T[2]+m;n.push(b,B,F),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return M3(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new Fy(n,e.curveSegments)}}function M3(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class Zp extends Jt{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const u=Math.min(o+l,Math.PI);let d=0;const p=[],m=new J,v=new J,y=[],A=[],w=[],M=[];for(let S=0;S<=n;S++){const T=[],b=S/n;let B=0;S===0&&o===0?B=.5/t:S===n&&u===Math.PI&&(B=-.5/t);for(let F=0;F<=t;F++){const N=F/t;m.x=-e*Math.cos(r+N*s)*Math.sin(o+b*l),m.y=e*Math.cos(o+b*l),m.z=e*Math.sin(r+N*s)*Math.sin(o+b*l),A.push(m.x,m.y,m.z),v.copy(m).normalize(),w.push(v.x,v.y,v.z),M.push(N+B,1-b),T.push(d++)}p.push(T)}for(let S=0;S<n;S++)for(let T=0;T<t;T++){const b=p[S][T+1],B=p[S][T],F=p[S+1][T],N=p[S+1][T+1];(S!==0||o>0)&&y.push(b,B,N),(S!==n-1||u<Math.PI)&&y.push(B,F,N)}this.setIndex(y),this.setAttribute("position",new Mt(A,3)),this.setAttribute("normal",new Mt(w,3)),this.setAttribute("uv",new Mt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Uy extends Wl{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Uy(e.radius,e.detail)}}class Oy extends Jt{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],l=[],u=[],d=[],p=new J,m=new J,v=new J;for(let y=0;y<=n;y++)for(let A=0;A<=r;A++){const w=A/r*s,M=y/n*Math.PI*2;m.x=(e+t*Math.cos(M))*Math.cos(w),m.y=(e+t*Math.cos(M))*Math.sin(w),m.z=t*Math.sin(M),l.push(m.x,m.y,m.z),p.x=e*Math.cos(w),p.y=e*Math.sin(w),v.subVectors(m,p).normalize(),u.push(v.x,v.y,v.z),d.push(A/r),d.push(y/n)}for(let y=1;y<=n;y++)for(let A=1;A<=r;A++){const w=(r+1)*y+A-1,M=(r+1)*(y-1)+A-1,S=(r+1)*(y-1)+A,T=(r+1)*y+A;o.push(w,M,T),o.push(M,S,T)}this.setIndex(o),this.setAttribute("position",new Mt(l,3)),this.setAttribute("normal",new Mt(u,3)),this.setAttribute("uv",new Mt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oy(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ky extends Jt{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const l=[],u=[],d=[],p=[],m=new J,v=new J,y=new J,A=new J,w=new J,M=new J,S=new J;for(let b=0;b<=n;++b){const B=b/n*s*Math.PI*2;T(B,s,o,e,y),T(B+.01,s,o,e,A),M.subVectors(A,y),S.addVectors(A,y),w.crossVectors(M,S),S.crossVectors(w,M),w.normalize(),S.normalize();for(let F=0;F<=r;++F){const N=F/r*Math.PI*2,z=-t*Math.cos(N),G=t*Math.sin(N);m.x=y.x+(z*S.x+G*w.x),m.y=y.y+(z*S.y+G*w.y),m.z=y.z+(z*S.z+G*w.z),u.push(m.x,m.y,m.z),v.subVectors(m,y).normalize(),d.push(v.x,v.y,v.z),p.push(b/n),p.push(F/r)}}for(let b=1;b<=n;b++)for(let B=1;B<=r;B++){const F=(r+1)*(b-1)+(B-1),N=(r+1)*b+(B-1),z=(r+1)*b+B,G=(r+1)*(b-1)+B;l.push(F,N,G),l.push(N,z,G)}this.setIndex(l),this.setAttribute("position",new Mt(u,3)),this.setAttribute("normal",new Mt(d,3)),this.setAttribute("uv",new Mt(p,2));function T(b,B,F,N,z){const G=Math.cos(b),U=Math.sin(b),L=F/B*b,j=Math.cos(L);z.x=N*(2+j)*.5*G,z.y=N*(2+j)*U*.5,z.z=N*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ky(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Hy extends Jt{constructor(e=new GA(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new J,u=new J,d=new Le;let p=new J;const m=[],v=[],y=[],A=[];w(),this.setIndex(A),this.setAttribute("position",new Mt(m,3)),this.setAttribute("normal",new Mt(v,3)),this.setAttribute("uv",new Mt(y,2));function w(){for(let b=0;b<t;b++)M(b);M(s===!1?t:0),T(),S()}function M(b){p=e.getPointAt(b/t,p);const B=o.normals[b],F=o.binormals[b];for(let N=0;N<=r;N++){const z=N/r*Math.PI*2,G=Math.sin(z),U=-Math.cos(z);u.x=U*B.x+G*F.x,u.y=U*B.y+G*F.y,u.z=U*B.z+G*F.z,u.normalize(),v.push(u.x,u.y,u.z),l.x=p.x+n*u.x,l.y=p.y+n*u.y,l.z=p.z+n*u.z,m.push(l.x,l.y,l.z)}}function S(){for(let b=1;b<=t;b++)for(let B=1;B<=r;B++){const F=(r+1)*(b-1)+(B-1),N=(r+1)*b+(B-1),z=(r+1)*b+B,G=(r+1)*(b-1)+B;A.push(F,N,G),A.push(N,z,G)}}function T(){for(let b=0;b<=t;b++)for(let B=0;B<=r;B++)d.x=b/t,d.y=B/r,y.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Hy(new Zv[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Ub extends Jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new J,s=new J;if(e.index!==null){const o=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let d=0,p=u.length;d<p;++d){const m=u[d],v=m.start,y=m.count;for(let A=v,w=v+y;A<w;A+=3)for(let M=0;M<3;M++){const S=l.getX(A+M),T=l.getX(A+(M+1)%3);r.fromBufferAttribute(o,S),s.fromBufferAttribute(o,T),ow(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,u=o.count/3;l<u;l++)for(let d=0;d<3;d++){const p=3*l+d,m=3*l+(d+1)%3;r.fromBufferAttribute(o,p),s.fromBufferAttribute(o,m),ow(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Mt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function ow(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var aw=Object.freeze({__proto__:null,BoxGeometry:Cu,CapsuleGeometry:Ry,CircleGeometry:Py,ConeGeometry:By,CylinderGeometry:Nf,DodecahedronGeometry:Iy,EdgesGeometry:Ib,ExtrudeGeometry:Dy,IcosahedronGeometry:Ly,LatheGeometry:Qp,OctahedronGeometry:qp,PlaneGeometry:Tu,PolyhedronGeometry:Wl,RingGeometry:Ny,ShapeGeometry:Fy,SphereGeometry:Zp,TetrahedronGeometry:Uy,TorusGeometry:Oy,TorusKnotGeometry:ky,TubeGeometry:Hy,WireframeGeometry:Ub});class Ob extends bi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new nt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class kb extends fs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class $p extends bi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new nt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ns extends $p{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Le(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Wt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new nt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new nt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new nt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Hb extends bi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new nt(16777215),this.specular=new nt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hs,this.combine=Gp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zb extends bi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new nt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Gb extends bi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Vb extends bi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hs,this.combine=Gp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zy extends bi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ib,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class WA extends bi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Wb extends bi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new nt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jb extends fr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function su(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function Xb(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Jb(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function __(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const l=t[s]*e;for(let u=0;u!==e;++u)r[o++]=i[l+u]}return r}function jA(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push(...o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}function E3(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let u=0;u<s.tracks.length;++u){const d=s.tracks[u],p=d.getValueSize(),m=[],v=[];for(let y=0;y<d.times.length;++y){const A=d.times[y]*r;if(!(A<t||A>=n)){m.push(d.times[y]);for(let w=0;w<p;++w)v.push(d.values[y*p+w])}}m.length!==0&&(d.times=su(m,d.times.constructor),d.values=su(v,d.values.constructor),o.push(d))}s.tracks=o;let l=1/0;for(let u=0;u<s.tracks.length;++u)l>s.tracks[u].times[0]&&(l=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function w3(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const l=t.tracks[o],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const d=i.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===u});if(d===void 0)continue;let p=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);let v=0;const y=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const A=l.times.length-1;let w;if(s<=l.times[0]){const S=p,T=m-p;w=l.values.slice(S,T)}else if(s>=l.times[A]){const S=A*m+p,T=S+m-p;w=l.values.slice(S,T)}else{const S=l.createInterpolant(),T=p,b=m-p;S.evaluate(s),w=S.resultBuffer.slice(T,b)}u==="quaternion"&&new ki().fromArray(w).normalize().conjugate().toArray(w);const M=d.times.length;for(let S=0;S<M;++S){const T=S*y+v;if(u==="quaternion")ki.multiplyQuaternionsFlat(d.values,T,w,0,d.values,T);else{const b=y-v*2;for(let B=0;B<b;++B)d.values[T+B]-=w[B]}}}return i.blendMode=wA,i}class C3{static convertArray(e,t){return su(e,t)}static isTypedArray(e){return Xb(e)}static getKeyframeOrder(e){return Jb(e)}static sortedArray(e,t,n){return __(e,t,n)}static flattenJSON(e,t,n,r){jA(e,t,n,r)}static subclip(e,t,n,r,s=30){return E3(e,t,n,r,s)}static makeClipAdditive(e,t=0,n=e,r=30){return w3(e,t,n,r)}}class Ff{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let l=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(n=2,s=l);for(let u=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Kb extends Ff{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:iu,endingEnd:iu}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],u=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case ru:s=e,l=2*t-n;break;case Cp:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case ru:o=e,u=2*n-t;break;case Cp:o=1,u=n+r[1]-r[0];break;default:o=e-1,u=t}const d=(n-t)*.5,p=this.valueSize;this._weightPrev=d/(t-l),this._weightNext=d/(u-n),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,d=u-l,p=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,A=(n-t)/(r-t),w=A*A,M=w*A,S=-v*M+2*v*w-v*A,T=(1+v)*M+(-1.5-2*v)*w+(-.5+v)*A+1,b=(-1-y)*M+(1.5+y)*w+.5*A,B=y*M-y*w;for(let F=0;F!==l;++F)s[F]=S*o[p+F]+T*o[d+F]+b*o[u+F]+B*o[m+F];return s}}class XA extends Ff{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,d=u-l,p=(n-t)/(r-t),m=1-p;for(let v=0;v!==l;++v)s[v]=o[d+v]*m+o[u+v]*p;return s}}class Yb extends Ff{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Fs{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=su(t,this.TimeBufferType),this.values=su(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:su(e.times,Array),values:su(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Yb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new XA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Kb(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Mf:t=this.InterpolantFactoryMethodDiscrete;break;case Ef:t=this.InterpolantFactoryMethodLinear;break;case tv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Mf;case this.InterpolantFactoryMethodLinear:return Ef;case this.InterpolantFactoryMethodSmooth:return tv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const u=n[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(o!==null&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,o),e=!1;break}o=u}if(r!==void 0&&Xb(r))for(let l=0,u=r.length;l!==u;++l){const d=r[l];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===tv,s=e.length-1;let o=1;for(let l=1;l<s;++l){let u=!1;const d=e[l],p=e[l+1];if(d!==p&&(l!==1||d!==e[0]))if(r)u=!0;else{const m=l*n,v=m-n,y=m+n;for(let A=0;A!==n;++A){const w=t[m+A];if(w!==t[v+A]||w!==t[y+A]){u=!0;break}}}if(u){if(l!==o){e[o]=e[l];const m=l*n,v=o*n;for(let y=0;y!==n;++y)t[v+y]=t[m+y]}++o}}if(s>0){e[o]=e[s];for(let l=s*n,u=o*n,d=0;d!==n;++d)t[u+d]=t[l+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Fs.prototype.ValueTypeName="";Fs.prototype.TimeBufferType=Float32Array;Fs.prototype.ValueBufferType=Float32Array;Fs.prototype.DefaultInterpolation=Ef;class bu extends Fs{constructor(e,t,n){super(e,t,n)}}bu.prototype.ValueTypeName="bool";bu.prototype.ValueBufferType=Array;bu.prototype.DefaultInterpolation=Mf;bu.prototype.InterpolantFactoryMethodLinear=void 0;bu.prototype.InterpolantFactoryMethodSmooth=void 0;class JA extends Fs{constructor(e,t,n,r){super(e,t,n,r)}}JA.prototype.ValueTypeName="color";class yu extends Fs{constructor(e,t,n,r){super(e,t,n,r)}}yu.prototype.ValueTypeName="number";class Qb extends Ff{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-t)/(r-t);let d=e*l;for(let p=d+l;d!==p;d+=4)ki.slerpFlat(s,0,o,d-l,o,d,u);return s}}class xu extends Fs{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new Qb(this.times,this.values,this.getValueSize(),e)}}xu.prototype.ValueTypeName="quaternion";xu.prototype.InterpolantFactoryMethodSmooth=void 0;class Ru extends Fs{constructor(e,t,n){super(e,t,n)}}Ru.prototype.ValueTypeName="string";Ru.prototype.ValueBufferType=Array;Ru.prototype.DefaultInterpolation=Mf;Ru.prototype.InterpolantFactoryMethodLinear=void 0;Ru.prototype.InterpolantFactoryMethodSmooth=void 0;class _u extends Fs{constructor(e,t,n,r){super(e,t,n,r)}}_u.prototype.ValueTypeName="vector";class bf{constructor(e="",t=-1,n=[],r=_y){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=cs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,l=n.length;o!==l;++o)t.push(b3(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Fs.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let l=0;l<s;l++){let u=[],d=[];u.push((l+s-1)%s,l,(l+1)%s),d.push(0,1,0);const p=Jb(u);u=__(u,1,p),d=__(d,1,p),!r&&u[0]===0&&(u.push(s),d.push(d[0])),o.push(new yu(".morphTargetInfluences["+t[l].name+"]",u,d).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const d=e[l],p=d.name.match(s);if(p&&p.length>1){const m=p[1];let v=r[m];v||(r[m]=v=[]),v.push(d)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,n));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(m,v,y,A,w){if(y.length!==0){const M=[],S=[];jA(y,M,S,A),M.length!==0&&w.push(new m(v,M,S))}},r=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let u=e.length||-1;const d=e.hierarchy||[];for(let m=0;m<d.length;m++){const v=d[m].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let A;for(A=0;A<v.length;A++)if(v[A].morphTargets)for(let w=0;w<v[A].morphTargets.length;w++)y[v[A].morphTargets[w]]=-1;for(const w in y){const M=[],S=[];for(let T=0;T!==v[A].morphTargets.length;++T){const b=v[A];M.push(b.time),S.push(b.morphTarget===w?1:0)}r.push(new yu(".morphTargetInfluence["+w+"]",M,S))}u=y.length*o}else{const y=".bones["+t[m].name+"]";n(_u,y+".position",v,"pos",r),n(xu,y+".quaternion",v,"rot",r),n(_u,y+".scale",v,"scl",r)}}return r.length===0?null:new this(s,u,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function T3(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yu;case"vector":case"vector2":case"vector3":case"vector4":return _u;case"color":return JA;case"quaternion":return xu;case"bool":case"boolean":return bu;case"string":return Ru}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function b3(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=T3(i.type);if(i.times===void 0){const t=[],n=[];jA(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Da={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class KA{constructor(e,t,n){const r=this;let s=!1,o=0,l=0,u;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(p){l++,s===!1&&r.onStart!==void 0&&r.onStart(p,o,l),s=!0},this.itemEnd=function(p){o++,r.onProgress!==void 0&&r.onProgress(p,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return u?u(p):p},this.setURLModifier=function(p){return u=p,this},this.addHandler=function(p,m){return d.push(p,m),this},this.removeHandler=function(p){const m=d.indexOf(p);return m!==-1&&d.splice(m,2),this},this.getHandler=function(p){for(let m=0,v=d.length;m<v;m+=2){const y=d[m],A=d[m+1];if(y.global&&(y.lastIndex=0),y.test(p))return A}return null}}}const qb=new KA;class dr{constructor(e){this.manager=e!==void 0?e:qb,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}dr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ta={};class R3 extends Error{constructor(e,t){super(e),this.response=t}}class ds extends dr{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Da.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ta[e]!==void 0){Ta[e].push({onLoad:t,onProgress:n,onError:r});return}Ta[e]=[],Ta[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const p=Ta[e],m=d.body.getReader(),v=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),y=v?parseInt(v):0,A=y!==0;let w=0;const M=new ReadableStream({start(S){T();function T(){m.read().then(({done:b,value:B})=>{if(b)S.close();else{w+=B.byteLength;const F=new ProgressEvent("progress",{lengthComputable:A,loaded:w,total:y});for(let N=0,z=p.length;N<z;N++){const G=p[N];G.onProgress&&G.onProgress(F)}S.enqueue(B),T()}},b=>{S.error(b)})}}});return new Response(M)}else throw new R3(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(u){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return d.json();default:if(l==="")return d.text();{const m=/charset="?([^;"\s]*)"?/i.exec(l),v=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(v);return d.arrayBuffer().then(A=>y.decode(A))}}}).then(d=>{Da.add(e,d);const p=Ta[e];delete Ta[e];for(let m=0,v=p.length;m<v;m++){const y=p[m];y.onLoad&&y.onLoad(d)}}).catch(d=>{const p=Ta[e];if(p===void 0)throw this.manager.itemError(e),d;delete Ta[e];for(let m=0,v=p.length;m<v;m++){const y=p[m];y.onError&&y.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class P3 extends dr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new ds(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=bf.parse(e[n]);t.push(r)}return t}}class B3 extends dr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],l=new Ty,u=new ds(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let d=0;function p(m){u.load(e[m],function(v){const y=s.parse(v,!0);o[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},d+=1,d===6&&(y.mipmapCount===1&&(l.minFilter=li),l.image=o,l.format=y.format,l.needsUpdate=!0,t&&t(l))},n,r)}if(Array.isArray(e))for(let m=0,v=e.length;m<v;++m)p(m);else u.load(e,function(m){const v=s.parse(m,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let A=0;A<y;A++){o[A]={mipmaps:[]};for(let w=0;w<v.mipmapCount;w++)o[A].mipmaps.push(v.mipmaps[A*v.mipmapCount+w]),o[A].format=v.format,o[A].width=v.width,o[A].height=v.height}l.image=o}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=li),l.format=v.format,l.needsUpdate=!0,t&&t(l)},n,r);return l}}class Np extends dr{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Da.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=Pp("img");function u(){p(),Da.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(m){p(),r&&r(m),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",u,!1),l.removeEventListener("error",d,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class I3 extends dr{constructor(e){super(e)}load(e,t,n,r){const s=new Xp;s.colorSpace=Vr;const o=new Np(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function u(d){o.load(e[d],function(p){s.images[d]=p,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let d=0;d<e.length;++d)u(d);return s}}class D3 extends dr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new ko,l=new ds(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(u){let d;try{d=s.parse(u)}catch(p){if(r!==void 0)r(p);else{console.error(p);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:os,o.wrapT=d.wrapT!==void 0?d.wrapT:os,o.magFilter=d.magFilter!==void 0?d.magFilter:li,o.minFilter=d.minFilter!==void 0?d.minFilter:li,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(o.colorSpace=d.colorSpace),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=Ds),d.mipmapCount===1&&(o.minFilter=li),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d)},n,r),o}}class Zb extends dr{constructor(e){super(e)}load(e,t,n,r){const s=new Gn,o=new Np(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class jl extends dn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new nt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class $b extends jl{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new nt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const mx=new Nt,lw=new J,cw=new J;class YA{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Le(512,512),this.map=null,this.mapPass=null,this.matrix=new Nt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Yp,this._frameExtents=new Le(1,1),this._viewportCount=1,this._viewports=[new yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;lw.setFromMatrixPosition(e.matrixWorld),t.position.copy(lw),cw.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(cw),t.updateMatrixWorld(),mx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mx),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(mx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class L3 extends YA{constructor(){super(new ti(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=wf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class QA extends jl{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.target=new dn,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new L3}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const uw=new Nt,jd=new J,gx=new J;class N3 extends YA{constructor(){super(new ti(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Le(4,2),this._viewportCount=6,this._viewports=[new yn(2,1,1,1),new yn(0,1,1,1),new yn(3,1,1,1),new yn(1,1,1,1),new yn(3,0,1,1),new yn(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),jd.setFromMatrixPosition(e.matrixWorld),n.position.copy(jd),gx.copy(n.position),gx.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(gx),n.updateMatrixWorld(),r.makeTranslation(-jd.x,-jd.y,-jd.z),uw.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uw)}}class qA extends jl{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new N3}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Oa extends jp{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,l=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,l-=p*this.view.offsetY,u=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class F3 extends YA{constructor(){super(new Oa(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ZA extends jl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.target=new dn,this.shadow=new F3}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class eR extends jl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class tR extends jl{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class nR{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class iR extends jl{constructor(e=new nR,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Gy extends dr{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new ds(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new nt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=new nt().setHex(o.value);break;case"v2":r.uniforms[s].value=new Le().fromArray(o.value);break;case"v3":r.uniforms[s].value=new J().fromArray(o.value);break;case"v4":r.uniforms[s].value=new yn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Xt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Nt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Le().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Le().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Gy.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:Ob,SpriteMaterial:IA,RawShaderMaterial:kb,ShaderMaterial:fs,PointsMaterial:Cy,MeshPhysicalMaterial:Ns,MeshStandardMaterial:$p,MeshPhongMaterial:Hb,MeshToonMaterial:zb,MeshNormalMaterial:Gb,MeshLambertMaterial:Vb,MeshDepthMaterial:zy,MeshDistanceMaterial:WA,MeshBasicMaterial:as,MeshMatcapMaterial:Wb,LineDashedMaterial:jb,LineBasicMaterial:fr,Material:bi};return new t[e]}}class Fl{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class rR extends Jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class sR extends dr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new ds(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(y,A){if(t[A]!==void 0)return t[A];const M=y.interleavedBuffers[A],S=s(y,M.buffer),T=cf(M.type,S),b=new Jp(T,M.stride);return b.uuid=M.uuid,t[A]=b,b}function s(y,A){if(n[A]!==void 0)return n[A];const M=y.arrayBuffers[A],S=new Uint32Array(M).buffer;return n[A]=S,S}const o=e.isInstancedBufferGeometry?new rR:new Jt,l=e.data.index;if(l!==void 0){const y=cf(l.type,l.array);o.setIndex(new xn(y,1))}const u=e.data.attributes;for(const y in u){const A=u[y];let w;if(A.isInterleavedBufferAttribute){const M=r(e.data,A.data);w=new zl(M,A.itemSize,A.offset,A.normalized)}else{const M=cf(A.type,A.array),S=A.isInstancedBufferAttribute?gu:xn;w=new S(M,A.itemSize,A.normalized)}A.name!==void 0&&(w.name=A.name),A.usage!==void 0&&w.setUsage(A.usage),o.setAttribute(y,w)}const d=e.data.morphAttributes;if(d)for(const y in d){const A=d[y],w=[];for(let M=0,S=A.length;M<S;M++){const T=A[M];let b;if(T.isInterleavedBufferAttribute){const B=r(e.data,T.data);b=new zl(B,T.itemSize,T.offset,T.normalized)}else{const B=cf(T.type,T.array);b=new xn(B,T.itemSize,T.normalized)}T.name!==void 0&&(b.name=T.name),w.push(b)}o.morphAttributes[y]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,A=m.length;y!==A;++y){const w=m[y];o.addGroup(w.start,w.count,w.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const y=new J;v.center!==void 0&&y.fromArray(v.center),o.boundingSphere=new Qi(y,v.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class U3 extends dr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=this.path===""?Fl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new ds(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let d=null;try{d=JSON.parse(u)}catch(m){r!==void 0&&r(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const p=d.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(d,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?Fl.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ds(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,u,l,n),p=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,p),this.bindLightTargets(d),t!==void 0){let m=!1;for(const v in o)if(o[v].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,r,l,o,t),d=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,d),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new du().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new Kp().fromJSON(e[s],r);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new sR;for(let s=0,o=e.length;s<o;s++){let l;const u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(u);break;default:u.type in aw?l=aw[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),n[u.uuid]=l}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new Gy;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const u=e[o];n[u.uuid]===void 0&&(n[u.uuid]=s.parse(u)),r[u.uuid]=n[u.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=bf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function o(u){return n.manager.itemStart(u),s.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const d=u,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return o(p)}else return u.data?{data:cf(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new KA(t);s=new Np(u),s.setCrossOrigin(this.crossOrigin);for(let d=0,p=e.length;d<p;d++){const m=e[d],v=m.url;if(Array.isArray(v)){const y=[];for(let A=0,w=v.length;A<w;A++){const M=v[A],S=l(M);S!==null&&(S instanceof HTMLImageElement?y.push(S):y.push(new ko(S.data,S.width,S.height)))}r[m.uuid]=new Ll(y)}else{const y=l(m.url);r[m.uuid]=new Ll(y)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(o){if(typeof o=="string"){const l=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(u)}else return o.data?{data:cf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Np(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const u=e[o],d=u.url;if(Array.isArray(d)){const p=[];for(let m=0,v=d.length;m<v;m++){const y=d[m],A=await s(y);A!==null&&(A instanceof HTMLImageElement?p.push(A):p.push(new ko(A.data,A.width,A.height)))}n[u.uuid]=new Ll(p)}else{const p=await s(u.url);n[u.uuid]=new Ll(p)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=t[l.image],d=u.data;let p;Array.isArray(d)?(p=new Xp,d.length===6&&(p.needsUpdate=!0)):(d&&d.data?p=new ko:p=new Gn,d&&(p.needsUpdate=!0)),p.source=u,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=n(l.mapping,O3)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=n(l.wrap[0],hw),p.wrapT=n(l.wrap[1],hw)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.minFilter!==void 0&&(p.minFilter=n(l.minFilter,fw)),l.magFilter!==void 0&&(p.magFilter=n(l.magFilter,fw)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),r[l.uuid]=p}return r}parseObject(e,t,n,r,s){let o;function l(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function u(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let A=0,w=v.length;A<w;A++){const M=v[A];n[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),y.push(n[M])}return y}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function d(v){return r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),r[v]}let p,m;switch(e.type){case"Scene":o=new BA,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new nt(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Ey(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new My(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ti(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Oa(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new eR(e.color,e.intensity);break;case"DirectionalLight":o=new ZA(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new qA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new tR(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new QA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new $b(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new iR().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),m=u(e.material),o=new DA(p,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),m=u(e.material),o=new ni(p,m);break;case"InstancedMesh":p=l(e.geometry),m=u(e.material);const v=e.count,y=e.instanceMatrix,A=e.instanceColor;o=new LA(p,m,v),o.instanceMatrix=new gu(new Float32Array(y.array),16),A!==void 0&&(o.instanceColor=new gu(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":p=l(e.geometry),m=u(e.material),o=new wb(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),o.geometry=p,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(w=>{const M=new hr;M.min.fromArray(w.boxMin),M.max.fromArray(w.boxMax);const S=new Qi;return S.radius=w.sphereRadius,S.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:M,sphereInitialized:w.sphereInitialized,sphere:S}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=d(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=d(e.colorsTexture.uuid));break;case"LOD":o=new Eb;break;case"Line":o=new Va(l(e.geometry),u(e.material));break;case"LineLoop":o=new NA(l(e.geometry),u(e.material));break;case"LineSegments":o=new vo(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new FA(l(e.geometry),u(e.material));break;case"Sprite":o=new Mb(u(e.material));break;case"Group":o=new Ia;break;case"Bone":o=new wy;break;default:o=new dn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)o.add(this.parseObject(v[y],t,n,r,s))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const A=v[y];o.animations.push(s[A])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const A=v[y],w=o.getObjectByProperty("uuid",A.object);w!==void 0&&o.addLevel(w,A.distance,A.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new dn}})}}const O3={UVMapping:fy,CubeReflectionMapping:za,CubeRefractionMapping:kl,EquirectangularReflectionMapping:Ep,EquirectangularRefractionMapping:wp,CubeUVReflectionMapping:Df},hw={RepeatWrapping:Hl,ClampToEdgeWrapping:os,MirroredRepeatWrapping:yf},fw={NearestFilter:Oi,NearestMipmapNearestFilter:dy,NearestMipmapLinearFilter:nu,LinearFilter:li,LinearMipmapNearestFilter:ff,LinearMipmapLinearFilter:Ds};class oR extends dr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Da.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(d=>{t&&t(d),s.manager.itemEnd(e)}).catch(d=>{r&&r(d)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(e,l).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return Da.add(e,d),t&&t(d),s.manager.itemEnd(e),d}).catch(function(d){r&&r(d),Da.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Da.add(e,u),s.manager.itemStart(e)}}let Fg;class $A{static getContext(){return Fg===void 0&&(Fg=new(window.AudioContext||window.webkitAudioContext)),Fg}static setContext(e){Fg=e}}class k3 extends dr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new ds(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const d=u.slice(0);$A.getContext().decodeAudioData(d,function(m){t(m)}).catch(l)}catch(d){l(d)}},n,r);function l(u){r?r(u):console.error(u),s.manager.itemError(e)}}}const dw=new Nt,pw=new Nt,Oc=new Nt;class H3{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ti,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ti,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Oc.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(hu*t.fov*.5)/t.zoom;let l,u;pw.elements[12]=-r,dw.elements[12]=r,l=-o*t.aspect+s,u=o*t.aspect+s,Oc.elements[0]=2*t.near/(u-l),Oc.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(Oc),l=-o*t.aspect-s,u=o*t.aspect-s,Oc.elements[0]=2*t.near/(u-l),Oc.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(Oc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(pw),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(dw)}}class aR extends ti{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class eS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=mw(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=mw();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function mw(){return performance.now()}const kc=new J,gw=new ki,z3=new J,Hc=new J;class G3 extends dn{constructor(){super(),this.type="AudioListener",this.context=$A.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(kc,gw,z3),Hc.set(0,0,-1).applyQuaternion(gw),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(kc.x,r),t.positionY.linearRampToValueAtTime(kc.y,r),t.positionZ.linearRampToValueAtTime(kc.z,r),t.forwardX.linearRampToValueAtTime(Hc.x,r),t.forwardY.linearRampToValueAtTime(Hc.y,r),t.forwardZ.linearRampToValueAtTime(Hc.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(kc.x,kc.y,kc.z),t.setOrientation(Hc.x,Hc.y,Hc.z,n.x,n.y,n.z)}}class lR extends dn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const zc=new J,vw=new ki,V3=new J,Gc=new J;class W3 extends lR{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(zc,vw,V3),Gc.set(0,0,1).applyQuaternion(vw);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(zc.x,n),t.positionY.linearRampToValueAtTime(zc.y,n),t.positionZ.linearRampToValueAtTime(zc.z,n),t.orientationX.linearRampToValueAtTime(Gc.x,n),t.orientationY.linearRampToValueAtTime(Gc.y,n),t.orientationZ.linearRampToValueAtTime(Gc.z,n)}else t.setPosition(zc.x,zc.y,zc.z),t.setOrientation(Gc.x,Gc.y,Gc.z)}}class j3{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class cR{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)n[s+l]=n[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(n,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=t*this._origIndex;this._mixBufferRegion(n,r,u,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let u=t,d=t+t;u!==d;++u)if(n[u]!==n[u+t]){l.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){ki.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;ki.multiplyQuaternionsFlat(e,o,e,t,e,n),ki.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]*o+e[n+l]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[n+o]*r}}}const tS="\\[\\]\\.:\\/",X3=new RegExp("["+tS+"]","g"),nS="[^"+tS+"]",J3="[^"+tS.replace("\\.","")+"]",K3=/((?:WC+[\/:])*)/.source.replace("WC",nS),Y3=/(WCOD+)?/.source.replace("WCOD",J3),Q3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nS),q3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nS),Z3=new RegExp("^"+K3+Y3+Q3+q3+"$"),$3=["material","materials","bones","map"];class eU{constructor(e,t,n){const r=n||mn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class mn{constructor(e,t,n){this.path=t,this.parsedPath=n||mn.parseTrackName(t),this.node=mn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new mn.Composite(e,t,n):new mn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(X3,"")}static parseTrackName(e){const t=Z3.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);$3.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const u=n(l.children);if(u)return u}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=mn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===d){d=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[r];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mn.Composite=eU;mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mn.prototype.GetterByBindingType=[mn.prototype._getValue_direct,mn.prototype._getValue_array,mn.prototype._getValue_arrayElement,mn.prototype._getValue_toArray];mn.prototype.SetterByBindingTypeAndVersioning=[[mn.prototype._setValue_direct,mn.prototype._setValue_direct_setNeedsUpdate,mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_array,mn.prototype._setValue_array_setNeedsUpdate,mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_arrayElement,mn.prototype._setValue_arrayElement_setNeedsUpdate,mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_fromArray,mn.prototype._setValue_fromArray_setNeedsUpdate,mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tU{constructor(){this.isAnimationObjectGroup=!0,this.uuid=cs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,u=e.length,d=this.nCachedObjects_;for(let p=0,m=arguments.length;p!==m;++p){const v=arguments[p],y=v.uuid;let A=t[y];if(A===void 0){A=u++,t[y]=A,e.push(v);for(let w=0,M=o;w!==M;++w)s[w].push(new mn(v,n[w],r[w]))}else if(A<d){l=e[A];const w=--d,M=e[w];t[M.uuid]=A,e[A]=M,t[y]=w,e[w]=v;for(let S=0,T=o;S!==T;++S){const b=s[S],B=b[w];let F=b[A];b[A]=B,F===void 0&&(F=new mn(v,n[S],r[S])),b[w]=F}}else e[A]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],d=u.uuid,p=t[d];if(p!==void 0&&p>=s){const m=s++,v=e[m];t[v.uuid]=p,e[p]=v,t[d]=m,e[m]=u;for(let y=0,A=r;y!==A;++y){const w=n[y],M=w[m],S=w[p];w[p]=M,w[m]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,u=arguments.length;l!==u;++l){const d=arguments[l],p=d.uuid,m=t[p];if(m!==void 0)if(delete t[p],m<s){const v=--s,y=e[v],A=--o,w=e[A];t[y.uuid]=m,e[m]=y,t[w.uuid]=v,e[v]=w,e.pop();for(let M=0,S=r;M!==S;++M){const T=n[M],b=T[v],B=T[A];T[m]=b,T[v]=B,T.pop()}}else{const v=--o,y=e[v];v>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let A=0,w=r;A!==w;++A){const M=n[A];M[m]=M[v],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,u=this._objects,d=u.length,p=this.nCachedObjects_,m=new Array(d);r=s.length,n[e]=r,o.push(e),l.push(t),s.push(m);for(let v=p,y=u.length;v!==y;++v){const A=u[v];m[v]=new mn(A,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,u=o[l],d=e[l];t[d]=n,o[n]=u,o.pop(),s[n]=s[l],s.pop(),r[n]=r[l],r.pop()}}}class uR{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),u={endingStart:iu,endingEnd:iu};for(let d=0;d!==o;++d){const p=s[d].createInterpolant(null);l[d]=p,p.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=eb,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,d=l.sampleValues;return u[0]=s,u[1]=s+n,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*n;u<0||n===0?t=0:(this._startTime=null,t=n*u)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const u=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case wA:for(let p=0,m=u.length;p!==m;++p)u[p].evaluate(o),d[p].accumulateAdditive(l);break;case _y:default:for(let p=0,m=u.length;p!==m;++p)u[p].evaluate(o),d[p].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===tb;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===$T){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=ru,r.endingEnd=ru):(e?r.endingStart=this.zeroSlopeAtStart?ru:iu:r.endingStart=Cp,t?r.endingEnd=this.zeroSlopeAtEnd?ru:iu:r.endingEnd=Cp)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,u[0]=t,l[1]=s+e,u[1]=n,this}}const nU=new Float32Array(1);class iU extends Go{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,u=n.uuid,d=this._bindingsByRootAndName;let p=d[u];p===void 0&&(p={},d[u]=p);for(let m=0;m!==s;++m){const v=r[m],y=v.name;let A=p[y];if(A!==void 0)++A.referenceCount,o[m]=A;else{if(A=o[m],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,u,y));continue}const w=t&&t._propertyBindings[m].binding.parsedPath;A=new cR(mn.create(n,y,w),v.ValueTypeName,v.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,u,y),o[m]=A}l[m].resultBuffer=A.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],u=l.knownActions,d=u[u.length-1],p=e._byClipCacheIndex;d._byClipCacheIndex=p,u[p]=d,u.pop(),e._byClipCacheIndex=null;const m=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete m[v],u.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,l=o[r],u=t[t.length-1],d=e._cacheIndex;u._cacheIndex=d,t[d]=u,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new XA(new Float32Array(2),new Float32Array(2),1,nU),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?bf.findByName(r,e):e;const l=o!==null?o.uuid:e,u=this._actionsByClip[l];let d=null;if(n===void 0&&(o!==null?n=o.blendMode:n=_y),u!==void 0){const m=u.actionByRoot[s];if(m!==void 0&&m.blendMode===n)return m;d=u.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const p=new uR(this,o,t,n);return this._bindAction(p,d),this._addInactiveAction(p,l,s),p}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?bf.findByName(n,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(r,e,s,o);const l=this._bindings,u=this._nActiveBindings;for(let d=0;d!==u;++d)l[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let l=0,u=o.length;l!==u;++l){const d=o[l];this._deactivateAction(d);const p=d._cacheIndex,m=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,m._cacheIndex=p,t[p]=m,t.pop(),this._removeInactiveBindingsForAction(d)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot,u=l[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class rU extends Ay{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new Sy(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class sU extends Ay{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=n,this.texture=new Wp(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class iS{constructor(e){this.value=e}clone(){return new iS(this.value.clone===void 0?this.value:this.value.clone())}}let oU=0;class aU extends Go{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:oU++}),this.name="",this.usage=bp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class lU extends Jp{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class cU{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const yw=new Nt;class hR{constructor(e,t,n=0,r=1/0){this.ray=new wu(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new fu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return yw.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(yw),this}intersectObject(e,t=!0,n=[]){return A_(e,this,n,t),n.sort(xw),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)A_(e[r],this,n,t);return n.sort(xw),n}}function xw(i,e){return i.distance-e.distance}function A_(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let o=0,l=s.length;o<l;o++)A_(s[o],e,t,!0)}}class S_{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Wt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Wt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class uU{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class rS{constructor(e,t,n,r){rS.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const _w=new Le;class hU{constructor(e=new Le(1/0,1/0),t=new Le(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_w.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_w).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Aw=new J,Ug=new J;class fU{constructor(e=new J,t=new J){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Aw.subVectors(e,this.start),Ug.subVectors(this.end,this.start);const n=Ug.dot(Ug);let s=Ug.dot(Aw)/n;return t&&(s=Wt(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Sw=new J;class dU extends dn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Jt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,u=32;o<u;o++,l++){const d=o/u*Math.PI*2,p=l/u*Math.PI*2;r.push(Math.cos(d),Math.sin(d),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new Mt(r,3));const s=new fr({fog:!1,toneMapped:!1});this.cone=new vo(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Sw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Sw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const bl=new J,Og=new Nt,vx=new Nt;class pU extends vo{constructor(e){const t=fR(e),n=new Jt,r=[],s=[],o=new nt(0,0,1),l=new nt(0,1,0);for(let d=0;d<t.length;d++){const p=t[d];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}n.setAttribute("position",new Mt(r,3)),n.setAttribute("color",new Mt(s,3));const u=new fr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");vx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Og.multiplyMatrices(vx,l.matrixWorld),bl.setFromMatrixPosition(Og),r.setXYZ(o,bl.x,bl.y,bl.z),Og.multiplyMatrices(vx,l.parent.matrixWorld),bl.setFromMatrixPosition(Og),r.setXYZ(o+1,bl.x,bl.y,bl.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function fR(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...fR(i.children[t]));return e}class mU extends ni{constructor(e,t,n){const r=new Zp(t,4,2),s=new as({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const gU=new J,Mw=new nt,Ew=new nt;class vU extends dn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new qp(t);r.rotateY(Math.PI*.5),this.material=new as({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new xn(o,3)),this.add(new ni(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Mw.copy(this.light.color),Ew.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?Mw:Ew;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(gU.setFromMatrixPosition(this.light.matrixWorld).negate())}}class yU extends vo{constructor(e=10,t=10,n=4473924,r=8947848){n=new nt(n),r=new nt(r);const s=t/2,o=e/t,l=e/2,u=[],d=[];for(let v=0,y=0,A=-l;v<=t;v++,A+=o){u.push(-l,0,A,l,0,A),u.push(A,0,-l,A,0,l);const w=v===s?n:r;w.toArray(d,y),y+=3,w.toArray(d,y),y+=3,w.toArray(d,y),y+=3,w.toArray(d,y),y+=3}const p=new Jt;p.setAttribute("position",new Mt(u,3)),p.setAttribute("color",new Mt(d,3));const m=new fr({vertexColors:!0,toneMapped:!1});super(p,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class xU extends vo{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new nt(s),o=new nt(o);const l=[],u=[];if(t>1)for(let m=0;m<t;m++){const v=m/t*(Math.PI*2),y=Math.sin(v)*e,A=Math.cos(v)*e;l.push(0,0,0),l.push(y,0,A);const w=m&1?s:o;u.push(w.r,w.g,w.b),u.push(w.r,w.g,w.b)}for(let m=0;m<n;m++){const v=m&1?s:o,y=e-e/n*m;for(let A=0;A<r;A++){let w=A/r*(Math.PI*2),M=Math.sin(w)*y,S=Math.cos(w)*y;l.push(M,0,S),u.push(v.r,v.g,v.b),w=(A+1)/r*(Math.PI*2),M=Math.sin(w)*y,S=Math.cos(w)*y,l.push(M,0,S),u.push(v.r,v.g,v.b)}}const d=new Jt;d.setAttribute("position",new Mt(l,3)),d.setAttribute("color",new Mt(u,3));const p=new fr({vertexColors:!0,toneMapped:!1});super(d,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const ww=new J,kg=new J,Cw=new J;class _U extends dn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Jt;r.setAttribute("position",new Mt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new fr({fog:!1,toneMapped:!1});this.lightPlane=new Va(r,s),this.add(this.lightPlane),r=new Jt,r.setAttribute("position",new Mt([0,0,0,0,0,1],3)),this.targetLine=new Va(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ww.setFromMatrixPosition(this.light.matrixWorld),kg.setFromMatrixPosition(this.light.target.matrixWorld),Cw.subVectors(kg,ww),this.lightPlane.lookAt(kg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(kg),this.targetLine.scale.z=Cw.length()}}const Hg=new J,$n=new jp;class AU extends vo{constructor(e){const t=new Jt,n=new fr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(A,w){u(A),u(w)}function u(A){r.push(0,0,0),s.push(0,0,0),o[A]===void 0&&(o[A]=[]),o[A].push(r.length/3-1)}t.setAttribute("position",new Mt(r,3)),t.setAttribute("color",new Mt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new nt(16755200),p=new nt(16711680),m=new nt(43775),v=new nt(16777215),y=new nt(3355443);this.setColors(d,p,m,v,y)}setColors(e,t,n,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;$n.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===mo?-1:0;oi("c",t,e,$n,0,0,s),oi("t",t,e,$n,0,0,1),oi("n1",t,e,$n,-1,-1,s),oi("n2",t,e,$n,n,-1,s),oi("n3",t,e,$n,-1,r,s),oi("n4",t,e,$n,n,r,s),oi("f1",t,e,$n,-1,-1,1),oi("f2",t,e,$n,n,-1,1),oi("f3",t,e,$n,-1,r,1),oi("f4",t,e,$n,n,r,1),oi("u1",t,e,$n,n*.7,r*1.1,s),oi("u2",t,e,$n,-1*.7,r*1.1,s),oi("u3",t,e,$n,0,r*2,s),oi("cf1",t,e,$n,-1,0,1),oi("cf2",t,e,$n,n,0,1),oi("cf3",t,e,$n,0,-1,1),oi("cf4",t,e,$n,0,r,1),oi("cn1",t,e,$n,-1,0,s),oi("cn2",t,e,$n,n,0,s),oi("cn3",t,e,$n,0,-1,s),oi("cn4",t,e,$n,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function oi(i,e,t,n,r,s,o){Hg.set(r,s,o).unproject(n);const l=e[i];if(l!==void 0){const u=t.getAttribute("position");for(let d=0,p=l.length;d<p;d++)u.setXYZ(l[d],Hg.x,Hg.y,Hg.z)}}const zg=new hr;class SU extends vo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new Jt;s.setIndex(new xn(n,1)),s.setAttribute("position",new xn(r,3)),super(s,new fr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&zg.setFromObject(this.object),zg.isEmpty())return;const e=zg.min,t=zg.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class MU extends vo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Jt;s.setIndex(new xn(n,1)),s.setAttribute("position",new Mt(r,3)),super(s,new fr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class EU extends Va{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Jt;o.setAttribute("position",new Mt(s,3)),o.computeBoundingSphere(),super(o,new fr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Jt;u.setAttribute("position",new Mt(l,3)),u.computeBoundingSphere(),this.add(new ni(u,new as({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Tw=new J;let Gg,yx;class wU extends dn{constructor(e=new J(0,0,1),t=new J(0,0,0),n=1,r=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",Gg===void 0&&(Gg=new Jt,Gg.setAttribute("position",new Mt([0,0,0,0,1,0],3)),yx=new Nf(0,.5,1,5,1),yx.translate(0,-.5,0)),this.position.copy(t),this.line=new Va(Gg,new fr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ni(yx,new as({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Tw.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Tw,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class CU extends vo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Jt;r.setAttribute("position",new Mt(t,3)),r.setAttribute("color",new Mt(n,3));const s=new fr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new nt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class TU{constructor(){this.type="ShapePath",this.color=new nt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Bp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const T=[];for(let b=0,B=S.length;b<B;b++){const F=S[b],N=new du;N.curves=F.curves,T.push(N)}return T}function n(S,T){const b=T.length;let B=!1;for(let F=b-1,N=0;N<b;F=N++){let z=T[F],G=T[N],U=G.x-z.x,L=G.y-z.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(z=T[N],U=-U,G=T[F],L=-L),S.y<z.y||S.y>G.y)continue;if(S.y===z.y){if(S.x===z.x)return!0}else{const j=L*(S.x-z.x)-U*(S.y-z.y);if(j===0)return!0;if(j<0)continue;B=!B}}else{if(S.y!==z.y)continue;if(G.x<=S.x&&S.x<=z.x||z.x<=S.x&&S.x<=G.x)return!0}}return B}const r=Ho.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,u;const d=[];if(s.length===1)return l=s[0],u=new du,u.curves=l.curves,d.push(u),d;let p=!r(s[0].getPoints());p=e?!p:p;const m=[],v=[];let y=[],A=0,w;v[A]=void 0,y[A]=[];for(let S=0,T=s.length;S<T;S++)l=s[S],w=l.getPoints(),o=r(w),o=e?!o:o,o?(!p&&v[A]&&A++,v[A]={s:new du,p:w},v[A].s.curves=l.curves,p&&A++,y[A]=[]):y[A].push({h:l,p:w[0]});if(!v[0])return t(s);if(v.length>1){let S=!1,T=0;for(let b=0,B=v.length;b<B;b++)m[b]=[];for(let b=0,B=v.length;b<B;b++){const F=y[b];for(let N=0;N<F.length;N++){const z=F[N];let G=!0;for(let U=0;U<v.length;U++)n(z.p,v[U].p)&&(b!==U&&T++,G?(G=!1,m[U].push(z)):S=!0);G&&m[b].push(z)}}T>0&&S===!1&&(y=m)}let M;for(let S=0,T=v.length;S<T;S++){u=v[S].s,d.push(u),M=y[S];for(let b=0,B=M.length;b<B;b++)u.holes.push(M[b].h)}return d}}class bU extends Go{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function RU(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function PU(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function BU(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function M_(i,e,t,n){const r=IU(n);switch(t){case xA:return i*e;case AA:return i*e;case SA:return i*e*2;case vy:return i*e/r.components*r.byteLength;case Vp:return i*e/r.components*r.byteLength;case MA:return i*e*2/r.components*r.byteLength;case yy:return i*e*2/r.components*r.byteLength;case _A:return i*e*3/r.components*r.byteLength;case ur:return i*e*4/r.components*r.byteLength;case xy:return i*e*4/r.components*r.byteLength;case cp:case up:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case hp:case fp:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Ev:case Cv:return Math.max(i,16)*Math.max(e,8)/4;case Mv:case wv:return Math.max(i,8)*Math.max(e,8)/2;case Tv:case bv:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Rv:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Pv:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Bv:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case Iv:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case Dv:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case Lv:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case Nv:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case Fv:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Uv:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case Ov:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case kv:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case Hv:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case zv:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Gv:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Vv:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case dp:case Wv:case jv:return Math.ceil(i/4)*Math.ceil(e/4)*16;case EA:case Xv:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Jv:case Kv:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function IU(i){switch(i){case go:case gA:return{byteLength:1,components:1};case xf:case vA:case Lf:return{byteLength:2,components:1};case my:case gy:return{byteLength:2,components:4};case Ga:case py:case jr:return{byteLength:4,components:1};case yA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class DU{static contain(e,t){return RU(e,t)}static cover(e,t){return PU(e,t)}static fill(e){return BU(e)}static getByteLength(e,t,n,r){return M_(e,t,n,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zp);function dR(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function LU(i){const e=new WeakMap;function t(l,u){const d=l.array,p=l.usage,m=d.byteLength,v=i.createBuffer();i.bindBuffer(u,v),i.bufferData(u,d,p),l.onUploadCallback();let y;if(d instanceof Float32Array)y=i.FLOAT;else if(d instanceof Uint16Array)l.isFloat16BufferAttribute?y=i.HALF_FLOAT:y=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)y=i.SHORT;else if(d instanceof Uint32Array)y=i.UNSIGNED_INT;else if(d instanceof Int32Array)y=i.INT;else if(d instanceof Int8Array)y=i.BYTE;else if(d instanceof Uint8Array)y=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)y=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:y,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version,size:m}}function n(l,u,d){const p=u.array,m=u.updateRanges;if(i.bindBuffer(d,l),m.length===0)i.bufferSubData(d,0,p);else{m.sort((y,A)=>y.start-A.start);let v=0;for(let y=1;y<m.length;y++){const A=m[v],w=m[y];w.start<=A.start+A.count+1?A.count=Math.max(A.count,w.start+w.count-A.start):(++v,m[v]=w)}m.length=v+1;for(let y=0,A=m.length;y<A;y++){const w=m[y];i.bufferSubData(d,w.start*p.BYTES_PER_ELEMENT,p,w.start,w.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);u&&(i.deleteBuffer(u.buffer),e.delete(l))}function o(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const d=e.get(l);if(d===void 0)e.set(l,t(l,u));else if(d.version<l.version){if(d.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,l,u),d.version=l.version}}return{get:r,remove:s,update:o}}var NU=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,FU=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,UU=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,OU=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kU=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,HU=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,zU=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,GU=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,VU=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,WU=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,jU=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,XU=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,JU=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,KU=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,YU=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,QU=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,qU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ZU=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,$U=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,eO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,tO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,nO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,iO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,rO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,sO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,oO=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,aO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,lO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,cO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,uO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,hO="gl_FragColor = linearToOutputTexel( gl_FragColor );",fO=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,dO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,pO=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,mO=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,gO=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,vO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,yO=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,xO=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_O=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,AO=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,SO=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,MO=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,EO=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wO=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,CO=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,TO=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,bO=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,RO=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,PO=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,BO=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,IO=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,DO=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,LO=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,NO=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,FO=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,UO=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,OO=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kO=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,HO=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,zO=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,GO=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,VO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,WO=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jO=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,XO=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,JO=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,KO=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,YO=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,QO=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,qO=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,ZO=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,$O=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ek=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nk=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ik=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,rk=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,sk=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ok=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ak=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,lk=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ck=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,uk=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,hk=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,fk=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dk=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,pk=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,mk=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,gk=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,vk=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,yk=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,xk=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_k=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ak=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Sk=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Mk=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Ek=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,wk=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Ck=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Tk=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,bk=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Rk=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Pk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Bk=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ik=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Dk=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Lk=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Nk=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Fk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Uk=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ok=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kk=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Hk=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,zk=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Gk=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Vk=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Wk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,jk=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Xk=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Jk=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Kk=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Yk=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qk=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qk=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zk=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,$k=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,tH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,nH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,sH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,cH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,en={alphahash_fragment:NU,alphahash_pars_fragment:FU,alphamap_fragment:UU,alphamap_pars_fragment:OU,alphatest_fragment:kU,alphatest_pars_fragment:HU,aomap_fragment:zU,aomap_pars_fragment:GU,batching_pars_vertex:VU,batching_vertex:WU,begin_vertex:jU,beginnormal_vertex:XU,bsdfs:JU,iridescence_fragment:KU,bumpmap_pars_fragment:YU,clipping_planes_fragment:QU,clipping_planes_pars_fragment:qU,clipping_planes_pars_vertex:ZU,clipping_planes_vertex:$U,color_fragment:eO,color_pars_fragment:tO,color_pars_vertex:nO,color_vertex:iO,common:rO,cube_uv_reflection_fragment:sO,defaultnormal_vertex:oO,displacementmap_pars_vertex:aO,displacementmap_vertex:lO,emissivemap_fragment:cO,emissivemap_pars_fragment:uO,colorspace_fragment:hO,colorspace_pars_fragment:fO,envmap_fragment:dO,envmap_common_pars_fragment:pO,envmap_pars_fragment:mO,envmap_pars_vertex:gO,envmap_physical_pars_fragment:TO,envmap_vertex:vO,fog_vertex:yO,fog_pars_vertex:xO,fog_fragment:_O,fog_pars_fragment:AO,gradientmap_pars_fragment:SO,lightmap_pars_fragment:MO,lights_lambert_fragment:EO,lights_lambert_pars_fragment:wO,lights_pars_begin:CO,lights_toon_fragment:bO,lights_toon_pars_fragment:RO,lights_phong_fragment:PO,lights_phong_pars_fragment:BO,lights_physical_fragment:IO,lights_physical_pars_fragment:DO,lights_fragment_begin:LO,lights_fragment_maps:NO,lights_fragment_end:FO,logdepthbuf_fragment:UO,logdepthbuf_pars_fragment:OO,logdepthbuf_pars_vertex:kO,logdepthbuf_vertex:HO,map_fragment:zO,map_pars_fragment:GO,map_particle_fragment:VO,map_particle_pars_fragment:WO,metalnessmap_fragment:jO,metalnessmap_pars_fragment:XO,morphinstance_vertex:JO,morphcolor_vertex:KO,morphnormal_vertex:YO,morphtarget_pars_vertex:QO,morphtarget_vertex:qO,normal_fragment_begin:ZO,normal_fragment_maps:$O,normal_pars_fragment:ek,normal_pars_vertex:tk,normal_vertex:nk,normalmap_pars_fragment:ik,clearcoat_normal_fragment_begin:rk,clearcoat_normal_fragment_maps:sk,clearcoat_pars_fragment:ok,iridescence_pars_fragment:ak,opaque_fragment:lk,packing:ck,premultiplied_alpha_fragment:uk,project_vertex:hk,dithering_fragment:fk,dithering_pars_fragment:dk,roughnessmap_fragment:pk,roughnessmap_pars_fragment:mk,shadowmap_pars_fragment:gk,shadowmap_pars_vertex:vk,shadowmap_vertex:yk,shadowmask_pars_fragment:xk,skinbase_vertex:_k,skinning_pars_vertex:Ak,skinning_vertex:Sk,skinnormal_vertex:Mk,specularmap_fragment:Ek,specularmap_pars_fragment:wk,tonemapping_fragment:Ck,tonemapping_pars_fragment:Tk,transmission_fragment:bk,transmission_pars_fragment:Rk,uv_pars_fragment:Pk,uv_pars_vertex:Bk,uv_vertex:Ik,worldpos_vertex:Dk,background_vert:Lk,background_frag:Nk,backgroundCube_vert:Fk,backgroundCube_frag:Uk,cube_vert:Ok,cube_frag:kk,depth_vert:Hk,depth_frag:zk,distanceRGBA_vert:Gk,distanceRGBA_frag:Vk,equirect_vert:Wk,equirect_frag:jk,linedashed_vert:Xk,linedashed_frag:Jk,meshbasic_vert:Kk,meshbasic_frag:Yk,meshlambert_vert:Qk,meshlambert_frag:qk,meshmatcap_vert:Zk,meshmatcap_frag:$k,meshnormal_vert:eH,meshnormal_frag:tH,meshphong_vert:nH,meshphong_frag:iH,meshphysical_vert:rH,meshphysical_frag:sH,meshtoon_vert:oH,meshtoon_frag:aH,points_vert:lH,points_frag:cH,shadow_vert:uH,shadow_frag:hH,sprite_vert:fH,sprite_frag:dH},rt={common:{diffuse:{value:new nt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Xt},alphaMap:{value:null},alphaMapTransform:{value:new Xt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Xt}},envmap:{envMap:{value:null},envMapRotation:{value:new Xt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Xt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Xt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Xt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Xt},normalScale:{value:new Le(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Xt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Xt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Xt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Xt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new nt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new nt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Xt},alphaTest:{value:0},uvTransform:{value:new Xt}},sprite:{diffuse:{value:new nt(16777215)},opacity:{value:1},center:{value:new Le(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Xt},alphaMap:{value:null},alphaMapTransform:{value:new Xt},alphaTest:{value:0}}},fo={basic:{uniforms:Cr([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.fog]),vertexShader:en.meshbasic_vert,fragmentShader:en.meshbasic_frag},lambert:{uniforms:Cr([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new nt(0)}}]),vertexShader:en.meshlambert_vert,fragmentShader:en.meshlambert_frag},phong:{uniforms:Cr([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new nt(0)},specular:{value:new nt(1118481)},shininess:{value:30}}]),vertexShader:en.meshphong_vert,fragmentShader:en.meshphong_frag},standard:{uniforms:Cr([rt.common,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.roughnessmap,rt.metalnessmap,rt.fog,rt.lights,{emissive:{value:new nt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:en.meshphysical_vert,fragmentShader:en.meshphysical_frag},toon:{uniforms:Cr([rt.common,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.gradientmap,rt.fog,rt.lights,{emissive:{value:new nt(0)}}]),vertexShader:en.meshtoon_vert,fragmentShader:en.meshtoon_frag},matcap:{uniforms:Cr([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,{matcap:{value:null}}]),vertexShader:en.meshmatcap_vert,fragmentShader:en.meshmatcap_frag},points:{uniforms:Cr([rt.points,rt.fog]),vertexShader:en.points_vert,fragmentShader:en.points_frag},dashed:{uniforms:Cr([rt.common,rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:en.linedashed_vert,fragmentShader:en.linedashed_frag},depth:{uniforms:Cr([rt.common,rt.displacementmap]),vertexShader:en.depth_vert,fragmentShader:en.depth_frag},normal:{uniforms:Cr([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,{opacity:{value:1}}]),vertexShader:en.meshnormal_vert,fragmentShader:en.meshnormal_frag},sprite:{uniforms:Cr([rt.sprite,rt.fog]),vertexShader:en.sprite_vert,fragmentShader:en.sprite_frag},background:{uniforms:{uvTransform:{value:new Xt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:en.background_vert,fragmentShader:en.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Xt}},vertexShader:en.backgroundCube_vert,fragmentShader:en.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:en.cube_vert,fragmentShader:en.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:en.equirect_vert,fragmentShader:en.equirect_frag},distanceRGBA:{uniforms:Cr([rt.common,rt.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:en.distanceRGBA_vert,fragmentShader:en.distanceRGBA_frag},shadow:{uniforms:Cr([rt.lights,rt.fog,{color:{value:new nt(0)},opacity:{value:1}}]),vertexShader:en.shadow_vert,fragmentShader:en.shadow_frag}};fo.physical={uniforms:Cr([fo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Xt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Xt},clearcoatNormalScale:{value:new Le(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Xt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Xt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Xt},sheen:{value:0},sheenColor:{value:new nt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Xt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Xt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Xt},transmissionSamplerSize:{value:new Le},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Xt},attenuationDistance:{value:0},attenuationColor:{value:new nt(0)},specularColor:{value:new nt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Xt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Xt},anisotropyVector:{value:new Le},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Xt}}]),vertexShader:en.meshphysical_vert,fragmentShader:en.meshphysical_frag};const Vg={r:0,b:0,g:0},Vc=new hs,pH=new Nt;function mH(i,e,t,n,r,s,o){const l=new nt(0);let u=s===!0?0:1,d,p,m=null,v=0,y=null;function A(b){let B=b.isScene===!0?b.background:null;return B&&B.isTexture&&(B=(b.backgroundBlurriness>0?t:e).get(B)),B}function w(b){let B=!1;const F=A(b);F===null?S(l,u):F&&F.isColor&&(S(F,1),B=!0);const N=i.xr.getEnvironmentBlendMode();N==="additive"?n.buffers.color.setClear(0,0,0,1,o):N==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||B)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function M(b,B){const F=A(B);F&&(F.isCubeTexture||F.mapping===Df)?(p===void 0&&(p=new ni(new Cu(1,1,1),new fs({name:"BackgroundCubeMaterial",uniforms:Cf(fo.backgroundCube.uniforms),vertexShader:fo.backgroundCube.vertexShader,fragmentShader:fo.backgroundCube.fragmentShader,side:br,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(N,z,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),Vc.copy(B.backgroundRotation),Vc.x*=-1,Vc.y*=-1,Vc.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(Vc.y*=-1,Vc.z*=-1),p.material.uniforms.envMap.value=F,p.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(pH.makeRotationFromEuler(Vc)),p.material.toneMapped=gn.getTransfer(F.colorSpace)!==wn,(m!==F||v!==F.version||y!==i.toneMapping)&&(p.material.needsUpdate=!0,m=F,v=F.version,y=i.toneMapping),p.layers.enableAll(),b.unshift(p,p.geometry,p.material,0,0,null)):F&&F.isTexture&&(d===void 0&&(d=new ni(new Tu(2,2),new fs({name:"BackgroundMaterial",uniforms:Cf(fo.background.uniforms),vertexShader:fo.background.vertexShader,fragmentShader:fo.background.fragmentShader,side:zo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=F,d.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,d.material.toneMapped=gn.getTransfer(F.colorSpace)!==wn,F.matrixAutoUpdate===!0&&F.updateMatrix(),d.material.uniforms.uvTransform.value.copy(F.matrix),(m!==F||v!==F.version||y!==i.toneMapping)&&(d.material.needsUpdate=!0,m=F,v=F.version,y=i.toneMapping),d.layers.enableAll(),b.unshift(d,d.geometry,d.material,0,0,null))}function S(b,B){b.getRGB(Vg,yb(i)),n.buffers.color.setClear(Vg.r,Vg.g,Vg.b,B,o)}function T(){p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return l},setClearColor:function(b,B=1){l.set(b),u=B,S(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(b){u=b,S(l,u)},render:w,addToRenderList:M,dispose:T}}function gH(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=v(null);let s=r,o=!1;function l(L,j,se,ie,he){let xe=!1;const me=m(ie,se,j);s!==me&&(s=me,d(s.object)),xe=y(L,ie,se,he),xe&&A(L,ie,se,he),he!==null&&e.update(he,i.ELEMENT_ARRAY_BUFFER),(xe||o)&&(o=!1,B(L,j,se,ie),he!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(he).buffer))}function u(){return i.createVertexArray()}function d(L){return i.bindVertexArray(L)}function p(L){return i.deleteVertexArray(L)}function m(L,j,se){const ie=se.wireframe===!0;let he=n[L.id];he===void 0&&(he={},n[L.id]=he);let xe=he[j.id];xe===void 0&&(xe={},he[j.id]=xe);let me=xe[ie];return me===void 0&&(me=v(u()),xe[ie]=me),me}function v(L){const j=[],se=[],ie=[];for(let he=0;he<t;he++)j[he]=0,se[he]=0,ie[he]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:se,attributeDivisors:ie,object:L,attributes:{},index:null}}function y(L,j,se,ie){const he=s.attributes,xe=j.attributes;let me=0;const ge=se.getAttributes();for(const H in ge)if(ge[H].location>=0){const Q=he[H];let W=xe[H];if(W===void 0&&(H==="instanceMatrix"&&L.instanceMatrix&&(W=L.instanceMatrix),H==="instanceColor"&&L.instanceColor&&(W=L.instanceColor)),Q===void 0||Q.attribute!==W||W&&Q.data!==W.data)return!0;me++}return s.attributesNum!==me||s.index!==ie}function A(L,j,se,ie){const he={},xe=j.attributes;let me=0;const ge=se.getAttributes();for(const H in ge)if(ge[H].location>=0){let Q=xe[H];Q===void 0&&(H==="instanceMatrix"&&L.instanceMatrix&&(Q=L.instanceMatrix),H==="instanceColor"&&L.instanceColor&&(Q=L.instanceColor));const W={};W.attribute=Q,Q&&Q.data&&(W.data=Q.data),he[H]=W,me++}s.attributes=he,s.attributesNum=me,s.index=ie}function w(){const L=s.newAttributes;for(let j=0,se=L.length;j<se;j++)L[j]=0}function M(L){S(L,0)}function S(L,j){const se=s.newAttributes,ie=s.enabledAttributes,he=s.attributeDivisors;se[L]=1,ie[L]===0&&(i.enableVertexAttribArray(L),ie[L]=1),he[L]!==j&&(i.vertexAttribDivisor(L,j),he[L]=j)}function T(){const L=s.newAttributes,j=s.enabledAttributes;for(let se=0,ie=j.length;se<ie;se++)j[se]!==L[se]&&(i.disableVertexAttribArray(se),j[se]=0)}function b(L,j,se,ie,he,xe,me){me===!0?i.vertexAttribIPointer(L,j,se,he,xe):i.vertexAttribPointer(L,j,se,ie,he,xe)}function B(L,j,se,ie){w();const he=ie.attributes,xe=se.getAttributes(),me=j.defaultAttributeValues;for(const ge in xe){const H=xe[ge];if(H.location>=0){let q=he[ge];if(q===void 0&&(ge==="instanceMatrix"&&L.instanceMatrix&&(q=L.instanceMatrix),ge==="instanceColor"&&L.instanceColor&&(q=L.instanceColor)),q!==void 0){const Q=q.normalized,W=q.itemSize,re=e.get(q);if(re===void 0)continue;const ke=re.buffer,fe=re.type,Ce=re.bytesPerElement,Ne=fe===i.INT||fe===i.UNSIGNED_INT||q.gpuType===py;if(q.isInterleavedBufferAttribute){const Ue=q.data,qe=Ue.stride,vt=q.offset;if(Ue.isInstancedInterleavedBuffer){for(let ft=0;ft<H.locationSize;ft++)S(H.location+ft,Ue.meshPerAttribute);L.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=Ue.meshPerAttribute*Ue.count)}else for(let ft=0;ft<H.locationSize;ft++)M(H.location+ft);i.bindBuffer(i.ARRAY_BUFFER,ke);for(let ft=0;ft<H.locationSize;ft++)b(H.location+ft,W/H.locationSize,fe,Q,qe*Ce,(vt+W/H.locationSize*ft)*Ce,Ne)}else{if(q.isInstancedBufferAttribute){for(let Ue=0;Ue<H.locationSize;Ue++)S(H.location+Ue,q.meshPerAttribute);L.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=q.meshPerAttribute*q.count)}else for(let Ue=0;Ue<H.locationSize;Ue++)M(H.location+Ue);i.bindBuffer(i.ARRAY_BUFFER,ke);for(let Ue=0;Ue<H.locationSize;Ue++)b(H.location+Ue,W/H.locationSize,fe,Q,W*Ce,W/H.locationSize*Ue*Ce,Ne)}}else if(me!==void 0){const Q=me[ge];if(Q!==void 0)switch(Q.length){case 2:i.vertexAttrib2fv(H.location,Q);break;case 3:i.vertexAttrib3fv(H.location,Q);break;case 4:i.vertexAttrib4fv(H.location,Q);break;default:i.vertexAttrib1fv(H.location,Q)}}}}T()}function F(){G();for(const L in n){const j=n[L];for(const se in j){const ie=j[se];for(const he in ie)p(ie[he].object),delete ie[he];delete j[se]}delete n[L]}}function N(L){if(n[L.id]===void 0)return;const j=n[L.id];for(const se in j){const ie=j[se];for(const he in ie)p(ie[he].object),delete ie[he];delete j[se]}delete n[L.id]}function z(L){for(const j in n){const se=n[j];if(se[L.id]===void 0)continue;const ie=se[L.id];for(const he in ie)p(ie[he].object),delete ie[he];delete se[L.id]}}function G(){U(),o=!0,s!==r&&(s=r,d(s.object))}function U(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:G,resetDefaultState:U,dispose:F,releaseStatesOfGeometry:N,releaseStatesOfProgram:z,initAttributes:w,enableAttribute:M,disableUnusedAttributes:T}}function vH(i,e,t){let n;function r(d){n=d}function s(d,p){i.drawArrays(n,d,p),t.update(p,n,1)}function o(d,p,m){m!==0&&(i.drawArraysInstanced(n,d,p,m),t.update(p,n,m))}function l(d,p,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,p,0,m);let y=0;for(let A=0;A<m;A++)y+=p[A];t.update(y,n,1)}function u(d,p,m,v){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let A=0;A<d.length;A++)o(d[A],p[A],v[A]);else{y.multiDrawArraysInstancedWEBGL(n,d,0,p,0,v,0,m);let A=0;for(let w=0;w<m;w++)A+=p[w]*v[w];t.update(A,n,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function yH(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(z){return!(z!==ur&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(z){const G=z===Lf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==go&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==jr&&!G)}function u(z){if(z==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const p=u(d);p!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",p,"instead."),d=p);const m=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),A=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=i.getParameter(i.MAX_TEXTURE_SIZE),M=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),S=i.getParameter(i.MAX_VERTEX_ATTRIBS),T=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),b=i.getParameter(i.MAX_VARYING_VECTORS),B=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),F=A>0,N=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:l,precision:d,logarithmicDepthBuffer:m,reverseDepthBuffer:v,maxTextures:y,maxVertexTextures:A,maxTextureSize:w,maxCubemapSize:M,maxAttributes:S,maxVertexUniforms:T,maxVaryings:b,maxFragmentUniforms:B,vertexTextures:F,maxSamples:N}}function xH(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new Ra,l=new Xt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(m,v){const y=m.length!==0||v||n!==0||r;return r=v,n=m.length,y},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,v){t=p(m,v,0)},this.setState=function(m,v,y){const A=m.clippingPlanes,w=m.clipIntersection,M=m.clipShadows,S=i.get(m);if(!r||A===null||A.length===0||s&&!M)s?p(null):d();else{const T=s?0:n,b=T*4;let B=S.clippingState||null;u.value=B,B=p(A,v,b,y);for(let F=0;F!==b;++F)B[F]=t[F];S.clippingState=B,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=T}};function d(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(m,v,y,A){const w=m!==null?m.length:0;let M=null;if(w!==0){if(M=u.value,A!==!0||M===null){const S=y+w*4,T=v.matrixWorldInverse;l.getNormalMatrix(T),(M===null||M.length<S)&&(M=new Float32Array(S));for(let b=0,B=y;b!==w;++b,B+=4)o.copy(m[b]).applyMatrix4(T,l),o.normal.toArray(M,B),M[B+3]=o.constant}u.value=M,u.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,M}}function _H(i){let e=new WeakMap;function t(o,l){return l===Ep?o.mapping=za:l===wp&&(o.mapping=kl),o}function n(o){if(o&&o.isTexture){const l=o.mapping;if(l===Ep||l===wp)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const d=new Ab(u.height);return d.fromEquirectangularTexture(i,o),e.set(o,d),o.addEventListener("dispose",r),t(d.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const uf=4,bw=[.125,.215,.35,.446,.526,.582],eu=20,xx=new Oa,Rw=new nt;let _x=null,Ax=0,Sx=0,Mx=!1;const $c=(1+Math.sqrt(5))/2,Zh=1/$c,Pw=[new J(-$c,Zh,0),new J($c,Zh,0),new J(-Zh,0,$c),new J(Zh,0,$c),new J(0,$c,-Zh),new J(0,$c,Zh),new J(-1,1,-1),new J(1,1,-1),new J(-1,1,1),new J(1,1,1)],AH=new J;class E_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,s={}){const{size:o=256,position:l=AH}=s;_x=this._renderer.getRenderTarget(),Ax=this._renderer.getActiveCubeFace(),Sx=this._renderer.getActiveMipmapLevel(),Mx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,n,r,u,l),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Dw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Iw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_x,Ax,Sx),this._renderer.xr.enabled=Mx,e.scissorTest=!1,Wg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===za||e.mapping===kl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_x=this._renderer.getRenderTarget(),Ax=this._renderer.getActiveCubeFace(),Sx=this._renderer.getActiveMipmapLevel(),Mx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:li,minFilter:li,generateMipmaps:!1,type:Lf,format:ur,colorSpace:mu,depthBuffer:!1},r=Bw(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Bw(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=SH(s)),this._blurMaterial=MH(s,e,t)}return r}_compileMaterial(e){const t=new ni(this._lodPlanes[0],e);this._renderer.compile(t,xx)}_sceneToCubeUV(e,t,n,r,s){const u=new ti(90,1,t,n),d=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],m=this._renderer,v=m.autoClear,y=m.toneMapping;m.getClearColor(Rw),m.toneMapping=Oo,m.autoClear=!1;const A=new as({name:"PMREM.Background",side:br,depthWrite:!1,depthTest:!1}),w=new ni(new Cu,A);let M=!1;const S=e.background;S?S.isColor&&(A.color.copy(S),e.background=null,M=!0):(A.color.copy(Rw),M=!0);for(let T=0;T<6;T++){const b=T%3;b===0?(u.up.set(0,d[T],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+p[T],s.y,s.z)):b===1?(u.up.set(0,0,d[T]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+p[T],s.z)):(u.up.set(0,d[T],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+p[T]));const B=this._cubeSize;Wg(r,b*B,T>2?B:0,B,B),m.setRenderTarget(r),M&&m.render(w,u),m.render(e,u)}w.geometry.dispose(),w.material.dispose(),m.toneMapping=y,m.autoClear=v,e.background=S}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===za||e.mapping===kl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=Dw()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Iw());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new ni(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;Wg(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(o,xx)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=Pw[(r-s-1)%Pw.length];this._blur(e,s-1,s,o,l)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,l){const u=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,m=new ni(this._lodPlanes[r],d),v=d.uniforms,y=this._sizeLods[n]-1,A=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*eu-1),w=s/A,M=isFinite(s)?1+Math.floor(p*w):eu;M>eu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${eu}`);const S=[];let T=0;for(let z=0;z<eu;++z){const G=z/w,U=Math.exp(-G*G/2);S.push(U),z===0?T+=U:z<M&&(T+=2*U)}for(let z=0;z<S.length;z++)S[z]=S[z]/T;v.envMap.value=e.texture,v.samples.value=M,v.weights.value=S,v.latitudinal.value=o==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:b}=this;v.dTheta.value=A,v.mipInt.value=b-n;const B=this._sizeLods[r],F=3*B*(r>b-uf?r-b+uf:0),N=4*(this._cubeSize-B);Wg(t,F,N,3*B,2*B),u.setRenderTarget(t),u.render(m,xx)}}function SH(i){const e=[],t=[],n=[];let r=i;const s=i-uf+1+bw.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);t.push(l);let u=1/l;o>i-uf?u=bw[o-i+uf-1]:o===0&&(u=0),n.push(u);const d=1/(l-2),p=-d,m=1+d,v=[p,p,m,p,m,m,p,p,m,m,p,m],y=6,A=6,w=3,M=2,S=1,T=new Float32Array(w*A*y),b=new Float32Array(M*A*y),B=new Float32Array(S*A*y);for(let N=0;N<y;N++){const z=N%3*2/3-1,G=N>2?0:-1,U=[z,G,0,z+2/3,G,0,z+2/3,G+1,0,z,G,0,z+2/3,G+1,0,z,G+1,0];T.set(U,w*A*N),b.set(v,M*A*N);const L=[N,N,N,N,N,N];B.set(L,S*A*N)}const F=new Jt;F.setAttribute("position",new xn(T,w)),F.setAttribute("uv",new xn(b,M)),F.setAttribute("faceIndex",new xn(B,S)),e.push(F),r>uf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Bw(i,e,t){const n=new Ls(i,e,t);return n.texture.mapping=Df,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Wg(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function MH(i,e,t){const n=new Float32Array(eu),r=new J(0,1,0);return new fs({name:"SphericalGaussianBlur",defines:{n:eu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:sS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Fa,depthTest:!1,depthWrite:!1})}function Iw(){return new fs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:sS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Fa,depthTest:!1,depthWrite:!1})}function Dw(){return new fs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:sS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Fa,depthTest:!1,depthWrite:!1})}function sS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function EH(i){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const u=l.mapping,d=u===Ep||u===wp,p=u===za||u===kl;if(d||p){let m=e.get(l);const v=m!==void 0?m.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return t===null&&(t=new E_(i)),m=d?t.fromEquirectangular(l,m):t.fromCubemap(l,m),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),m.texture;if(m!==void 0)return m.texture;{const y=l.image;return d&&y&&y.height>0||p&&y&&r(y)?(t===null&&(t=new E_(i)),m=d?t.fromEquirectangular(l):t.fromCubemap(l),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),l.addEventListener("dispose",s),m.texture):null}}}return l}function r(l){let u=0;const d=6;for(let p=0;p<d;p++)l[p]!==void 0&&u++;return u===d}function s(l){const u=l.target;u.removeEventListener("dispose",s);const d=e.get(u);d!==void 0&&(e.delete(u),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function wH(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&nv("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function CH(i,e,t,n){const r={},s=new WeakMap;function o(m){const v=m.target;v.index!==null&&e.remove(v.index);for(const A in v.attributes)e.remove(v.attributes[A]);v.removeEventListener("dispose",o),delete r[v.id];const y=s.get(v);y&&(e.remove(y),s.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(m,v){return r[v.id]===!0||(v.addEventListener("dispose",o),r[v.id]=!0,t.memory.geometries++),v}function u(m){const v=m.attributes;for(const y in v)e.update(v[y],i.ARRAY_BUFFER)}function d(m){const v=[],y=m.index,A=m.attributes.position;let w=0;if(y!==null){const T=y.array;w=y.version;for(let b=0,B=T.length;b<B;b+=3){const F=T[b+0],N=T[b+1],z=T[b+2];v.push(F,N,N,z,z,F)}}else if(A!==void 0){const T=A.array;w=A.version;for(let b=0,B=T.length/3-1;b<B;b+=3){const F=b+0,N=b+1,z=b+2;v.push(F,N,N,z,z,F)}}else return;const M=new(pb(v)?PA:RA)(v,1);M.version=w;const S=s.get(m);S&&e.remove(S),s.set(m,M)}function p(m){const v=s.get(m);if(v){const y=m.index;y!==null&&v.version<y.version&&d(m)}else d(m);return s.get(m)}return{get:l,update:u,getWireframeAttribute:p}}function TH(i,e,t){let n;function r(v){n=v}let s,o;function l(v){s=v.type,o=v.bytesPerElement}function u(v,y){i.drawElements(n,y,s,v*o),t.update(y,n,1)}function d(v,y,A){A!==0&&(i.drawElementsInstanced(n,y,s,v*o,A),t.update(y,n,A))}function p(v,y,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,y,0,s,v,0,A);let M=0;for(let S=0;S<A;S++)M+=y[S];t.update(M,n,1)}function m(v,y,A,w){if(A===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let S=0;S<v.length;S++)d(v[S]/o,y[S],w[S]);else{M.multiDrawElementsInstancedWEBGL(n,y,0,s,v,0,w,0,A);let S=0;for(let T=0;T<A;T++)S+=y[T]*w[T];t.update(S,n,1)}}this.setMode=r,this.setIndex=l,this.render=u,this.renderInstances=d,this.renderMultiDraw=p,this.renderMultiDrawInstances=m}function bH(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,l){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=l*(s/3);break;case i.LINES:t.lines+=l*(s/2);break;case i.LINE_STRIP:t.lines+=l*(s-1);break;case i.LINE_LOOP:t.lines+=l*s;break;case i.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function RH(i,e,t){const n=new WeakMap,r=new yn;function s(o,l,u){const d=o.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,m=p!==void 0?p.length:0;let v=n.get(l);if(v===void 0||v.count!==m){let L=function(){G.dispose(),n.delete(l),l.removeEventListener("dispose",L)};var y=L;v!==void 0&&v.texture.dispose();const A=l.morphAttributes.position!==void 0,w=l.morphAttributes.normal!==void 0,M=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],T=l.morphAttributes.normal||[],b=l.morphAttributes.color||[];let B=0;A===!0&&(B=1),w===!0&&(B=2),M===!0&&(B=3);let F=l.attributes.position.count*B,N=1;F>e.maxTextureSize&&(N=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const z=new Float32Array(F*N*4*m),G=new Wp(z,F,N,m);G.type=jr,G.needsUpdate=!0;const U=B*4;for(let j=0;j<m;j++){const se=S[j],ie=T[j],he=b[j],xe=F*N*4*j;for(let me=0;me<se.count;me++){const ge=me*U;A===!0&&(r.fromBufferAttribute(se,me),z[xe+ge+0]=r.x,z[xe+ge+1]=r.y,z[xe+ge+2]=r.z,z[xe+ge+3]=0),w===!0&&(r.fromBufferAttribute(ie,me),z[xe+ge+4]=r.x,z[xe+ge+5]=r.y,z[xe+ge+6]=r.z,z[xe+ge+7]=0),M===!0&&(r.fromBufferAttribute(he,me),z[xe+ge+8]=r.x,z[xe+ge+9]=r.y,z[xe+ge+10]=r.z,z[xe+ge+11]=he.itemSize===4?r.w:1)}}v={count:m,texture:G,size:new Le(F,N)},n.set(l,v),l.addEventListener("dispose",L)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)u.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let A=0;for(let M=0;M<d.length;M++)A+=d[M];const w=l.morphTargetsRelative?1:1-A;u.getUniforms().setValue(i,"morphTargetBaseInfluence",w),u.getUniforms().setValue(i,"morphTargetInfluences",d)}u.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),u.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}return{update:s}}function PH(i,e,t,n){let r=new WeakMap;function s(u){const d=n.render.frame,p=u.geometry,m=e.get(u,p);if(r.get(m)!==d&&(e.update(m),r.set(m,d)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),r.get(u)!==d&&(t.update(u.instanceMatrix,i.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,i.ARRAY_BUFFER),r.set(u,d))),u.isSkinnedMesh){const v=u.skeleton;r.get(v)!==d&&(v.update(),r.set(v,d))}return m}function o(){r=new WeakMap}function l(u){const d=u.target;d.removeEventListener("dispose",l),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}const pR=new Gn,Lw=new UA(1,1),mR=new Wp,gR=new Sy,vR=new Xp,Nw=[],Fw=[],Uw=new Float32Array(16),Ow=new Float32Array(9),kw=new Float32Array(4);function Uf(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=Nw[r];if(s===void 0&&(s=new Float32Array(r),Nw[r]=s),e!==0){n.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,i[o].toArray(s,l)}return s}function Ri(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Pi(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Vy(i,e){let t=Fw[e];t===void 0&&(t=new Int32Array(e),Fw[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function BH(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function IH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ri(t,e))return;i.uniform2fv(this.addr,e),Pi(t,e)}}function DH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ri(t,e))return;i.uniform3fv(this.addr,e),Pi(t,e)}}function LH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ri(t,e))return;i.uniform4fv(this.addr,e),Pi(t,e)}}function NH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ri(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Pi(t,e)}else{if(Ri(t,n))return;kw.set(n),i.uniformMatrix2fv(this.addr,!1,kw),Pi(t,n)}}function FH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ri(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Pi(t,e)}else{if(Ri(t,n))return;Ow.set(n),i.uniformMatrix3fv(this.addr,!1,Ow),Pi(t,n)}}function UH(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ri(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Pi(t,e)}else{if(Ri(t,n))return;Uw.set(n),i.uniformMatrix4fv(this.addr,!1,Uw),Pi(t,n)}}function OH(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function kH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ri(t,e))return;i.uniform2iv(this.addr,e),Pi(t,e)}}function HH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ri(t,e))return;i.uniform3iv(this.addr,e),Pi(t,e)}}function zH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ri(t,e))return;i.uniform4iv(this.addr,e),Pi(t,e)}}function GH(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function VH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ri(t,e))return;i.uniform2uiv(this.addr,e),Pi(t,e)}}function WH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ri(t,e))return;i.uniform3uiv(this.addr,e),Pi(t,e)}}function jH(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ri(t,e))return;i.uniform4uiv(this.addr,e),Pi(t,e)}}function XH(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(Lw.compareFunction=TA,s=Lw):s=pR,t.setTexture2D(e||s,r)}function JH(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||gR,r)}function KH(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||vR,r)}function YH(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||mR,r)}function QH(i){switch(i){case 5126:return BH;case 35664:return IH;case 35665:return DH;case 35666:return LH;case 35674:return NH;case 35675:return FH;case 35676:return UH;case 5124:case 35670:return OH;case 35667:case 35671:return kH;case 35668:case 35672:return HH;case 35669:case 35673:return zH;case 5125:return GH;case 36294:return VH;case 36295:return WH;case 36296:return jH;case 35678:case 36198:case 36298:case 36306:case 35682:return XH;case 35679:case 36299:case 36307:return JH;case 35680:case 36300:case 36308:case 36293:return KH;case 36289:case 36303:case 36311:case 36292:return YH}}function qH(i,e){i.uniform1fv(this.addr,e)}function ZH(i,e){const t=Uf(e,this.size,2);i.uniform2fv(this.addr,t)}function $H(i,e){const t=Uf(e,this.size,3);i.uniform3fv(this.addr,t)}function ez(i,e){const t=Uf(e,this.size,4);i.uniform4fv(this.addr,t)}function tz(i,e){const t=Uf(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function nz(i,e){const t=Uf(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function iz(i,e){const t=Uf(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function rz(i,e){i.uniform1iv(this.addr,e)}function sz(i,e){i.uniform2iv(this.addr,e)}function oz(i,e){i.uniform3iv(this.addr,e)}function az(i,e){i.uniform4iv(this.addr,e)}function lz(i,e){i.uniform1uiv(this.addr,e)}function cz(i,e){i.uniform2uiv(this.addr,e)}function uz(i,e){i.uniform3uiv(this.addr,e)}function hz(i,e){i.uniform4uiv(this.addr,e)}function fz(i,e,t){const n=this.cache,r=e.length,s=Vy(t,r);Ri(n,s)||(i.uniform1iv(this.addr,s),Pi(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||pR,s[o])}function dz(i,e,t){const n=this.cache,r=e.length,s=Vy(t,r);Ri(n,s)||(i.uniform1iv(this.addr,s),Pi(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||gR,s[o])}function pz(i,e,t){const n=this.cache,r=e.length,s=Vy(t,r);Ri(n,s)||(i.uniform1iv(this.addr,s),Pi(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||vR,s[o])}function mz(i,e,t){const n=this.cache,r=e.length,s=Vy(t,r);Ri(n,s)||(i.uniform1iv(this.addr,s),Pi(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||mR,s[o])}function gz(i){switch(i){case 5126:return qH;case 35664:return ZH;case 35665:return $H;case 35666:return ez;case 35674:return tz;case 35675:return nz;case 35676:return iz;case 5124:case 35670:return rz;case 35667:case 35671:return sz;case 35668:case 35672:return oz;case 35669:case 35673:return az;case 5125:return lz;case 36294:return cz;case 36295:return uz;case 36296:return hz;case 35678:case 36198:case 36298:case 36306:case 35682:return fz;case 35679:case 36299:case 36307:return dz;case 35680:case 36300:case 36308:case 36293:return pz;case 36289:case 36303:case 36311:case 36292:return mz}}class vz{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=QH(t.type)}}class yz{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=gz(t.type)}}class xz{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],n)}}}const Ex=/(\w+)(\])?(\[|\.)?/g;function Hw(i,e){i.seq.push(e),i.map[e.id]=e}function _z(i,e,t){const n=i.name,r=n.length;for(Ex.lastIndex=0;;){const s=Ex.exec(n),o=Ex.lastIndex;let l=s[1];const u=s[2]==="]",d=s[3];if(u&&(l=l|0),d===void 0||d==="["&&o+2===r){Hw(t,d===void 0?new vz(l,i,e):new yz(l,i,e));break}else{let m=t.map[l];m===void 0&&(m=new xz(l),Hw(t,m)),t=m}}}class rv{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);_z(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],u=n[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function zw(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const Az=37297;let Sz=0;function Mz(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}const Gw=new Xt;function Ez(i){gn._getMatrix(Gw,gn.workingColorSpace,i);const e=`mat3( ${Gw.elements.map(t=>t.toFixed(4))} )`;switch(gn.getTransfer(i)){case Tp:return[e,"LinearTransferOETF"];case wn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function Vw(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Mz(i.getShaderSource(e),o)}else return r}function wz(i,e){const t=Ez(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Cz(i,e){let t;switch(e){case XT:t="Linear";break;case JT:t="Reinhard";break;case KT:t="Cineon";break;case mA:t="ACESFilmic";break;case QT:t="AgX";break;case qT:t="Neutral";break;case YT:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const jg=new J;function Tz(){gn.getLuminanceCoefficients(jg);const i=jg.x.toFixed(4),e=jg.y.toFixed(4),t=jg.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function bz(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(np).join(`
`)}function Rz(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Pz(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let l=1;s.type===i.FLOAT_MAT2&&(l=2),s.type===i.FLOAT_MAT3&&(l=3),s.type===i.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:l}}return t}function np(i){return i!==""}function Ww(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jw(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Bz=/^[ \t]*#include +<([\w\d./]+)>/gm;function w_(i){return i.replace(Bz,Dz)}const Iz=new Map;function Dz(i,e){let t=en[e];if(t===void 0){const n=Iz.get(e);if(n!==void 0)t=en[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return w_(t)}const Lz=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Xw(i){return i.replace(Lz,Nz)}function Nz(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Jw(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Fz(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===hy?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===lp?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===ho&&(e="SHADOWMAP_TYPE_VSM"),e}function Uz(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case za:case kl:e="ENVMAP_TYPE_CUBE";break;case Df:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Oz(i){let e="ENVMAP_MODE_REFLECTION";return i.envMap&&i.envMapMode===kl&&(e="ENVMAP_MODE_REFRACTION"),e}function kz(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Gp:e="ENVMAP_BLENDING_MULTIPLY";break;case WT:e="ENVMAP_BLENDING_MIX";break;case jT:e="ENVMAP_BLENDING_ADD";break}return e}function Hz(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function zz(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const u=Fz(t),d=Uz(t),p=Oz(t),m=kz(t),v=Hz(t),y=bz(t),A=Rz(s),w=r.createProgram();let M,S,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(np).join(`
`),M.length>0&&(M+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(np).join(`
`),S.length>0&&(S+=`
`)):(M=[Jw(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(np).join(`
`),S=[Jw(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Oo?"#define TONE_MAPPING":"",t.toneMapping!==Oo?en.tonemapping_pars_fragment:"",t.toneMapping!==Oo?Cz("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",en.colorspace_pars_fragment,wz("linearToOutputTexel",t.outputColorSpace),Tz(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(np).join(`
`)),o=w_(o),o=Ww(o,t),o=jw(o,t),l=w_(l),l=Ww(l,t),l=jw(l,t),o=Xw(o),l=Xw(l),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,M=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,S=["#define varying in",t.glslVersion===g_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===g_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const b=T+M+o,B=T+S+l,F=zw(r,r.VERTEX_SHADER,b),N=zw(r,r.FRAGMENT_SHADER,B);r.attachShader(w,F),r.attachShader(w,N),t.index0AttributeName!==void 0?r.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function z(j){if(i.debug.checkShaderErrors){const se=r.getProgramInfoLog(w).trim(),ie=r.getShaderInfoLog(F).trim(),he=r.getShaderInfoLog(N).trim();let xe=!0,me=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(xe=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,w,F,N);else{const ge=Vw(r,F,"vertex"),H=Vw(r,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+se+`
`+ge+`
`+H)}else se!==""?console.warn("THREE.WebGLProgram: Program Info Log:",se):(ie===""||he==="")&&(me=!1);me&&(j.diagnostics={runnable:xe,programLog:se,vertexShader:{log:ie,prefix:M},fragmentShader:{log:he,prefix:S}})}r.deleteShader(F),r.deleteShader(N),G=new rv(r,w),U=Pz(r,w)}let G;this.getUniforms=function(){return G===void 0&&z(this),G};let U;this.getAttributes=function(){return U===void 0&&z(this),U};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=r.getProgramParameter(w,Az)),L},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Sz++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=F,this.fragmentShader=N,this}let Gz=0;class Vz{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Wz(e),t.set(e,n)),n}}class Wz{constructor(e){this.id=Gz++,this.code=e,this.usedTimes=0}}function jz(i,e,t,n,r,s,o){const l=new fu,u=new Vz,d=new Set,p=[],m=r.logarithmicDepthBuffer,v=r.vertexTextures;let y=r.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(U){return d.add(U),U===0?"uv":`uv${U}`}function M(U,L,j,se,ie){const he=se.fog,xe=ie.geometry,me=U.isMeshStandardMaterial?se.environment:null,ge=(U.isMeshStandardMaterial?t:e).get(U.envMap||me),H=ge&&ge.mapping===Df?ge.image.height:null,q=A[U.type];U.precision!==null&&(y=r.getMaxPrecision(U.precision),y!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",y,"instead."));const Q=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,W=Q!==void 0?Q.length:0;let re=0;xe.morphAttributes.position!==void 0&&(re=1),xe.morphAttributes.normal!==void 0&&(re=2),xe.morphAttributes.color!==void 0&&(re=3);let ke,fe,Ce,Ne;if(q){const Kt=fo[q];ke=Kt.vertexShader,fe=Kt.fragmentShader}else ke=U.vertexShader,fe=U.fragmentShader,u.update(U),Ce=u.getVertexShaderID(U),Ne=u.getFragmentShaderID(U);const Ue=i.getRenderTarget(),qe=i.state.buffers.depth.getReversed(),vt=ie.isInstancedMesh===!0,ft=ie.isBatchedMesh===!0,Ut=!!U.map,tn=!!U.matcap,Ct=!!ge,$=!!U.aoMap,Mn=!!U.lightMap,Fe=!!U.bumpMap,Oe=!!U.normalMap,Be=!!U.displacementMap,Qe=!!U.emissiveMap,Re=!!U.metalnessMap,X=!!U.roughnessMap,O=U.anisotropy>0,le=U.clearcoat>0,Ee=U.dispersion>0,Ie=U.iridescence>0,Te=U.sheen>0,ut=U.transmission>0,Xe=O&&!!U.anisotropyMap,ot=le&&!!U.clearcoatMap,Ht=le&&!!U.clearcoatNormalMap,Ge=le&&!!U.clearcoatRoughnessMap,ht=Ie&&!!U.iridescenceMap,bt=Ie&&!!U.iridescenceThicknessMap,Rt=Te&&!!U.sheenColorMap,at=Te&&!!U.sheenRoughnessMap,te=!!U.specularMap,Pe=!!U.specularColorMap,et=!!U.specularIntensityMap,ee=ut&&!!U.transmissionMap,We=ut&&!!U.thicknessMap,Me=!!U.gradientMap,De=!!U.alphaMap,st=U.alphaTest>0,$e=!!U.alphaHash,Tt=!!U.extensions;let ln=Oo;U.toneMapped&&(Ue===null||Ue.isXRRenderTarget===!0)&&(ln=i.toneMapping);const Cn={shaderID:q,shaderType:U.type,shaderName:U.name,vertexShader:ke,fragmentShader:fe,defines:U.defines,customVertexShaderID:Ce,customFragmentShaderID:Ne,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:y,batching:ft,batchingColor:ft&&ie._colorsTexture!==null,instancing:vt,instancingColor:vt&&ie.instanceColor!==null,instancingMorph:vt&&ie.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Ue===null?i.outputColorSpace:Ue.isXRRenderTarget===!0?Ue.texture.colorSpace:mu,alphaToCoverage:!!U.alphaToCoverage,map:Ut,matcap:tn,envMap:Ct,envMapMode:Ct&&ge.mapping,envMapCubeUVHeight:H,aoMap:$,lightMap:Mn,bumpMap:Fe,normalMap:Oe,displacementMap:v&&Be,emissiveMap:Qe,normalMapObjectSpace:Oe&&U.normalMapType===sb,normalMapTangentSpace:Oe&&U.normalMapType===Vl,metalnessMap:Re,roughnessMap:X,anisotropy:O,anisotropyMap:Xe,clearcoat:le,clearcoatMap:ot,clearcoatNormalMap:Ht,clearcoatRoughnessMap:Ge,dispersion:Ee,iridescence:Ie,iridescenceMap:ht,iridescenceThicknessMap:bt,sheen:Te,sheenColorMap:Rt,sheenRoughnessMap:at,specularMap:te,specularColorMap:Pe,specularIntensityMap:et,transmission:ut,transmissionMap:ee,thicknessMap:We,gradientMap:Me,opaque:U.transparent===!1&&U.blending===uu&&U.alphaToCoverage===!1,alphaMap:De,alphaTest:st,alphaHash:$e,combine:U.combine,mapUv:Ut&&w(U.map.channel),aoMapUv:$&&w(U.aoMap.channel),lightMapUv:Mn&&w(U.lightMap.channel),bumpMapUv:Fe&&w(U.bumpMap.channel),normalMapUv:Oe&&w(U.normalMap.channel),displacementMapUv:Be&&w(U.displacementMap.channel),emissiveMapUv:Qe&&w(U.emissiveMap.channel),metalnessMapUv:Re&&w(U.metalnessMap.channel),roughnessMapUv:X&&w(U.roughnessMap.channel),anisotropyMapUv:Xe&&w(U.anisotropyMap.channel),clearcoatMapUv:ot&&w(U.clearcoatMap.channel),clearcoatNormalMapUv:Ht&&w(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ge&&w(U.clearcoatRoughnessMap.channel),iridescenceMapUv:ht&&w(U.iridescenceMap.channel),iridescenceThicknessMapUv:bt&&w(U.iridescenceThicknessMap.channel),sheenColorMapUv:Rt&&w(U.sheenColorMap.channel),sheenRoughnessMapUv:at&&w(U.sheenRoughnessMap.channel),specularMapUv:te&&w(U.specularMap.channel),specularColorMapUv:Pe&&w(U.specularColorMap.channel),specularIntensityMapUv:et&&w(U.specularIntensityMap.channel),transmissionMapUv:ee&&w(U.transmissionMap.channel),thicknessMapUv:We&&w(U.thicknessMap.channel),alphaMapUv:De&&w(U.alphaMap.channel),vertexTangents:!!xe.attributes.tangent&&(Oe||O),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,pointsUvs:ie.isPoints===!0&&!!xe.attributes.uv&&(Ut||De),fog:!!he,useFog:U.fog===!0,fogExp2:!!he&&he.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:m,reverseDepthBuffer:qe,skinning:ie.isSkinnedMesh===!0,morphTargets:xe.morphAttributes.position!==void 0,morphNormals:xe.morphAttributes.normal!==void 0,morphColors:xe.morphAttributes.color!==void 0,morphTargetsCount:W,morphTextureStride:re,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:U.dithering,shadowMapEnabled:i.shadowMap.enabled&&j.length>0,shadowMapType:i.shadowMap.type,toneMapping:ln,decodeVideoTexture:Ut&&U.map.isVideoTexture===!0&&gn.getTransfer(U.map.colorSpace)===wn,decodeVideoTextureEmissive:Qe&&U.emissiveMap.isVideoTexture===!0&&gn.getTransfer(U.emissiveMap.colorSpace)===wn,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===po,flipSided:U.side===br,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:Tt&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Tt&&U.extensions.multiDraw===!0||ft)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return Cn.vertexUv1s=d.has(1),Cn.vertexUv2s=d.has(2),Cn.vertexUv3s=d.has(3),d.clear(),Cn}function S(U){const L=[];if(U.shaderID?L.push(U.shaderID):(L.push(U.customVertexShaderID),L.push(U.customFragmentShaderID)),U.defines!==void 0)for(const j in U.defines)L.push(j),L.push(U.defines[j]);return U.isRawShaderMaterial===!1&&(T(L,U),b(L,U),L.push(i.outputColorSpace)),L.push(U.customProgramCacheKey),L.join()}function T(U,L){U.push(L.precision),U.push(L.outputColorSpace),U.push(L.envMapMode),U.push(L.envMapCubeUVHeight),U.push(L.mapUv),U.push(L.alphaMapUv),U.push(L.lightMapUv),U.push(L.aoMapUv),U.push(L.bumpMapUv),U.push(L.normalMapUv),U.push(L.displacementMapUv),U.push(L.emissiveMapUv),U.push(L.metalnessMapUv),U.push(L.roughnessMapUv),U.push(L.anisotropyMapUv),U.push(L.clearcoatMapUv),U.push(L.clearcoatNormalMapUv),U.push(L.clearcoatRoughnessMapUv),U.push(L.iridescenceMapUv),U.push(L.iridescenceThicknessMapUv),U.push(L.sheenColorMapUv),U.push(L.sheenRoughnessMapUv),U.push(L.specularMapUv),U.push(L.specularColorMapUv),U.push(L.specularIntensityMapUv),U.push(L.transmissionMapUv),U.push(L.thicknessMapUv),U.push(L.combine),U.push(L.fogExp2),U.push(L.sizeAttenuation),U.push(L.morphTargetsCount),U.push(L.morphAttributeCount),U.push(L.numDirLights),U.push(L.numPointLights),U.push(L.numSpotLights),U.push(L.numSpotLightMaps),U.push(L.numHemiLights),U.push(L.numRectAreaLights),U.push(L.numDirLightShadows),U.push(L.numPointLightShadows),U.push(L.numSpotLightShadows),U.push(L.numSpotLightShadowsWithMaps),U.push(L.numLightProbes),U.push(L.shadowMapType),U.push(L.toneMapping),U.push(L.numClippingPlanes),U.push(L.numClipIntersection),U.push(L.depthPacking)}function b(U,L){l.disableAll(),L.supportsVertexTextures&&l.enable(0),L.instancing&&l.enable(1),L.instancingColor&&l.enable(2),L.instancingMorph&&l.enable(3),L.matcap&&l.enable(4),L.envMap&&l.enable(5),L.normalMapObjectSpace&&l.enable(6),L.normalMapTangentSpace&&l.enable(7),L.clearcoat&&l.enable(8),L.iridescence&&l.enable(9),L.alphaTest&&l.enable(10),L.vertexColors&&l.enable(11),L.vertexAlphas&&l.enable(12),L.vertexUv1s&&l.enable(13),L.vertexUv2s&&l.enable(14),L.vertexUv3s&&l.enable(15),L.vertexTangents&&l.enable(16),L.anisotropy&&l.enable(17),L.alphaHash&&l.enable(18),L.batching&&l.enable(19),L.dispersion&&l.enable(20),L.batchingColor&&l.enable(21),U.push(l.mask),l.disableAll(),L.fog&&l.enable(0),L.useFog&&l.enable(1),L.flatShading&&l.enable(2),L.logarithmicDepthBuffer&&l.enable(3),L.reverseDepthBuffer&&l.enable(4),L.skinning&&l.enable(5),L.morphTargets&&l.enable(6),L.morphNormals&&l.enable(7),L.morphColors&&l.enable(8),L.premultipliedAlpha&&l.enable(9),L.shadowMapEnabled&&l.enable(10),L.doubleSided&&l.enable(11),L.flipSided&&l.enable(12),L.useDepthPacking&&l.enable(13),L.dithering&&l.enable(14),L.transmission&&l.enable(15),L.sheen&&l.enable(16),L.opaque&&l.enable(17),L.pointsUvs&&l.enable(18),L.decodeVideoTexture&&l.enable(19),L.decodeVideoTextureEmissive&&l.enable(20),L.alphaToCoverage&&l.enable(21),U.push(l.mask)}function B(U){const L=A[U.type];let j;if(L){const se=fo[L];j=xb.clone(se.uniforms)}else j=U.uniforms;return j}function F(U,L){let j;for(let se=0,ie=p.length;se<ie;se++){const he=p[se];if(he.cacheKey===L){j=he,++j.usedTimes;break}}return j===void 0&&(j=new zz(i,L,U,s),p.push(j)),j}function N(U){if(--U.usedTimes===0){const L=p.indexOf(U);p[L]=p[p.length-1],p.pop(),U.destroy()}}function z(U){u.remove(U)}function G(){u.dispose()}return{getParameters:M,getProgramCacheKey:S,getUniforms:B,acquireProgram:F,releaseProgram:N,releaseShaderCache:z,programs:p,dispose:G}}function Xz(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let l=i.get(o);return l===void 0&&(l={},i.set(o,l)),l}function n(o){i.delete(o)}function r(o,l,u){i.get(o)[l]=u}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function Jz(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function Kw(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function Yw(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(m,v,y,A,w,M){let S=i[e];return S===void 0?(S={id:m.id,object:m,geometry:v,material:y,groupOrder:A,renderOrder:m.renderOrder,z:w,group:M},i[e]=S):(S.id=m.id,S.object=m,S.geometry=v,S.material=y,S.groupOrder=A,S.renderOrder=m.renderOrder,S.z=w,S.group=M),e++,S}function l(m,v,y,A,w,M){const S=o(m,v,y,A,w,M);y.transmission>0?n.push(S):y.transparent===!0?r.push(S):t.push(S)}function u(m,v,y,A,w,M){const S=o(m,v,y,A,w,M);y.transmission>0?n.unshift(S):y.transparent===!0?r.unshift(S):t.unshift(S)}function d(m,v){t.length>1&&t.sort(m||Jz),n.length>1&&n.sort(v||Kw),r.length>1&&r.sort(v||Kw)}function p(){for(let m=e,v=i.length;m<v;m++){const y=i[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:l,unshift:u,finish:p,sort:d}}function Kz(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new Yw,i.set(n,[o])):r>=s.length?(o=new Yw,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function Yz(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new J,color:new nt};break;case"SpotLight":t={position:new J,direction:new J,color:new nt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new J,color:new nt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new J,skyColor:new nt,groundColor:new nt};break;case"RectAreaLight":t={color:new nt,position:new J,halfWidth:new J,halfHeight:new J};break}return i[e.id]=t,t}}}function Qz(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let qz=0;function Zz(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function $z(i){const e=new Yz,t=Qz(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new J);const r=new J,s=new Nt,o=new Nt;function l(d){let p=0,m=0,v=0;for(let U=0;U<9;U++)n.probe[U].set(0,0,0);let y=0,A=0,w=0,M=0,S=0,T=0,b=0,B=0,F=0,N=0,z=0;d.sort(Zz);for(let U=0,L=d.length;U<L;U++){const j=d[U],se=j.color,ie=j.intensity,he=j.distance,xe=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)p+=se.r*ie,m+=se.g*ie,v+=se.b*ie;else if(j.isLightProbe){for(let me=0;me<9;me++)n.probe[me].addScaledVector(j.sh.coefficients[me],ie);z++}else if(j.isDirectionalLight){const me=e.get(j);if(me.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const ge=j.shadow,H=t.get(j);H.shadowIntensity=ge.intensity,H.shadowBias=ge.bias,H.shadowNormalBias=ge.normalBias,H.shadowRadius=ge.radius,H.shadowMapSize=ge.mapSize,n.directionalShadow[y]=H,n.directionalShadowMap[y]=xe,n.directionalShadowMatrix[y]=j.shadow.matrix,T++}n.directional[y]=me,y++}else if(j.isSpotLight){const me=e.get(j);me.position.setFromMatrixPosition(j.matrixWorld),me.color.copy(se).multiplyScalar(ie),me.distance=he,me.coneCos=Math.cos(j.angle),me.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),me.decay=j.decay,n.spot[w]=me;const ge=j.shadow;if(j.map&&(n.spotLightMap[F]=j.map,F++,ge.updateMatrices(j),j.castShadow&&N++),n.spotLightMatrix[w]=ge.matrix,j.castShadow){const H=t.get(j);H.shadowIntensity=ge.intensity,H.shadowBias=ge.bias,H.shadowNormalBias=ge.normalBias,H.shadowRadius=ge.radius,H.shadowMapSize=ge.mapSize,n.spotShadow[w]=H,n.spotShadowMap[w]=xe,B++}w++}else if(j.isRectAreaLight){const me=e.get(j);me.color.copy(se).multiplyScalar(ie),me.halfWidth.set(j.width*.5,0,0),me.halfHeight.set(0,j.height*.5,0),n.rectArea[M]=me,M++}else if(j.isPointLight){const me=e.get(j);if(me.color.copy(j.color).multiplyScalar(j.intensity),me.distance=j.distance,me.decay=j.decay,j.castShadow){const ge=j.shadow,H=t.get(j);H.shadowIntensity=ge.intensity,H.shadowBias=ge.bias,H.shadowNormalBias=ge.normalBias,H.shadowRadius=ge.radius,H.shadowMapSize=ge.mapSize,H.shadowCameraNear=ge.camera.near,H.shadowCameraFar=ge.camera.far,n.pointShadow[A]=H,n.pointShadowMap[A]=xe,n.pointShadowMatrix[A]=j.shadow.matrix,b++}n.point[A]=me,A++}else if(j.isHemisphereLight){const me=e.get(j);me.skyColor.copy(j.color).multiplyScalar(ie),me.groundColor.copy(j.groundColor).multiplyScalar(ie),n.hemi[S]=me,S++}}M>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=rt.LTC_FLOAT_1,n.rectAreaLTC2=rt.LTC_FLOAT_2):(n.rectAreaLTC1=rt.LTC_HALF_1,n.rectAreaLTC2=rt.LTC_HALF_2)),n.ambient[0]=p,n.ambient[1]=m,n.ambient[2]=v;const G=n.hash;(G.directionalLength!==y||G.pointLength!==A||G.spotLength!==w||G.rectAreaLength!==M||G.hemiLength!==S||G.numDirectionalShadows!==T||G.numPointShadows!==b||G.numSpotShadows!==B||G.numSpotMaps!==F||G.numLightProbes!==z)&&(n.directional.length=y,n.spot.length=w,n.rectArea.length=M,n.point.length=A,n.hemi.length=S,n.directionalShadow.length=T,n.directionalShadowMap.length=T,n.pointShadow.length=b,n.pointShadowMap.length=b,n.spotShadow.length=B,n.spotShadowMap.length=B,n.directionalShadowMatrix.length=T,n.pointShadowMatrix.length=b,n.spotLightMatrix.length=B+F-N,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=N,n.numLightProbes=z,G.directionalLength=y,G.pointLength=A,G.spotLength=w,G.rectAreaLength=M,G.hemiLength=S,G.numDirectionalShadows=T,G.numPointShadows=b,G.numSpotShadows=B,G.numSpotMaps=F,G.numLightProbes=z,n.version=qz++)}function u(d,p){let m=0,v=0,y=0,A=0,w=0;const M=p.matrixWorldInverse;for(let S=0,T=d.length;S<T;S++){const b=d[S];if(b.isDirectionalLight){const B=n.directional[m];B.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(M),m++}else if(b.isSpotLight){const B=n.spot[y];B.position.setFromMatrixPosition(b.matrixWorld),B.position.applyMatrix4(M),B.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(M),y++}else if(b.isRectAreaLight){const B=n.rectArea[A];B.position.setFromMatrixPosition(b.matrixWorld),B.position.applyMatrix4(M),o.identity(),s.copy(b.matrixWorld),s.premultiply(M),o.extractRotation(s),B.halfWidth.set(b.width*.5,0,0),B.halfHeight.set(0,b.height*.5,0),B.halfWidth.applyMatrix4(o),B.halfHeight.applyMatrix4(o),A++}else if(b.isPointLight){const B=n.point[v];B.position.setFromMatrixPosition(b.matrixWorld),B.position.applyMatrix4(M),v++}else if(b.isHemisphereLight){const B=n.hemi[w];B.direction.setFromMatrixPosition(b.matrixWorld),B.direction.transformDirection(M),w++}}}return{setup:l,setupView:u,state:n}}function Qw(i){const e=new $z(i),t=[],n=[];function r(p){d.camera=p,t.length=0,n.length=0}function s(p){t.push(p)}function o(p){n.push(p)}function l(){e.setup(t)}function u(p){e.setupView(t,p)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:d,setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function eG(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let l;return o===void 0?(l=new Qw(i),e.set(r,[l])):s>=o.length?(l=new Qw(i),o.push(l)):l=o[s],l}function n(){e=new WeakMap}return{get:t,dispose:n}}const tG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,nG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function iG(i,e,t){let n=new Yp;const r=new Le,s=new Le,o=new yn,l=new zy({depthPacking:rb}),u=new WA,d={},p=t.maxTextureSize,m={[zo]:br,[br]:zo,[po]:po},v=new fs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Le},radius:{value:4}},vertexShader:tG,fragmentShader:nG}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const A=new Jt;A.setAttribute("position",new xn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new ni(A,v),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=hy;let S=this.type;this.render=function(N,z,G){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||N.length===0)return;const U=i.getRenderTarget(),L=i.getActiveCubeFace(),j=i.getActiveMipmapLevel(),se=i.state;se.setBlending(Fa),se.buffers.color.setClear(1,1,1,1),se.buffers.depth.setTest(!0),se.setScissorTest(!1);const ie=S!==ho&&this.type===ho,he=S===ho&&this.type!==ho;for(let xe=0,me=N.length;xe<me;xe++){const ge=N[xe],H=ge.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",ge,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;r.copy(H.mapSize);const q=H.getFrameExtents();if(r.multiply(q),s.copy(H.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/q.x),r.x=s.x*q.x,H.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/q.y),r.y=s.y*q.y,H.mapSize.y=s.y)),H.map===null||ie===!0||he===!0){const W=this.type!==ho?{minFilter:Oi,magFilter:Oi}:{};H.map!==null&&H.map.dispose(),H.map=new Ls(r.x,r.y,W),H.map.texture.name=ge.name+".shadowMap",H.camera.updateProjectionMatrix()}i.setRenderTarget(H.map),i.clear();const Q=H.getViewportCount();for(let W=0;W<Q;W++){const re=H.getViewport(W);o.set(s.x*re.x,s.y*re.y,s.x*re.z,s.y*re.w),se.viewport(o),H.updateMatrices(ge,W),n=H.getFrustum(),B(z,G,H.camera,ge,this.type)}H.isPointLightShadow!==!0&&this.type===ho&&T(H,G),H.needsUpdate=!1}S=this.type,M.needsUpdate=!1,i.setRenderTarget(U,L,j)};function T(N,z){const G=e.update(w);v.defines.VSM_SAMPLES!==N.blurSamples&&(v.defines.VSM_SAMPLES=N.blurSamples,y.defines.VSM_SAMPLES=N.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new Ls(r.x,r.y)),v.uniforms.shadow_pass.value=N.map.texture,v.uniforms.resolution.value=N.mapSize,v.uniforms.radius.value=N.radius,i.setRenderTarget(N.mapPass),i.clear(),i.renderBufferDirect(z,null,G,v,w,null),y.uniforms.shadow_pass.value=N.mapPass.texture,y.uniforms.resolution.value=N.mapSize,y.uniforms.radius.value=N.radius,i.setRenderTarget(N.map),i.clear(),i.renderBufferDirect(z,null,G,y,w,null)}function b(N,z,G,U){let L=null;const j=G.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(j!==void 0)L=j;else if(L=G.isPointLight===!0?u:l,i.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0){const se=L.uuid,ie=z.uuid;let he=d[se];he===void 0&&(he={},d[se]=he);let xe=he[ie];xe===void 0&&(xe=L.clone(),he[ie]=xe,z.addEventListener("dispose",F)),L=xe}if(L.visible=z.visible,L.wireframe=z.wireframe,U===ho?L.side=z.shadowSide!==null?z.shadowSide:z.side:L.side=z.shadowSide!==null?z.shadowSide:m[z.side],L.alphaMap=z.alphaMap,L.alphaTest=z.alphaTest,L.map=z.map,L.clipShadows=z.clipShadows,L.clippingPlanes=z.clippingPlanes,L.clipIntersection=z.clipIntersection,L.displacementMap=z.displacementMap,L.displacementScale=z.displacementScale,L.displacementBias=z.displacementBias,L.wireframeLinewidth=z.wireframeLinewidth,L.linewidth=z.linewidth,G.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const se=i.properties.get(L);se.light=G}return L}function B(N,z,G,U,L){if(N.visible===!1)return;if(N.layers.test(z.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&L===ho)&&(!N.frustumCulled||n.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,N.matrixWorld);const ie=e.update(N),he=N.material;if(Array.isArray(he)){const xe=ie.groups;for(let me=0,ge=xe.length;me<ge;me++){const H=xe[me],q=he[H.materialIndex];if(q&&q.visible){const Q=b(N,q,U,L);N.onBeforeShadow(i,N,z,G,ie,Q,H),i.renderBufferDirect(G,null,ie,Q,N,H),N.onAfterShadow(i,N,z,G,ie,Q,H)}}}else if(he.visible){const xe=b(N,he,U,L);N.onBeforeShadow(i,N,z,G,ie,xe,null),i.renderBufferDirect(G,null,ie,xe,N,null),N.onAfterShadow(i,N,z,G,ie,xe,null)}}const se=N.children;for(let ie=0,he=se.length;ie<he;ie++)B(se[ie],z,G,U,L)}function F(N){N.target.removeEventListener("dispose",F);for(const G in d){const U=d[G],L=N.target.uuid;L in U&&(U[L].dispose(),delete U[L])}}}const rG={[gv]:vv,[yv]:Av,[xv]:Sv,[pu]:_v,[vv]:gv,[Av]:yv,[Sv]:xv,[_v]:pu};function sG(i,e){function t(){let ee=!1;const We=new yn;let Me=null;const De=new yn(0,0,0,0);return{setMask:function(st){Me!==st&&!ee&&(i.colorMask(st,st,st,st),Me=st)},setLocked:function(st){ee=st},setClear:function(st,$e,Tt,ln,Cn){Cn===!0&&(st*=ln,$e*=ln,Tt*=ln),We.set(st,$e,Tt,ln),De.equals(We)===!1&&(i.clearColor(st,$e,Tt,ln),De.copy(We))},reset:function(){ee=!1,Me=null,De.set(-1,0,0,0)}}}function n(){let ee=!1,We=!1,Me=null,De=null,st=null;return{setReversed:function($e){if(We!==$e){const Tt=e.get("EXT_clip_control");$e?Tt.clipControlEXT(Tt.LOWER_LEFT_EXT,Tt.ZERO_TO_ONE_EXT):Tt.clipControlEXT(Tt.LOWER_LEFT_EXT,Tt.NEGATIVE_ONE_TO_ONE_EXT),We=$e;const ln=st;st=null,this.setClear(ln)}},getReversed:function(){return We},setTest:function($e){$e?Ue(i.DEPTH_TEST):qe(i.DEPTH_TEST)},setMask:function($e){Me!==$e&&!ee&&(i.depthMask($e),Me=$e)},setFunc:function($e){if(We&&($e=rG[$e]),De!==$e){switch($e){case gv:i.depthFunc(i.NEVER);break;case vv:i.depthFunc(i.ALWAYS);break;case yv:i.depthFunc(i.LESS);break;case pu:i.depthFunc(i.LEQUAL);break;case xv:i.depthFunc(i.EQUAL);break;case _v:i.depthFunc(i.GEQUAL);break;case Av:i.depthFunc(i.GREATER);break;case Sv:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}De=$e}},setLocked:function($e){ee=$e},setClear:function($e){st!==$e&&(We&&($e=1-$e),i.clearDepth($e),st=$e)},reset:function(){ee=!1,Me=null,De=null,st=null,We=!1}}}function r(){let ee=!1,We=null,Me=null,De=null,st=null,$e=null,Tt=null,ln=null,Cn=null;return{setTest:function(Kt){ee||(Kt?Ue(i.STENCIL_TEST):qe(i.STENCIL_TEST))},setMask:function(Kt){We!==Kt&&!ee&&(i.stencilMask(Kt),We=Kt)},setFunc:function(Kt,Vn,Yn){(Me!==Kt||De!==Vn||st!==Yn)&&(i.stencilFunc(Kt,Vn,Yn),Me=Kt,De=Vn,st=Yn)},setOp:function(Kt,Vn,Yn){($e!==Kt||Tt!==Vn||ln!==Yn)&&(i.stencilOp(Kt,Vn,Yn),$e=Kt,Tt=Vn,ln=Yn)},setLocked:function(Kt){ee=Kt},setClear:function(Kt){Cn!==Kt&&(i.clearStencil(Kt),Cn=Kt)},reset:function(){ee=!1,We=null,Me=null,De=null,st=null,$e=null,Tt=null,ln=null,Cn=null}}}const s=new t,o=new n,l=new r,u=new WeakMap,d=new WeakMap;let p={},m={},v=new WeakMap,y=[],A=null,w=!1,M=null,S=null,T=null,b=null,B=null,F=null,N=null,z=new nt(0,0,0),G=0,U=!1,L=null,j=null,se=null,ie=null,he=null;const xe=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let me=!1,ge=0;const H=i.getParameter(i.VERSION);H.indexOf("WebGL")!==-1?(ge=parseFloat(/^WebGL (\d)/.exec(H)[1]),me=ge>=1):H.indexOf("OpenGL ES")!==-1&&(ge=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),me=ge>=2);let q=null,Q={};const W=i.getParameter(i.SCISSOR_BOX),re=i.getParameter(i.VIEWPORT),ke=new yn().fromArray(W),fe=new yn().fromArray(re);function Ce(ee,We,Me,De){const st=new Uint8Array(4),$e=i.createTexture();i.bindTexture(ee,$e),i.texParameteri(ee,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ee,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Tt=0;Tt<Me;Tt++)ee===i.TEXTURE_3D||ee===i.TEXTURE_2D_ARRAY?i.texImage3D(We,0,i.RGBA,1,1,De,0,i.RGBA,i.UNSIGNED_BYTE,st):i.texImage2D(We+Tt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,st);return $e}const Ne={};Ne[i.TEXTURE_2D]=Ce(i.TEXTURE_2D,i.TEXTURE_2D,1),Ne[i.TEXTURE_CUBE_MAP]=Ce(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ne[i.TEXTURE_2D_ARRAY]=Ce(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ne[i.TEXTURE_3D]=Ce(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),l.setClear(0),Ue(i.DEPTH_TEST),o.setFunc(pu),Fe(!1),Oe(u_),Ue(i.CULL_FACE),$(Fa);function Ue(ee){p[ee]!==!0&&(i.enable(ee),p[ee]=!0)}function qe(ee){p[ee]!==!1&&(i.disable(ee),p[ee]=!1)}function vt(ee,We){return m[ee]!==We?(i.bindFramebuffer(ee,We),m[ee]=We,ee===i.DRAW_FRAMEBUFFER&&(m[i.FRAMEBUFFER]=We),ee===i.FRAMEBUFFER&&(m[i.DRAW_FRAMEBUFFER]=We),!0):!1}function ft(ee,We){let Me=y,De=!1;if(ee){Me=v.get(We),Me===void 0&&(Me=[],v.set(We,Me));const st=ee.textures;if(Me.length!==st.length||Me[0]!==i.COLOR_ATTACHMENT0){for(let $e=0,Tt=st.length;$e<Tt;$e++)Me[$e]=i.COLOR_ATTACHMENT0+$e;Me.length=st.length,De=!0}}else Me[0]!==i.BACK&&(Me[0]=i.BACK,De=!0);De&&i.drawBuffers(Me)}function Ut(ee){return A!==ee?(i.useProgram(ee),A=ee,!0):!1}const tn={[Il]:i.FUNC_ADD,[TT]:i.FUNC_SUBTRACT,[bT]:i.FUNC_REVERSE_SUBTRACT};tn[RT]=i.MIN,tn[PT]=i.MAX;const Ct={[BT]:i.ZERO,[IT]:i.ONE,[DT]:i.SRC_COLOR,[pv]:i.SRC_ALPHA,[kT]:i.SRC_ALPHA_SATURATE,[UT]:i.DST_COLOR,[NT]:i.DST_ALPHA,[LT]:i.ONE_MINUS_SRC_COLOR,[mv]:i.ONE_MINUS_SRC_ALPHA,[OT]:i.ONE_MINUS_DST_COLOR,[FT]:i.ONE_MINUS_DST_ALPHA,[HT]:i.CONSTANT_COLOR,[zT]:i.ONE_MINUS_CONSTANT_COLOR,[GT]:i.CONSTANT_ALPHA,[VT]:i.ONE_MINUS_CONSTANT_ALPHA};function $(ee,We,Me,De,st,$e,Tt,ln,Cn,Kt){if(ee===Fa){w===!0&&(qe(i.BLEND),w=!1);return}if(w===!1&&(Ue(i.BLEND),w=!0),ee!==CT){if(ee!==M||Kt!==U){if((S!==Il||B!==Il)&&(i.blendEquation(i.FUNC_ADD),S=Il,B=Il),Kt)switch(ee){case uu:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case h_:i.blendFunc(i.ONE,i.ONE);break;case f_:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case d_:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}else switch(ee){case uu:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case h_:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case f_:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case d_:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}T=null,b=null,F=null,N=null,z.set(0,0,0),G=0,M=ee,U=Kt}return}st=st||We,$e=$e||Me,Tt=Tt||De,(We!==S||st!==B)&&(i.blendEquationSeparate(tn[We],tn[st]),S=We,B=st),(Me!==T||De!==b||$e!==F||Tt!==N)&&(i.blendFuncSeparate(Ct[Me],Ct[De],Ct[$e],Ct[Tt]),T=Me,b=De,F=$e,N=Tt),(ln.equals(z)===!1||Cn!==G)&&(i.blendColor(ln.r,ln.g,ln.b,Cn),z.copy(ln),G=Cn),M=ee,U=!1}function Mn(ee,We){ee.side===po?qe(i.CULL_FACE):Ue(i.CULL_FACE);let Me=ee.side===br;We&&(Me=!Me),Fe(Me),ee.blending===uu&&ee.transparent===!1?$(Fa):$(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.blendColor,ee.blendAlpha,ee.premultipliedAlpha),o.setFunc(ee.depthFunc),o.setTest(ee.depthTest),o.setMask(ee.depthWrite),s.setMask(ee.colorWrite);const De=ee.stencilWrite;l.setTest(De),De&&(l.setMask(ee.stencilWriteMask),l.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),l.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),Qe(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?Ue(i.SAMPLE_ALPHA_TO_COVERAGE):qe(i.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(ee){L!==ee&&(ee?i.frontFace(i.CW):i.frontFace(i.CCW),L=ee)}function Oe(ee){ee!==MT?(Ue(i.CULL_FACE),ee!==j&&(ee===u_?i.cullFace(i.BACK):ee===ET?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):qe(i.CULL_FACE),j=ee}function Be(ee){ee!==se&&(me&&i.lineWidth(ee),se=ee)}function Qe(ee,We,Me){ee?(Ue(i.POLYGON_OFFSET_FILL),(ie!==We||he!==Me)&&(i.polygonOffset(We,Me),ie=We,he=Me)):qe(i.POLYGON_OFFSET_FILL)}function Re(ee){ee?Ue(i.SCISSOR_TEST):qe(i.SCISSOR_TEST)}function X(ee){ee===void 0&&(ee=i.TEXTURE0+xe-1),q!==ee&&(i.activeTexture(ee),q=ee)}function O(ee,We,Me){Me===void 0&&(q===null?Me=i.TEXTURE0+xe-1:Me=q);let De=Q[Me];De===void 0&&(De={type:void 0,texture:void 0},Q[Me]=De),(De.type!==ee||De.texture!==We)&&(q!==Me&&(i.activeTexture(Me),q=Me),i.bindTexture(ee,We||Ne[ee]),De.type=ee,De.texture=We)}function le(){const ee=Q[q];ee!==void 0&&ee.type!==void 0&&(i.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function Ee(){try{i.compressedTexImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ie(){try{i.compressedTexImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Te(){try{i.texSubImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ut(){try{i.texSubImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Xe(){try{i.compressedTexSubImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ot(){try{i.compressedTexSubImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ht(){try{i.texStorage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ge(){try{i.texStorage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ht(){try{i.texImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function bt(){try{i.texImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Rt(ee){ke.equals(ee)===!1&&(i.scissor(ee.x,ee.y,ee.z,ee.w),ke.copy(ee))}function at(ee){fe.equals(ee)===!1&&(i.viewport(ee.x,ee.y,ee.z,ee.w),fe.copy(ee))}function te(ee,We){let Me=d.get(We);Me===void 0&&(Me=new WeakMap,d.set(We,Me));let De=Me.get(ee);De===void 0&&(De=i.getUniformBlockIndex(We,ee.name),Me.set(ee,De))}function Pe(ee,We){const De=d.get(We).get(ee);u.get(We)!==De&&(i.uniformBlockBinding(We,De,ee.__bindingPointIndex),u.set(We,De))}function et(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),p={},q=null,Q={},m={},v=new WeakMap,y=[],A=null,w=!1,M=null,S=null,T=null,b=null,B=null,F=null,N=null,z=new nt(0,0,0),G=0,U=!1,L=null,j=null,se=null,ie=null,he=null,ke.set(0,0,i.canvas.width,i.canvas.height),fe.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),l.reset()}return{buffers:{color:s,depth:o,stencil:l},enable:Ue,disable:qe,bindFramebuffer:vt,drawBuffers:ft,useProgram:Ut,setBlending:$,setMaterial:Mn,setFlipSided:Fe,setCullFace:Oe,setLineWidth:Be,setPolygonOffset:Qe,setScissorTest:Re,activeTexture:X,bindTexture:O,unbindTexture:le,compressedTexImage2D:Ee,compressedTexImage3D:Ie,texImage2D:ht,texImage3D:bt,updateUBOMapping:te,uniformBlockBinding:Pe,texStorage2D:Ht,texStorage3D:Ge,texSubImage2D:Te,texSubImage3D:ut,compressedTexSubImage2D:Xe,compressedTexSubImage3D:ot,scissor:Rt,viewport:at,reset:et}}function oG(i,e,t,n,r,s,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Le,p=new WeakMap;let m;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(X,O){return y?new OffscreenCanvas(X,O):Pp("canvas")}function w(X,O,le){let Ee=1;const Ie=Re(X);if((Ie.width>le||Ie.height>le)&&(Ee=le/Math.max(Ie.width,Ie.height)),Ee<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const Te=Math.floor(Ee*Ie.width),ut=Math.floor(Ee*Ie.height);m===void 0&&(m=A(Te,ut));const Xe=O?A(Te,ut):m;return Xe.width=Te,Xe.height=ut,Xe.getContext("2d").drawImage(X,0,0,Te,ut),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ie.width+"x"+Ie.height+") to ("+Te+"x"+ut+")."),Xe}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ie.width+"x"+Ie.height+")."),X;return X}function M(X){return X.generateMipmaps}function S(X){i.generateMipmap(X)}function T(X){return X.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:X.isWebGL3DRenderTarget?i.TEXTURE_3D:X.isWebGLArrayRenderTarget||X.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function b(X,O,le,Ee,Ie=!1){if(X!==null){if(i[X]!==void 0)return i[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Te=O;if(O===i.RED&&(le===i.FLOAT&&(Te=i.R32F),le===i.HALF_FLOAT&&(Te=i.R16F),le===i.UNSIGNED_BYTE&&(Te=i.R8)),O===i.RED_INTEGER&&(le===i.UNSIGNED_BYTE&&(Te=i.R8UI),le===i.UNSIGNED_SHORT&&(Te=i.R16UI),le===i.UNSIGNED_INT&&(Te=i.R32UI),le===i.BYTE&&(Te=i.R8I),le===i.SHORT&&(Te=i.R16I),le===i.INT&&(Te=i.R32I)),O===i.RG&&(le===i.FLOAT&&(Te=i.RG32F),le===i.HALF_FLOAT&&(Te=i.RG16F),le===i.UNSIGNED_BYTE&&(Te=i.RG8)),O===i.RG_INTEGER&&(le===i.UNSIGNED_BYTE&&(Te=i.RG8UI),le===i.UNSIGNED_SHORT&&(Te=i.RG16UI),le===i.UNSIGNED_INT&&(Te=i.RG32UI),le===i.BYTE&&(Te=i.RG8I),le===i.SHORT&&(Te=i.RG16I),le===i.INT&&(Te=i.RG32I)),O===i.RGB_INTEGER&&(le===i.UNSIGNED_BYTE&&(Te=i.RGB8UI),le===i.UNSIGNED_SHORT&&(Te=i.RGB16UI),le===i.UNSIGNED_INT&&(Te=i.RGB32UI),le===i.BYTE&&(Te=i.RGB8I),le===i.SHORT&&(Te=i.RGB16I),le===i.INT&&(Te=i.RGB32I)),O===i.RGBA_INTEGER&&(le===i.UNSIGNED_BYTE&&(Te=i.RGBA8UI),le===i.UNSIGNED_SHORT&&(Te=i.RGBA16UI),le===i.UNSIGNED_INT&&(Te=i.RGBA32UI),le===i.BYTE&&(Te=i.RGBA8I),le===i.SHORT&&(Te=i.RGBA16I),le===i.INT&&(Te=i.RGBA32I)),O===i.RGB&&le===i.UNSIGNED_INT_5_9_9_9_REV&&(Te=i.RGB9_E5),O===i.RGBA){const ut=Ie?Tp:gn.getTransfer(Ee);le===i.FLOAT&&(Te=i.RGBA32F),le===i.HALF_FLOAT&&(Te=i.RGBA16F),le===i.UNSIGNED_BYTE&&(Te=ut===wn?i.SRGB8_ALPHA8:i.RGBA8),le===i.UNSIGNED_SHORT_4_4_4_4&&(Te=i.RGBA4),le===i.UNSIGNED_SHORT_5_5_5_1&&(Te=i.RGB5_A1)}return(Te===i.R16F||Te===i.R32F||Te===i.RG16F||Te===i.RG32F||Te===i.RGBA16F||Te===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function B(X,O){let le;return X?O===null||O===Ga||O===_f?le=i.DEPTH24_STENCIL8:O===jr?le=i.DEPTH32F_STENCIL8:O===xf&&(le=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):O===null||O===Ga||O===_f?le=i.DEPTH_COMPONENT24:O===jr?le=i.DEPTH_COMPONENT32F:O===xf&&(le=i.DEPTH_COMPONENT16),le}function F(X,O){return M(X)===!0||X.isFramebufferTexture&&X.minFilter!==Oi&&X.minFilter!==li?Math.log2(Math.max(O.width,O.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?O.mipmaps.length:1}function N(X){const O=X.target;O.removeEventListener("dispose",N),G(O),O.isVideoTexture&&p.delete(O)}function z(X){const O=X.target;O.removeEventListener("dispose",z),L(O)}function G(X){const O=n.get(X);if(O.__webglInit===void 0)return;const le=X.source,Ee=v.get(le);if(Ee){const Ie=Ee[O.__cacheKey];Ie.usedTimes--,Ie.usedTimes===0&&U(X),Object.keys(Ee).length===0&&v.delete(le)}n.remove(X)}function U(X){const O=n.get(X);i.deleteTexture(O.__webglTexture);const le=X.source,Ee=v.get(le);delete Ee[O.__cacheKey],o.memory.textures--}function L(X){const O=n.get(X);if(X.depthTexture&&(X.depthTexture.dispose(),n.remove(X.depthTexture)),X.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++){if(Array.isArray(O.__webglFramebuffer[Ee]))for(let Ie=0;Ie<O.__webglFramebuffer[Ee].length;Ie++)i.deleteFramebuffer(O.__webglFramebuffer[Ee][Ie]);else i.deleteFramebuffer(O.__webglFramebuffer[Ee]);O.__webglDepthbuffer&&i.deleteRenderbuffer(O.__webglDepthbuffer[Ee])}else{if(Array.isArray(O.__webglFramebuffer))for(let Ee=0;Ee<O.__webglFramebuffer.length;Ee++)i.deleteFramebuffer(O.__webglFramebuffer[Ee]);else i.deleteFramebuffer(O.__webglFramebuffer);if(O.__webglDepthbuffer&&i.deleteRenderbuffer(O.__webglDepthbuffer),O.__webglMultisampledFramebuffer&&i.deleteFramebuffer(O.__webglMultisampledFramebuffer),O.__webglColorRenderbuffer)for(let Ee=0;Ee<O.__webglColorRenderbuffer.length;Ee++)O.__webglColorRenderbuffer[Ee]&&i.deleteRenderbuffer(O.__webglColorRenderbuffer[Ee]);O.__webglDepthRenderbuffer&&i.deleteRenderbuffer(O.__webglDepthRenderbuffer)}const le=X.textures;for(let Ee=0,Ie=le.length;Ee<Ie;Ee++){const Te=n.get(le[Ee]);Te.__webglTexture&&(i.deleteTexture(Te.__webglTexture),o.memory.textures--),n.remove(le[Ee])}n.remove(X)}let j=0;function se(){j=0}function ie(){const X=j;return X>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+r.maxTextures),j+=1,X}function he(X){const O=[];return O.push(X.wrapS),O.push(X.wrapT),O.push(X.wrapR||0),O.push(X.magFilter),O.push(X.minFilter),O.push(X.anisotropy),O.push(X.internalFormat),O.push(X.format),O.push(X.type),O.push(X.generateMipmaps),O.push(X.premultiplyAlpha),O.push(X.flipY),O.push(X.unpackAlignment),O.push(X.colorSpace),O.join()}function xe(X,O){const le=n.get(X);if(X.isVideoTexture&&Be(X),X.isRenderTargetTexture===!1&&X.version>0&&le.__version!==X.version){const Ee=X.image;if(Ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(le,X,O);return}}t.bindTexture(i.TEXTURE_2D,le.__webglTexture,i.TEXTURE0+O)}function me(X,O){const le=n.get(X);if(X.version>0&&le.__version!==X.version){fe(le,X,O);return}t.bindTexture(i.TEXTURE_2D_ARRAY,le.__webglTexture,i.TEXTURE0+O)}function ge(X,O){const le=n.get(X);if(X.version>0&&le.__version!==X.version){fe(le,X,O);return}t.bindTexture(i.TEXTURE_3D,le.__webglTexture,i.TEXTURE0+O)}function H(X,O){const le=n.get(X);if(X.version>0&&le.__version!==X.version){Ce(le,X,O);return}t.bindTexture(i.TEXTURE_CUBE_MAP,le.__webglTexture,i.TEXTURE0+O)}const q={[Hl]:i.REPEAT,[os]:i.CLAMP_TO_EDGE,[yf]:i.MIRRORED_REPEAT},Q={[Oi]:i.NEAREST,[dy]:i.NEAREST_MIPMAP_NEAREST,[nu]:i.NEAREST_MIPMAP_LINEAR,[li]:i.LINEAR,[ff]:i.LINEAR_MIPMAP_NEAREST,[Ds]:i.LINEAR_MIPMAP_LINEAR},W={[ob]:i.NEVER,[fb]:i.ALWAYS,[ab]:i.LESS,[TA]:i.LEQUAL,[lb]:i.EQUAL,[hb]:i.GEQUAL,[cb]:i.GREATER,[ub]:i.NOTEQUAL};function re(X,O){if(O.type===jr&&e.has("OES_texture_float_linear")===!1&&(O.magFilter===li||O.magFilter===ff||O.magFilter===nu||O.magFilter===Ds||O.minFilter===li||O.minFilter===ff||O.minFilter===nu||O.minFilter===Ds)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(X,i.TEXTURE_WRAP_S,q[O.wrapS]),i.texParameteri(X,i.TEXTURE_WRAP_T,q[O.wrapT]),(X===i.TEXTURE_3D||X===i.TEXTURE_2D_ARRAY)&&i.texParameteri(X,i.TEXTURE_WRAP_R,q[O.wrapR]),i.texParameteri(X,i.TEXTURE_MAG_FILTER,Q[O.magFilter]),i.texParameteri(X,i.TEXTURE_MIN_FILTER,Q[O.minFilter]),O.compareFunction&&(i.texParameteri(X,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(X,i.TEXTURE_COMPARE_FUNC,W[O.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(O.magFilter===Oi||O.minFilter!==nu&&O.minFilter!==Ds||O.type===jr&&e.has("OES_texture_float_linear")===!1)return;if(O.anisotropy>1||n.get(O).__currentAnisotropy){const le=e.get("EXT_texture_filter_anisotropic");i.texParameterf(X,le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,r.getMaxAnisotropy())),n.get(O).__currentAnisotropy=O.anisotropy}}}function ke(X,O){let le=!1;X.__webglInit===void 0&&(X.__webglInit=!0,O.addEventListener("dispose",N));const Ee=O.source;let Ie=v.get(Ee);Ie===void 0&&(Ie={},v.set(Ee,Ie));const Te=he(O);if(Te!==X.__cacheKey){Ie[Te]===void 0&&(Ie[Te]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,le=!0),Ie[Te].usedTimes++;const ut=Ie[X.__cacheKey];ut!==void 0&&(Ie[X.__cacheKey].usedTimes--,ut.usedTimes===0&&U(O)),X.__cacheKey=Te,X.__webglTexture=Ie[Te].texture}return le}function fe(X,O,le){let Ee=i.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(Ee=i.TEXTURE_2D_ARRAY),O.isData3DTexture&&(Ee=i.TEXTURE_3D);const Ie=ke(X,O),Te=O.source;t.bindTexture(Ee,X.__webglTexture,i.TEXTURE0+le);const ut=n.get(Te);if(Te.version!==ut.__version||Ie===!0){t.activeTexture(i.TEXTURE0+le);const Xe=gn.getPrimaries(gn.workingColorSpace),ot=O.colorSpace===Pa?null:gn.getPrimaries(O.colorSpace),Ht=O.colorSpace===Pa||Xe===ot?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,O.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,O.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ht);let Ge=w(O.image,!1,r.maxTextureSize);Ge=Qe(O,Ge);const ht=s.convert(O.format,O.colorSpace),bt=s.convert(O.type);let Rt=b(O.internalFormat,ht,bt,O.colorSpace,O.isVideoTexture);re(Ee,O);let at;const te=O.mipmaps,Pe=O.isVideoTexture!==!0,et=ut.__version===void 0||Ie===!0,ee=Te.dataReady,We=F(O,Ge);if(O.isDepthTexture)Rt=B(O.format===Sf,O.type),et&&(Pe?t.texStorage2D(i.TEXTURE_2D,1,Rt,Ge.width,Ge.height):t.texImage2D(i.TEXTURE_2D,0,Rt,Ge.width,Ge.height,0,ht,bt,null));else if(O.isDataTexture)if(te.length>0){Pe&&et&&t.texStorage2D(i.TEXTURE_2D,We,Rt,te[0].width,te[0].height);for(let Me=0,De=te.length;Me<De;Me++)at=te[Me],Pe?ee&&t.texSubImage2D(i.TEXTURE_2D,Me,0,0,at.width,at.height,ht,bt,at.data):t.texImage2D(i.TEXTURE_2D,Me,Rt,at.width,at.height,0,ht,bt,at.data);O.generateMipmaps=!1}else Pe?(et&&t.texStorage2D(i.TEXTURE_2D,We,Rt,Ge.width,Ge.height),ee&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ge.width,Ge.height,ht,bt,Ge.data)):t.texImage2D(i.TEXTURE_2D,0,Rt,Ge.width,Ge.height,0,ht,bt,Ge.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){Pe&&et&&t.texStorage3D(i.TEXTURE_2D_ARRAY,We,Rt,te[0].width,te[0].height,Ge.depth);for(let Me=0,De=te.length;Me<De;Me++)if(at=te[Me],O.format!==ur)if(ht!==null)if(Pe){if(ee)if(O.layerUpdates.size>0){const st=M_(at.width,at.height,O.format,O.type);for(const $e of O.layerUpdates){const Tt=at.data.subarray($e*st/at.data.BYTES_PER_ELEMENT,($e+1)*st/at.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Me,0,0,$e,at.width,at.height,1,ht,Tt)}O.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Me,0,0,0,at.width,at.height,Ge.depth,ht,at.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Me,Rt,at.width,at.height,Ge.depth,0,at.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Pe?ee&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,Me,0,0,0,at.width,at.height,Ge.depth,ht,bt,at.data):t.texImage3D(i.TEXTURE_2D_ARRAY,Me,Rt,at.width,at.height,Ge.depth,0,ht,bt,at.data)}else{Pe&&et&&t.texStorage2D(i.TEXTURE_2D,We,Rt,te[0].width,te[0].height);for(let Me=0,De=te.length;Me<De;Me++)at=te[Me],O.format!==ur?ht!==null?Pe?ee&&t.compressedTexSubImage2D(i.TEXTURE_2D,Me,0,0,at.width,at.height,ht,at.data):t.compressedTexImage2D(i.TEXTURE_2D,Me,Rt,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pe?ee&&t.texSubImage2D(i.TEXTURE_2D,Me,0,0,at.width,at.height,ht,bt,at.data):t.texImage2D(i.TEXTURE_2D,Me,Rt,at.width,at.height,0,ht,bt,at.data)}else if(O.isDataArrayTexture)if(Pe){if(et&&t.texStorage3D(i.TEXTURE_2D_ARRAY,We,Rt,Ge.width,Ge.height,Ge.depth),ee)if(O.layerUpdates.size>0){const Me=M_(Ge.width,Ge.height,O.format,O.type);for(const De of O.layerUpdates){const st=Ge.data.subarray(De*Me/Ge.data.BYTES_PER_ELEMENT,(De+1)*Me/Ge.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,De,Ge.width,Ge.height,1,ht,bt,st)}O.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,ht,bt,Ge.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,Rt,Ge.width,Ge.height,Ge.depth,0,ht,bt,Ge.data);else if(O.isData3DTexture)Pe?(et&&t.texStorage3D(i.TEXTURE_3D,We,Rt,Ge.width,Ge.height,Ge.depth),ee&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,ht,bt,Ge.data)):t.texImage3D(i.TEXTURE_3D,0,Rt,Ge.width,Ge.height,Ge.depth,0,ht,bt,Ge.data);else if(O.isFramebufferTexture){if(et)if(Pe)t.texStorage2D(i.TEXTURE_2D,We,Rt,Ge.width,Ge.height);else{let Me=Ge.width,De=Ge.height;for(let st=0;st<We;st++)t.texImage2D(i.TEXTURE_2D,st,Rt,Me,De,0,ht,bt,null),Me>>=1,De>>=1}}else if(te.length>0){if(Pe&&et){const Me=Re(te[0]);t.texStorage2D(i.TEXTURE_2D,We,Rt,Me.width,Me.height)}for(let Me=0,De=te.length;Me<De;Me++)at=te[Me],Pe?ee&&t.texSubImage2D(i.TEXTURE_2D,Me,0,0,ht,bt,at):t.texImage2D(i.TEXTURE_2D,Me,Rt,ht,bt,at);O.generateMipmaps=!1}else if(Pe){if(et){const Me=Re(Ge);t.texStorage2D(i.TEXTURE_2D,We,Rt,Me.width,Me.height)}ee&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,ht,bt,Ge)}else t.texImage2D(i.TEXTURE_2D,0,Rt,ht,bt,Ge);M(O)&&S(Ee),ut.__version=Te.version,O.onUpdate&&O.onUpdate(O)}X.__version=O.version}function Ce(X,O,le){if(O.image.length!==6)return;const Ee=ke(X,O),Ie=O.source;t.bindTexture(i.TEXTURE_CUBE_MAP,X.__webglTexture,i.TEXTURE0+le);const Te=n.get(Ie);if(Ie.version!==Te.__version||Ee===!0){t.activeTexture(i.TEXTURE0+le);const ut=gn.getPrimaries(gn.workingColorSpace),Xe=O.colorSpace===Pa?null:gn.getPrimaries(O.colorSpace),ot=O.colorSpace===Pa||ut===Xe?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,O.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,O.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ot);const Ht=O.isCompressedTexture||O.image[0].isCompressedTexture,Ge=O.image[0]&&O.image[0].isDataTexture,ht=[];for(let De=0;De<6;De++)!Ht&&!Ge?ht[De]=w(O.image[De],!0,r.maxCubemapSize):ht[De]=Ge?O.image[De].image:O.image[De],ht[De]=Qe(O,ht[De]);const bt=ht[0],Rt=s.convert(O.format,O.colorSpace),at=s.convert(O.type),te=b(O.internalFormat,Rt,at,O.colorSpace),Pe=O.isVideoTexture!==!0,et=Te.__version===void 0||Ee===!0,ee=Ie.dataReady;let We=F(O,bt);re(i.TEXTURE_CUBE_MAP,O);let Me;if(Ht){Pe&&et&&t.texStorage2D(i.TEXTURE_CUBE_MAP,We,te,bt.width,bt.height);for(let De=0;De<6;De++){Me=ht[De].mipmaps;for(let st=0;st<Me.length;st++){const $e=Me[st];O.format!==ur?Rt!==null?Pe?ee&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,st,0,0,$e.width,$e.height,Rt,$e.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,st,te,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pe?ee&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,st,0,0,$e.width,$e.height,Rt,at,$e.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,st,te,$e.width,$e.height,0,Rt,at,$e.data)}}}else{if(Me=O.mipmaps,Pe&&et){Me.length>0&&We++;const De=Re(ht[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,We,te,De.width,De.height)}for(let De=0;De<6;De++)if(Ge){Pe?ee&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,0,0,ht[De].width,ht[De].height,Rt,at,ht[De].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,te,ht[De].width,ht[De].height,0,Rt,at,ht[De].data);for(let st=0;st<Me.length;st++){const Tt=Me[st].image[De].image;Pe?ee&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,st+1,0,0,Tt.width,Tt.height,Rt,at,Tt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,st+1,te,Tt.width,Tt.height,0,Rt,at,Tt.data)}}else{Pe?ee&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,0,0,Rt,at,ht[De]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,te,Rt,at,ht[De]);for(let st=0;st<Me.length;st++){const $e=Me[st];Pe?ee&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,st+1,0,0,Rt,at,$e.image[De]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,st+1,te,Rt,at,$e.image[De])}}}M(O)&&S(i.TEXTURE_CUBE_MAP),Te.__version=Ie.version,O.onUpdate&&O.onUpdate(O)}X.__version=O.version}function Ne(X,O,le,Ee,Ie,Te){const ut=s.convert(le.format,le.colorSpace),Xe=s.convert(le.type),ot=b(le.internalFormat,ut,Xe,le.colorSpace),Ht=n.get(O),Ge=n.get(le);if(Ge.__renderTarget=O,!Ht.__hasExternalTextures){const ht=Math.max(1,O.width>>Te),bt=Math.max(1,O.height>>Te);Ie===i.TEXTURE_3D||Ie===i.TEXTURE_2D_ARRAY?t.texImage3D(Ie,Te,ot,ht,bt,O.depth,0,ut,Xe,null):t.texImage2D(Ie,Te,ot,ht,bt,0,ut,Xe,null)}t.bindFramebuffer(i.FRAMEBUFFER,X),Oe(O)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ee,Ie,Ge.__webglTexture,0,Fe(O)):(Ie===i.TEXTURE_2D||Ie>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Ie<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ee,Ie,Ge.__webglTexture,Te),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ue(X,O,le){if(i.bindRenderbuffer(i.RENDERBUFFER,X),O.depthBuffer){const Ee=O.depthTexture,Ie=Ee&&Ee.isDepthTexture?Ee.type:null,Te=B(O.stencilBuffer,Ie),ut=O.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Xe=Fe(O);Oe(O)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Xe,Te,O.width,O.height):le?i.renderbufferStorageMultisample(i.RENDERBUFFER,Xe,Te,O.width,O.height):i.renderbufferStorage(i.RENDERBUFFER,Te,O.width,O.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,ut,i.RENDERBUFFER,X)}else{const Ee=O.textures;for(let Ie=0;Ie<Ee.length;Ie++){const Te=Ee[Ie],ut=s.convert(Te.format,Te.colorSpace),Xe=s.convert(Te.type),ot=b(Te.internalFormat,ut,Xe,Te.colorSpace),Ht=Fe(O);le&&Oe(O)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ht,ot,O.width,O.height):Oe(O)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ht,ot,O.width,O.height):i.renderbufferStorage(i.RENDERBUFFER,ot,O.width,O.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function qe(X,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,X),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ee=n.get(O.depthTexture);Ee.__renderTarget=O,(!Ee.__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),xe(O.depthTexture,0);const Ie=Ee.__webglTexture,Te=Fe(O);if(O.depthTexture.format===Af)Oe(O)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ie,0,Te):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ie,0);else if(O.depthTexture.format===Sf)Oe(O)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ie,0,Te):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ie,0);else throw new Error("Unknown depthTexture format")}function vt(X){const O=n.get(X),le=X.isWebGLCubeRenderTarget===!0;if(O.__boundDepthTexture!==X.depthTexture){const Ee=X.depthTexture;if(O.__depthDisposeCallback&&O.__depthDisposeCallback(),Ee){const Ie=()=>{delete O.__boundDepthTexture,delete O.__depthDisposeCallback,Ee.removeEventListener("dispose",Ie)};Ee.addEventListener("dispose",Ie),O.__depthDisposeCallback=Ie}O.__boundDepthTexture=Ee}if(X.depthTexture&&!O.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");qe(O.__webglFramebuffer,X)}else if(le){O.__webglDepthbuffer=[];for(let Ee=0;Ee<6;Ee++)if(t.bindFramebuffer(i.FRAMEBUFFER,O.__webglFramebuffer[Ee]),O.__webglDepthbuffer[Ee]===void 0)O.__webglDepthbuffer[Ee]=i.createRenderbuffer(),Ue(O.__webglDepthbuffer[Ee],X,!1);else{const Ie=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Te=O.__webglDepthbuffer[Ee];i.bindRenderbuffer(i.RENDERBUFFER,Te),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ie,i.RENDERBUFFER,Te)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer===void 0)O.__webglDepthbuffer=i.createRenderbuffer(),Ue(O.__webglDepthbuffer,X,!1);else{const Ee=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ie=O.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ie),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ee,i.RENDERBUFFER,Ie)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function ft(X,O,le){const Ee=n.get(X);O!==void 0&&Ne(Ee.__webglFramebuffer,X,X.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),le!==void 0&&vt(X)}function Ut(X){const O=X.texture,le=n.get(X),Ee=n.get(O);X.addEventListener("dispose",z);const Ie=X.textures,Te=X.isWebGLCubeRenderTarget===!0,ut=Ie.length>1;if(ut||(Ee.__webglTexture===void 0&&(Ee.__webglTexture=i.createTexture()),Ee.__version=O.version,o.memory.textures++),Te){le.__webglFramebuffer=[];for(let Xe=0;Xe<6;Xe++)if(O.mipmaps&&O.mipmaps.length>0){le.__webglFramebuffer[Xe]=[];for(let ot=0;ot<O.mipmaps.length;ot++)le.__webglFramebuffer[Xe][ot]=i.createFramebuffer()}else le.__webglFramebuffer[Xe]=i.createFramebuffer()}else{if(O.mipmaps&&O.mipmaps.length>0){le.__webglFramebuffer=[];for(let Xe=0;Xe<O.mipmaps.length;Xe++)le.__webglFramebuffer[Xe]=i.createFramebuffer()}else le.__webglFramebuffer=i.createFramebuffer();if(ut)for(let Xe=0,ot=Ie.length;Xe<ot;Xe++){const Ht=n.get(Ie[Xe]);Ht.__webglTexture===void 0&&(Ht.__webglTexture=i.createTexture(),o.memory.textures++)}if(X.samples>0&&Oe(X)===!1){le.__webglMultisampledFramebuffer=i.createFramebuffer(),le.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let Xe=0;Xe<Ie.length;Xe++){const ot=Ie[Xe];le.__webglColorRenderbuffer[Xe]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,le.__webglColorRenderbuffer[Xe]);const Ht=s.convert(ot.format,ot.colorSpace),Ge=s.convert(ot.type),ht=b(ot.internalFormat,Ht,Ge,ot.colorSpace,X.isXRRenderTarget===!0),bt=Fe(X);i.renderbufferStorageMultisample(i.RENDERBUFFER,bt,ht,X.width,X.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Xe,i.RENDERBUFFER,le.__webglColorRenderbuffer[Xe])}i.bindRenderbuffer(i.RENDERBUFFER,null),X.depthBuffer&&(le.__webglDepthRenderbuffer=i.createRenderbuffer(),Ue(le.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Te){t.bindTexture(i.TEXTURE_CUBE_MAP,Ee.__webglTexture),re(i.TEXTURE_CUBE_MAP,O);for(let Xe=0;Xe<6;Xe++)if(O.mipmaps&&O.mipmaps.length>0)for(let ot=0;ot<O.mipmaps.length;ot++)Ne(le.__webglFramebuffer[Xe][ot],X,O,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,ot);else Ne(le.__webglFramebuffer[Xe],X,O,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0);M(O)&&S(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ut){for(let Xe=0,ot=Ie.length;Xe<ot;Xe++){const Ht=Ie[Xe],Ge=n.get(Ht);t.bindTexture(i.TEXTURE_2D,Ge.__webglTexture),re(i.TEXTURE_2D,Ht),Ne(le.__webglFramebuffer,X,Ht,i.COLOR_ATTACHMENT0+Xe,i.TEXTURE_2D,0),M(Ht)&&S(i.TEXTURE_2D)}t.unbindTexture()}else{let Xe=i.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(Xe=X.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Xe,Ee.__webglTexture),re(Xe,O),O.mipmaps&&O.mipmaps.length>0)for(let ot=0;ot<O.mipmaps.length;ot++)Ne(le.__webglFramebuffer[ot],X,O,i.COLOR_ATTACHMENT0,Xe,ot);else Ne(le.__webglFramebuffer,X,O,i.COLOR_ATTACHMENT0,Xe,0);M(O)&&S(Xe),t.unbindTexture()}X.depthBuffer&&vt(X)}function tn(X){const O=X.textures;for(let le=0,Ee=O.length;le<Ee;le++){const Ie=O[le];if(M(Ie)){const Te=T(X),ut=n.get(Ie).__webglTexture;t.bindTexture(Te,ut),S(Te),t.unbindTexture()}}}const Ct=[],$=[];function Mn(X){if(X.samples>0){if(Oe(X)===!1){const O=X.textures,le=X.width,Ee=X.height;let Ie=i.COLOR_BUFFER_BIT;const Te=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ut=n.get(X),Xe=O.length>1;if(Xe)for(let ot=0;ot<O.length;ot++)t.bindFramebuffer(i.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ot,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,ut.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ot,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,ut.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,ut.__webglFramebuffer);for(let ot=0;ot<O.length;ot++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(Ie|=i.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(Ie|=i.STENCIL_BUFFER_BIT)),Xe){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,ut.__webglColorRenderbuffer[ot]);const Ht=n.get(O[ot]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Ht,0)}i.blitFramebuffer(0,0,le,Ee,0,0,le,Ee,Ie,i.NEAREST),u===!0&&(Ct.length=0,$.length=0,Ct.push(i.COLOR_ATTACHMENT0+ot),X.depthBuffer&&X.resolveDepthBuffer===!1&&(Ct.push(Te),$.push(Te),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,$)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ct))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Xe)for(let ot=0;ot<O.length;ot++){t.bindFramebuffer(i.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ot,i.RENDERBUFFER,ut.__webglColorRenderbuffer[ot]);const Ht=n.get(O[ot]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,ut.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ot,i.TEXTURE_2D,Ht,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,ut.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&u){const O=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[O])}}}function Fe(X){return Math.min(r.maxSamples,X.samples)}function Oe(X){const O=n.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function Be(X){const O=o.render.frame;p.get(X)!==O&&(p.set(X,O),X.update())}function Qe(X,O){const le=X.colorSpace,Ee=X.format,Ie=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||le!==mu&&le!==Pa&&(gn.getTransfer(le)===wn?(Ee!==ur||Ie!==go)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),O}function Re(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(d.width=X.naturalWidth||X.width,d.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(d.width=X.displayWidth,d.height=X.displayHeight):(d.width=X.width,d.height=X.height),d}this.allocateTextureUnit=ie,this.resetTextureUnits=se,this.setTexture2D=xe,this.setTexture2DArray=me,this.setTexture3D=ge,this.setTextureCube=H,this.rebindTextures=ft,this.setupRenderTarget=Ut,this.updateRenderTargetMipmap=tn,this.updateMultisampleRenderTarget=Mn,this.setupDepthRenderbuffer=vt,this.setupFrameBufferTexture=Ne,this.useMultisampledRTT=Oe}function yR(i,e){function t(n,r=Pa){let s;const o=gn.getTransfer(r);if(n===go)return i.UNSIGNED_BYTE;if(n===my)return i.UNSIGNED_SHORT_4_4_4_4;if(n===gy)return i.UNSIGNED_SHORT_5_5_5_1;if(n===yA)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===gA)return i.BYTE;if(n===vA)return i.SHORT;if(n===xf)return i.UNSIGNED_SHORT;if(n===py)return i.INT;if(n===Ga)return i.UNSIGNED_INT;if(n===jr)return i.FLOAT;if(n===Lf)return i.HALF_FLOAT;if(n===xA)return i.ALPHA;if(n===_A)return i.RGB;if(n===ur)return i.RGBA;if(n===AA)return i.LUMINANCE;if(n===SA)return i.LUMINANCE_ALPHA;if(n===Af)return i.DEPTH_COMPONENT;if(n===Sf)return i.DEPTH_STENCIL;if(n===vy)return i.RED;if(n===Vp)return i.RED_INTEGER;if(n===MA)return i.RG;if(n===yy)return i.RG_INTEGER;if(n===xy)return i.RGBA_INTEGER;if(n===cp||n===up||n===hp||n===fp)if(o===wn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===cp)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===up)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===hp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===fp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===cp)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===up)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===hp)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===fp)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Mv||n===Ev||n===wv||n===Cv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===Mv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ev)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===wv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Cv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Tv||n===bv||n===Rv)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===Tv||n===bv)return o===wn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Rv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Pv||n===Bv||n===Iv||n===Dv||n===Lv||n===Nv||n===Fv||n===Uv||n===Ov||n===kv||n===Hv||n===zv||n===Gv||n===Vv)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===Pv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Bv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Iv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Dv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Lv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Nv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Fv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Uv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Ov)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===kv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Hv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===zv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Gv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Vv)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===dp||n===Wv||n===jv)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===dp)return o===wn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Wv)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===jv)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===EA||n===Xv||n===Jv||n===Kv)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===dp)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Xv)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Jv)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Kv)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===_f?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const aG=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,lG=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class cG{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new Gn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new fs({vertexShader:aG,fragmentShader:lG,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ni(new Tu(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class uG extends Go{constructor(e,t){super();const n=this;let r=null,s=1,o=null,l="local-floor",u=1,d=null,p=null,m=null,v=null,y=null,A=null;const w=new cG,M=t.getContextAttributes();let S=null,T=null;const b=[],B=[],F=new Le;let N=null;const z=new ti;z.viewport=new yn;const G=new ti;G.viewport=new yn;const U=[z,G],L=new aR;let j=null,se=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(fe){let Ce=b[fe];return Ce===void 0&&(Ce=new iv,b[fe]=Ce),Ce.getTargetRaySpace()},this.getControllerGrip=function(fe){let Ce=b[fe];return Ce===void 0&&(Ce=new iv,b[fe]=Ce),Ce.getGripSpace()},this.getHand=function(fe){let Ce=b[fe];return Ce===void 0&&(Ce=new iv,b[fe]=Ce),Ce.getHandSpace()};function ie(fe){const Ce=B.indexOf(fe.inputSource);if(Ce===-1)return;const Ne=b[Ce];Ne!==void 0&&(Ne.update(fe.inputSource,fe.frame,d||o),Ne.dispatchEvent({type:fe.type,data:fe.inputSource}))}function he(){r.removeEventListener("select",ie),r.removeEventListener("selectstart",ie),r.removeEventListener("selectend",ie),r.removeEventListener("squeeze",ie),r.removeEventListener("squeezestart",ie),r.removeEventListener("squeezeend",ie),r.removeEventListener("end",he),r.removeEventListener("inputsourceschange",xe);for(let fe=0;fe<b.length;fe++){const Ce=B[fe];Ce!==null&&(B[fe]=null,b[fe].disconnect(Ce))}j=null,se=null,w.reset(),e.setRenderTarget(S),y=null,v=null,m=null,r=null,T=null,ke.stop(),n.isPresenting=!1,e.setPixelRatio(N),e.setSize(F.width,F.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(fe){s=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(fe){l=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(fe){d=fe},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return m},this.getFrame=function(){return A},this.getSession=function(){return r},this.setSession=async function(fe){if(r=fe,r!==null){if(S=e.getRenderTarget(),r.addEventListener("select",ie),r.addEventListener("selectstart",ie),r.addEventListener("selectend",ie),r.addEventListener("squeeze",ie),r.addEventListener("squeezestart",ie),r.addEventListener("squeezeend",ie),r.addEventListener("end",he),r.addEventListener("inputsourceschange",xe),M.xrCompatible!==!0&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(F),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ne=null,Ue=null,qe=null;M.depth&&(qe=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ne=M.stencil?Sf:Af,Ue=M.stencil?_f:Ga);const vt={colorFormat:t.RGBA8,depthFormat:qe,scaleFactor:s};m=new XRWebGLBinding(r,t),v=m.createProjectionLayer(vt),r.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),T=new Ls(v.textureWidth,v.textureHeight,{format:ur,type:go,depthTexture:new UA(v.textureWidth,v.textureHeight,Ue,void 0,void 0,void 0,void 0,void 0,void 0,Ne),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Ne={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(r,t,Ne),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),T=new Ls(y.framebufferWidth,y.framebufferHeight,{format:ur,type:go,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(u),d=null,o=await r.requestReferenceSpace(l),ke.setContext(r),ke.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function xe(fe){for(let Ce=0;Ce<fe.removed.length;Ce++){const Ne=fe.removed[Ce],Ue=B.indexOf(Ne);Ue>=0&&(B[Ue]=null,b[Ue].disconnect(Ne))}for(let Ce=0;Ce<fe.added.length;Ce++){const Ne=fe.added[Ce];let Ue=B.indexOf(Ne);if(Ue===-1){for(let vt=0;vt<b.length;vt++)if(vt>=B.length){B.push(Ne),Ue=vt;break}else if(B[vt]===null){B[vt]=Ne,Ue=vt;break}if(Ue===-1)break}const qe=b[Ue];qe&&qe.connect(Ne)}}const me=new J,ge=new J;function H(fe,Ce,Ne){me.setFromMatrixPosition(Ce.matrixWorld),ge.setFromMatrixPosition(Ne.matrixWorld);const Ue=me.distanceTo(ge),qe=Ce.projectionMatrix.elements,vt=Ne.projectionMatrix.elements,ft=qe[14]/(qe[10]-1),Ut=qe[14]/(qe[10]+1),tn=(qe[9]+1)/qe[5],Ct=(qe[9]-1)/qe[5],$=(qe[8]-1)/qe[0],Mn=(vt[8]+1)/vt[0],Fe=ft*$,Oe=ft*Mn,Be=Ue/(-$+Mn),Qe=Be*-$;if(Ce.matrixWorld.decompose(fe.position,fe.quaternion,fe.scale),fe.translateX(Qe),fe.translateZ(Be),fe.matrixWorld.compose(fe.position,fe.quaternion,fe.scale),fe.matrixWorldInverse.copy(fe.matrixWorld).invert(),qe[10]===-1)fe.projectionMatrix.copy(Ce.projectionMatrix),fe.projectionMatrixInverse.copy(Ce.projectionMatrixInverse);else{const Re=ft+Be,X=Ut+Be,O=Fe-Qe,le=Oe+(Ue-Qe),Ee=tn*Ut/X*Re,Ie=Ct*Ut/X*Re;fe.projectionMatrix.makePerspective(O,le,Ee,Ie,Re,X),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert()}}function q(fe,Ce){Ce===null?fe.matrixWorld.copy(fe.matrix):fe.matrixWorld.multiplyMatrices(Ce.matrixWorld,fe.matrix),fe.matrixWorldInverse.copy(fe.matrixWorld).invert()}this.updateCamera=function(fe){if(r===null)return;let Ce=fe.near,Ne=fe.far;w.texture!==null&&(w.depthNear>0&&(Ce=w.depthNear),w.depthFar>0&&(Ne=w.depthFar)),L.near=G.near=z.near=Ce,L.far=G.far=z.far=Ne,(j!==L.near||se!==L.far)&&(r.updateRenderState({depthNear:L.near,depthFar:L.far}),j=L.near,se=L.far),z.layers.mask=fe.layers.mask|2,G.layers.mask=fe.layers.mask|4,L.layers.mask=z.layers.mask|G.layers.mask;const Ue=fe.parent,qe=L.cameras;q(L,Ue);for(let vt=0;vt<qe.length;vt++)q(qe[vt],Ue);qe.length===2?H(L,z,G):L.projectionMatrix.copy(z.projectionMatrix),Q(fe,L,Ue)};function Q(fe,Ce,Ne){Ne===null?fe.matrix.copy(Ce.matrixWorld):(fe.matrix.copy(Ne.matrixWorld),fe.matrix.invert(),fe.matrix.multiply(Ce.matrixWorld)),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.updateMatrixWorld(!0),fe.projectionMatrix.copy(Ce.projectionMatrix),fe.projectionMatrixInverse.copy(Ce.projectionMatrixInverse),fe.isPerspectiveCamera&&(fe.fov=wf*2*Math.atan(1/fe.projectionMatrix.elements[5]),fe.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(v===null&&y===null))return u},this.setFoveation=function(fe){u=fe,v!==null&&(v.fixedFoveation=fe),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=fe)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(L)};let W=null;function re(fe,Ce){if(p=Ce.getViewerPose(d||o),A=Ce,p!==null){const Ne=p.views;y!==null&&(e.setRenderTargetFramebuffer(T,y.framebuffer),e.setRenderTarget(T));let Ue=!1;Ne.length!==L.cameras.length&&(L.cameras.length=0,Ue=!0);for(let ft=0;ft<Ne.length;ft++){const Ut=Ne[ft];let tn=null;if(y!==null)tn=y.getViewport(Ut);else{const $=m.getViewSubImage(v,Ut);tn=$.viewport,ft===0&&(e.setRenderTargetTextures(T,$.colorTexture,$.depthStencilTexture),e.setRenderTarget(T))}let Ct=U[ft];Ct===void 0&&(Ct=new ti,Ct.layers.enable(ft),Ct.viewport=new yn,U[ft]=Ct),Ct.matrix.fromArray(Ut.transform.matrix),Ct.matrix.decompose(Ct.position,Ct.quaternion,Ct.scale),Ct.projectionMatrix.fromArray(Ut.projectionMatrix),Ct.projectionMatrixInverse.copy(Ct.projectionMatrix).invert(),Ct.viewport.set(tn.x,tn.y,tn.width,tn.height),ft===0&&(L.matrix.copy(Ct.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),Ue===!0&&L.cameras.push(Ct)}const qe=r.enabledFeatures;if(qe&&qe.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&m){const ft=m.getDepthInformation(Ne[0]);ft&&ft.isValid&&ft.texture&&w.init(e,ft,r.renderState)}}for(let Ne=0;Ne<b.length;Ne++){const Ue=B[Ne],qe=b[Ne];Ue!==null&&qe!==void 0&&qe.update(Ue,Ce,d||o)}W&&W(fe,Ce),Ce.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ce}),A=null}const ke=new dR;ke.setAnimationLoop(re),this.setAnimationLoop=function(fe){W=fe},this.dispose=function(){}}}const Wc=new hs,hG=new Nt;function fG(i,e){function t(M,S){M.matrixAutoUpdate===!0&&M.updateMatrix(),S.value.copy(M.matrix)}function n(M,S){S.color.getRGB(M.fogColor.value,yb(i)),S.isFog?(M.fogNear.value=S.near,M.fogFar.value=S.far):S.isFogExp2&&(M.fogDensity.value=S.density)}function r(M,S,T,b,B){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(M,S):S.isMeshToonMaterial?(s(M,S),m(M,S)):S.isMeshPhongMaterial?(s(M,S),p(M,S)):S.isMeshStandardMaterial?(s(M,S),v(M,S),S.isMeshPhysicalMaterial&&y(M,S,B)):S.isMeshMatcapMaterial?(s(M,S),A(M,S)):S.isMeshDepthMaterial?s(M,S):S.isMeshDistanceMaterial?(s(M,S),w(M,S)):S.isMeshNormalMaterial?s(M,S):S.isLineBasicMaterial?(o(M,S),S.isLineDashedMaterial&&l(M,S)):S.isPointsMaterial?u(M,S,T,b):S.isSpriteMaterial?d(M,S):S.isShadowMaterial?(M.color.value.copy(S.color),M.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(M,S){M.opacity.value=S.opacity,S.color&&M.diffuse.value.copy(S.color),S.emissive&&M.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(M.map.value=S.map,t(S.map,M.mapTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,t(S.alphaMap,M.alphaMapTransform)),S.bumpMap&&(M.bumpMap.value=S.bumpMap,t(S.bumpMap,M.bumpMapTransform),M.bumpScale.value=S.bumpScale,S.side===br&&(M.bumpScale.value*=-1)),S.normalMap&&(M.normalMap.value=S.normalMap,t(S.normalMap,M.normalMapTransform),M.normalScale.value.copy(S.normalScale),S.side===br&&M.normalScale.value.negate()),S.displacementMap&&(M.displacementMap.value=S.displacementMap,t(S.displacementMap,M.displacementMapTransform),M.displacementScale.value=S.displacementScale,M.displacementBias.value=S.displacementBias),S.emissiveMap&&(M.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,M.emissiveMapTransform)),S.specularMap&&(M.specularMap.value=S.specularMap,t(S.specularMap,M.specularMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest);const T=e.get(S),b=T.envMap,B=T.envMapRotation;b&&(M.envMap.value=b,Wc.copy(B),Wc.x*=-1,Wc.y*=-1,Wc.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(Wc.y*=-1,Wc.z*=-1),M.envMapRotation.value.setFromMatrix4(hG.makeRotationFromEuler(Wc)),M.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=S.reflectivity,M.ior.value=S.ior,M.refractionRatio.value=S.refractionRatio),S.lightMap&&(M.lightMap.value=S.lightMap,M.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,M.lightMapTransform)),S.aoMap&&(M.aoMap.value=S.aoMap,M.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,M.aoMapTransform))}function o(M,S){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,S.map&&(M.map.value=S.map,t(S.map,M.mapTransform))}function l(M,S){M.dashSize.value=S.dashSize,M.totalSize.value=S.dashSize+S.gapSize,M.scale.value=S.scale}function u(M,S,T,b){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,M.size.value=S.size*T,M.scale.value=b*.5,S.map&&(M.map.value=S.map,t(S.map,M.uvTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,t(S.alphaMap,M.alphaMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest)}function d(M,S){M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,M.rotation.value=S.rotation,S.map&&(M.map.value=S.map,t(S.map,M.mapTransform)),S.alphaMap&&(M.alphaMap.value=S.alphaMap,t(S.alphaMap,M.alphaMapTransform)),S.alphaTest>0&&(M.alphaTest.value=S.alphaTest)}function p(M,S){M.specular.value.copy(S.specular),M.shininess.value=Math.max(S.shininess,1e-4)}function m(M,S){S.gradientMap&&(M.gradientMap.value=S.gradientMap)}function v(M,S){M.metalness.value=S.metalness,S.metalnessMap&&(M.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,M.metalnessMapTransform)),M.roughness.value=S.roughness,S.roughnessMap&&(M.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,M.roughnessMapTransform)),S.envMap&&(M.envMapIntensity.value=S.envMapIntensity)}function y(M,S,T){M.ior.value=S.ior,S.sheen>0&&(M.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),M.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(M.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,M.sheenColorMapTransform)),S.sheenRoughnessMap&&(M.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,M.sheenRoughnessMapTransform))),S.clearcoat>0&&(M.clearcoat.value=S.clearcoat,M.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(M.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,M.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(M.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===br&&M.clearcoatNormalScale.value.negate())),S.dispersion>0&&(M.dispersion.value=S.dispersion),S.iridescence>0&&(M.iridescence.value=S.iridescence,M.iridescenceIOR.value=S.iridescenceIOR,M.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(M.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,M.iridescenceMapTransform)),S.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),S.transmission>0&&(M.transmission.value=S.transmission,M.transmissionSamplerMap.value=T.texture,M.transmissionSamplerSize.value.set(T.width,T.height),S.transmissionMap&&(M.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,M.transmissionMapTransform)),M.thickness.value=S.thickness,S.thicknessMap&&(M.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=S.attenuationDistance,M.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(M.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(M.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=S.specularIntensity,M.specularColor.value.copy(S.specularColor),S.specularColorMap&&(M.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,M.specularColorMapTransform)),S.specularIntensityMap&&(M.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,M.specularIntensityMapTransform))}function A(M,S){S.matcap&&(M.matcap.value=S.matcap)}function w(M,S){const T=e.get(S).light;M.referencePosition.value.setFromMatrixPosition(T.matrixWorld),M.nearDistance.value=T.shadow.camera.near,M.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function dG(i,e,t,n){let r={},s={},o=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function u(T,b){const B=b.program;n.uniformBlockBinding(T,B)}function d(T,b){let B=r[T.id];B===void 0&&(A(T),B=p(T),r[T.id]=B,T.addEventListener("dispose",M));const F=b.program;n.updateUBOMapping(T,F);const N=e.render.frame;s[T.id]!==N&&(v(T),s[T.id]=N)}function p(T){const b=m();T.__bindingPointIndex=b;const B=i.createBuffer(),F=T.__size,N=T.usage;return i.bindBuffer(i.UNIFORM_BUFFER,B),i.bufferData(i.UNIFORM_BUFFER,F,N),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,b,B),B}function m(){for(let T=0;T<l;T++)if(o.indexOf(T)===-1)return o.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(T){const b=r[T.id],B=T.uniforms,F=T.__cache;i.bindBuffer(i.UNIFORM_BUFFER,b);for(let N=0,z=B.length;N<z;N++){const G=Array.isArray(B[N])?B[N]:[B[N]];for(let U=0,L=G.length;U<L;U++){const j=G[U];if(y(j,N,U,F)===!0){const se=j.__offset,ie=Array.isArray(j.value)?j.value:[j.value];let he=0;for(let xe=0;xe<ie.length;xe++){const me=ie[xe],ge=w(me);typeof me=="number"||typeof me=="boolean"?(j.__data[0]=me,i.bufferSubData(i.UNIFORM_BUFFER,se+he,j.__data)):me.isMatrix3?(j.__data[0]=me.elements[0],j.__data[1]=me.elements[1],j.__data[2]=me.elements[2],j.__data[3]=0,j.__data[4]=me.elements[3],j.__data[5]=me.elements[4],j.__data[6]=me.elements[5],j.__data[7]=0,j.__data[8]=me.elements[6],j.__data[9]=me.elements[7],j.__data[10]=me.elements[8],j.__data[11]=0):(me.toArray(j.__data,he),he+=ge.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,se,j.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function y(T,b,B,F){const N=T.value,z=b+"_"+B;if(F[z]===void 0)return typeof N=="number"||typeof N=="boolean"?F[z]=N:F[z]=N.clone(),!0;{const G=F[z];if(typeof N=="number"||typeof N=="boolean"){if(G!==N)return F[z]=N,!0}else if(G.equals(N)===!1)return G.copy(N),!0}return!1}function A(T){const b=T.uniforms;let B=0;const F=16;for(let z=0,G=b.length;z<G;z++){const U=Array.isArray(b[z])?b[z]:[b[z]];for(let L=0,j=U.length;L<j;L++){const se=U[L],ie=Array.isArray(se.value)?se.value:[se.value];for(let he=0,xe=ie.length;he<xe;he++){const me=ie[he],ge=w(me),H=B%F,q=H%ge.boundary,Q=H+q;B+=q,Q!==0&&F-Q<ge.storage&&(B+=F-Q),se.__data=new Float32Array(ge.storage/Float32Array.BYTES_PER_ELEMENT),se.__offset=B,B+=ge.storage}}}const N=B%F;return N>0&&(B+=F-N),T.__size=B,T.__cache={},this}function w(T){const b={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(b.boundary=4,b.storage=4):T.isVector2?(b.boundary=8,b.storage=8):T.isVector3||T.isColor?(b.boundary=16,b.storage=12):T.isVector4?(b.boundary=16,b.storage=16):T.isMatrix3?(b.boundary=48,b.storage=48):T.isMatrix4?(b.boundary=64,b.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),b}function M(T){const b=T.target;b.removeEventListener("dispose",M);const B=o.indexOf(b.__bindingPointIndex);o.splice(B,1),i.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function S(){for(const T in r)i.deleteBuffer(r[T]);o=[],r={},s={}}return{bind:u,update:d,dispose:S}}class xR{constructor(e={}){const{canvas:t=mb(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:m=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=o;const A=new Uint32Array(4),w=new Int32Array(4);let M=null,S=null;const T=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Oo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const B=this;let F=!1;this._outputColorSpace=Vr;let N=0,z=0,G=null,U=-1,L=null;const j=new yn,se=new yn;let ie=null;const he=new nt(0);let xe=0,me=t.width,ge=t.height,H=1,q=null,Q=null;const W=new yn(0,0,me,ge),re=new yn(0,0,me,ge);let ke=!1;const fe=new Yp;let Ce=!1,Ne=!1;const Ue=new Nt,qe=new Nt,vt=new J,ft=new yn,Ut={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let tn=!1;function Ct(){return G===null?H:1}let $=n;function Mn(V,de){return t.getContext(V,de)}try{const V={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${zp}`),t.addEventListener("webglcontextlost",De,!1),t.addEventListener("webglcontextrestored",st,!1),t.addEventListener("webglcontextcreationerror",$e,!1),$===null){const de="webgl2";if($=Mn(de,V),$===null)throw Mn(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let Fe,Oe,Be,Qe,Re,X,O,le,Ee,Ie,Te,ut,Xe,ot,Ht,Ge,ht,bt,Rt,at,te,Pe,et,ee;function We(){Fe=new wH($),Fe.init(),Pe=new yR($,Fe),Oe=new yH($,Fe,e,Pe),Be=new sG($,Fe),Oe.reverseDepthBuffer&&v&&Be.buffers.depth.setReversed(!0),Qe=new bH($),Re=new Xz,X=new oG($,Fe,Be,Re,Oe,Pe,Qe),O=new _H(B),le=new EH(B),Ee=new LU($),et=new gH($,Ee),Ie=new CH($,Ee,Qe,et),Te=new PH($,Ie,Ee,Qe),Rt=new RH($,Oe,X),Ge=new xH(Re),ut=new jz(B,O,le,Fe,Oe,et,Ge),Xe=new fG(B,Re),ot=new Kz,Ht=new eG(Fe),bt=new mH(B,O,le,Be,Te,y,u),ht=new iG(B,Te,Oe),ee=new dG($,Qe,Oe,Be),at=new vH($,Fe,Qe),te=new TH($,Fe,Qe),Qe.programs=ut.programs,B.capabilities=Oe,B.extensions=Fe,B.properties=Re,B.renderLists=ot,B.shadowMap=ht,B.state=Be,B.info=Qe}We();const Me=new uG(B,$);this.xr=Me,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const V=Fe.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=Fe.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(V){V!==void 0&&(H=V,this.setSize(me,ge,!1))},this.getSize=function(V){return V.set(me,ge)},this.setSize=function(V,de,Ae=!0){if(Me.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}me=V,ge=de,t.width=Math.floor(V*H),t.height=Math.floor(de*H),Ae===!0&&(t.style.width=V+"px",t.style.height=de+"px"),this.setViewport(0,0,V,de)},this.getDrawingBufferSize=function(V){return V.set(me*H,ge*H).floor()},this.setDrawingBufferSize=function(V,de,Ae){me=V,ge=de,H=Ae,t.width=Math.floor(V*Ae),t.height=Math.floor(de*Ae),this.setViewport(0,0,V,de)},this.getCurrentViewport=function(V){return V.copy(j)},this.getViewport=function(V){return V.copy(W)},this.setViewport=function(V,de,Ae,pe){V.isVector4?W.set(V.x,V.y,V.z,V.w):W.set(V,de,Ae,pe),Be.viewport(j.copy(W).multiplyScalar(H).round())},this.getScissor=function(V){return V.copy(re)},this.setScissor=function(V,de,Ae,pe){V.isVector4?re.set(V.x,V.y,V.z,V.w):re.set(V,de,Ae,pe),Be.scissor(se.copy(re).multiplyScalar(H).round())},this.getScissorTest=function(){return ke},this.setScissorTest=function(V){Be.setScissorTest(ke=V)},this.setOpaqueSort=function(V){q=V},this.setTransparentSort=function(V){Q=V},this.getClearColor=function(V){return V.copy(bt.getClearColor())},this.setClearColor=function(){bt.setClearColor(...arguments)},this.getClearAlpha=function(){return bt.getClearAlpha()},this.setClearAlpha=function(){bt.setClearAlpha(...arguments)},this.clear=function(V=!0,de=!0,Ae=!0){let pe=0;if(V){let ue=!1;if(G!==null){const Ve=G.texture.format;ue=Ve===xy||Ve===yy||Ve===Vp}if(ue){const Ve=G.texture.type,tt=Ve===go||Ve===Ga||Ve===xf||Ve===_f||Ve===my||Ve===gy,ct=bt.getClearColor(),pt=bt.getClearAlpha(),Pt=ct.r,Et=ct.g,Ke=ct.b;tt?(A[0]=Pt,A[1]=Et,A[2]=Ke,A[3]=pt,$.clearBufferuiv($.COLOR,0,A)):(w[0]=Pt,w[1]=Et,w[2]=Ke,w[3]=pt,$.clearBufferiv($.COLOR,0,w))}else pe|=$.COLOR_BUFFER_BIT}de&&(pe|=$.DEPTH_BUFFER_BIT),Ae&&(pe|=$.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",De,!1),t.removeEventListener("webglcontextrestored",st,!1),t.removeEventListener("webglcontextcreationerror",$e,!1),bt.dispose(),ot.dispose(),Ht.dispose(),Re.dispose(),O.dispose(),le.dispose(),Te.dispose(),et.dispose(),ee.dispose(),ut.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",Wa),Me.removeEventListener("sessionend",xo),ps.stop()};function De(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function st(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const V=Qe.autoReset,de=ht.enabled,Ae=ht.autoUpdate,pe=ht.needsUpdate,ue=ht.type;We(),Qe.autoReset=V,ht.enabled=de,ht.autoUpdate=Ae,ht.needsUpdate=pe,ht.type=ue}function $e(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function Tt(V){const de=V.target;de.removeEventListener("dispose",Tt),ln(de)}function ln(V){Cn(V),Re.remove(V)}function Cn(V){const de=Re.get(V).programs;de!==void 0&&(de.forEach(function(Ae){ut.releaseProgram(Ae)}),V.isShaderMaterial&&ut.releaseShaderCache(V))}this.renderBufferDirect=function(V,de,Ae,pe,ue,Ve){de===null&&(de=Ut);const tt=ue.isMesh&&ue.matrixWorld.determinant()<0,ct=Iu(V,de,Ae,pe,ue);Be.setMaterial(pe,tt);let pt=Ae.index,Pt=1;if(pe.wireframe===!0){if(pt=Ie.getWireframeAttribute(Ae),pt===void 0)return;Pt=2}const Et=Ae.drawRange,Ke=Ae.attributes.position;let _t=Et.start*Pt,Ft=(Et.start+Et.count)*Pt;Ve!==null&&(_t=Math.max(_t,Ve.start*Pt),Ft=Math.min(Ft,(Ve.start+Ve.count)*Pt)),pt!==null?(_t=Math.max(_t,0),Ft=Math.min(Ft,pt.count)):Ke!=null&&(_t=Math.max(_t,0),Ft=Math.min(Ft,Ke.count));const nn=Ft-_t;if(nn<0||nn===1/0)return;et.setup(ue,pe,ct,Ae,pt);let rn,Yt=at;if(pt!==null&&(rn=Ee.get(pt),Yt=te,Yt.setIndex(rn)),ue.isMesh)pe.wireframe===!0?(Be.setLineWidth(pe.wireframeLinewidth*Ct()),Yt.setMode($.LINES)):Yt.setMode($.TRIANGLES);else if(ue.isLine){let xt=pe.linewidth;xt===void 0&&(xt=1),Be.setLineWidth(xt*Ct()),ue.isLineSegments?Yt.setMode($.LINES):ue.isLineLoop?Yt.setMode($.LINE_LOOP):Yt.setMode($.LINE_STRIP)}else ue.isPoints?Yt.setMode($.POINTS):ue.isSprite&&Yt.setMode($.TRIANGLES);if(ue.isBatchedMesh)if(ue._multiDrawInstances!==null)nv("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Yt.renderMultiDrawInstances(ue._multiDrawStarts,ue._multiDrawCounts,ue._multiDrawCount,ue._multiDrawInstances);else if(Fe.get("WEBGL_multi_draw"))Yt.renderMultiDraw(ue._multiDrawStarts,ue._multiDrawCounts,ue._multiDrawCount);else{const xt=ue._multiDrawStarts,cn=ue._multiDrawCounts,Zt=ue._multiDrawCount,xi=pt?Ee.get(pt).bytesPerElement:1,Us=Re.get(pe).currentProgram.getUniforms();for(let ci=0;ci<Zt;ci++)Us.setValue($,"_gl_DrawID",ci),Yt.render(xt[ci]/xi,cn[ci])}else if(ue.isInstancedMesh)Yt.renderInstances(_t,nn,ue.count);else if(Ae.isInstancedBufferGeometry){const xt=Ae._maxInstanceCount!==void 0?Ae._maxInstanceCount:1/0,cn=Math.min(Ae.instanceCount,xt);Yt.renderInstances(_t,nn,cn)}else Yt.render(_t,nn)};function Kt(V,de,Ae){V.transparent===!0&&V.side===po&&V.forceSinglePass===!1?(V.side=br,V.needsUpdate=!0,ja(V,de,Ae),V.side=zo,V.needsUpdate=!0,ja(V,de,Ae),V.side=po):ja(V,de,Ae)}this.compile=function(V,de,Ae=null){Ae===null&&(Ae=V),S=Ht.get(Ae),S.init(de),b.push(S),Ae.traverseVisible(function(ue){ue.isLight&&ue.layers.test(de.layers)&&(S.pushLight(ue),ue.castShadow&&S.pushShadow(ue))}),V!==Ae&&V.traverseVisible(function(ue){ue.isLight&&ue.layers.test(de.layers)&&(S.pushLight(ue),ue.castShadow&&S.pushShadow(ue))}),S.setupLights();const pe=new Set;return V.traverse(function(ue){if(!(ue.isMesh||ue.isPoints||ue.isLine||ue.isSprite))return;const Ve=ue.material;if(Ve)if(Array.isArray(Ve))for(let tt=0;tt<Ve.length;tt++){const ct=Ve[tt];Kt(ct,Ae,ue),pe.add(ct)}else Kt(Ve,Ae,ue),pe.add(Ve)}),S=b.pop(),pe},this.compileAsync=function(V,de,Ae=null){const pe=this.compile(V,de,Ae);return new Promise(ue=>{function Ve(){if(pe.forEach(function(tt){Re.get(tt).currentProgram.isReady()&&pe.delete(tt)}),pe.size===0){ue(V);return}setTimeout(Ve,10)}Fe.get("KHR_parallel_shader_compile")!==null?Ve():setTimeout(Ve,10)})};let Vn=null;function Yn(V){Vn&&Vn(V)}function Wa(){ps.stop()}function xo(){ps.start()}const ps=new dR;ps.setAnimationLoop(Yn),typeof self<"u"&&ps.setContext(self),this.setAnimationLoop=function(V){Vn=V,Me.setAnimationLoop(V),V===null?ps.stop():ps.start()},Me.addEventListener("sessionstart",Wa),Me.addEventListener("sessionend",xo),this.render=function(V,de){if(de!==void 0&&de.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),de.parent===null&&de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),Me.enabled===!0&&Me.isPresenting===!0&&(Me.cameraAutoUpdate===!0&&Me.updateCamera(de),de=Me.getCamera()),V.isScene===!0&&V.onBeforeRender(B,V,de,G),S=Ht.get(V,b.length),S.init(de),b.push(S),qe.multiplyMatrices(de.projectionMatrix,de.matrixWorldInverse),fe.setFromProjectionMatrix(qe),Ne=this.localClippingEnabled,Ce=Ge.init(this.clippingPlanes,Ne),M=ot.get(V,T.length),M.init(),T.push(M),Me.enabled===!0&&Me.isPresenting===!0){const Ve=B.xr.getDepthSensingMesh();Ve!==null&&Xr(Ve,de,-1/0,B.sortObjects)}Xr(V,de,0,B.sortObjects),M.finish(),B.sortObjects===!0&&M.sort(q,Q),tn=Me.enabled===!1||Me.isPresenting===!1||Me.hasDepthSensing()===!1,tn&&bt.addToRenderList(M,V),this.info.render.frame++,Ce===!0&&Ge.beginShadows();const Ae=S.state.shadowsArray;ht.render(Ae,V,de),Ce===!0&&Ge.endShadows(),this.info.autoReset===!0&&this.info.reset();const pe=M.opaque,ue=M.transmissive;if(S.setupLights(),de.isArrayCamera){const Ve=de.cameras;if(ue.length>0)for(let tt=0,ct=Ve.length;tt<ct;tt++){const pt=Ve[tt];Jr(pe,ue,V,pt)}tn&&bt.render(V);for(let tt=0,ct=Ve.length;tt<ct;tt++){const pt=Ve[tt];Vo(M,V,pt,pt.viewport)}}else ue.length>0&&Jr(pe,ue,V,de),tn&&bt.render(V),Vo(M,V,de);G!==null&&z===0&&(X.updateMultisampleRenderTarget(G),X.updateRenderTargetMipmap(G)),V.isScene===!0&&V.onAfterRender(B,V,de),et.resetDefaultState(),U=-1,L=null,b.pop(),b.length>0?(S=b[b.length-1],Ce===!0&&Ge.setGlobalState(B.clippingPlanes,S.state.camera)):S=null,T.pop(),T.length>0?M=T[T.length-1]:M=null};function Xr(V,de,Ae,pe){if(V.visible===!1)return;if(V.layers.test(de.layers)){if(V.isGroup)Ae=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(de);else if(V.isLight)S.pushLight(V),V.castShadow&&S.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||fe.intersectsSprite(V)){pe&&ft.setFromMatrixPosition(V.matrixWorld).applyMatrix4(qe);const tt=Te.update(V),ct=V.material;ct.visible&&M.push(V,tt,ct,Ae,ft.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||fe.intersectsObject(V))){const tt=Te.update(V),ct=V.material;if(pe&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),ft.copy(V.boundingSphere.center)):(tt.boundingSphere===null&&tt.computeBoundingSphere(),ft.copy(tt.boundingSphere.center)),ft.applyMatrix4(V.matrixWorld).applyMatrix4(qe)),Array.isArray(ct)){const pt=tt.groups;for(let Pt=0,Et=pt.length;Pt<Et;Pt++){const Ke=pt[Pt],_t=ct[Ke.materialIndex];_t&&_t.visible&&M.push(V,tt,_t,Ae,ft.z,Ke)}}else ct.visible&&M.push(V,tt,ct,Ae,ft.z,null)}}const Ve=V.children;for(let tt=0,ct=Ve.length;tt<ct;tt++)Xr(Ve[tt],de,Ae,pe)}function Vo(V,de,Ae,pe){const ue=V.opaque,Ve=V.transmissive,tt=V.transparent;S.setupLightsView(Ae),Ce===!0&&Ge.setGlobalState(B.clippingPlanes,Ae),pe&&Be.viewport(j.copy(pe)),ue.length>0&&_o(ue,de,Ae),Ve.length>0&&_o(Ve,de,Ae),tt.length>0&&_o(tt,de,Ae),Be.buffers.depth.setTest(!0),Be.buffers.depth.setMask(!0),Be.buffers.color.setMask(!0),Be.setPolygonOffset(!1)}function Jr(V,de,Ae,pe){if((Ae.isScene===!0?Ae.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[pe.id]===void 0&&(S.state.transmissionRenderTarget[pe.id]=new Ls(1,1,{generateMipmaps:!0,type:Fe.has("EXT_color_buffer_half_float")||Fe.has("EXT_color_buffer_float")?Lf:go,minFilter:Ds,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:gn.workingColorSpace}));const Ve=S.state.transmissionRenderTarget[pe.id],tt=pe.viewport||j;Ve.setSize(tt.z*B.transmissionResolutionScale,tt.w*B.transmissionResolutionScale);const ct=B.getRenderTarget();B.setRenderTarget(Ve),B.getClearColor(he),xe=B.getClearAlpha(),xe<1&&B.setClearColor(16777215,.5),B.clear(),tn&&bt.render(Ae);const pt=B.toneMapping;B.toneMapping=Oo;const Pt=pe.viewport;if(pe.viewport!==void 0&&(pe.viewport=void 0),S.setupLightsView(pe),Ce===!0&&Ge.setGlobalState(B.clippingPlanes,pe),_o(V,Ae,pe),X.updateMultisampleRenderTarget(Ve),X.updateRenderTargetMipmap(Ve),Fe.has("WEBGL_multisampled_render_to_texture")===!1){let Et=!1;for(let Ke=0,_t=de.length;Ke<_t;Ke++){const Ft=de[Ke],nn=Ft.object,rn=Ft.geometry,Yt=Ft.material,xt=Ft.group;if(Yt.side===po&&nn.layers.test(pe.layers)){const cn=Yt.side;Yt.side=br,Yt.needsUpdate=!0,Pu(nn,Ae,pe,rn,Yt,xt),Yt.side=cn,Yt.needsUpdate=!0,Et=!0}}Et===!0&&(X.updateMultisampleRenderTarget(Ve),X.updateRenderTargetMipmap(Ve))}B.setRenderTarget(ct),B.setClearColor(he,xe),Pt!==void 0&&(pe.viewport=Pt),B.toneMapping=pt}function _o(V,de,Ae){const pe=de.isScene===!0?de.overrideMaterial:null;for(let ue=0,Ve=V.length;ue<Ve;ue++){const tt=V[ue],ct=tt.object,pt=tt.geometry,Pt=tt.group;let Et=tt.material;Et.allowOverride===!0&&pe!==null&&(Et=pe),ct.layers.test(Ae.layers)&&Pu(ct,de,Ae,pt,Et,Pt)}}function Pu(V,de,Ae,pe,ue,Ve){V.onBeforeRender(B,de,Ae,pe,ue,Ve),V.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),ue.onBeforeRender(B,de,Ae,pe,V,Ve),ue.transparent===!0&&ue.side===po&&ue.forceSinglePass===!1?(ue.side=br,ue.needsUpdate=!0,B.renderBufferDirect(Ae,de,pe,ue,V,Ve),ue.side=zo,ue.needsUpdate=!0,B.renderBufferDirect(Ae,de,pe,ue,V,Ve),ue.side=po):B.renderBufferDirect(Ae,de,pe,ue,V,Ve),V.onAfterRender(B,de,Ae,pe,ue,Ve)}function ja(V,de,Ae){de.isScene!==!0&&(de=Ut);const pe=Re.get(V),ue=S.state.lights,Ve=S.state.shadowsArray,tt=ue.state.version,ct=ut.getParameters(V,ue.state,Ve,de,Ae),pt=ut.getProgramCacheKey(ct);let Pt=pe.programs;pe.environment=V.isMeshStandardMaterial?de.environment:null,pe.fog=de.fog,pe.envMap=(V.isMeshStandardMaterial?le:O).get(V.envMap||pe.environment),pe.envMapRotation=pe.environment!==null&&V.envMap===null?de.environmentRotation:V.envMapRotation,Pt===void 0&&(V.addEventListener("dispose",Tt),Pt=new Map,pe.programs=Pt);let Et=Pt.get(pt);if(Et!==void 0){if(pe.currentProgram===Et&&pe.lightsStateVersion===tt)return ms(V,ct),Et}else ct.uniforms=ut.getUniforms(V),V.onBeforeCompile(ct,B),Et=ut.acquireProgram(ct,pt),Pt.set(pt,Et),pe.uniforms=ct.uniforms;const Ke=pe.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(Ke.clippingPlanes=Ge.uniform),ms(V,ct),pe.needsLights=Lu(V),pe.lightsStateVersion=tt,pe.needsLights&&(Ke.ambientLightColor.value=ue.state.ambient,Ke.lightProbe.value=ue.state.probe,Ke.directionalLights.value=ue.state.directional,Ke.directionalLightShadows.value=ue.state.directionalShadow,Ke.spotLights.value=ue.state.spot,Ke.spotLightShadows.value=ue.state.spotShadow,Ke.rectAreaLights.value=ue.state.rectArea,Ke.ltc_1.value=ue.state.rectAreaLTC1,Ke.ltc_2.value=ue.state.rectAreaLTC2,Ke.pointLights.value=ue.state.point,Ke.pointLightShadows.value=ue.state.pointShadow,Ke.hemisphereLights.value=ue.state.hemi,Ke.directionalShadowMap.value=ue.state.directionalShadowMap,Ke.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,Ke.spotShadowMap.value=ue.state.spotShadowMap,Ke.spotLightMatrix.value=ue.state.spotLightMatrix,Ke.spotLightMap.value=ue.state.spotLightMap,Ke.pointShadowMap.value=ue.state.pointShadowMap,Ke.pointShadowMatrix.value=ue.state.pointShadowMatrix),pe.currentProgram=Et,pe.uniformsList=null,Et}function Bu(V){if(V.uniformsList===null){const de=V.currentProgram.getUniforms();V.uniformsList=rv.seqWithValue(de.seq,V.uniforms)}return V.uniformsList}function ms(V,de){const Ae=Re.get(V);Ae.outputColorSpace=de.outputColorSpace,Ae.batching=de.batching,Ae.batchingColor=de.batchingColor,Ae.instancing=de.instancing,Ae.instancingColor=de.instancingColor,Ae.instancingMorph=de.instancingMorph,Ae.skinning=de.skinning,Ae.morphTargets=de.morphTargets,Ae.morphNormals=de.morphNormals,Ae.morphColors=de.morphColors,Ae.morphTargetsCount=de.morphTargetsCount,Ae.numClippingPlanes=de.numClippingPlanes,Ae.numIntersection=de.numClipIntersection,Ae.vertexAlphas=de.vertexAlphas,Ae.vertexTangents=de.vertexTangents,Ae.toneMapping=de.toneMapping}function Iu(V,de,Ae,pe,ue){de.isScene!==!0&&(de=Ut),X.resetTextureUnits();const Ve=de.fog,tt=pe.isMeshStandardMaterial?de.environment:null,ct=G===null?B.outputColorSpace:G.isXRRenderTarget===!0?G.texture.colorSpace:mu,pt=(pe.isMeshStandardMaterial?le:O).get(pe.envMap||tt),Pt=pe.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,Et=!!Ae.attributes.tangent&&(!!pe.normalMap||pe.anisotropy>0),Ke=!!Ae.morphAttributes.position,_t=!!Ae.morphAttributes.normal,Ft=!!Ae.morphAttributes.color;let nn=Oo;pe.toneMapped&&(G===null||G.isXRRenderTarget===!0)&&(nn=B.toneMapping);const rn=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,Yt=rn!==void 0?rn.length:0,xt=Re.get(pe),cn=S.state.lights;if(Ce===!0&&(Ne===!0||V!==L)){const _i=V===L&&pe.id===U;Ge.setState(pe,V,_i)}let Zt=!1;pe.version===xt.__version?(xt.needsLights&&xt.lightsStateVersion!==cn.state.version||xt.outputColorSpace!==ct||ue.isBatchedMesh&&xt.batching===!1||!ue.isBatchedMesh&&xt.batching===!0||ue.isBatchedMesh&&xt.batchingColor===!0&&ue.colorTexture===null||ue.isBatchedMesh&&xt.batchingColor===!1&&ue.colorTexture!==null||ue.isInstancedMesh&&xt.instancing===!1||!ue.isInstancedMesh&&xt.instancing===!0||ue.isSkinnedMesh&&xt.skinning===!1||!ue.isSkinnedMesh&&xt.skinning===!0||ue.isInstancedMesh&&xt.instancingColor===!0&&ue.instanceColor===null||ue.isInstancedMesh&&xt.instancingColor===!1&&ue.instanceColor!==null||ue.isInstancedMesh&&xt.instancingMorph===!0&&ue.morphTexture===null||ue.isInstancedMesh&&xt.instancingMorph===!1&&ue.morphTexture!==null||xt.envMap!==pt||pe.fog===!0&&xt.fog!==Ve||xt.numClippingPlanes!==void 0&&(xt.numClippingPlanes!==Ge.numPlanes||xt.numIntersection!==Ge.numIntersection)||xt.vertexAlphas!==Pt||xt.vertexTangents!==Et||xt.morphTargets!==Ke||xt.morphNormals!==_t||xt.morphColors!==Ft||xt.toneMapping!==nn||xt.morphTargetsCount!==Yt)&&(Zt=!0):(Zt=!0,xt.__version=pe.version);let xi=xt.currentProgram;Zt===!0&&(xi=ja(pe,de,ue));let Us=!1,ci=!1,gs=!1;const sn=xi.getUniforms(),Bi=xt.uniforms;if(Be.useProgram(xi.program)&&(Us=!0,ci=!0,gs=!0),pe.id!==U&&(U=pe.id,ci=!0),Us||L!==V){Be.buffers.depth.getReversed()?(Ue.copy(V.projectionMatrix),rF(Ue),sF(Ue),sn.setValue($,"projectionMatrix",Ue)):sn.setValue($,"projectionMatrix",V.projectionMatrix),sn.setValue($,"viewMatrix",V.matrixWorldInverse);const Wn=sn.map.cameraPosition;Wn!==void 0&&Wn.setValue($,vt.setFromMatrixPosition(V.matrixWorld)),Oe.logarithmicDepthBuffer&&sn.setValue($,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&sn.setValue($,"isOrthographic",V.isOrthographicCamera===!0),L!==V&&(L=V,ci=!0,gs=!0)}if(ue.isSkinnedMesh){sn.setOptional($,ue,"bindMatrix"),sn.setOptional($,ue,"bindMatrixInverse");const _i=ue.skeleton;_i&&(_i.boneTexture===null&&_i.computeBoneTexture(),sn.setValue($,"boneTexture",_i.boneTexture,X))}ue.isBatchedMesh&&(sn.setOptional($,ue,"batchingTexture"),sn.setValue($,"batchingTexture",ue._matricesTexture,X),sn.setOptional($,ue,"batchingIdTexture"),sn.setValue($,"batchingIdTexture",ue._indirectTexture,X),sn.setOptional($,ue,"batchingColorTexture"),ue._colorsTexture!==null&&sn.setValue($,"batchingColorTexture",ue._colorsTexture,X));const ui=Ae.morphAttributes;if((ui.position!==void 0||ui.normal!==void 0||ui.color!==void 0)&&Rt.update(ue,Ae,xi),(ci||xt.receiveShadow!==ue.receiveShadow)&&(xt.receiveShadow=ue.receiveShadow,sn.setValue($,"receiveShadow",ue.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(Bi.envMap.value=pt,Bi.flipEnvMap.value=pt.isCubeTexture&&pt.isRenderTargetTexture===!1?-1:1),pe.isMeshStandardMaterial&&pe.envMap===null&&de.environment!==null&&(Bi.envMapIntensity.value=de.environmentIntensity),ci&&(sn.setValue($,"toneMappingExposure",B.toneMappingExposure),xt.needsLights&&Du(Bi,gs),Ve&&pe.fog===!0&&Xe.refreshFogUniforms(Bi,Ve),Xe.refreshMaterialUniforms(Bi,pe,H,ge,S.state.transmissionRenderTarget[V.id]),rv.upload($,Bu(xt),Bi,X)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(rv.upload($,Bu(xt),Bi,X),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&sn.setValue($,"center",ue.center),sn.setValue($,"modelViewMatrix",ue.modelViewMatrix),sn.setValue($,"normalMatrix",ue.normalMatrix),sn.setValue($,"modelMatrix",ue.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const _i=pe.uniformsGroups;for(let Wn=0,on=_i.length;Wn<on;Wn++){const qi=_i[Wn];ee.update(qi,xi),ee.bind(qi,xi)}}return xi}function Du(V,de){V.ambientLightColor.needsUpdate=de,V.lightProbe.needsUpdate=de,V.directionalLights.needsUpdate=de,V.directionalLightShadows.needsUpdate=de,V.pointLights.needsUpdate=de,V.pointLightShadows.needsUpdate=de,V.spotLights.needsUpdate=de,V.spotLightShadows.needsUpdate=de,V.rectAreaLights.needsUpdate=de,V.hemisphereLights.needsUpdate=de}function Lu(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function(V,de,Ae){const pe=Re.get(V);pe.__autoAllocateDepthBuffer=V.resolveDepthBuffer===!1,pe.__autoAllocateDepthBuffer===!1&&(pe.__useRenderToTexture=!1),Re.get(V.texture).__webglTexture=de,Re.get(V.depthTexture).__webglTexture=pe.__autoAllocateDepthBuffer?void 0:Ae,pe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(V,de){const Ae=Re.get(V);Ae.__webglFramebuffer=de,Ae.__useDefaultFramebuffer=de===void 0};const Nu=$.createFramebuffer();this.setRenderTarget=function(V,de=0,Ae=0){G=V,N=de,z=Ae;let pe=!0,ue=null,Ve=!1,tt=!1;if(V){const pt=Re.get(V);if(pt.__useDefaultFramebuffer!==void 0)Be.bindFramebuffer($.FRAMEBUFFER,null),pe=!1;else if(pt.__webglFramebuffer===void 0)X.setupRenderTarget(V);else if(pt.__hasExternalTextures)X.rebindTextures(V,Re.get(V.texture).__webglTexture,Re.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const Ke=V.depthTexture;if(pt.__boundDepthTexture!==Ke){if(Ke!==null&&Re.has(Ke)&&(V.width!==Ke.image.width||V.height!==Ke.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");X.setupDepthRenderbuffer(V)}}const Pt=V.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(tt=!0);const Et=Re.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(Et[de])?ue=Et[de][Ae]:ue=Et[de],Ve=!0):V.samples>0&&X.useMultisampledRTT(V)===!1?ue=Re.get(V).__webglMultisampledFramebuffer:Array.isArray(Et)?ue=Et[Ae]:ue=Et,j.copy(V.viewport),se.copy(V.scissor),ie=V.scissorTest}else j.copy(W).multiplyScalar(H).floor(),se.copy(re).multiplyScalar(H).floor(),ie=ke;if(Ae!==0&&(ue=Nu),Be.bindFramebuffer($.FRAMEBUFFER,ue)&&pe&&Be.drawBuffers(V,ue),Be.viewport(j),Be.scissor(se),Be.setScissorTest(ie),Ve){const pt=Re.get(V.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+de,pt.__webglTexture,Ae)}else if(tt){const pt=Re.get(V.texture),Pt=de;$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,pt.__webglTexture,Ae,Pt)}else if(V!==null&&Ae!==0){const pt=Re.get(V.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,pt.__webglTexture,Ae)}U=-1},this.readRenderTargetPixels=function(V,de,Ae,pe,ue,Ve,tt){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ct=Re.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&tt!==void 0&&(ct=ct[tt]),ct){Be.bindFramebuffer($.FRAMEBUFFER,ct);try{const pt=V.texture,Pt=pt.format,Et=pt.type;if(!Oe.textureFormatReadable(Pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Oe.textureTypeReadable(Et)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}de>=0&&de<=V.width-pe&&Ae>=0&&Ae<=V.height-ue&&$.readPixels(de,Ae,pe,ue,Pe.convert(Pt),Pe.convert(Et),Ve)}finally{const pt=G!==null?Re.get(G).__webglFramebuffer:null;Be.bindFramebuffer($.FRAMEBUFFER,pt)}}},this.readRenderTargetPixelsAsync=async function(V,de,Ae,pe,ue,Ve,tt){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ct=Re.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&tt!==void 0&&(ct=ct[tt]),ct)if(de>=0&&de<=V.width-pe&&Ae>=0&&Ae<=V.height-ue){Be.bindFramebuffer($.FRAMEBUFFER,ct);const pt=V.texture,Pt=pt.format,Et=pt.type;if(!Oe.textureFormatReadable(Pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Oe.textureTypeReadable(Et))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ke=$.createBuffer();$.bindBuffer($.PIXEL_PACK_BUFFER,Ke),$.bufferData($.PIXEL_PACK_BUFFER,Ve.byteLength,$.STREAM_READ),$.readPixels(de,Ae,pe,ue,Pe.convert(Pt),Pe.convert(Et),0);const _t=G!==null?Re.get(G).__webglFramebuffer:null;Be.bindFramebuffer($.FRAMEBUFFER,_t);const Ft=$.fenceSync($.SYNC_GPU_COMMANDS_COMPLETE,0);return $.flush(),await iF($,Ft,4),$.bindBuffer($.PIXEL_PACK_BUFFER,Ke),$.getBufferSubData($.PIXEL_PACK_BUFFER,0,Ve),$.deleteBuffer(Ke),$.deleteSync(Ft),Ve}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(V,de=null,Ae=0){const pe=Math.pow(2,-Ae),ue=Math.floor(V.image.width*pe),Ve=Math.floor(V.image.height*pe),tt=de!==null?de.x:0,ct=de!==null?de.y:0;X.setTexture2D(V,0),$.copyTexSubImage2D($.TEXTURE_2D,Ae,0,0,tt,ct,ue,Ve),Be.unbindTexture()};const Fu=$.createFramebuffer(),Uu=$.createFramebuffer();this.copyTextureToTexture=function(V,de,Ae=null,pe=null,ue=0,Ve=null){Ve===null&&(ue!==0?(nv("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ve=ue,ue=0):Ve=0);let tt,ct,pt,Pt,Et,Ke,_t,Ft,nn;const rn=V.isCompressedTexture?V.mipmaps[Ve]:V.image;if(Ae!==null)tt=Ae.max.x-Ae.min.x,ct=Ae.max.y-Ae.min.y,pt=Ae.isBox3?Ae.max.z-Ae.min.z:1,Pt=Ae.min.x,Et=Ae.min.y,Ke=Ae.isBox3?Ae.min.z:0;else{const ui=Math.pow(2,-ue);tt=Math.floor(rn.width*ui),ct=Math.floor(rn.height*ui),V.isDataArrayTexture?pt=rn.depth:V.isData3DTexture?pt=Math.floor(rn.depth*ui):pt=1,Pt=0,Et=0,Ke=0}pe!==null?(_t=pe.x,Ft=pe.y,nn=pe.z):(_t=0,Ft=0,nn=0);const Yt=Pe.convert(de.format),xt=Pe.convert(de.type);let cn;de.isData3DTexture?(X.setTexture3D(de,0),cn=$.TEXTURE_3D):de.isDataArrayTexture||de.isCompressedArrayTexture?(X.setTexture2DArray(de,0),cn=$.TEXTURE_2D_ARRAY):(X.setTexture2D(de,0),cn=$.TEXTURE_2D),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,de.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,de.unpackAlignment);const Zt=$.getParameter($.UNPACK_ROW_LENGTH),xi=$.getParameter($.UNPACK_IMAGE_HEIGHT),Us=$.getParameter($.UNPACK_SKIP_PIXELS),ci=$.getParameter($.UNPACK_SKIP_ROWS),gs=$.getParameter($.UNPACK_SKIP_IMAGES);$.pixelStorei($.UNPACK_ROW_LENGTH,rn.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,rn.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,Pt),$.pixelStorei($.UNPACK_SKIP_ROWS,Et),$.pixelStorei($.UNPACK_SKIP_IMAGES,Ke);const sn=V.isDataArrayTexture||V.isData3DTexture,Bi=de.isDataArrayTexture||de.isData3DTexture;if(V.isDepthTexture){const ui=Re.get(V),_i=Re.get(de),Wn=Re.get(ui.__renderTarget),on=Re.get(_i.__renderTarget);Be.bindFramebuffer($.READ_FRAMEBUFFER,Wn.__webglFramebuffer),Be.bindFramebuffer($.DRAW_FRAMEBUFFER,on.__webglFramebuffer);for(let qi=0;qi<pt;qi++)sn&&($.framebufferTextureLayer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,Re.get(V).__webglTexture,ue,Ke+qi),$.framebufferTextureLayer($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,Re.get(de).__webglTexture,Ve,nn+qi)),$.blitFramebuffer(Pt,Et,tt,ct,_t,Ft,tt,ct,$.DEPTH_BUFFER_BIT,$.NEAREST);Be.bindFramebuffer($.READ_FRAMEBUFFER,null),Be.bindFramebuffer($.DRAW_FRAMEBUFFER,null)}else if(ue!==0||V.isRenderTargetTexture||Re.has(V)){const ui=Re.get(V),_i=Re.get(de);Be.bindFramebuffer($.READ_FRAMEBUFFER,Fu),Be.bindFramebuffer($.DRAW_FRAMEBUFFER,Uu);for(let Wn=0;Wn<pt;Wn++)sn?$.framebufferTextureLayer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,ui.__webglTexture,ue,Ke+Wn):$.framebufferTexture2D($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,ui.__webglTexture,ue),Bi?$.framebufferTextureLayer($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,_i.__webglTexture,Ve,nn+Wn):$.framebufferTexture2D($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,_i.__webglTexture,Ve),ue!==0?$.blitFramebuffer(Pt,Et,tt,ct,_t,Ft,tt,ct,$.COLOR_BUFFER_BIT,$.NEAREST):Bi?$.copyTexSubImage3D(cn,Ve,_t,Ft,nn+Wn,Pt,Et,tt,ct):$.copyTexSubImage2D(cn,Ve,_t,Ft,Pt,Et,tt,ct);Be.bindFramebuffer($.READ_FRAMEBUFFER,null),Be.bindFramebuffer($.DRAW_FRAMEBUFFER,null)}else Bi?V.isDataTexture||V.isData3DTexture?$.texSubImage3D(cn,Ve,_t,Ft,nn,tt,ct,pt,Yt,xt,rn.data):de.isCompressedArrayTexture?$.compressedTexSubImage3D(cn,Ve,_t,Ft,nn,tt,ct,pt,Yt,rn.data):$.texSubImage3D(cn,Ve,_t,Ft,nn,tt,ct,pt,Yt,xt,rn):V.isDataTexture?$.texSubImage2D($.TEXTURE_2D,Ve,_t,Ft,tt,ct,Yt,xt,rn.data):V.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,Ve,_t,Ft,rn.width,rn.height,Yt,rn.data):$.texSubImage2D($.TEXTURE_2D,Ve,_t,Ft,tt,ct,Yt,xt,rn);$.pixelStorei($.UNPACK_ROW_LENGTH,Zt),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,xi),$.pixelStorei($.UNPACK_SKIP_PIXELS,Us),$.pixelStorei($.UNPACK_SKIP_ROWS,ci),$.pixelStorei($.UNPACK_SKIP_IMAGES,gs),Ve===0&&de.generateMipmaps&&$.generateMipmap(cn),Be.unbindTexture()},this.copyTextureToTexture3D=function(V,de,Ae=null,pe=null,ue=0){return nv('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(V,de,Ae,pe,ue)},this.initRenderTarget=function(V){Re.get(V).__webglFramebuffer===void 0&&X.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?X.setTextureCube(V,0):V.isData3DTexture?X.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?X.setTexture2DArray(V,0):X.setTexture2D(V,0),Be.unbindTexture()},this.resetState=function(){N=0,z=0,G=null,Be.reset(),et.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return mo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=gn._getDrawingBufferColorSpace(e),t.unpackColorSpace=gn._getUnpackColorSpace()}}const pG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:mA,AddEquation:Il,AddOperation:jT,AdditiveAnimationBlendMode:wA,AdditiveBlending:h_,AgXToneMapping:QT,AlphaFormat:xA,AlwaysCompare:fb,AlwaysDepth:vv,AlwaysStencilFunc:m_,AmbientLight:eR,AnimationAction:uR,AnimationClip:bf,AnimationLoader:P3,AnimationMixer:iU,AnimationObjectGroup:tU,AnimationUtils:C3,ArcCurve:Tb,ArrayCamera:aR,ArrowHelper:wU,AttachedBindMode:p_,Audio:lR,AudioAnalyser:j3,AudioContext:$A,AudioListener:G3,AudioLoader:k3,AxesHelper:CU,BackSide:br,BasicDepthPacking:ib,BasicShadowMap:wT,BatchedMesh:wb,Bone:wy,BooleanKeyframeTrack:bu,Box2:hU,Box3:hr,Box3Helper:MU,BoxGeometry:Cu,BoxHelper:SU,BufferAttribute:xn,BufferGeometry:Jt,BufferGeometryLoader:sR,ByteType:gA,Cache:Da,Camera:jp,CameraHelper:AU,CanvasTexture:YF,CapsuleGeometry:Ry,CatmullRomCurve3:bb,CineonToneMapping:KT,CircleGeometry:Py,ClampToEdgeWrapping:os,Clock:eS,Color:nt,ColorKeyframeTrack:JA,ColorManagement:gn,CompressedArrayTexture:JF,CompressedCubeTexture:KF,CompressedTexture:Ty,CompressedTextureLoader:B3,ConeGeometry:By,ConstantAlphaFactor:GT,ConstantColorFactor:HT,Controls:bU,CubeCamera:_b,CubeReflectionMapping:za,CubeRefractionMapping:kl,CubeTexture:Xp,CubeTextureLoader:I3,CubeUVReflectionMapping:Df,CubicBezierCurve:kA,CubicBezierCurve3:Rb,CubicInterpolant:Kb,CullFaceBack:u_,CullFaceFront:ET,CullFaceFrontBack:lN,CullFaceNone:MT,Curve:yo,CurvePath:Bb,CustomBlending:CT,CustomToneMapping:YT,CylinderGeometry:Nf,Cylindrical:uU,Data3DTexture:Sy,DataArrayTexture:Wp,DataTexture:ko,DataTextureLoader:D3,DataUtils:_F,DecrementStencilOp:xN,DecrementWrapStencilOp:AN,DefaultLoadingManager:qb,DepthFormat:Af,DepthStencilFormat:Sf,DepthTexture:UA,DetachedBindMode:ZT,DirectionalLight:ZA,DirectionalLightHelper:_U,DiscreteInterpolant:Yb,DodecahedronGeometry:Iy,DoubleSide:po,DstAlphaFactor:NT,DstColorFactor:UT,DynamicCopyUsage:FN,DynamicDrawUsage:PN,DynamicReadUsage:DN,EdgesGeometry:Ib,EllipseCurve:by,EqualCompare:lb,EqualDepth:xv,EqualStencilFunc:wN,EquirectangularReflectionMapping:Ep,EquirectangularRefractionMapping:wp,Euler:hs,EventDispatcher:Go,ExtrudeGeometry:Dy,FileLoader:ds,Float16BufferAttribute:TF,Float32BufferAttribute:Mt,FloatType:jr,Fog:Ey,FogExp2:My,FramebufferTexture:XF,FrontSide:zo,Frustum:Yp,GLBufferAttribute:cU,GLSL1:ON,GLSL3:g_,GreaterCompare:cb,GreaterDepth:Av,GreaterEqualCompare:hb,GreaterEqualDepth:_v,GreaterEqualStencilFunc:RN,GreaterStencilFunc:TN,GridHelper:yU,Group:Ia,HalfFloatType:Lf,HemisphereLight:$b,HemisphereLightHelper:vU,IcosahedronGeometry:Ly,ImageBitmapLoader:oR,ImageLoader:Np,ImageUtils:gb,IncrementStencilOp:yN,IncrementWrapStencilOp:_N,InstancedBufferAttribute:gu,InstancedBufferGeometry:rR,InstancedInterleavedBuffer:lU,InstancedMesh:LA,Int16BufferAttribute:wF,Int32BufferAttribute:CF,Int8BufferAttribute:SF,IntType:py,InterleavedBuffer:Jp,InterleavedBufferAttribute:zl,Interpolant:Ff,InterpolateDiscrete:Mf,InterpolateLinear:Ef,InterpolateSmooth:tv,InvertStencilOp:SN,KeepStencilOp:Zc,KeyframeTrack:Fs,LOD:Eb,LatheGeometry:Qp,Layers:fu,LessCompare:ab,LessDepth:yv,LessEqualCompare:TA,LessEqualDepth:pu,LessEqualStencilFunc:CN,LessStencilFunc:EN,Light:jl,LightProbe:iR,Line:Va,Line3:fU,LineBasicMaterial:fr,LineCurve:HA,LineCurve3:Pb,LineDashedMaterial:jb,LineLoop:NA,LineSegments:vo,LinearFilter:li,LinearInterpolant:XA,LinearMipMapLinearFilter:fN,LinearMipMapNearestFilter:hN,LinearMipmapLinearFilter:Ds,LinearMipmapNearestFilter:ff,LinearSRGBColorSpace:mu,LinearToneMapping:XT,LinearTransfer:Tp,Loader:dr,LoaderUtils:Fl,LoadingManager:KA,LoopOnce:$T,LoopPingPong:tb,LoopRepeat:eb,LuminanceAlphaFormat:SA,LuminanceFormat:AA,MOUSE:Qc,Material:bi,MaterialLoader:Gy,MathUtils:db,Matrix2:rS,Matrix3:Xt,Matrix4:Nt,MaxEquation:PT,Mesh:ni,MeshBasicMaterial:as,MeshDepthMaterial:zy,MeshDistanceMaterial:WA,MeshLambertMaterial:Vb,MeshMatcapMaterial:Wb,MeshNormalMaterial:Gb,MeshPhongMaterial:Hb,MeshPhysicalMaterial:Ns,MeshStandardMaterial:$p,MeshToonMaterial:zb,MinEquation:RT,MirroredRepeatWrapping:yf,MixOperation:WT,MultiplyBlending:d_,MultiplyOperation:Gp,NearestFilter:Oi,NearestMipMapLinearFilter:uN,NearestMipMapNearestFilter:cN,NearestMipmapLinearFilter:nu,NearestMipmapNearestFilter:dy,NeutralToneMapping:qT,NeverCompare:ob,NeverDepth:gv,NeverStencilFunc:MN,NoBlending:Fa,NoColorSpace:Pa,NoToneMapping:Oo,NormalAnimationBlendMode:_y,NormalBlending:uu,NotEqualCompare:ub,NotEqualDepth:Sv,NotEqualStencilFunc:bN,NumberKeyframeTrack:yu,Object3D:dn,ObjectLoader:U3,ObjectSpaceNormalMap:sb,OctahedronGeometry:qp,OneFactor:IT,OneMinusConstantAlphaFactor:VT,OneMinusConstantColorFactor:zT,OneMinusDstAlphaFactor:FT,OneMinusDstColorFactor:OT,OneMinusSrcAlphaFactor:mv,OneMinusSrcColorFactor:LT,OrthographicCamera:Oa,PCFShadowMap:hy,PCFSoftShadowMap:lp,PMREMGenerator:E_,Path:Bp,PerspectiveCamera:ti,Plane:Ra,PlaneGeometry:Tu,PlaneHelper:EU,PointLight:qA,PointLightHelper:mU,Points:FA,PointsMaterial:Cy,PolarGridHelper:xU,PolyhedronGeometry:Wl,PositionalAudio:W3,PropertyBinding:mn,PropertyMixer:cR,QuadraticBezierCurve:zA,QuadraticBezierCurve3:GA,Quaternion:ki,QuaternionKeyframeTrack:xu,QuaternionLinearInterpolant:Qb,RED_GREEN_RGTC2_Format:Jv,RED_RGTC1_Format:EA,REVISION:zp,RGBADepthPacking:rb,RGBAFormat:ur,RGBAIntegerFormat:xy,RGBA_ASTC_10x10_Format:zv,RGBA_ASTC_10x5_Format:Ov,RGBA_ASTC_10x6_Format:kv,RGBA_ASTC_10x8_Format:Hv,RGBA_ASTC_12x10_Format:Gv,RGBA_ASTC_12x12_Format:Vv,RGBA_ASTC_4x4_Format:Pv,RGBA_ASTC_5x4_Format:Bv,RGBA_ASTC_5x5_Format:Iv,RGBA_ASTC_6x5_Format:Dv,RGBA_ASTC_6x6_Format:Lv,RGBA_ASTC_8x5_Format:Nv,RGBA_ASTC_8x6_Format:Fv,RGBA_ASTC_8x8_Format:Uv,RGBA_BPTC_Format:dp,RGBA_ETC2_EAC_Format:Rv,RGBA_PVRTC_2BPPV1_Format:Cv,RGBA_PVRTC_4BPPV1_Format:wv,RGBA_S3TC_DXT1_Format:up,RGBA_S3TC_DXT3_Format:hp,RGBA_S3TC_DXT5_Format:fp,RGBDepthPacking:pN,RGBFormat:_A,RGBIntegerFormat:dN,RGB_BPTC_SIGNED_Format:Wv,RGB_BPTC_UNSIGNED_Format:jv,RGB_ETC1_Format:Tv,RGB_ETC2_Format:bv,RGB_PVRTC_2BPPV1_Format:Ev,RGB_PVRTC_4BPPV1_Format:Mv,RGB_S3TC_DXT1_Format:cp,RGDepthPacking:mN,RGFormat:MA,RGIntegerFormat:yy,RawShaderMaterial:kb,Ray:wu,Raycaster:hR,RectAreaLight:tR,RedFormat:vy,RedIntegerFormat:Vp,ReinhardToneMapping:JT,RenderTarget:Ay,RenderTarget3D:rU,RenderTargetArray:sU,RepeatWrapping:Hl,ReplaceStencilOp:vN,ReverseSubtractEquation:bT,RingGeometry:Ny,SIGNED_RED_GREEN_RGTC2_Format:Kv,SIGNED_RED_RGTC1_Format:Xv,SRGBColorSpace:Vr,SRGBTransfer:wn,Scene:BA,ShaderChunk:en,ShaderLib:fo,ShaderMaterial:fs,ShadowMaterial:Ob,Shape:du,ShapeGeometry:Fy,ShapePath:TU,ShapeUtils:Ho,ShortType:vA,Skeleton:Kp,SkeletonHelper:pU,SkinnedMesh:DA,Source:Ll,Sphere:Qi,SphereGeometry:Zp,Spherical:S_,SphericalHarmonics3:nR,SplineCurve:VA,SpotLight:QA,SpotLightHelper:dU,Sprite:Mb,SpriteMaterial:IA,SrcAlphaFactor:pv,SrcAlphaSaturateFactor:kT,SrcColorFactor:DT,StaticCopyUsage:NN,StaticDrawUsage:bp,StaticReadUsage:IN,StereoCamera:H3,StreamCopyUsage:UN,StreamDrawUsage:BN,StreamReadUsage:LN,StringKeyframeTrack:Ru,SubtractEquation:TT,SubtractiveBlending:f_,TOUCH:qc,TangentSpaceNormalMap:Vl,TetrahedronGeometry:Uy,Texture:Gn,TextureLoader:Zb,TextureUtils:DU,TimestampQuery:kN,TorusGeometry:Oy,TorusKnotGeometry:ky,Triangle:Wr,TriangleFanDrawMode:Yv,TriangleStripDrawMode:CA,TrianglesDrawMode:nb,TubeGeometry:Hy,UVMapping:fy,Uint16BufferAttribute:RA,Uint32BufferAttribute:PA,Uint8BufferAttribute:MF,Uint8ClampedBufferAttribute:EF,Uniform:iS,UniformsGroup:aU,UniformsLib:rt,UniformsUtils:xb,UnsignedByteType:go,UnsignedInt248Type:_f,UnsignedInt5999Type:yA,UnsignedIntType:Ga,UnsignedShort4444Type:my,UnsignedShort5551Type:gy,UnsignedShortType:xf,VSMShadowMap:ho,Vector2:Le,Vector3:J,Vector4:yn,VectorKeyframeTrack:_u,VideoFrameTexture:jF,VideoTexture:Cb,WebGL3DRenderTarget:uF,WebGLArrayRenderTarget:cF,WebGLCoordinateSystem:mo,WebGLCubeRenderTarget:Ab,WebGLRenderTarget:Ls,WebGLRenderer:xR,WebGLUtils:yR,WebGPUCoordinateSystem:Rp,WebXRController:iv,WireframeGeometry:Ub,WrapAroundEnding:Cp,ZeroCurvatureEnding:iu,ZeroFactor:BT,ZeroSlopeEnding:ru,ZeroStencilOp:gN,createCanvasElement:mb},Symbol.toStringTag,{value:"Module"}));var wx={exports:{}},Rl={};var qw;function mG(){return qw||(qw=1,Rl.ConcurrentRoot=1,Rl.ContinuousEventPriority=4,Rl.DefaultEventPriority=16,Rl.DiscreteEventPriority=1,Rl.IdleEventPriority=536870912,Rl.LegacyRoot=0),Rl}var Zw;function gG(){return Zw||(Zw=1,wx.exports=mG()),wx.exports}var hf=gG();function vG(i){let e;const t=new Set,n=(d,p)=>{const m=typeof d=="function"?d(e):d;if(m!==e){const v=e;e=p?m:Object.assign({},e,m),t.forEach(y=>y(e,v))}},r=()=>e,s=(d,p=r,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=p(e);function y(){const A=p(e);if(!m(v,A)){const w=v;d(v=A,w)}}return t.add(y),()=>t.delete(y)},u={setState:n,getState:r,subscribe:(d,p,m)=>p||m?s(d,p,m):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=i(n,r,u),u}const yG=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),$w=yG?Z.useEffect:Z.useLayoutEffect;function xG(i){const e=typeof i=="function"?vG(i):i,t=(n=e.getState,r=Object.is)=>{const[,s]=Z.useReducer(M=>M+1,0),o=e.getState(),l=Z.useRef(o),u=Z.useRef(n),d=Z.useRef(r),p=Z.useRef(!1),m=Z.useRef();m.current===void 0&&(m.current=n(o));let v,y=!1;(l.current!==o||u.current!==n||d.current!==r||p.current)&&(v=n(o),y=!r(m.current,v)),$w(()=>{y&&(m.current=v),l.current=o,u.current=n,d.current=r,p.current=!1});const A=Z.useRef(o);$w(()=>{const M=()=>{try{const T=e.getState(),b=u.current(T);d.current(m.current,b)||(l.current=T,m.current=b,s())}catch{p.current=!0,s()}},S=e.subscribe(M);return e.getState()!==A.current&&M(),S},[]);const w=y?v:m.current;return Z.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}const _G=i=>typeof i=="object"&&typeof i.then=="function",ou=[];function _R(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(i[r],e[r]))return!1;return!0}function AR(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const s of ou)if(_R(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:n.equal,remove:()=>{const s=ou.indexOf(r);s!==-1&&ou.splice(s,1)},promise:(_G(i)?i:i(...e)).then(s=>{r.response=s,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))}).catch(s=>r.error=s)};if(ou.push(r),!t)throw r.promise}const AG=(i,e,t)=>AR(i,e,!1,t),SG=(i,e,t)=>{AR(i,e,!0,t)},MG=i=>{if(i===void 0||i.length===0)ou.splice(0,ou.length);else{const e=ou.find(t=>_R(i,t.keys,t.equal));e&&e.remove()}};var Cx={exports:{}},Tx={exports:{}},bx={};var eC;function EG(){return eC||(eC=1,(function(i){function e(H,q){var Q=H.length;H.push(q);e:for(;0<Q;){var W=Q-1>>>1,re=H[W];if(0<r(re,q))H[W]=q,H[Q]=re,Q=W;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var q=H[0],Q=H.pop();if(Q!==q){H[0]=Q;e:for(var W=0,re=H.length,ke=re>>>1;W<ke;){var fe=2*(W+1)-1,Ce=H[fe],Ne=fe+1,Ue=H[Ne];if(0>r(Ce,Q))Ne<re&&0>r(Ue,Ce)?(H[W]=Ue,H[Ne]=Q,W=Ne):(H[W]=Ce,H[fe]=Q,W=fe);else if(Ne<re&&0>r(Ue,Q))H[W]=Ue,H[Ne]=Q,W=Ne;else break e}}return q}function r(H,q){var Q=H.sortIndex-q.sortIndex;return Q!==0?Q:H.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,m=null,v=3,y=!1,A=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var q=t(d);q!==null;){if(q.callback===null)n(d);else if(q.startTime<=H)n(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=t(d)}}function B(H){if(w=!1,b(H),!A)if(t(u)!==null)A=!0,me(F);else{var q=t(d);q!==null&&ge(B,q.startTime-H)}}function F(H,q){A=!1,w&&(w=!1,S(G),G=-1),y=!0;var Q=v;try{for(b(q),m=t(u);m!==null&&(!(m.expirationTime>q)||H&&!j());){var W=m.callback;if(typeof W=="function"){m.callback=null,v=m.priorityLevel;var re=W(m.expirationTime<=q);q=i.unstable_now(),typeof re=="function"?m.callback=re:m===t(u)&&n(u),b(q)}else n(u);m=t(u)}if(m!==null)var ke=!0;else{var fe=t(d);fe!==null&&ge(B,fe.startTime-q),ke=!1}return ke}finally{m=null,v=Q,y=!1}}var N=!1,z=null,G=-1,U=5,L=-1;function j(){return!(i.unstable_now()-L<U)}function se(){if(z!==null){var H=i.unstable_now();L=H;var q=!0;try{q=z(!0,H)}finally{q?ie():(N=!1,z=null)}}else N=!1}var ie;if(typeof T=="function")ie=function(){T(se)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,xe=he.port2;he.port1.onmessage=se,ie=function(){xe.postMessage(null)}}else ie=function(){M(se,0)};function me(H){z=H,N||(N=!0,ie())}function ge(H,q){G=M(function(){H(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){A||y||(A=!0,me(F))},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(H){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var Q=v;v=q;try{return H()}finally{v=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=v;v=H;try{return q()}finally{v=Q}},i.unstable_scheduleCallback=function(H,q,Q){var W=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,H){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Q+re,H={id:p++,callback:q,priorityLevel:H,startTime:Q,expirationTime:re,sortIndex:-1},Q>W?(H.sortIndex=Q,e(d,H),t(u)===null&&H===t(d)&&(w?(S(G),G=-1):w=!0,ge(B,Q-W))):(H.sortIndex=re,e(u,H),A||y||(A=!0,me(F))),H},i.unstable_shouldYield=j,i.unstable_wrapCallback=function(H){var q=v;return function(){var Q=v;v=q;try{return H.apply(this,arguments)}finally{v=Q}}}})(bx)),bx}var tC;function wG(){return tC||(tC=1,Tx.exports=EG()),Tx.exports}var Rx,nC;function CG(){return nC||(nC=1,Rx=function(e){var t={},n=ny(),r=wG(),s=Object.assign;function o(h){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+h,x=1;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),d=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),A=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),F=Symbol.iterator;function N(h){return h===null||typeof h!="object"?null:(h=F&&h[F]||h["@@iterator"],typeof h=="function"?h:null)}function z(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case p:return"Fragment";case d:return"Portal";case v:return"Profiler";case m:return"StrictMode";case M:return"Suspense";case S:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case A:return(h.displayName||"Context")+".Consumer";case y:return(h._context.displayName||"Context")+".Provider";case w:var f=h.render;return h=h.displayName,h||(h=f.displayName||f.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case T:return f=h.displayName||null,f!==null?f:z(h.type)||"Memo";case b:f=h._payload,h=h._init;try{return z(h(f))}catch{}}return null}function G(h){var f=h.type;switch(h.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=f.render,h=h.displayName||h.name||"",f.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(f);case 8:return f===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function U(h){var f=h,x=h;if(h.alternate)for(;f.return;)f=f.return;else{h=f;do f=h,(f.flags&4098)!==0&&(x=f.return),h=f.return;while(h)}return f.tag===3?x:null}function L(h){if(U(h)!==h)throw Error(o(188))}function j(h){var f=h.alternate;if(!f){if(f=U(h),f===null)throw Error(o(188));return f!==h?null:h}for(var x=h,E=f;;){var R=x.return;if(R===null)break;var I=R.alternate;if(I===null){if(E=R.return,E!==null){x=E;continue}break}if(R.child===I.child){for(I=R.child;I;){if(I===x)return L(R),h;if(I===E)return L(R),f;I=I.sibling}throw Error(o(188))}if(x.return!==E.return)x=R,E=I;else{for(var K=!1,ae=R.child;ae;){if(ae===x){K=!0,x=R,E=I;break}if(ae===E){K=!0,E=R,x=I;break}ae=ae.sibling}if(!K){for(ae=I.child;ae;){if(ae===x){K=!0,x=I,E=R;break}if(ae===E){K=!0,E=I,x=R;break}ae=ae.sibling}if(!K)throw Error(o(189))}}if(x.alternate!==E)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?h:f}function se(h){return h=j(h),h!==null?ie(h):null}function ie(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var f=ie(h);if(f!==null)return f;h=h.sibling}return null}function he(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var f=he(h);if(f!==null)return f}h=h.sibling}return null}var xe=Array.isArray,me=e.getPublicInstance,ge=e.getRootHostContext,H=e.getChildHostContext,q=e.prepareForCommit,Q=e.resetAfterCommit,W=e.createInstance,re=e.appendInitialChild,ke=e.finalizeInitialChildren,fe=e.prepareUpdate,Ce=e.shouldSetTextContent,Ne=e.createTextInstance,Ue=e.scheduleTimeout,qe=e.cancelTimeout,vt=e.noTimeout,ft=e.isPrimaryRenderer,Ut=e.supportsMutation,tn=e.supportsPersistence,Ct=e.supportsHydration,$=e.getInstanceFromNode,Mn=e.preparePortalMount,Fe=e.getCurrentEventPriority,Oe=e.detachDeletedInstance,Be=e.supportsMicrotasks,Qe=e.scheduleMicrotask,Re=e.supportsTestSelectors,X=e.findFiberRoot,O=e.getBoundingRect,le=e.getTextContent,Ee=e.isHiddenSubtree,Ie=e.matchAccessibilityRole,Te=e.setFocusIfFocusable,ut=e.setupIntersectionObserver,Xe=e.appendChild,ot=e.appendChildToContainer,Ht=e.commitTextUpdate,Ge=e.commitMount,ht=e.commitUpdate,bt=e.insertBefore,Rt=e.insertInContainerBefore,at=e.removeChild,te=e.removeChildFromContainer,Pe=e.resetTextContent,et=e.hideInstance,ee=e.hideTextInstance,We=e.unhideInstance,Me=e.unhideTextInstance,De=e.clearContainer,st=e.cloneInstance,$e=e.createContainerChildSet,Tt=e.appendChildToContainerChildSet,ln=e.finalizeContainerChildren,Cn=e.replaceContainerChildren,Kt=e.cloneHiddenInstance,Vn=e.cloneHiddenTextInstance,Yn=e.canHydrateInstance,Wa=e.canHydrateTextInstance,xo=e.canHydrateSuspenseInstance,ps=e.isSuspenseInstancePending,Xr=e.isSuspenseInstanceFallback,Vo=e.registerSuspenseInstanceRetry,Jr=e.getNextHydratableSibling,_o=e.getFirstHydratableChild,Pu=e.getFirstHydratableChildWithinContainer,ja=e.getFirstHydratableChildWithinSuspenseInstance,Bu=e.hydrateInstance,ms=e.hydrateTextInstance,Iu=e.hydrateSuspenseInstance,Du=e.getNextHydratableInstanceAfterSuspenseInstance,Lu=e.commitHydratedContainer,Nu=e.commitHydratedSuspenseInstance,Fu=e.clearSuspenseBoundary,Uu=e.clearSuspenseBoundaryFromContainer,V=e.shouldDeleteUnhydratedTailInstances,de=e.didNotMatchHydratedContainerTextInstance,Ae=e.didNotMatchHydratedTextInstance,pe;function ue(h){if(pe===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);pe=f&&f[1]||""}return`
`+pe+h}var Ve=!1;function tt(h,f){if(!h||Ve)return"";Ve=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Je){var E=Je}Reflect.construct(h,[],f)}else{try{f.call()}catch(Je){E=Je}h.call(f.prototype)}else{try{throw Error()}catch(Je){E=Je}h()}}catch(Je){if(Je&&E&&typeof Je.stack=="string"){for(var R=Je.stack.split(`
`),I=E.stack.split(`
`),K=R.length-1,ae=I.length-1;1<=K&&0<=ae&&R[K]!==I[ae];)ae--;for(;1<=K&&0<=ae;K--,ae--)if(R[K]!==I[ae]){if(K!==1||ae!==1)do if(K--,ae--,0>ae||R[K]!==I[ae]){var be=`
`+R[K].replace(" at new "," at ");return h.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",h.displayName)),be}while(1<=K&&0<=ae);break}}}finally{Ve=!1,Error.prepareStackTrace=x}return(h=h?h.displayName||h.name:"")?ue(h):""}var ct=Object.prototype.hasOwnProperty,pt=[],Pt=-1;function Et(h){return{current:h}}function Ke(h){0>Pt||(h.current=pt[Pt],pt[Pt]=null,Pt--)}function _t(h,f){Pt++,pt[Pt]=h.current,h.current=f}var Ft={},nn=Et(Ft),rn=Et(!1),Yt=Ft;function xt(h,f){var x=h.type.contextTypes;if(!x)return Ft;var E=h.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===f)return E.__reactInternalMemoizedMaskedChildContext;var R={},I;for(I in x)R[I]=f[I];return E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=f,h.__reactInternalMemoizedMaskedChildContext=R),R}function cn(h){return h=h.childContextTypes,h!=null}function Zt(){Ke(rn),Ke(nn)}function xi(h,f,x){if(nn.current!==Ft)throw Error(o(168));_t(nn,f),_t(rn,x)}function Us(h,f,x){var E=h.stateNode;if(f=f.childContextTypes,typeof E.getChildContext!="function")return x;E=E.getChildContext();for(var R in E)if(!(R in f))throw Error(o(108,G(h)||"Unknown",R));return s({},x,E)}function ci(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Ft,Yt=nn.current,_t(nn,h),_t(rn,rn.current),!0}function gs(h,f,x){var E=h.stateNode;if(!E)throw Error(o(169));x?(h=Us(h,f,Yt),E.__reactInternalMemoizedMergedChildContext=h,Ke(rn),Ke(nn),_t(nn,h)):Ke(rn),_t(rn,x)}var sn=Math.clz32?Math.clz32:_i,Bi=Math.log,ui=Math.LN2;function _i(h){return h>>>=0,h===0?32:31-(Bi(h)/ui|0)|0}var Wn=64,on=4194304;function qi(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Xl(h,f){var x=h.pendingLanes;if(x===0)return 0;var E=0,R=h.suspendedLanes,I=h.pingedLanes,K=x&268435455;if(K!==0){var ae=K&~R;ae!==0?E=qi(ae):(I&=K,I!==0&&(E=qi(I)))}else K=x&~R,K!==0?E=qi(K):I!==0&&(E=qi(I));if(E===0)return 0;if(f!==0&&f!==E&&(f&R)===0&&(R=E&-E,I=f&-f,R>=I||R===16&&(I&4194240)!==0))return f;if((E&4)!==0&&(E|=x&16),f=h.entangledLanes,f!==0)for(h=h.entanglements,f&=E;0<f;)x=31-sn(f),R=1<<x,E|=h[x],f&=~R;return E}function Of(h,f){switch(h){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function im(h,f){for(var x=h.suspendedLanes,E=h.pingedLanes,R=h.expirationTimes,I=h.pendingLanes;0<I;){var K=31-sn(I),ae=1<<K,be=R[K];be===-1?((ae&x)===0||(ae&E)!==0)&&(R[K]=Of(ae,f)):be<=f&&(h.expiredLanes|=ae),I&=~ae}}function Ou(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function ku(h){for(var f=[],x=0;31>x;x++)f.push(h);return f}function Wo(h,f,x){h.pendingLanes|=f,f!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,f=31-sn(f),h[f]=x}function Hu(h,f){var x=h.pendingLanes&~f;h.pendingLanes=f,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=f,h.mutableReadLanes&=f,h.entangledLanes&=f,f=h.entanglements;var E=h.eventTimes;for(h=h.expirationTimes;0<x;){var R=31-sn(x),I=1<<R;f[R]=0,E[R]=-1,h[R]=-1,x&=~I}}function vs(h,f){var x=h.entangledLanes|=f;for(h=h.entanglements;x;){var E=31-sn(x),R=1<<E;R&f|h[E]&f&&(h[E]|=f),x&=~R}}var $t=0;function Os(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var jo=r.unstable_scheduleCallback,Xa=r.unstable_cancelCallback,Ao=r.unstable_shouldYield,Wy=r.unstable_requestPaint,ii=r.unstable_now,Xo=r.unstable_ImmediatePriority,jy=r.unstable_UserBlockingPriority,zu=r.unstable_NormalPriority,Gu=r.unstable_IdlePriority,Jl=null,ys=null;function Kl(h){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(Jl,h,void 0,(h.current.flags&128)===128)}catch{}}function Yl(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var Hi=typeof Object.is=="function"?Object.is:Yl,Rr=null,Vu=!1,kf=!1;function Wu(h){Rr===null?Rr=[h]:Rr.push(h)}function ju(h){Vu=!0,Wu(h)}function Pr(){if(!kf&&Rr!==null){kf=!0;var h=0,f=$t;try{var x=Rr;for($t=1;h<x.length;h++){var E=x[h];do E=E(!0);while(E!==null)}Rr=null,Vu=!1}catch(R){throw Rr!==null&&(Rr=Rr.slice(h+1)),jo(Xo,Pr),R}finally{$t=f,kf=!1}}return null}var rm=l.ReactCurrentBatchConfig;function Kr(h,f){if(Hi(h,f))return!0;if(typeof h!="object"||h===null||typeof f!="object"||f===null)return!1;var x=Object.keys(h),E=Object.keys(f);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var R=x[E];if(!ct.call(f,R)||!Hi(h[R],f[R]))return!1}return!0}function Hf(h){switch(h.tag){case 5:return ue(h.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return h=tt(h.type,!1),h;case 11:return h=tt(h.type.render,!1),h;case 1:return h=tt(h.type,!0),h;default:return""}}function Zi(h,f){if(h&&h.defaultProps){f=s({},f),h=h.defaultProps;for(var x in h)f[x]===void 0&&(f[x]=h[x]);return f}return f}var Ql=Et(null),Jo=null,ks=null,Xu=null;function zi(){Xu=ks=Jo=null}function Ko(h,f,x){ft?(_t(Ql,f._currentValue),f._currentValue=x):(_t(Ql,f._currentValue2),f._currentValue2=x)}function ql(h){var f=Ql.current;Ke(Ql),ft?h._currentValue=f:h._currentValue2=f}function Yo(h,f,x){for(;h!==null;){var E=h.alternate;if((h.childLanes&f)!==f?(h.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),h===x)break;h=h.return}}function Ja(h,f){Jo=h,Xu=ks=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&f)!==0&&(pi=!0),h.firstContext=null)}function $i(h){var f=ft?h._currentValue:h._currentValue2;if(Xu!==h)if(h={context:h,memoizedValue:f,next:null},ks===null){if(Jo===null)throw Error(o(308));ks=h,Jo.dependencies={lanes:0,firstContext:h}}else ks=ks.next=h;return f}var Br=null,Ir=!1;function Ka(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zf(h,f){h=h.updateQueue,f.updateQueue===h&&(f.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Hs(h,f){return{eventTime:h,lane:f,tag:0,payload:null,callback:null,next:null}}function So(h,f){var x=h.updateQueue;x!==null&&(x=x.shared,Xn!==null&&(h.mode&1)!==0&&(jt&2)===0?(h=x.interleaved,h===null?(f.next=f,Br===null?Br=[x]:Br.push(x)):(f.next=h.next,h.next=f),x.interleaved=f):(h=x.pending,h===null?f.next=f:(f.next=h.next,h.next=f),x.pending=f))}function Ju(h,f,x){if(f=f.updateQueue,f!==null&&(f=f.shared,(x&4194240)!==0)){var E=f.lanes;E&=h.pendingLanes,x|=E,f.lanes=x,vs(h,x)}}function Ku(h,f){var x=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var R=null,I=null;if(x=x.firstBaseUpdate,x!==null){do{var K={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};I===null?R=I=K:I=I.next=K,x=x.next}while(x!==null);I===null?R=I=f:I=I.next=f}else R=I=f;x={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:I,shared:E.shared,effects:E.effects},h.updateQueue=x;return}h=x.lastBaseUpdate,h===null?x.firstBaseUpdate=f:h.next=f,x.lastBaseUpdate=f}function Yu(h,f,x,E){var R=h.updateQueue;Ir=!1;var I=R.firstBaseUpdate,K=R.lastBaseUpdate,ae=R.shared.pending;if(ae!==null){R.shared.pending=null;var be=ae,Je=be.next;be.next=null,K===null?I=Je:K.next=Je,K=be;var mt=h.alternate;mt!==null&&(mt=mt.updateQueue,ae=mt.lastBaseUpdate,ae!==K&&(ae===null?mt.firstBaseUpdate=Je:ae.next=Je,mt.lastBaseUpdate=be))}if(I!==null){var zt=R.baseState;K=0,mt=Je=be=null,ae=I;do{var Bt=ae.lane,Qt=ae.eventTime;if((E&Bt)===Bt){mt!==null&&(mt=mt.next={eventTime:Qt,lane:0,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null});e:{var lt=h,Ci=ae;switch(Bt=f,Qt=x,Ci.tag){case 1:if(lt=Ci.payload,typeof lt=="function"){zt=lt.call(Qt,zt,Bt);break e}zt=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=Ci.payload,Bt=typeof lt=="function"?lt.call(Qt,zt,Bt):lt,Bt==null)break e;zt=s({},zt,Bt);break e;case 2:Ir=!0}}ae.callback!==null&&ae.lane!==0&&(h.flags|=64,Bt=R.effects,Bt===null?R.effects=[ae]:Bt.push(ae))}else Qt={eventTime:Qt,lane:Bt,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},mt===null?(Je=mt=Qt,be=zt):mt=mt.next=Qt,K|=Bt;if(ae=ae.next,ae===null){if(ae=R.shared.pending,ae===null)break;Bt=ae,ae=Bt.next,Bt.next=null,R.lastBaseUpdate=Bt,R.shared.pending=null}}while(!0);if(mt===null&&(be=zt),R.baseState=be,R.firstBaseUpdate=Je,R.lastBaseUpdate=mt,f=R.shared.interleaved,f!==null){R=f;do K|=R.lane,R=R.next;while(R!==f)}else I===null&&(R.shared.lanes=0);Ss|=K,h.lanes=K,h.memoizedState=zt}}function sm(h,f,x){if(h=f.effects,f.effects=null,h!==null)for(f=0;f<h.length;f++){var E=h[f],R=E.callback;if(R!==null){if(E.callback=null,E=x,typeof R!="function")throw Error(o(191,R));R.call(E)}}}var om=new n.Component().refs;function Gf(h,f,x,E){f=h.memoizedState,x=x(E,f),x=x==null?f:s({},f,x),h.memoizedState=x,h.lanes===0&&(h.updateQueue.baseState=x)}var Qu={isMounted:function(h){return(h=h._reactInternals)?U(h)===h:!1},enqueueSetState:function(h,f,x){h=h._reactInternals;var E=pn(),R=ts(h),I=Hs(E,R);I.payload=f,x!=null&&(I.callback=x),So(h,I),f=Li(h,R,E),f!==null&&Ju(f,h,R)},enqueueReplaceState:function(h,f,x){h=h._reactInternals;var E=pn(),R=ts(h),I=Hs(E,R);I.tag=1,I.payload=f,x!=null&&(I.callback=x),So(h,I),f=Li(h,R,E),f!==null&&Ju(f,h,R)},enqueueForceUpdate:function(h,f){h=h._reactInternals;var x=pn(),E=ts(h),R=Hs(x,E);R.tag=2,f!=null&&(R.callback=f),So(h,R),f=Li(h,E,x),f!==null&&Ju(f,h,E)}};function Vf(h,f,x,E,R,I,K){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,I,K):f.prototype&&f.prototype.isPureReactComponent?!Kr(x,E)||!Kr(R,I):!0}function am(h,f,x){var E=!1,R=Ft,I=f.contextType;return typeof I=="object"&&I!==null?I=$i(I):(R=cn(f)?Yt:nn.current,E=f.contextTypes,I=(E=E!=null)?xt(h,R):Ft),f=new f(x,I),h.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Qu,h.stateNode=f,f._reactInternals=h,E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=R,h.__reactInternalMemoizedMaskedChildContext=I),f}function lm(h,f,x,E){h=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,E),f.state!==h&&Qu.enqueueReplaceState(f,f.state,null)}function Wf(h,f,x,E){var R=h.stateNode;R.props=x,R.state=h.memoizedState,R.refs=om,Ka(h);var I=f.contextType;typeof I=="object"&&I!==null?R.context=$i(I):(I=cn(f)?Yt:nn.current,R.context=xt(h,I)),R.state=h.memoizedState,I=f.getDerivedStateFromProps,typeof I=="function"&&(Gf(h,f,I,x),R.state=h.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(f=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),f!==R.state&&Qu.enqueueReplaceState(R,R.state,null),Yu(h,x,R,E),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308)}var Ya=[],Mo=0,qu=null,Zu=0,Dr=[],pr=0,Qo=null,zs=1,Gs="";function qo(h,f){Ya[Mo++]=Zu,Ya[Mo++]=qu,qu=h,Zu=f}function cm(h,f,x){Dr[pr++]=zs,Dr[pr++]=Gs,Dr[pr++]=Qo,Qo=h;var E=zs;h=Gs;var R=32-sn(E)-1;E&=~(1<<R),x+=1;var I=32-sn(f)+R;if(30<I){var K=R-R%5;I=(E&(1<<K)-1).toString(32),E>>=K,R-=K,zs=1<<32-sn(f)+R|x<<R|E,Gs=I+h}else zs=1<<I|x<<R|E,Gs=h}function jf(h){h.return!==null&&(qo(h,1),cm(h,1,0))}function Xf(h){for(;h===qu;)qu=Ya[--Mo],Ya[Mo]=null,Zu=Ya[--Mo],Ya[Mo]=null;for(;h===Qo;)Qo=Dr[--pr],Dr[pr]=null,Gs=Dr[--pr],Dr[pr]=null,zs=Dr[--pr],Dr[pr]=null}var Gi=null,Ai=null,In=!1,Qa=!1,Lr=null;function Jf(h,f){var x=Ar(5,null,null,0);x.elementType="DELETED",x.stateNode=f,x.return=h,f=h.deletions,f===null?(h.deletions=[x],h.flags|=16):f.push(x)}function Kf(h,f){switch(h.tag){case 5:return f=Yn(f,h.type,h.pendingProps),f!==null?(h.stateNode=f,Gi=h,Ai=_o(f),!0):!1;case 6:return f=Wa(f,h.pendingProps),f!==null?(h.stateNode=f,Gi=h,Ai=null,!0):!1;case 13:if(f=xo(f),f!==null){var x=Qo!==null?{id:zs,overflow:Gs}:null;return h.memoizedState={dehydrated:f,treeContext:x,retryLane:1073741824},x=Ar(18,null,null,0),x.stateNode=f,x.return=h,h.child=x,Gi=h,Ai=null,!0}return!1;default:return!1}}function $u(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Eo(h){if(In){var f=Ai;if(f){var x=f;if(!Kf(h,f)){if($u(h))throw Error(o(418));f=Jr(x);var E=Gi;f&&Kf(h,f)?Jf(E,x):(h.flags=h.flags&-4097|2,In=!1,Gi=h)}}else{if($u(h))throw Error(o(418));h.flags=h.flags&-4097|2,In=!1,Gi=h}}}function um(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Gi=h}function Zl(h){if(!Ct||h!==Gi)return!1;if(!In)return um(h),In=!0,!1;if(h.tag!==3&&(h.tag!==5||V(h.type)&&!Ce(h.type,h.memoizedProps))){var f=Ai;if(f){if($u(h)){for(h=Ai;h;)h=Jr(h);throw Error(o(418))}for(;f;)Jf(h,f),f=Jr(f)}}if(um(h),h.tag===13){if(!Ct)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Ai=Du(h)}else Ai=Gi?Jr(h.stateNode):null;return!0}function qa(){Ct&&(Ai=Gi=null,Qa=In=!1)}function eh(h){Lr===null?Lr=[h]:Lr.push(h)}function Za(h,f,x){if(h=x.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var E=x.stateNode}if(!E)throw Error(o(147,h));var R=E,I=""+h;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===I?f.ref:(f=function(K){var ae=R.refs;ae===om&&(ae=R.refs={}),K===null?delete ae[I]:ae[I]=K},f._stringRef=I,f)}if(typeof h!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,h))}return h}function wo(h,f){throw h=Object.prototype.toString.call(f),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":h))}function $a(h){var f=h._init;return f(h._payload)}function hm(h){function f(_e,ce){if(h){var we=_e.deletions;we===null?(_e.deletions=[ce],_e.flags|=16):we.push(ce)}}function x(_e,ce){if(!h)return null;for(;ce!==null;)f(_e,ce),ce=ce.sibling;return null}function E(_e,ce){for(_e=new Map;ce!==null;)ce.key!==null?_e.set(ce.key,ce):_e.set(ce.index,ce),ce=ce.sibling;return _e}function R(_e,ce){return _e=no(_e,ce),_e.index=0,_e.sibling=null,_e}function I(_e,ce,we){return _e.index=we,h?(we=_e.alternate,we!==null?(we=we.index,we<ce?(_e.flags|=2,ce):we):(_e.flags|=2,ce)):(_e.flags|=1048576,ce)}function K(_e){return h&&_e.alternate===null&&(_e.flags|=2),_e}function ae(_e,ce,we,it){return ce===null||ce.tag!==6?(ce=Th(we,_e.mode,it),ce.return=_e,ce):(ce=R(ce,we),ce.return=_e,ce)}function be(_e,ce,we,it){var St=we.type;return St===p?mt(_e,ce,we.props.children,it,we.key):ce!==null&&(ce.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===b&&$a(St)===ce.type)?(it=R(ce,we.props),it.ref=Za(_e,ce,we),it.return=_e,it):(it=Ch(we.type,we.key,we.props,null,_e.mode,it),it.ref=Za(_e,ce,we),it.return=_e,it)}function Je(_e,ce,we,it){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==we.containerInfo||ce.stateNode.implementation!==we.implementation?(ce=bh(we,_e.mode,it),ce.return=_e,ce):(ce=R(ce,we.children||[]),ce.return=_e,ce)}function mt(_e,ce,we,it,St){return ce===null||ce.tag!==7?(ce=xa(we,_e.mode,it,St),ce.return=_e,ce):(ce=R(ce,we),ce.return=_e,ce)}function zt(_e,ce,we){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Th(""+ce,_e.mode,we),ce.return=_e,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case u:return we=Ch(ce.type,ce.key,ce.props,null,_e.mode,we),we.ref=Za(_e,null,ce),we.return=_e,we;case d:return ce=bh(ce,_e.mode,we),ce.return=_e,ce;case b:var it=ce._init;return zt(_e,it(ce._payload),we)}if(xe(ce)||N(ce))return ce=xa(ce,_e.mode,we,null),ce.return=_e,ce;wo(_e,ce)}return null}function Bt(_e,ce,we,it){var St=ce!==null?ce.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return St!==null?null:ae(_e,ce,""+we,it);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case u:return we.key===St?be(_e,ce,we,it):null;case d:return we.key===St?Je(_e,ce,we,it):null;case b:return St=we._init,Bt(_e,ce,St(we._payload),it)}if(xe(we)||N(we))return St!==null?null:mt(_e,ce,we,it,null);wo(_e,we)}return null}function Qt(_e,ce,we,it,St){if(typeof it=="string"&&it!==""||typeof it=="number")return _e=_e.get(we)||null,ae(ce,_e,""+it,St);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case u:return _e=_e.get(it.key===null?we:it.key)||null,be(ce,_e,it,St);case d:return _e=_e.get(it.key===null?we:it.key)||null,Je(ce,_e,it,St);case b:var Vt=it._init;return Qt(_e,ce,we,Vt(it._payload),St)}if(xe(it)||N(it))return _e=_e.get(we)||null,mt(ce,_e,it,St,null);wo(ce,it)}return null}function lt(_e,ce,we,it){for(var St=null,Vt=null,Gt=ce,fn=ce=0,qn=null;Gt!==null&&fn<we.length;fn++){Gt.index>fn?(qn=Gt,Gt=null):qn=Gt.sibling;var hn=Bt(_e,Gt,we[fn],it);if(hn===null){Gt===null&&(Gt=qn);break}h&&Gt&&hn.alternate===null&&f(_e,Gt),ce=I(hn,ce,fn),Vt===null?St=hn:Vt.sibling=hn,Vt=hn,Gt=qn}if(fn===we.length)return x(_e,Gt),In&&qo(_e,fn),St;if(Gt===null){for(;fn<we.length;fn++)Gt=zt(_e,we[fn],it),Gt!==null&&(ce=I(Gt,ce,fn),Vt===null?St=Gt:Vt.sibling=Gt,Vt=Gt);return In&&qo(_e,fn),St}for(Gt=E(_e,Gt);fn<we.length;fn++)qn=Qt(Gt,_e,fn,we[fn],it),qn!==null&&(h&&qn.alternate!==null&&Gt.delete(qn.key===null?fn:qn.key),ce=I(qn,ce,fn),Vt===null?St=qn:Vt.sibling=qn,Vt=qn);return h&&Gt.forEach(function(io){return f(_e,io)}),In&&qo(_e,fn),St}function Ci(_e,ce,we,it){var St=N(we);if(typeof St!="function")throw Error(o(150));if(we=St.call(we),we==null)throw Error(o(151));for(var Vt=St=null,Gt=ce,fn=ce=0,qn=null,hn=we.next();Gt!==null&&!hn.done;fn++,hn=we.next()){Gt.index>fn?(qn=Gt,Gt=null):qn=Gt.sibling;var io=Bt(_e,Gt,hn.value,it);if(io===null){Gt===null&&(Gt=qn);break}h&&Gt&&io.alternate===null&&f(_e,Gt),ce=I(io,ce,fn),Vt===null?St=io:Vt.sibling=io,Vt=io,Gt=qn}if(hn.done)return x(_e,Gt),In&&qo(_e,fn),St;if(Gt===null){for(;!hn.done;fn++,hn=we.next())hn=zt(_e,hn.value,it),hn!==null&&(ce=I(hn,ce,fn),Vt===null?St=hn:Vt.sibling=hn,Vt=hn);return In&&qo(_e,fn),St}for(Gt=E(_e,Gt);!hn.done;fn++,hn=we.next())hn=Qt(Gt,_e,fn,hn.value,it),hn!==null&&(h&&hn.alternate!==null&&Gt.delete(hn.key===null?fn:hn.key),ce=I(hn,ce,fn),Vt===null?St=hn:Vt.sibling=hn,Vt=hn);return h&&Gt.forEach(function(wd){return f(_e,wd)}),In&&qo(_e,fn),St}function Sr(_e,ce,we,it){if(typeof we=="object"&&we!==null&&we.type===p&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case u:e:{for(var St=we.key,Vt=ce;Vt!==null;){if(Vt.key===St){if(St=we.type,St===p){if(Vt.tag===7){x(_e,Vt.sibling),ce=R(Vt,we.props.children),ce.return=_e,_e=ce;break e}}else if(Vt.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===b&&$a(St)===Vt.type){x(_e,Vt.sibling),ce=R(Vt,we.props),ce.ref=Za(_e,Vt,we),ce.return=_e,_e=ce;break e}x(_e,Vt);break}else f(_e,Vt);Vt=Vt.sibling}we.type===p?(ce=xa(we.props.children,_e.mode,it,we.key),ce.return=_e,_e=ce):(it=Ch(we.type,we.key,we.props,null,_e.mode,it),it.ref=Za(_e,ce,we),it.return=_e,_e=it)}return K(_e);case d:e:{for(Vt=we.key;ce!==null;){if(ce.key===Vt)if(ce.tag===4&&ce.stateNode.containerInfo===we.containerInfo&&ce.stateNode.implementation===we.implementation){x(_e,ce.sibling),ce=R(ce,we.children||[]),ce.return=_e,_e=ce;break e}else{x(_e,ce);break}else f(_e,ce);ce=ce.sibling}ce=bh(we,_e.mode,it),ce.return=_e,_e=ce}return K(_e);case b:return Vt=we._init,Sr(_e,ce,Vt(we._payload),it)}if(xe(we))return lt(_e,ce,we,it);if(N(we))return Ci(_e,ce,we,it);wo(_e,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,ce!==null&&ce.tag===6?(x(_e,ce.sibling),ce=R(ce,we),ce.return=_e,_e=ce):(x(_e,ce),ce=Th(we,_e.mode,it),ce.return=_e,_e=ce),K(_e)):x(_e,ce)}return Sr}var Vs=hm(!0),fm=hm(!1),el={},er=Et(el),Zo=Et(el),$o=Et(el);function Yr(h){if(h===el)throw Error(o(174));return h}function th(h,f){_t($o,f),_t(Zo,h),_t(er,el),h=ge(f),Ke(er),_t(er,h)}function tl(){Ke(er),Ke(Zo),Ke($o)}function dm(h){var f=Yr($o.current),x=Yr(er.current);f=H(x,h.type,f),x!==f&&(_t(Zo,h),_t(er,f))}function Yf(h){Zo.current===h&&(Ke(er),Ke(Zo))}var Fn=Et(0);function nh(h){for(var f=h;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||ps(x)||Xr(x)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var mr=[];function ea(){for(var h=0;h<mr.length;h++){var f=mr[h];ft?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}mr.length=0}var $l=l.ReactCurrentDispatcher,gr=l.ReactCurrentBatchConfig,ta=0,Un=null,hi=null,fi=null,ih=!1,xs=!1,na=0,ec=0;function di(){throw Error(o(321))}function rh(h,f){if(f===null)return!1;for(var x=0;x<f.length&&x<h.length;x++)if(!Hi(h[x],f[x]))return!1;return!0}function nl(h,f,x,E,R,I){if(ta=I,Un=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,$l.current=h===null||h.memoizedState===null?td:nd,h=x(E,R),xs){I=0;do{if(xs=!1,na=0,25<=I)throw Error(o(301));I+=1,fi=hi=null,f.updateQueue=null,$l.current=id,h=x(E,R)}while(xs)}if($l.current=ol,f=hi!==null&&hi.next!==null,ta=0,fi=hi=Un=null,ih=!1,f)throw Error(o(300));return h}function Co(){var h=na!==0;return na=0,h}function Qr(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fi===null?Un.memoizedState=fi=h:fi=fi.next=h,fi}function qr(){if(hi===null){var h=Un.alternate;h=h!==null?h.memoizedState:null}else h=hi.next;var f=fi===null?Un.memoizedState:fi.next;if(f!==null)fi=f,hi=h;else{if(h===null)throw Error(o(310));hi=h,h={memoizedState:hi.memoizedState,baseState:hi.baseState,baseQueue:hi.baseQueue,queue:hi.queue,next:null},fi===null?Un.memoizedState=fi=h:fi=fi.next=h}return fi}function _s(h,f){return typeof f=="function"?f(h):f}function tc(h){var f=qr(),x=f.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=h;var E=hi,R=E.baseQueue,I=x.pending;if(I!==null){if(R!==null){var K=R.next;R.next=I.next,I.next=K}E.baseQueue=R=I,x.pending=null}if(R!==null){I=R.next,E=E.baseState;var ae=K=null,be=null,Je=I;do{var mt=Je.lane;if((ta&mt)===mt)be!==null&&(be=be.next={lane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),E=Je.hasEagerState?Je.eagerState:h(E,Je.action);else{var zt={lane:mt,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null};be===null?(ae=be=zt,K=E):be=be.next=zt,Un.lanes|=mt,Ss|=mt}Je=Je.next}while(Je!==null&&Je!==I);be===null?K=E:be.next=ae,Hi(E,f.memoizedState)||(pi=!0),f.memoizedState=E,f.baseState=K,f.baseQueue=be,x.lastRenderedState=E}if(h=x.interleaved,h!==null){R=h;do I=R.lane,Un.lanes|=I,Ss|=I,R=R.next;while(R!==h)}else R===null&&(x.lanes=0);return[f.memoizedState,x.dispatch]}function nc(h){var f=qr(),x=f.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=h;var E=x.dispatch,R=x.pending,I=f.memoizedState;if(R!==null){x.pending=null;var K=R=R.next;do I=h(I,K.action),K=K.next;while(K!==R);Hi(I,f.memoizedState)||(pi=!0),f.memoizedState=I,f.baseQueue===null&&(f.baseState=I),x.lastRenderedState=I}return[I,E]}function Qf(){}function qf(h,f){var x=Un,E=qr(),R=f(),I=!Hi(E.memoizedState,R);if(I&&(E.memoizedState=R,pi=!0),E=E.queue,il(Ws.bind(null,x,E,h),[h]),E.getSnapshot!==f||I||fi!==null&&fi.memoizedState.tag&1){if(x.flags|=2048,rc(9,$f.bind(null,x,E,R,f),void 0,null),Xn===null)throw Error(o(349));(ta&30)!==0||Zf(x,f,R)}return R}function Zf(h,f,x){h.flags|=16384,h={getSnapshot:f,value:x},f=Un.updateQueue,f===null?(f={lastEffect:null,stores:null},Un.updateQueue=f,f.stores=[h]):(x=f.stores,x===null?f.stores=[h]:x.push(h))}function $f(h,f,x,E){f.value=x,f.getSnapshot=E,sh(f)&&Li(h,1,-1)}function Ws(h,f,x){return x(function(){sh(f)&&Li(h,1,-1)})}function sh(h){var f=h.getSnapshot;h=h.value;try{var x=f();return!Hi(h,x)}catch{return!0}}function ic(h){var f=Qr();return typeof h=="function"&&(h=h()),f.memoizedState=f.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:h},f.queue=h,h=h.dispatch=Xy.bind(null,Un,h),[f.memoizedState,h]}function rc(h,f,x,E){return h={tag:h,create:f,destroy:x,deps:E,next:null},f=Un.updateQueue,f===null?(f={lastEffect:null,stores:null},Un.updateQueue=f,f.lastEffect=h.next=h):(x=f.lastEffect,x===null?f.lastEffect=h.next=h:(E=x.next,x.next=h,h.next=E,f.lastEffect=h)),h}function pm(){return qr().memoizedState}function To(h,f,x,E){var R=Qr();Un.flags|=h,R.memoizedState=rc(1|f,x,void 0,E===void 0?null:E)}function oh(h,f,x,E){var R=qr();E=E===void 0?null:E;var I=void 0;if(hi!==null){var K=hi.memoizedState;if(I=K.destroy,E!==null&&rh(E,K.deps)){R.memoizedState=rc(f,x,I,E);return}}Un.flags|=h,R.memoizedState=rc(1|f,x,I,E)}function ah(h,f){return To(8390656,8,h,f)}function il(h,f){return oh(2048,8,h,f)}function Tn(h,f){return oh(4,2,h,f)}function lh(h,f){return oh(4,4,h,f)}function sc(h,f){if(typeof f=="function")return h=h(),f(h),function(){f(null)};if(f!=null)return h=h(),f.current=h,function(){f.current=null}}function rl(h,f,x){return x=x!=null?x.concat([h]):null,oh(4,4,sc.bind(null,f,h),x)}function ch(){}function uh(h,f){var x=qr();f=f===void 0?null:f;var E=x.memoizedState;return E!==null&&f!==null&&rh(f,E[1])?E[0]:(x.memoizedState=[h,f],h)}function sl(h,f){var x=qr();f=f===void 0?null:f;var E=x.memoizedState;return E!==null&&f!==null&&rh(f,E[1])?E[0]:(h=h(),x.memoizedState=[h,f],h)}function hh(h,f){var x=$t;$t=x!==0&&4>x?x:4,h(!0);var E=gr.transition;gr.transition={};try{h(!1),f()}finally{$t=x,gr.transition=E}}function ia(){return qr().memoizedState}function mm(h,f,x){var E=ts(h);x={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null},gm(h)?ed(f,x):(oc(h,f,x),x=pn(),h=Li(h,E,x),h!==null&&ac(h,f,E))}function Xy(h,f,x){var E=ts(h),R={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null};if(gm(h))ed(f,R);else{oc(h,f,R);var I=h.alternate;if(h.lanes===0&&(I===null||I.lanes===0)&&(I=f.lastRenderedReducer,I!==null))try{var K=f.lastRenderedState,ae=I(K,x);if(R.hasEagerState=!0,R.eagerState=ae,Hi(ae,K))return}catch{}x=pn(),h=Li(h,E,x),h!==null&&ac(h,f,E)}}function gm(h){var f=h.alternate;return h===Un||f!==null&&f===Un}function ed(h,f){xs=ih=!0;var x=h.pending;x===null?f.next=f:(f.next=x.next,x.next=f),h.pending=f}function oc(h,f,x){Xn!==null&&(h.mode&1)!==0&&(jt&2)===0?(h=f.interleaved,h===null?(x.next=x,Br===null?Br=[f]:Br.push(f)):(x.next=h.next,h.next=x),f.interleaved=x):(h=f.pending,h===null?x.next=x:(x.next=h.next,h.next=x),f.pending=x)}function ac(h,f,x){if((x&4194240)!==0){var E=f.lanes;E&=h.pendingLanes,x|=E,f.lanes=x,vs(h,x)}}var ol={readContext:$i,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},td={readContext:$i,useCallback:function(h,f){return Qr().memoizedState=[h,f===void 0?null:f],h},useContext:$i,useEffect:ah,useImperativeHandle:function(h,f,x){return x=x!=null?x.concat([h]):null,To(4194308,4,sc.bind(null,f,h),x)},useLayoutEffect:function(h,f){return To(4194308,4,h,f)},useInsertionEffect:function(h,f){return To(4,2,h,f)},useMemo:function(h,f){var x=Qr();return f=f===void 0?null:f,h=h(),x.memoizedState=[h,f],h},useReducer:function(h,f,x){var E=Qr();return f=x!==void 0?x(f):f,E.memoizedState=E.baseState=f,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:f},E.queue=h,h=h.dispatch=mm.bind(null,Un,h),[E.memoizedState,h]},useRef:function(h){var f=Qr();return h={current:h},f.memoizedState=h},useState:ic,useDebugValue:ch,useDeferredValue:function(h){var f=ic(h),x=f[0],E=f[1];return ah(function(){var R=gr.transition;gr.transition={};try{E(h)}finally{gr.transition=R}},[h]),x},useTransition:function(){var h=ic(!1),f=h[0];return h=hh.bind(null,h[1]),Qr().memoizedState=h,[f,h]},useMutableSource:function(){},useSyncExternalStore:function(h,f,x){var E=Un,R=Qr();if(In){if(x===void 0)throw Error(o(407));x=x()}else{if(x=f(),Xn===null)throw Error(o(349));(ta&30)!==0||Zf(E,f,x)}R.memoizedState=x;var I={value:x,getSnapshot:f};return R.queue=I,ah(Ws.bind(null,E,I,h),[h]),E.flags|=2048,rc(9,$f.bind(null,E,I,x,f),void 0,null),x},useId:function(){var h=Qr(),f=Xn.identifierPrefix;if(In){var x=Gs,E=zs;x=(E&~(1<<32-sn(E)-1)).toString(32)+x,f=":"+f+"R"+x,x=na++,0<x&&(f+="H"+x.toString(32)),f+=":"}else x=ec++,f=":"+f+"r"+x.toString(32)+":";return h.memoizedState=f},unstable_isNewReconciler:!1},nd={readContext:$i,useCallback:uh,useContext:$i,useEffect:il,useImperativeHandle:rl,useInsertionEffect:Tn,useLayoutEffect:lh,useMemo:sl,useReducer:tc,useRef:pm,useState:function(){return tc(_s)},useDebugValue:ch,useDeferredValue:function(h){var f=tc(_s),x=f[0],E=f[1];return il(function(){var R=gr.transition;gr.transition={};try{E(h)}finally{gr.transition=R}},[h]),x},useTransition:function(){var h=tc(_s)[0],f=qr().memoizedState;return[h,f]},useMutableSource:Qf,useSyncExternalStore:qf,useId:ia,unstable_isNewReconciler:!1},id={readContext:$i,useCallback:uh,useContext:$i,useEffect:il,useImperativeHandle:rl,useInsertionEffect:Tn,useLayoutEffect:lh,useMemo:sl,useReducer:nc,useRef:pm,useState:function(){return nc(_s)},useDebugValue:ch,useDeferredValue:function(h){var f=nc(_s),x=f[0],E=f[1];return il(function(){var R=gr.transition;gr.transition={};try{E(h)}finally{gr.transition=R}},[h]),x},useTransition:function(){var h=nc(_s)[0],f=qr().memoizedState;return[h,f]},useMutableSource:Qf,useSyncExternalStore:qf,useId:ia,unstable_isNewReconciler:!1};function rd(h,f){try{var x="",E=f;do x+=Hf(E),E=E.return;while(E);var R=x}catch(I){R=`
Error generating stack: `+I.message+`
`+I.stack}return{value:h,source:f,stack:R}}function fh(h,f){try{console.error(f.value)}catch(x){setTimeout(function(){throw x})}}var Jy=typeof WeakMap=="function"?WeakMap:Map;function vm(h,f,x){x=Hs(-1,x),x.tag=3,x.payload={element:null};var E=f.value;return x.callback=function(){fl||(fl=!0,Bn=E),fh(h,f)},x}function dh(h,f,x){x=Hs(-1,x),x.tag=3;var E=h.type.getDerivedStateFromError;if(typeof E=="function"){var R=f.value;x.payload=function(){return E(R)},x.callback=function(){fh(h,f)}}var I=h.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(x.callback=function(){fh(h,f),typeof E!="function"&&(es===null?es=new Set([this]):es.add(this));var K=f.stack;this.componentDidCatch(f.value,{componentStack:K!==null?K:""})}),x}function js(h,f,x){var E=h.pingCache;if(E===null){E=h.pingCache=new Jy;var R=new Set;E.set(f,R)}else R=E.get(f),R===void 0&&(R=new Set,E.set(f,R));R.has(x)||(R.add(x),h=Sd.bind(null,h,f,x),f.then(h,h))}function sd(h){do{var f;if((f=h.tag===13)&&(f=h.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return h;h=h.return}while(h!==null);return null}function ra(h,f,x,E,R){return(h.mode&1)===0?(h===f?h.flags|=65536:(h.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(f=Hs(-1,1),f.tag=2,So(x,f))),x.lanes|=1),h):(h.flags|=65536,h.lanes=R,h)}function ri(h){h.flags|=4}function al(h,f){if(h!==null&&h.child===f.child)return!0;if((f.flags&16)!==0)return!1;for(h=f.child;h!==null;){if((h.flags&12854)!==0||(h.subtreeFlags&12854)!==0)return!1;h=h.sibling}return!0}var vr,sa,ph,mh;if(Ut)vr=function(h,f){for(var x=f.child;x!==null;){if(x.tag===5||x.tag===6)re(h,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},sa=function(){},ph=function(h,f,x,E,R){if(h=h.memoizedProps,h!==E){var I=f.stateNode,K=Yr(er.current);x=fe(I,x,h,E,R,K),(f.updateQueue=x)&&ri(f)}},mh=function(h,f,x,E){x!==E&&ri(f)};else if(tn){vr=function(h,f,x,E){for(var R=f.child;R!==null;){if(R.tag===5){var I=R.stateNode;x&&E&&(I=Kt(I,R.type,R.memoizedProps,R)),re(h,I)}else if(R.tag===6)I=R.stateNode,x&&E&&(I=Vn(I,R.memoizedProps,R)),re(h,I);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)I=R.child,I!==null&&(I.return=R),vr(h,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var bo=function(h,f,x,E){for(var R=f.child;R!==null;){if(R.tag===5){var I=R.stateNode;x&&E&&(I=Kt(I,R.type,R.memoizedProps,R)),Tt(h,I)}else if(R.tag===6)I=R.stateNode,x&&E&&(I=Vn(I,R.memoizedProps,R)),Tt(h,I);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)I=R.child,I!==null&&(I.return=R),bo(h,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};sa=function(h,f){var x=f.stateNode;if(!al(h,f)){h=x.containerInfo;var E=$e(h);bo(E,f,!1,!1),x.pendingChildren=E,ri(f),ln(h,E)}},ph=function(h,f,x,E,R){var I=h.stateNode,K=h.memoizedProps;if((h=al(h,f))&&K===E)f.stateNode=I;else{var ae=f.stateNode,be=Yr(er.current),Je=null;K!==E&&(Je=fe(ae,x,K,E,R,be)),h&&Je===null?f.stateNode=I:(I=st(I,Je,x,K,E,f,h,ae),ke(I,x,E,R,be)&&ri(f),f.stateNode=I,h?ri(f):vr(I,f,!1,!1))}},mh=function(h,f,x,E){x!==E?(h=Yr($o.current),x=Yr(er.current),f.stateNode=Ne(E,h,x,f),ri(f)):f.stateNode=h.stateNode}}else sa=function(){},ph=function(){},mh=function(){};function Xs(h,f){if(!In)switch(h.tailMode){case"hidden":f=h.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?h.tail=null:x.sibling=null;break;case"collapsed":x=h.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?f||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function jn(h){var f=h.alternate!==null&&h.alternate.child===h.child,x=0,E=0;if(f)for(var R=h.child;R!==null;)x|=R.lanes|R.childLanes,E|=R.subtreeFlags&14680064,E|=R.flags&14680064,R.return=h,R=R.sibling;else for(R=h.child;R!==null;)x|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=h,R=R.sibling;return h.subtreeFlags|=E,h.childLanes=x,f}function gh(h,f,x){var E=f.pendingProps;switch(Xf(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(f),null;case 1:return cn(f.type)&&Zt(),jn(f),null;case 3:return E=f.stateNode,tl(),Ke(rn),Ke(nn),ea(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(h===null||h.child===null)&&(Zl(f)?ri(f):h===null||h.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Lr!==null&&(_c(Lr),Lr=null))),sa(h,f),jn(f),null;case 5:Yf(f),x=Yr($o.current);var R=f.type;if(h!==null&&f.stateNode!=null)ph(h,f,R,E,x),h.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!E){if(f.stateNode===null)throw Error(o(166));return jn(f),null}if(h=Yr(er.current),Zl(f)){if(!Ct)throw Error(o(175));h=Bu(f.stateNode,f.type,f.memoizedProps,x,h,f,!Qa),f.updateQueue=h,h!==null&&ri(f)}else{var I=W(R,E,x,h,f);vr(I,f,!1,!1),f.stateNode=I,ke(I,R,E,x,h)&&ri(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return jn(f),null;case 6:if(h&&f.stateNode!=null)mh(h,f,h.memoizedProps,E);else{if(typeof E!="string"&&f.stateNode===null)throw Error(o(166));if(h=Yr($o.current),x=Yr(er.current),Zl(f)){if(!Ct)throw Error(o(176));if(h=f.stateNode,E=f.memoizedProps,(x=ms(h,E,f,!Qa))&&(R=Gi,R!==null))switch(I=(R.mode&1)!==0,R.tag){case 3:de(R.stateNode.containerInfo,h,E,I);break;case 5:Ae(R.type,R.memoizedProps,R.stateNode,h,E,I)}x&&ri(f)}else f.stateNode=Ne(E,h,x,f)}return jn(f),null;case 13:if(Ke(Fn),E=f.memoizedState,In&&Ai!==null&&(f.mode&1)!==0&&(f.flags&128)===0){for(h=Ai;h;)h=Jr(h);return qa(),f.flags|=98560,f}if(E!==null&&E.dehydrated!==null){if(E=Zl(f),h===null){if(!E)throw Error(o(318));if(!Ct)throw Error(o(344));if(h=f.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Iu(h,f)}else qa(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;return jn(f),null}return Lr!==null&&(_c(Lr),Lr=null),(f.flags&128)!==0?(f.lanes=x,f):(E=E!==null,x=!1,h===null?Zl(f):x=h.memoizedState!==null,E&&!x&&(f.child.flags|=8192,(f.mode&1)!==0&&(h===null||(Fn.current&1)!==0?Hn===0&&(Hn=3):Mh())),f.updateQueue!==null&&(f.flags|=4),jn(f),null);case 4:return tl(),sa(h,f),h===null&&Mn(f.stateNode.containerInfo),jn(f),null;case 10:return ql(f.type._context),jn(f),null;case 17:return cn(f.type)&&Zt(),jn(f),null;case 19:if(Ke(Fn),R=f.memoizedState,R===null)return jn(f),null;if(E=(f.flags&128)!==0,I=R.rendering,I===null)if(E)Xs(R,!1);else{if(Hn!==0||h!==null&&(h.flags&128)!==0)for(h=f.child;h!==null;){if(I=nh(h),I!==null){for(f.flags|=128,Xs(R,!1),h=I.updateQueue,h!==null&&(f.updateQueue=h,f.flags|=4),f.subtreeFlags=0,h=x,E=f.child;E!==null;)x=E,R=h,x.flags&=14680066,I=x.alternate,I===null?(x.childLanes=0,x.lanes=R,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=I.childLanes,x.lanes=I.lanes,x.child=I.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=I.memoizedProps,x.memoizedState=I.memoizedState,x.updateQueue=I.updateQueue,x.type=I.type,R=I.dependencies,x.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),E=E.sibling;return _t(Fn,Fn.current&1|2),f.child}h=h.sibling}R.tail!==null&&ii()>Bo&&(f.flags|=128,E=!0,Xs(R,!1),f.lanes=4194304)}else{if(!E)if(h=nh(I),h!==null){if(f.flags|=128,E=!0,h=h.updateQueue,h!==null&&(f.updateQueue=h,f.flags|=4),Xs(R,!0),R.tail===null&&R.tailMode==="hidden"&&!I.alternate&&!In)return jn(f),null}else 2*ii()-R.renderingStartTime>Bo&&x!==1073741824&&(f.flags|=128,E=!0,Xs(R,!1),f.lanes=4194304);R.isBackwards?(I.sibling=f.child,f.child=I):(h=R.last,h!==null?h.sibling=I:f.child=I,R.last=I)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=ii(),f.sibling=null,h=Fn.current,_t(Fn,E?h&1|2:h&1),f):(jn(f),null);case 22:case 23:return Ac(),E=f.memoizedState!==null,h!==null&&h.memoizedState!==null!==E&&(f.flags|=8192),E&&(f.mode&1)!==0?(Di&1073741824)!==0&&(jn(f),Ut&&f.subtreeFlags&6&&(f.flags|=8192)):jn(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var od=l.ReactCurrentOwner,pi=!1;function kn(h,f,x,E){f.child=h===null?fm(f,null,x,E):Vs(f,h.child,x,E)}function bn(h,f,x,E,R){x=x.render;var I=f.ref;return Ja(f,R),E=nl(h,f,x,E,I,R),x=Co(),h!==null&&!pi?(f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~R,tr(h,f,R)):(In&&x&&jf(f),f.flags|=1,kn(h,f,E,R),f.child)}function En(h,f,x,E,R){if(h===null){var I=x.type;return typeof I=="function"&&!wh(I)&&I.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(f.tag=15,f.type=I,Js(h,f,I,E,R)):(h=Ch(x.type,null,E,f,f.mode,R),h.ref=f.ref,h.return=f,f.child=h)}if(I=h.child,(h.lanes&R)===0){var K=I.memoizedProps;if(x=x.compare,x=x!==null?x:Kr,x(K,E)&&h.ref===f.ref)return tr(h,f,R)}return f.flags|=1,h=no(I,E),h.ref=f.ref,h.return=f,f.child=h}function Js(h,f,x,E,R){if(h!==null&&Kr(h.memoizedProps,E)&&h.ref===f.ref)if(pi=!1,(h.lanes&R)!==0)(h.flags&131072)!==0&&(pi=!0);else return f.lanes=h.lanes,tr(h,f,R);return Ks(h,f,x,E,R)}function Si(h,f,x){var E=f.pendingProps,R=E.children,I=h!==null?h.memoizedState:null;if(E.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null},_t(pa,Di),Di|=x;else if((x&1073741824)!==0)f.memoizedState={baseLanes:0,cachePool:null},E=I!==null?I.baseLanes:x,_t(pa,Di),Di|=E;else return h=I!==null?I.baseLanes|x:x,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:h,cachePool:null},f.updateQueue=null,_t(pa,Di),Di|=h,null;else I!==null?(E=I.baseLanes|x,f.memoizedState=null):E=x,_t(pa,Di),Di|=E;return kn(h,f,R,x),f.child}function Vi(h,f){var x=f.ref;(h===null&&x!==null||h!==null&&h.ref!==x)&&(f.flags|=512,f.flags|=2097152)}function Ks(h,f,x,E,R){var I=cn(x)?Yt:nn.current;return I=xt(f,I),Ja(f,R),x=nl(h,f,x,E,I,R),E=Co(),h!==null&&!pi?(f.updateQueue=h.updateQueue,f.flags&=-2053,h.lanes&=~R,tr(h,f,R)):(In&&E&&jf(f),f.flags|=1,kn(h,f,x,R),f.child)}function oa(h,f,x,E,R){if(cn(x)){var I=!0;ci(f)}else I=!1;if(Ja(f,R),f.stateNode===null)h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),am(f,x,E),Wf(f,x,E,R),E=!0;else if(h===null){var K=f.stateNode,ae=f.memoizedProps;K.props=ae;var be=K.context,Je=x.contextType;typeof Je=="object"&&Je!==null?Je=$i(Je):(Je=cn(x)?Yt:nn.current,Je=xt(f,Je));var mt=x.getDerivedStateFromProps,zt=typeof mt=="function"||typeof K.getSnapshotBeforeUpdate=="function";zt||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ae!==E||be!==Je)&&lm(f,K,E,Je),Ir=!1;var Bt=f.memoizedState;K.state=Bt,Yu(f,E,K,R),be=f.memoizedState,ae!==E||Bt!==be||rn.current||Ir?(typeof mt=="function"&&(Gf(f,x,mt,E),be=f.memoizedState),(ae=Ir||Vf(f,x,ae,E,Bt,be,Je))?(zt||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(f.flags|=4194308)):(typeof K.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=be),K.props=E,K.state=be,K.context=Je,E=ae):(typeof K.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{K=f.stateNode,zf(h,f),ae=f.memoizedProps,Je=f.type===f.elementType?ae:Zi(f.type,ae),K.props=Je,zt=f.pendingProps,Bt=K.context,be=x.contextType,typeof be=="object"&&be!==null?be=$i(be):(be=cn(x)?Yt:nn.current,be=xt(f,be));var Qt=x.getDerivedStateFromProps;(mt=typeof Qt=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ae!==zt||Bt!==be)&&lm(f,K,E,be),Ir=!1,Bt=f.memoizedState,K.state=Bt,Yu(f,E,K,R);var lt=f.memoizedState;ae!==zt||Bt!==lt||rn.current||Ir?(typeof Qt=="function"&&(Gf(f,x,Qt,E),lt=f.memoizedState),(Je=Ir||Vf(f,x,Je,E,Bt,lt,be)||!1)?(mt||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(E,lt,be),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(E,lt,be)),typeof K.componentDidUpdate=="function"&&(f.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof K.componentDidUpdate!="function"||ae===h.memoizedProps&&Bt===h.memoizedState||(f.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ae===h.memoizedProps&&Bt===h.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=lt),K.props=E,K.state=lt,K.context=be,E=Je):(typeof K.componentDidUpdate!="function"||ae===h.memoizedProps&&Bt===h.memoizedState||(f.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ae===h.memoizedProps&&Bt===h.memoizedState||(f.flags|=1024),E=!1)}return Ii(h,f,x,E,I,R)}function Ii(h,f,x,E,R,I){Vi(h,f);var K=(f.flags&128)!==0;if(!E&&!K)return R&&gs(f,x,!1),tr(h,f,I);E=f.stateNode,od.current=f;var ae=K&&typeof x.getDerivedStateFromError!="function"?null:E.render();return f.flags|=1,h!==null&&K?(f.child=Vs(f,h.child,null,I),f.child=Vs(f,null,ae,I)):kn(h,f,ae,I),f.memoizedState=E.state,R&&gs(f,x,!0),f.child}function lc(h){var f=h.stateNode;f.pendingContext?xi(h,f.pendingContext,f.pendingContext!==f.context):f.context&&xi(h,f.context,!1),th(h,f.containerInfo)}function ad(h,f,x,E,R){return qa(),eh(R),f.flags|=256,kn(h,f,x,E),f.child}var cc={dehydrated:null,treeContext:null,retryLane:0};function aa(h){return{baseLanes:h,cachePool:null}}function ld(h,f,x){var E=f.pendingProps,R=Fn.current,I=!1,K=(f.flags&128)!==0,ae;if((ae=K)||(ae=h!==null&&h.memoizedState===null?!1:(R&2)!==0),ae?(I=!0,f.flags&=-129):(h===null||h.memoizedState!==null)&&(R|=1),_t(Fn,R&1),h===null)return Eo(f),h=f.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((f.mode&1)===0?f.lanes=1:Xr(h)?f.lanes=8:f.lanes=1073741824,null):(R=E.children,h=E.fallback,I?(E=f.mode,I=f.child,R={mode:"hidden",children:R},(E&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=R):I=Ec(R,E,0,null),h=xa(h,E,x,null),I.return=f,h.return=f,I.sibling=h,f.child=I,f.child.memoizedState=aa(x),f.memoizedState=cc,h):Zr(f,R));if(R=h.memoizedState,R!==null){if(ae=R.dehydrated,ae!==null){if(K)return f.flags&256?(f.flags&=-257,hc(h,f,x,Error(o(422)))):f.memoizedState!==null?(f.child=h.child,f.flags|=128,null):(I=E.fallback,R=f.mode,E=Ec({mode:"visible",children:E.children},R,0,null),I=xa(I,R,x,null),I.flags|=2,E.return=f,I.return=f,E.sibling=I,f.child=E,(f.mode&1)!==0&&Vs(f,h.child,null,x),f.child.memoizedState=aa(x),f.memoizedState=cc,I);if((f.mode&1)===0)f=hc(h,f,x,null);else if(Xr(ae))f=hc(h,f,x,Error(o(419)));else if(E=(x&h.childLanes)!==0,pi||E){if(E=Xn,E!==null){switch(x&-x){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}E=(I&(E.suspendedLanes|x))!==0?0:I,E!==0&&E!==R.retryLane&&(R.retryLane=E,Li(h,E,-1))}Mh(),f=hc(h,f,x,Error(o(421)))}else ps(ae)?(f.flags|=128,f.child=h.child,f=Sm.bind(null,h),Vo(ae,f),f=null):(x=R.treeContext,Ct&&(Ai=ja(ae),Gi=f,In=!0,Lr=null,Qa=!1,x!==null&&(Dr[pr++]=zs,Dr[pr++]=Gs,Dr[pr++]=Qo,zs=x.id,Gs=x.overflow,Qo=f)),f=Zr(f,f.pendingProps.children),f.flags|=4096);return f}return I?(E=vh(h,f,E.children,E.fallback,x),I=f.child,R=h.child.memoizedState,I.memoizedState=R===null?aa(x):{baseLanes:R.baseLanes|x,cachePool:null},I.childLanes=h.childLanes&~x,f.memoizedState=cc,E):(x=uc(h,f,E.children,x),f.memoizedState=null,x)}return I?(E=vh(h,f,E.children,E.fallback,x),I=f.child,R=h.child.memoizedState,I.memoizedState=R===null?aa(x):{baseLanes:R.baseLanes|x,cachePool:null},I.childLanes=h.childLanes&~x,f.memoizedState=cc,E):(x=uc(h,f,E.children,x),f.memoizedState=null,x)}function Zr(h,f){return f=Ec({mode:"visible",children:f},h.mode,0,null),f.return=h,h.child=f}function uc(h,f,x,E){var R=h.child;return h=R.sibling,x=no(R,{mode:"visible",children:x}),(f.mode&1)===0&&(x.lanes=E),x.return=f,x.sibling=null,h!==null&&(E=f.deletions,E===null?(f.deletions=[h],f.flags|=16):E.push(h)),f.child=x}function vh(h,f,x,E,R){var I=f.mode;h=h.child;var K=h.sibling,ae={mode:"hidden",children:x};return(I&1)===0&&f.child!==h?(x=f.child,x.childLanes=0,x.pendingProps=ae,f.deletions=null):(x=no(h,ae),x.subtreeFlags=h.subtreeFlags&14680064),K!==null?E=no(K,E):(E=xa(E,I,R,null),E.flags|=2),E.return=f,x.return=f,x.sibling=E,f.child=x,E}function hc(h,f,x,E){return E!==null&&eh(E),Vs(f,h.child,null,x),h=Zr(f,f.pendingProps.children),h.flags|=2,f.memoizedState=null,h}function ym(h,f,x){h.lanes|=f;var E=h.alternate;E!==null&&(E.lanes|=f),Yo(h.return,f,x)}function As(h,f,x,E,R){var I=h.memoizedState;I===null?h.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:R}:(I.isBackwards=f,I.rendering=null,I.renderingStartTime=0,I.last=E,I.tail=x,I.tailMode=R)}function la(h,f,x){var E=f.pendingProps,R=E.revealOrder,I=E.tail;if(kn(h,f,E.children,x),E=Fn.current,(E&2)!==0)E=E&1|2,f.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=f.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&ym(h,x,f);else if(h.tag===19)ym(h,x,f);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break e;for(;h.sibling===null;){if(h.return===null||h.return===f)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}if(_t(Fn,E),(f.mode&1)===0)f.memoizedState=null;else switch(R){case"forwards":for(x=f.child,R=null;x!==null;)h=x.alternate,h!==null&&nh(h)===null&&(R=x),x=x.sibling;x=R,x===null?(R=f.child,f.child=null):(R=x.sibling,x.sibling=null),As(f,!1,R,x,I);break;case"backwards":for(x=null,R=f.child,f.child=null;R!==null;){if(h=R.alternate,h!==null&&nh(h)===null){f.child=R;break}h=R.sibling,R.sibling=x,x=R,R=h}As(f,!0,x,null,I);break;case"together":As(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function tr(h,f,x){if(h!==null&&(f.dependencies=h.dependencies),Ss|=f.lanes,(x&f.childLanes)===0)return null;if(h!==null&&f.child!==h.child)throw Error(o(153));if(f.child!==null){for(h=f.child,x=no(h,h.pendingProps),f.child=x,x.return=f;h.sibling!==null;)h=h.sibling,x=x.sibling=no(h,h.pendingProps),x.return=f;x.sibling=null}return f.child}function yh(h,f,x){switch(f.tag){case 3:lc(f),qa();break;case 5:dm(f);break;case 1:cn(f.type)&&ci(f);break;case 4:th(f,f.stateNode.containerInfo);break;case 10:Ko(f,f.type._context,f.memoizedProps.value);break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(_t(Fn,Fn.current&1),f.flags|=128,null):(x&f.child.childLanes)!==0?ld(h,f,x):(_t(Fn,Fn.current&1),h=tr(h,f,x),h!==null?h.sibling:null);_t(Fn,Fn.current&1);break;case 19:if(E=(x&f.childLanes)!==0,(h.flags&128)!==0){if(E)return la(h,f,x);f.flags|=128}var R=f.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),_t(Fn,Fn.current),E)break;return null;case 22:case 23:return f.lanes=0,Si(h,f,x)}return tr(h,f,x)}function xh(h,f){switch(Xf(f),f.tag){case 1:return cn(f.type)&&Zt(),h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 3:return tl(),Ke(rn),Ke(nn),ea(),h=f.flags,(h&65536)!==0&&(h&128)===0?(f.flags=h&-65537|128,f):null;case 5:return Yf(f),null;case 13:if(Ke(Fn),h=f.memoizedState,h!==null&&h.dehydrated!==null){if(f.alternate===null)throw Error(o(340));qa()}return h=f.flags,h&65536?(f.flags=h&-65537|128,f):null;case 19:return Ke(Fn),null;case 4:return tl(),null;case 10:return ql(f.type._context),null;case 22:case 23:return Ac(),null;case 24:return null;default:return null}}var Wi=!1,mi=!1,ca=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Nr(h,f){var x=h.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(E){Xi(h,f,E)}else x.current=null}function Ys(h,f,x){try{x()}catch(E){Xi(h,f,E)}}var cd=!1;function ud(h,f){for(q(h.containerInfo),Ze=f;Ze!==null;)if(h=Ze,f=h.child,(h.subtreeFlags&1028)!==0&&f!==null)f.return=h,Ze=f;else for(;Ze!==null;){h=Ze;try{var x=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,R=x.memoizedState,I=h.stateNode,K=I.getSnapshotBeforeUpdate(h.elementType===h.type?E:Zi(h.type,E),R);I.__reactInternalSnapshotBeforeUpdate=K}break;case 3:Ut&&De(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ae){Xi(h,h.return,ae)}if(f=h.sibling,f!==null){f.return=h.return,Ze=f;break}Ze=h.return}return x=cd,cd=!1,x}function Qs(h,f,x){var E=f.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var R=E=E.next;do{if((R.tag&h)===h){var I=R.destroy;R.destroy=void 0,I!==void 0&&Ys(f,x,I)}R=R.next}while(R!==E)}}function Mi(h,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&h)===h){var E=x.create;x.destroy=E()}x=x.next}while(x!==f)}}function ji(h){var f=h.ref;if(f!==null){var x=h.stateNode;h.tag===5?h=me(x):h=x,typeof f=="function"?f(h):f.current=h}}function Pn(h,f,x){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(Jl,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(h=f.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var E=h=h.next;do{var R=E,I=R.destroy;R=R.tag,I!==void 0&&((R&2)!==0||(R&4)!==0)&&Ys(f,x,I),E=E.next}while(E!==h)}break;case 1:if(Nr(f,x),h=f.stateNode,typeof h.componentWillUnmount=="function")try{h.props=f.memoizedProps,h.state=f.memoizedState,h.componentWillUnmount()}catch(K){Xi(f,x,K)}break;case 5:Nr(f,x);break;case 4:Ut?dd(h,f,x):tn&&tn&&(f=f.stateNode.containerInfo,x=$e(f),Cn(f,x))}}function Fr(h,f,x){for(var E=f;;)if(Pn(h,E,x),E.child===null||Ut&&E.tag===4){if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function hd(h){var f=h.alternate;f!==null&&(h.alternate=null,hd(f)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(f=h.stateNode,f!==null&&Oe(f)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function fd(h){return h.tag===5||h.tag===3||h.tag===4}function _h(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||fd(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Ah(h){if(Ut){e:{for(var f=h.return;f!==null;){if(fd(f))break e;f=f.return}throw Error(o(160))}var x=f;switch(x.tag){case 5:f=x.stateNode,x.flags&32&&(Pe(f),x.flags&=-33),x=_h(h),ll(h,x,f);break;case 3:case 4:f=x.stateNode.containerInfo,x=_h(h),Sh(h,x,f);break;default:throw Error(o(161))}}}function Sh(h,f,x){var E=h.tag;if(E===5||E===6)h=h.stateNode,f?Rt(x,h,f):ot(x,h);else if(E!==4&&(h=h.child,h!==null))for(Sh(h,f,x),h=h.sibling;h!==null;)Sh(h,f,x),h=h.sibling}function ll(h,f,x){var E=h.tag;if(E===5||E===6)h=h.stateNode,f?bt(x,h,f):Xe(x,h);else if(E!==4&&(h=h.child,h!==null))for(ll(h,f,x),h=h.sibling;h!==null;)ll(h,f,x),h=h.sibling}function dd(h,f,x){for(var E=f,R=!1,I,K;;){if(!R){R=E.return;e:for(;;){if(R===null)throw Error(o(160));switch(I=R.stateNode,R.tag){case 5:K=!1;break e;case 3:I=I.containerInfo,K=!0;break e;case 4:I=I.containerInfo,K=!0;break e}R=R.return}R=!0}if(E.tag===5||E.tag===6)Fr(h,E,x),K?te(I,E.stateNode):at(I,E.stateNode);else if(E.tag===18)K?Uu(I,E.stateNode):Fu(I,E.stateNode);else if(E.tag===4){if(E.child!==null){I=E.stateNode.containerInfo,K=!0,E.child.return=E,E=E.child;continue}}else if(Pn(h,E,x),E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return,E.tag===4&&(R=!1)}E.sibling.return=E.return,E=E.sibling}}function Ro(h,f){if(Ut){switch(f.tag){case 0:case 11:case 14:case 15:Qs(3,f,f.return),Mi(3,f),Qs(5,f,f.return);return;case 1:return;case 5:var x=f.stateNode;if(x!=null){var E=f.memoizedProps;h=h!==null?h.memoizedProps:E;var R=f.type,I=f.updateQueue;f.updateQueue=null,I!==null&&ht(x,I,R,h,E,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));x=f.memoizedProps,Ht(f.stateNode,h!==null?h.memoizedProps:x,x);return;case 3:Ct&&h!==null&&h.memoizedState.isDehydrated&&Lu(f.stateNode.containerInfo);return;case 12:return;case 13:cl(f);return;case 19:cl(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:Qs(3,f,f.return),Mi(3,f),Qs(5,f,f.return);return;case 12:return;case 13:cl(f);return;case 19:cl(f);return;case 3:Ct&&h!==null&&h.memoizedState.isDehydrated&&Lu(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(tn){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Cn(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function cl(h){var f=h.updateQueue;if(f!==null){h.updateQueue=null;var x=h.stateNode;x===null&&(x=h.stateNode=new ca),f.forEach(function(E){var R=Mm.bind(null,h,E);x.has(E)||(x.add(E),E.then(R,R))})}}function Ky(h,f){for(Ze=f;Ze!==null;){f=Ze;var x=f.deletions;if(x!==null)for(var E=0;E<x.length;E++){var R=x[E];try{var I=h;Ut?dd(I,R,f):Fr(I,R,f);var K=R.alternate;K!==null&&(K.return=null),R.return=null}catch(St){Xi(R,f,St)}}if(x=f.child,(f.subtreeFlags&12854)!==0&&x!==null)x.return=f,Ze=x;else for(;Ze!==null;){f=Ze;try{var ae=f.flags;if(ae&32&&Ut&&Pe(f.stateNode),ae&512){var be=f.alternate;if(be!==null){var Je=be.ref;Je!==null&&(typeof Je=="function"?Je(null):Je.current=null)}}if(ae&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var mt=f.alternate;(mt===null||mt.memoizedState===null)&&(yc=ii())}break;case 22:var zt=f.memoizedState!==null,Bt=f.alternate,Qt=Bt!==null&&Bt.memoizedState!==null;if(x=f,Ut){e:if(E=x,R=zt,I=null,Ut)for(var lt=E;;){if(lt.tag===5){if(I===null){I=lt;var Ci=lt.stateNode;R?et(Ci):We(lt.stateNode,lt.memoizedProps)}}else if(lt.tag===6){if(I===null){var Sr=lt.stateNode;R?ee(Sr):Me(Sr,lt.memoizedProps)}}else if((lt.tag!==22&&lt.tag!==23||lt.memoizedState===null||lt===E)&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===E)break;for(;lt.sibling===null;){if(lt.return===null||lt.return===E)break e;I===lt&&(I=null),lt=lt.return}I===lt&&(I=null),lt.sibling.return=lt.return,lt=lt.sibling}}if(zt&&!Qt&&(x.mode&1)!==0){Ze=x;for(var _e=x.child;_e!==null;){for(x=Ze=_e;Ze!==null;){E=Ze;var ce=E.child;switch(E.tag){case 0:case 11:case 14:case 15:Qs(4,E,E.return);break;case 1:Nr(E,E.return);var we=E.stateNode;if(typeof we.componentWillUnmount=="function"){var it=E.return;try{we.props=E.memoizedProps,we.state=E.memoizedState,we.componentWillUnmount()}catch(St){Xi(E,it,St)}}break;case 5:Nr(E,E.return);break;case 22:if(E.memoizedState!==null){md(x);continue}}ce!==null?(ce.return=E,Ze=ce):md(x)}_e=_e.sibling}}}switch(ae&4102){case 2:Ah(f),f.flags&=-3;break;case 6:Ah(f),f.flags&=-3,Ro(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Ro(f.alternate,f);break;case 4:Ro(f.alternate,f)}}catch(St){Xi(f,f.return,St)}if(x=f.sibling,x!==null){x.return=f.return,Ze=x;break}Ze=f.return}}}function fc(h,f,x){Ze=h,dc(h)}function dc(h,f,x){for(var E=(h.mode&1)!==0;Ze!==null;){var R=Ze,I=R.child;if(R.tag===22&&E){var K=R.memoizedState!==null||Wi;if(!K){var ae=R.alternate,be=ae!==null&&ae.memoizedState!==null||mi;ae=Wi;var Je=mi;if(Wi=K,(mi=be)&&!Je)for(Ze=R;Ze!==null;)K=Ze,be=K.child,K.tag===22&&K.memoizedState!==null?ua(R):be!==null?(be.return=K,Ze=be):ua(R);for(;I!==null;)Ze=I,dc(I),I=I.sibling;Ze=R,Wi=ae,mi=Je}pd(h)}else(R.subtreeFlags&8772)!==0&&I!==null?(I.return=R,Ze=I):pd(h)}}function pd(h){for(;Ze!==null;){var f=Ze;if((f.flags&8772)!==0){var x=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:mi||Mi(5,f);break;case 1:var E=f.stateNode;if(f.flags&4&&!mi)if(x===null)E.componentDidMount();else{var R=f.elementType===f.type?x.memoizedProps:Zi(f.type,x.memoizedProps);E.componentDidUpdate(R,x.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var I=f.updateQueue;I!==null&&sm(f,I,E);break;case 3:var K=f.updateQueue;if(K!==null){if(x=null,f.child!==null)switch(f.child.tag){case 5:x=me(f.child.stateNode);break;case 1:x=f.child.stateNode}sm(f,K,x)}break;case 5:var ae=f.stateNode;x===null&&f.flags&4&&Ge(ae,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Ct&&f.memoizedState===null){var be=f.alternate;if(be!==null){var Je=be.memoizedState;if(Je!==null){var mt=Je.dehydrated;mt!==null&&Nu(mt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}mi||f.flags&512&&ji(f)}catch(zt){Xi(f,f.return,zt)}}if(f===h){Ze=null;break}if(x=f.sibling,x!==null){x.return=f.return,Ze=x;break}Ze=f.return}}function md(h){for(;Ze!==null;){var f=Ze;if(f===h){Ze=null;break}var x=f.sibling;if(x!==null){x.return=f.return,Ze=x;break}Ze=f.return}}function ua(h){for(;Ze!==null;){var f=Ze;try{switch(f.tag){case 0:case 11:case 15:var x=f.return;try{Mi(4,f)}catch(be){Xi(f,x,be)}break;case 1:var E=f.stateNode;if(typeof E.componentDidMount=="function"){var R=f.return;try{E.componentDidMount()}catch(be){Xi(f,R,be)}}var I=f.return;try{ji(f)}catch(be){Xi(f,I,be)}break;case 5:var K=f.return;try{ji(f)}catch(be){Xi(f,K,be)}}}catch(be){Xi(f,f.return,be)}if(f===h){Ze=null;break}var ae=f.sibling;if(ae!==null){ae.return=f.return,Ze=ae;break}Ze=f.return}}var pc=0,ha=1,fa=2,qs=3,ul=4;if(typeof Symbol=="function"&&Symbol.for){var da=Symbol.for;pc=da("selector.component"),ha=da("selector.has_pseudo_class"),fa=da("selector.role"),qs=da("selector.test_id"),ul=da("selector.text")}function mc(h){var f=$(h);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(h=X(h),h===null)throw Error(o(362));return h.stateNode.current}function gc(h,f){switch(f.$$typeof){case pc:if(h.type===f.value)return!0;break;case ha:e:{f=f.value,h=[h,0];for(var x=0;x<h.length;){var E=h[x++],R=h[x++],I=f[R];if(E.tag!==5||!Ee(E)){for(;I!=null&&gc(E,I);)R++,I=f[R];if(R===f.length){f=!0;break e}else for(E=E.child;E!==null;)h.push(E,R),E=E.sibling}}f=!1}return f;case fa:if(h.tag===5&&Ie(h.stateNode,f.value))return!0;break;case ul:if((h.tag===5||h.tag===6)&&(h=le(h),h!==null&&0<=h.indexOf(f.value)))return!0;break;case qs:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Po(h){switch(h.$$typeof){case pc:return"<"+(z(h.value)||"Unknown")+">";case ha:return":has("+(Po(h)||"")+")";case fa:return'[role="'+h.value+'"]';case ul:return'"'+h.value+'"';case qs:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function yr(h,f){var x=[];h=[h,0];for(var E=0;E<h.length;){var R=h[E++],I=h[E++],K=f[I];if(R.tag!==5||!Ee(R)){for(;K!=null&&gc(R,K);)I++,K=f[I];if(I===f.length)x.push(R);else for(R=R.child;R!==null;)h.push(R,I),R=R.sibling}}return x}function Zs(h,f){if(!Re)throw Error(o(363));h=mc(h),h=yr(h,f),f=[],h=Array.from(h);for(var x=0;x<h.length;){var E=h[x++];if(E.tag===5)Ee(E)||f.push(E.stateNode);else for(E=E.child;E!==null;)h.push(E),E=E.sibling}return f}var gd=Math.ceil,vc=l.ReactCurrentDispatcher,$r=l.ReactCurrentOwner,An=l.ReactCurrentBatchConfig,jt=0,Xn=null,Sn=null,Dn=0,Di=0,pa=Et(0),Hn=0,hl=null,Ss=0,xr=0,ma=0,$s=null,Qn=null,yc=0,Bo=1/0;function ga(){Bo=ii()+500}var fl=!1,Bn=null,es=null,dl=!1,Ms=null,va=0,ya=0,eo=null,Rn=-1,zn=0;function pn(){return(jt&6)!==0?ii():Rn!==-1?Rn:Rn=ii()}function ts(h){return(h.mode&1)===0?1:(jt&2)!==0&&Dn!==0?Dn&-Dn:rm.transition!==null?(zn===0&&(h=Wn,Wn<<=1,(Wn&4194240)===0&&(Wn=64),zn=h),zn):(h=$t,h!==0?h:Fe())}function Li(h,f,x){if(50<ya)throw ya=0,eo=null,Error(o(185));var E=Io(h,f);return E===null?null:(Wo(E,f,x),((jt&2)===0||E!==Xn)&&(E===Xn&&((jt&2)===0&&(xr|=f),Hn===4&&wi(E,Dn)),nr(E,x),f===1&&jt===0&&(h.mode&1)===0&&(ga(),Vu&&Pr())),E)}function Io(h,f){h.lanes|=f;var x=h.alternate;for(x!==null&&(x.lanes|=f),x=h,h=h.return;h!==null;)h.childLanes|=f,x=h.alternate,x!==null&&(x.childLanes|=f),x=h,h=h.return;return x.tag===3?x.stateNode:null}function nr(h,f){var x=h.callbackNode;im(h,f);var E=Xl(h,h===Xn?Dn:0);if(E===0)x!==null&&Xa(x),h.callbackNode=null,h.callbackPriority=0;else if(f=E&-E,h.callbackPriority!==f){if(x!=null&&Xa(x),f===1)h.tag===0?ju(_r.bind(null,h)):Wu(_r.bind(null,h)),Be?Qe(function(){jt===0&&Pr()}):jo(Xo,Pr),x=null;else{switch(Os(E)){case 1:x=Xo;break;case 4:x=jy;break;case 16:x=zu;break;case 536870912:x=Gu;break;default:x=zu}x=Eh(x,Ei.bind(null,h))}h.callbackPriority=f,h.callbackNode=x}}function Ei(h,f){if(Rn=-1,zn=0,(jt&6)!==0)throw Error(o(327));var x=h.callbackNode;if(Es()&&h.callbackNode!==x)return null;var E=Xl(h,h===Xn?Dn:0);if(E===0)return null;if((E&30)!==0||(E&h.expiredLanes)!==0||f)f=Sc(h,E);else{f=E;var R=jt;jt|=2;var I=xd();(Xn!==h||Dn!==f)&&(ga(),to(h,f));do try{_m();break}catch(ae){yd(h,ae)}while(!0);zi(),vc.current=I,jt=R,Sn!==null?f=0:(Xn=null,Dn=0,f=Hn)}if(f!==0){if(f===2&&(R=Ou(h),R!==0&&(E=R,f=xc(h,R))),f===1)throw x=hl,to(h,0),wi(h,E),nr(h,ii()),x;if(f===6)wi(h,E);else{if(R=h.current.alternate,(E&30)===0&&!vd(R)&&(f=Sc(h,E),f===2&&(I=Ou(h),I!==0&&(E=I,f=xc(h,I))),f===1))throw x=hl,to(h,0),wi(h,E),nr(h,ii()),x;switch(h.finishedWork=R,h.finishedLanes=E,f){case 0:case 1:throw Error(o(345));case 2:ns(h,Qn);break;case 3:if(wi(h,E),(E&130023424)===E&&(f=yc+500-ii(),10<f)){if(Xl(h,0)!==0)break;if(R=h.suspendedLanes,(R&E)!==E){pn(),h.pingedLanes|=h.suspendedLanes&R;break}h.timeoutHandle=Ue(ns.bind(null,h,Qn),f);break}ns(h,Qn);break;case 4:if(wi(h,E),(E&4194240)===E)break;for(f=h.eventTimes,R=-1;0<E;){var K=31-sn(E);I=1<<K,K=f[K],K>R&&(R=K),E&=~I}if(E=R,E=ii()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*gd(E/1960))-E,10<E){h.timeoutHandle=Ue(ns.bind(null,h,Qn),E);break}ns(h,Qn);break;case 5:ns(h,Qn);break;default:throw Error(o(329))}}}return nr(h,ii()),h.callbackNode===x?Ei.bind(null,h):null}function xc(h,f){var x=$s;return h.current.memoizedState.isDehydrated&&(to(h,f).flags|=256),h=Sc(h,f),h!==2&&(f=Qn,Qn=x,f!==null&&_c(f)),h}function _c(h){Qn===null?Qn=h:Qn.push.apply(Qn,h)}function vd(h){for(var f=h;;){if(f.flags&16384){var x=f.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var E=0;E<x.length;E++){var R=x[E],I=R.getSnapshot;R=R.value;try{if(!Hi(I(),R))return!1}catch{return!1}}}if(x=f.child,f.subtreeFlags&16384&&x!==null)x.return=f,f=x;else{if(f===h)break;for(;f.sibling===null;){if(f.return===null||f.return===h)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function wi(h,f){for(f&=~ma,f&=~xr,h.suspendedLanes|=f,h.pingedLanes&=~f,h=h.expirationTimes;0<f;){var x=31-sn(f),E=1<<x;h[x]=-1,f&=~E}}function _r(h){if((jt&6)!==0)throw Error(o(327));Es();var f=Xl(h,0);if((f&1)===0)return nr(h,ii()),null;var x=Sc(h,f);if(h.tag!==0&&x===2){var E=Ou(h);E!==0&&(f=E,x=xc(h,E))}if(x===1)throw x=hl,to(h,0),wi(h,f),nr(h,ii()),x;if(x===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=f,ns(h,Qn),nr(h,ii()),null}function pl(h){Ms!==null&&Ms.tag===0&&(jt&6)===0&&Es();var f=jt;jt|=1;var x=An.transition,E=$t;try{if(An.transition=null,$t=1,h)return h()}finally{$t=E,An.transition=x,jt=f,(jt&6)===0&&Pr()}}function Ac(){Di=pa.current,Ke(pa)}function to(h,f){h.finishedWork=null,h.finishedLanes=0;var x=h.timeoutHandle;if(x!==vt&&(h.timeoutHandle=vt,qe(x)),Sn!==null)for(x=Sn.return;x!==null;){var E=x;switch(Xf(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Zt();break;case 3:tl(),Ke(rn),Ke(nn),ea();break;case 5:Yf(E);break;case 4:tl();break;case 13:Ke(Fn);break;case 19:Ke(Fn);break;case 10:ql(E.type._context);break;case 22:case 23:Ac()}x=x.return}if(Xn=h,Sn=h=no(h.current,null),Dn=Di=f,Hn=0,hl=null,ma=xr=Ss=0,Qn=$s=null,Br!==null){for(f=0;f<Br.length;f++)if(x=Br[f],E=x.interleaved,E!==null){x.interleaved=null;var R=E.next,I=x.pending;if(I!==null){var K=I.next;I.next=R,E.next=K}x.pending=E}Br=null}return h}function yd(h,f){do{var x=Sn;try{if(zi(),$l.current=ol,ih){for(var E=Un.memoizedState;E!==null;){var R=E.queue;R!==null&&(R.pending=null),E=E.next}ih=!1}if(ta=0,fi=hi=Un=null,xs=!1,na=0,$r.current=null,x===null||x.return===null){Hn=1,hl=f,Sn=null;break}e:{var I=h,K=x.return,ae=x,be=f;if(f=Dn,ae.flags|=32768,be!==null&&typeof be=="object"&&typeof be.then=="function"){var Je=be,mt=ae,zt=mt.tag;if((mt.mode&1)===0&&(zt===0||zt===11||zt===15)){var Bt=mt.alternate;Bt?(mt.updateQueue=Bt.updateQueue,mt.memoizedState=Bt.memoizedState,mt.lanes=Bt.lanes):(mt.updateQueue=null,mt.memoizedState=null)}var Qt=sd(K);if(Qt!==null){Qt.flags&=-257,ra(Qt,K,ae,I,f),Qt.mode&1&&js(I,Je,f),f=Qt,be=Je;var lt=f.updateQueue;if(lt===null){var Ci=new Set;Ci.add(be),f.updateQueue=Ci}else lt.add(be);break e}else{if((f&1)===0){js(I,Je,f),Mh();break e}be=Error(o(426))}}else if(In&&ae.mode&1){var Sr=sd(K);if(Sr!==null){(Sr.flags&65536)===0&&(Sr.flags|=256),ra(Sr,K,ae,I,f),eh(be);break e}}I=be,Hn!==4&&(Hn=2),$s===null?$s=[I]:$s.push(I),be=rd(be,ae),ae=K;do{switch(ae.tag){case 3:ae.flags|=65536,f&=-f,ae.lanes|=f;var _e=vm(ae,be,f);Ku(ae,_e);break e;case 1:I=be;var ce=ae.type,we=ae.stateNode;if((ae.flags&128)===0&&(typeof ce.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(es===null||!es.has(we)))){ae.flags|=65536,f&=-f,ae.lanes|=f;var it=dh(ae,I,f);Ku(ae,it);break e}}ae=ae.return}while(ae!==null)}Ad(x)}catch(St){f=St,Sn===x&&x!==null&&(Sn=x=x.return);continue}break}while(!0)}function xd(){var h=vc.current;return vc.current=ol,h===null?ol:h}function Mh(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),Xn===null||(Ss&268435455)===0&&(xr&268435455)===0||wi(Xn,Dn)}function Sc(h,f){var x=jt;jt|=2;var E=xd();Xn===h&&Dn===f||to(h,f);do try{xm();break}catch(R){yd(h,R)}while(!0);if(zi(),jt=x,vc.current=E,Sn!==null)throw Error(o(261));return Xn=null,Dn=0,Hn}function xm(){for(;Sn!==null;)_d(Sn)}function _m(){for(;Sn!==null&&!Ao();)_d(Sn)}function _d(h){var f=Ed(h.alternate,h,Di);h.memoizedProps=h.pendingProps,f===null?Ad(h):Sn=f,$r.current=null}function Ad(h){var f=h;do{var x=f.alternate;if(h=f.return,(f.flags&32768)===0){if(x=gh(x,f,Di),x!==null){Sn=x;return}}else{if(x=xh(x,f),x!==null){x.flags&=32767,Sn=x;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Hn=6,Sn=null;return}}if(f=f.sibling,f!==null){Sn=f;return}Sn=f=h}while(f!==null);Hn===0&&(Hn=5)}function ns(h,f){var x=$t,E=An.transition;try{An.transition=null,$t=1,Am(h,f,x)}finally{An.transition=E,$t=x}return null}function Am(h,f,x){do Es();while(Ms!==null);if((jt&6)!==0)throw Error(o(327));var E=h.finishedWork,R=h.finishedLanes;if(E===null)return null;if(h.finishedWork=null,h.finishedLanes=0,E===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var I=E.lanes|E.childLanes;if(Hu(h,I),h===Xn&&(Sn=Xn=null,Dn=0),(E.subtreeFlags&2064)===0&&(E.flags&2064)===0||dl||(dl=!0,Eh(zu,function(){return Es(),null})),I=(E.flags&15990)!==0,(E.subtreeFlags&15990)!==0||I){I=An.transition,An.transition=null;var K=$t;$t=1;var ae=jt;jt|=4,$r.current=null,ud(h,E),Ky(h,E),Q(h.containerInfo),h.current=E,fc(E),Wy(),jt=ae,$t=K,An.transition=I}else h.current=E;if(dl&&(dl=!1,Ms=h,va=R),I=h.pendingLanes,I===0&&(es=null),Kl(E.stateNode),nr(h,ii()),f!==null)for(x=h.onRecoverableError,E=0;E<f.length;E++)x(f[E]);if(fl)throw fl=!1,h=Bn,Bn=null,h;return(va&1)!==0&&h.tag!==0&&Es(),I=h.pendingLanes,(I&1)!==0?h===eo?ya++:(ya=0,eo=h):ya=0,Pr(),null}function Es(){if(Ms!==null){var h=Os(va),f=An.transition,x=$t;try{if(An.transition=null,$t=16>h?16:h,Ms===null)var E=!1;else{if(h=Ms,Ms=null,va=0,(jt&6)!==0)throw Error(o(331));var R=jt;for(jt|=4,Ze=h.current;Ze!==null;){var I=Ze,K=I.child;if((Ze.flags&16)!==0){var ae=I.deletions;if(ae!==null){for(var be=0;be<ae.length;be++){var Je=ae[be];for(Ze=Je;Ze!==null;){var mt=Ze;switch(mt.tag){case 0:case 11:case 15:Qs(8,mt,I)}var zt=mt.child;if(zt!==null)zt.return=mt,Ze=zt;else for(;Ze!==null;){mt=Ze;var Bt=mt.sibling,Qt=mt.return;if(hd(mt),mt===Je){Ze=null;break}if(Bt!==null){Bt.return=Qt,Ze=Bt;break}Ze=Qt}}}var lt=I.alternate;if(lt!==null){var Ci=lt.child;if(Ci!==null){lt.child=null;do{var Sr=Ci.sibling;Ci.sibling=null,Ci=Sr}while(Ci!==null)}}Ze=I}}if((I.subtreeFlags&2064)!==0&&K!==null)K.return=I,Ze=K;else e:for(;Ze!==null;){if(I=Ze,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:Qs(9,I,I.return)}var _e=I.sibling;if(_e!==null){_e.return=I.return,Ze=_e;break e}Ze=I.return}}var ce=h.current;for(Ze=ce;Ze!==null;){K=Ze;var we=K.child;if((K.subtreeFlags&2064)!==0&&we!==null)we.return=K,Ze=we;else e:for(K=ce;Ze!==null;){if(ae=Ze,(ae.flags&2048)!==0)try{switch(ae.tag){case 0:case 11:case 15:Mi(9,ae)}}catch(St){Xi(ae,ae.return,St)}if(ae===K){Ze=null;break e}var it=ae.sibling;if(it!==null){it.return=ae.return,Ze=it;break e}Ze=ae.return}}if(jt=R,Pr(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(Jl,h)}catch{}E=!0}return E}finally{$t=x,An.transition=f}}return!1}function Mc(h,f,x){f=rd(x,f),f=vm(h,f,1),So(h,f),f=pn(),h=Io(h,1),h!==null&&(Wo(h,1,f),nr(h,f))}function Xi(h,f,x){if(h.tag===3)Mc(h,h,x);else for(;f!==null;){if(f.tag===3){Mc(f,h,x);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(es===null||!es.has(E))){h=rd(x,h),h=dh(f,h,1),So(f,h),h=pn(),f=Io(f,1),f!==null&&(Wo(f,1,h),nr(f,h));break}}f=f.return}}function Sd(h,f,x){var E=h.pingCache;E!==null&&E.delete(f),f=pn(),h.pingedLanes|=h.suspendedLanes&x,Xn===h&&(Dn&x)===x&&(Hn===4||Hn===3&&(Dn&130023424)===Dn&&500>ii()-yc?to(h,0):ma|=x),nr(h,f)}function Md(h,f){f===0&&((h.mode&1)===0?f=1:(f=on,on<<=1,(on&130023424)===0&&(on=4194304)));var x=pn();h=Io(h,f),h!==null&&(Wo(h,f,x),nr(h,x))}function Sm(h){var f=h.memoizedState,x=0;f!==null&&(x=f.retryLane),Md(h,x)}function Mm(h,f){var x=0;switch(h.tag){case 13:var E=h.stateNode,R=h.memoizedState;R!==null&&(x=R.retryLane);break;case 19:E=h.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(f),Md(h,x)}var Ed;Ed=function(h,f,x){if(h!==null)if(h.memoizedProps!==f.pendingProps||rn.current)pi=!0;else{if((h.lanes&x)===0&&(f.flags&128)===0)return pi=!1,yh(h,f,x);pi=(h.flags&131072)!==0}else pi=!1,In&&(f.flags&1048576)!==0&&cm(f,Zu,f.index);switch(f.lanes=0,f.tag){case 2:var E=f.type;h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),h=f.pendingProps;var R=xt(f,nn.current);Ja(f,x),R=nl(null,f,E,h,R,x);var I=Co();return f.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,cn(E)?(I=!0,ci(f)):I=!1,f.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,Ka(f),R.updater=Qu,f.stateNode=R,R._reactInternals=f,Wf(f,E,h,x),f=Ii(null,f,E,!0,I,x)):(f.tag=0,In&&I&&jf(f),kn(null,f,R,x),f=f.child),f;case 16:E=f.elementType;e:{switch(h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),h=f.pendingProps,R=E._init,E=R(E._payload),f.type=E,R=f.tag=Yy(E),h=Zi(E,h),R){case 0:f=Ks(null,f,E,h,x);break e;case 1:f=oa(null,f,E,h,x);break e;case 11:f=bn(null,f,E,h,x);break e;case 14:f=En(null,f,E,Zi(E.type,h),x);break e}throw Error(o(306,E,""))}return f;case 0:return E=f.type,R=f.pendingProps,R=f.elementType===E?R:Zi(E,R),Ks(h,f,E,R,x);case 1:return E=f.type,R=f.pendingProps,R=f.elementType===E?R:Zi(E,R),oa(h,f,E,R,x);case 3:e:{if(lc(f),h===null)throw Error(o(387));E=f.pendingProps,I=f.memoizedState,R=I.element,zf(h,f),Yu(f,E,null,x);var K=f.memoizedState;if(E=K.element,Ct&&I.isDehydrated)if(I={element:E,isDehydrated:!1,cache:K.cache,transitions:K.transitions},f.updateQueue.baseState=I,f.memoizedState=I,f.flags&256){R=Error(o(423)),f=ad(h,f,E,x,R);break e}else if(E!==R){R=Error(o(424)),f=ad(h,f,E,x,R);break e}else for(Ct&&(Ai=Pu(f.stateNode.containerInfo),Gi=f,In=!0,Lr=null,Qa=!1),x=fm(f,null,E,x),f.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(qa(),E===R){f=tr(h,f,x);break e}kn(h,f,E,x)}f=f.child}return f;case 5:return dm(f),h===null&&Eo(f),E=f.type,R=f.pendingProps,I=h!==null?h.memoizedProps:null,K=R.children,Ce(E,R)?K=null:I!==null&&Ce(E,I)&&(f.flags|=32),Vi(h,f),kn(h,f,K,x),f.child;case 6:return h===null&&Eo(f),null;case 13:return ld(h,f,x);case 4:return th(f,f.stateNode.containerInfo),E=f.pendingProps,h===null?f.child=Vs(f,null,E,x):kn(h,f,E,x),f.child;case 11:return E=f.type,R=f.pendingProps,R=f.elementType===E?R:Zi(E,R),bn(h,f,E,R,x);case 7:return kn(h,f,f.pendingProps,x),f.child;case 8:return kn(h,f,f.pendingProps.children,x),f.child;case 12:return kn(h,f,f.pendingProps.children,x),f.child;case 10:e:{if(E=f.type._context,R=f.pendingProps,I=f.memoizedProps,K=R.value,Ko(f,E,K),I!==null)if(Hi(I.value,K)){if(I.children===R.children&&!rn.current){f=tr(h,f,x);break e}}else for(I=f.child,I!==null&&(I.return=f);I!==null;){var ae=I.dependencies;if(ae!==null){K=I.child;for(var be=ae.firstContext;be!==null;){if(be.context===E){if(I.tag===1){be=Hs(-1,x&-x),be.tag=2;var Je=I.updateQueue;if(Je!==null){Je=Je.shared;var mt=Je.pending;mt===null?be.next=be:(be.next=mt.next,mt.next=be),Je.pending=be}}I.lanes|=x,be=I.alternate,be!==null&&(be.lanes|=x),Yo(I.return,x,f),ae.lanes|=x;break}be=be.next}}else if(I.tag===10)K=I.type===f.type?null:I.child;else if(I.tag===18){if(K=I.return,K===null)throw Error(o(341));K.lanes|=x,ae=K.alternate,ae!==null&&(ae.lanes|=x),Yo(K,x,f),K=I.sibling}else K=I.child;if(K!==null)K.return=I;else for(K=I;K!==null;){if(K===f){K=null;break}if(I=K.sibling,I!==null){I.return=K.return,K=I;break}K=K.return}I=K}kn(h,f,R.children,x),f=f.child}return f;case 9:return R=f.type,E=f.pendingProps.children,Ja(f,x),R=$i(R),E=E(R),f.flags|=1,kn(h,f,E,x),f.child;case 14:return E=f.type,R=Zi(E,f.pendingProps),R=Zi(E.type,R),En(h,f,E,R,x);case 15:return Js(h,f,f.type,f.pendingProps,x);case 17:return E=f.type,R=f.pendingProps,R=f.elementType===E?R:Zi(E,R),h!==null&&(h.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,cn(E)?(h=!0,ci(f)):h=!1,Ja(f,x),am(f,E,R),Wf(f,E,R,x),Ii(null,f,E,!0,h,x);case 19:return la(h,f,x);case 22:return Si(h,f,x)}throw Error(o(156,f.tag))};function Eh(h,f){return jo(h,f)}function Em(h,f,x,E){this.tag=h,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(h,f,x,E){return new Em(h,f,x,E)}function wh(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Yy(h){if(typeof h=="function")return wh(h)?1:0;if(h!=null){if(h=h.$$typeof,h===w)return 11;if(h===T)return 14}return 2}function no(h,f){var x=h.alternate;return x===null?(x=Ar(h.tag,f,h.key,h.mode),x.elementType=h.elementType,x.type=h.type,x.stateNode=h.stateNode,x.alternate=h,h.alternate=x):(x.pendingProps=f,x.type=h.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=h.flags&14680064,x.childLanes=h.childLanes,x.lanes=h.lanes,x.child=h.child,x.memoizedProps=h.memoizedProps,x.memoizedState=h.memoizedState,x.updateQueue=h.updateQueue,f=h.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=h.sibling,x.index=h.index,x.ref=h.ref,x}function Ch(h,f,x,E,R,I){var K=2;if(E=h,typeof h=="function")wh(h)&&(K=1);else if(typeof h=="string")K=5;else e:switch(h){case p:return xa(x.children,R,I,f);case m:K=8,R|=8;break;case v:return h=Ar(12,x,f,R|2),h.elementType=v,h.lanes=I,h;case M:return h=Ar(13,x,f,R),h.elementType=M,h.lanes=I,h;case S:return h=Ar(19,x,f,R),h.elementType=S,h.lanes=I,h;case B:return Ec(x,R,I,f);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case y:K=10;break e;case A:K=9;break e;case w:K=11;break e;case T:K=14;break e;case b:K=16,E=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return f=Ar(K,x,f,R),f.elementType=h,f.type=E,f.lanes=I,f}function xa(h,f,x,E){return h=Ar(7,h,E,f),h.lanes=x,h}function Ec(h,f,x,E){return h=Ar(22,h,E,f),h.elementType=B,h.lanes=x,h.stateNode={},h}function Th(h,f,x){return h=Ar(6,h,null,f),h.lanes=x,h}function bh(h,f,x){return f=Ar(4,h.children!==null?h.children:[],h.key,f),f.lanes=x,f.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},f}function Rh(h,f,x,E,R){this.tag=f,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=vt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ku(0),this.expirationTimes=ku(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ku(0),this.identifierPrefix=E,this.onRecoverableError=R,Ct&&(this.mutableSourceEagerHydrationData=null)}function wm(h,f,x,E,R,I,K,ae,be){return h=new Rh(h,f,x,ae,be),f===1?(f=1,I===!0&&(f|=8)):f=0,I=Ar(3,null,null,f),h.current=I,I.stateNode=h,I.memoizedState={element:E,isDehydrated:x,cache:null,transitions:null},Ka(I),h}function Cm(h){if(!h)return Ft;h=h._reactInternals;e:{if(U(h)!==h||h.tag!==1)throw Error(o(170));var f=h;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(cn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(h.tag===1){var x=h.type;if(cn(x))return Us(h,x,f)}return f}function Tm(h){var f=h._reactInternals;if(f===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=se(f),h===null?null:h.stateNode}function Ur(h,f){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var x=h.retryLane;h.retryLane=x!==0&&x<f?x:f}}function wc(h,f){Ur(h,f),(h=h.alternate)&&Ur(h,f)}function Ph(h){return h=se(h),h===null?null:h.stateNode}function bm(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var f=pn();Li(h,134217728,f),wc(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var f=pn(),x=ts(h);Li(h,x,f),wc(h,x)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var f=h.stateNode;if(f.current.memoizedState.isDehydrated){var x=qi(f.pendingLanes);x!==0&&(vs(f,x|1),nr(f,ii()),(jt&6)===0&&(ga(),Pr()))}break;case 13:var E=pn();pl(function(){return Li(h,1,E)}),wc(h,1)}},t.batchedUpdates=function(h,f){var x=jt;jt|=1;try{return h(f)}finally{jt=x,jt===0&&(ga(),Vu&&Pr())}},t.createComponentSelector=function(h){return{$$typeof:pc,value:h}},t.createContainer=function(h,f,x,E,R,I,K){return wm(h,f,!1,null,x,E,R,I,K)},t.createHasPseudoClassSelector=function(h){return{$$typeof:ha,value:h}},t.createHydrationContainer=function(h,f,x,E,R,I,K,ae,be){return h=wm(x,E,!0,h,R,I,K,ae,be),h.context=Cm(null),x=h.current,E=pn(),R=ts(x),I=Hs(E,R),I.callback=f??null,So(x,I),h.current.lanes=R,Wo(h,R,E),nr(h,E),h},t.createPortal=function(h,f,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:E==null?null:""+E,children:h,containerInfo:f,implementation:x}},t.createRoleSelector=function(h){return{$$typeof:fa,value:h}},t.createTestNameSelector=function(h){return{$$typeof:qs,value:h}},t.createTextSelector=function(h){return{$$typeof:ul,value:h}},t.deferredUpdates=function(h){var f=$t,x=An.transition;try{return An.transition=null,$t=16,h()}finally{$t=f,An.transition=x}},t.discreteUpdates=function(h,f,x,E,R){var I=$t,K=An.transition;try{return An.transition=null,$t=1,h(f,x,E,R)}finally{$t=I,An.transition=K,jt===0&&ga()}},t.findAllNodes=Zs,t.findBoundingRects=function(h,f){if(!Re)throw Error(o(363));f=Zs(h,f),h=[];for(var x=0;x<f.length;x++)h.push(O(f[x]));for(f=h.length-1;0<f;f--){x=h[f];for(var E=x.x,R=E+x.width,I=x.y,K=I+x.height,ae=f-1;0<=ae;ae--)if(f!==ae){var be=h[ae],Je=be.x,mt=Je+be.width,zt=be.y,Bt=zt+be.height;if(E>=Je&&I>=zt&&R<=mt&&K<=Bt){h.splice(f,1);break}else if(E!==Je||x.width!==be.width||Bt<I||zt>K){if(!(I!==zt||x.height!==be.height||mt<E||Je>R)){Je>E&&(be.width+=Je-E,be.x=E),mt<R&&(be.width=R-Je),h.splice(f,1);break}}else{zt>I&&(be.height+=zt-I,be.y=I),Bt<K&&(be.height=K-zt),h.splice(f,1);break}}}return h},t.findHostInstance=Tm,t.findHostInstanceWithNoPortals=function(h){return h=j(h),h=h!==null?he(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return Tm(h)},t.flushControlled=function(h){var f=jt;jt|=1;var x=An.transition,E=$t;try{An.transition=null,$t=1,h()}finally{$t=E,An.transition=x,jt=f,jt===0&&(ga(),Pr())}},t.flushPassiveEffects=Es,t.flushSync=pl,t.focusWithin=function(h,f){if(!Re)throw Error(o(363));for(h=mc(h),f=yr(h,f),f=Array.from(f),h=0;h<f.length;){var x=f[h++];if(!Ee(x)){if(x.tag===5&&Te(x.stateNode))return!0;for(x=x.child;x!==null;)f.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return $t},t.getFindAllNodesFailureDescription=function(h,f){if(!Re)throw Error(o(363));var x=0,E=[];h=[mc(h),0];for(var R=0;R<h.length;){var I=h[R++],K=h[R++],ae=f[K];if((I.tag!==5||!Ee(I))&&(gc(I,ae)&&(E.push(Po(ae)),K++,K>x&&(x=K)),K<f.length))for(I=I.child;I!==null;)h.push(I,K),I=I.sibling}if(x<f.length){for(h=[];x<f.length;x++)h.push(Po(f[x]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){return h=h.current,h.child?h.child.tag===5?me(h.child.stateNode):h.child.stateNode:null},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:Ph,findFiberByHostInstance:h.findFiberByHostInstance||bm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)h=!0;else{try{Jl=f.inject(h),ys=f}catch{}h=!!f.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,f,x,E){if(!Re)throw Error(o(363));h=Zs(h,f);var R=ut(h,x,E).disconnect;return{disconnect:function(){R()}}},t.registerMutableSourceForHydration=function(h,f){var x=f._getVersion;x=x(f._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[f,x]:h.mutableSourceEagerHydrationData.push(f,x)},t.runWithPriority=function(h,f){var x=$t;try{return $t=h,f()}finally{$t=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,f,x,E){var R=f.current,I=pn(),K=ts(R);return x=Cm(x),f.context===null?f.context=x:f.pendingContext=x,f=Hs(I,K),f.payload={element:h},E=E===void 0?null:E,E!==null&&(f.callback=E),So(R,f),h=Li(R,K,I),h!==null&&Ju(h,R,K),K},t}),Rx}var iC;function TG(){return iC||(iC=1,Cx.exports=CG()),Cx.exports}var bG=TG();const RG=P_(bG);var Px={exports:{}},Bx={};var rC;function PG(){return rC||(rC=1,(function(i){function e(H,q){var Q=H.length;H.push(q);e:for(;0<Q;){var W=Q-1>>>1,re=H[W];if(0<r(re,q))H[W]=q,H[Q]=re,Q=W;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var q=H[0],Q=H.pop();if(Q!==q){H[0]=Q;e:for(var W=0,re=H.length,ke=re>>>1;W<ke;){var fe=2*(W+1)-1,Ce=H[fe],Ne=fe+1,Ue=H[Ne];if(0>r(Ce,Q))Ne<re&&0>r(Ue,Ce)?(H[W]=Ue,H[Ne]=Q,W=Ne):(H[W]=Ce,H[fe]=Q,W=fe);else if(Ne<re&&0>r(Ue,Q))H[W]=Ue,H[Ne]=Q,W=Ne;else break e}}return q}function r(H,q){var Q=H.sortIndex-q.sortIndex;return Q!==0?Q:H.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,m=null,v=3,y=!1,A=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var q=t(d);q!==null;){if(q.callback===null)n(d);else if(q.startTime<=H)n(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=t(d)}}function B(H){if(w=!1,b(H),!A)if(t(u)!==null)A=!0,me(F);else{var q=t(d);q!==null&&ge(B,q.startTime-H)}}function F(H,q){A=!1,w&&(w=!1,S(G),G=-1),y=!0;var Q=v;try{for(b(q),m=t(u);m!==null&&(!(m.expirationTime>q)||H&&!j());){var W=m.callback;if(typeof W=="function"){m.callback=null,v=m.priorityLevel;var re=W(m.expirationTime<=q);q=i.unstable_now(),typeof re=="function"?m.callback=re:m===t(u)&&n(u),b(q)}else n(u);m=t(u)}if(m!==null)var ke=!0;else{var fe=t(d);fe!==null&&ge(B,fe.startTime-q),ke=!1}return ke}finally{m=null,v=Q,y=!1}}var N=!1,z=null,G=-1,U=5,L=-1;function j(){return!(i.unstable_now()-L<U)}function se(){if(z!==null){var H=i.unstable_now();L=H;var q=!0;try{q=z(!0,H)}finally{q?ie():(N=!1,z=null)}}else N=!1}var ie;if(typeof T=="function")ie=function(){T(se)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,xe=he.port2;he.port1.onmessage=se,ie=function(){xe.postMessage(null)}}else ie=function(){M(se,0)};function me(H){z=H,N||(N=!0,ie())}function ge(H,q){G=M(function(){H(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){A||y||(A=!0,me(F))},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(H){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var Q=v;v=q;try{return H()}finally{v=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=v;v=H;try{return q()}finally{v=Q}},i.unstable_scheduleCallback=function(H,q,Q){var W=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?W+Q:W):Q=W,H){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Q+re,H={id:p++,callback:q,priorityLevel:H,startTime:Q,expirationTime:re,sortIndex:-1},Q>W?(H.sortIndex=Q,e(d,H),t(u)===null&&H===t(d)&&(w?(S(G),G=-1):w=!0,ge(B,Q-W))):(H.sortIndex=re,e(u,H),A||y||(A=!0,me(F))),H},i.unstable_shouldYield=j,i.unstable_wrapCallback=function(H){var q=v;return function(){var Q=v;v=q;try{return H.apply(this,arguments)}finally{v=Q}}}})(Bx)),Bx}var sC;function BG(){return sC||(sC=1,Px.exports=PG()),Px.exports}var oC=BG();const oS={},IG=i=>{Object.assign(oS,i)};function DG(i,e){function t(p,{args:m=[],attach:v,...y},A){let w=`${p[0].toUpperCase()}${p.slice(1)}`,M;if(p==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const S=y.object;M=tf(S,{type:p,root:A,attach:v,primitive:!0})}else{const S=oS[w];if(!S)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");M=tf(new S(...m),{type:p,root:A,attach:v,memoizedProps:{args:m}})}return M.__r3f.attach===void 0&&(M.isBufferGeometry?M.__r3f.attach="geometry":M.isMaterial&&(M.__r3f.attach="material")),w!=="inject"&&Lx(M,y),M}function n(p,m){let v=!1;if(m){var y,A;(y=m.__r3f)!=null&&y.attach?Dx(p,m,m.__r3f.attach):m.isObject3D&&p.isObject3D&&(p.add(m),v=!0),v||(A=p.__r3f)==null||A.objects.push(m),m.__r3f||tf(m,{}),m.__r3f.parent=p,T_(m),nf(m)}}function r(p,m,v){let y=!1;if(m){var A,w;if((A=m.__r3f)!=null&&A.attach)Dx(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){m.parent=p,m.dispatchEvent({type:"added"}),p.dispatchEvent({type:"childadded",child:m});const M=p.children.filter(T=>T!==m),S=M.indexOf(v);p.children=[...M.slice(0,S),m,...M.slice(S)],y=!0}y||(w=p.__r3f)==null||w.objects.push(m),m.__r3f||tf(m,{}),m.__r3f.parent=p,T_(m),nf(m)}}function s(p,m,v=!1){p&&[...p].forEach(y=>o(m,y,v))}function o(p,m,v){if(m){var y,A,w;if(m.__r3f&&(m.__r3f.parent=null),(y=p.__r3f)!=null&&y.objects&&(p.__r3f.objects=p.__r3f.objects.filter(B=>B!==m)),(A=m.__r3f)!=null&&A.attach)hC(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){var M;p.remove(m),(M=m.__r3f)!=null&&M.root&&zG(sv(m),m)}const T=(w=m.__r3f)==null?void 0:w.primitive,b=!T&&(v===void 0?m.dispose!==null:v);if(!T){var S;s((S=m.__r3f)==null?void 0:S.objects,m,b),s(m.children,m,b)}if(delete m.__r3f,b&&m.dispose&&m.type!=="Scene"){const B=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?oC.unstable_scheduleCallback(oC.unstable_IdlePriority,B):B()}nf(p)}}function l(p,m,v,y){var A;const w=(A=p.__r3f)==null?void 0:A.parent;if(!w)return;const M=t(m,v,p.__r3f.root);if(p.children){for(const S of p.children)S.__r3f&&n(M,S);p.children=p.children.filter(S=>!S.__r3f)}p.__r3f.objects.forEach(S=>n(M,S)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||o(w,p),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),n(w,M),M.raycast&&M.__r3f.eventCount&&sv(M).getState().internal.interaction.push(M),[y,y.alternate].forEach(S=>{S!==null&&(S.stateNode=M,S.ref&&(typeof S.ref=="function"?S.ref(M):S.ref.current=M))})}const u=()=>{};return{reconciler:RG({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,m)=>{if(!m)return;const v=p.getState().scene;v.__r3f&&(v.__r3f.root=p,n(v,m))},removeChildFromContainer:(p,m)=>{m&&o(p.getState().scene,m)},insertInContainerBefore:(p,m,v)=>{if(!m||!v)return;const y=p.getState().scene;y.__r3f&&r(y,m,v)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var m;return!!((m=p?.__r3f)!=null?m:{}).handlers},prepareUpdate(p,m,v,y){var A;if(((A=p?.__r3f)!=null?A:{}).primitive&&y.object&&y.object!==p)return[!0];{const{args:M=[],children:S,...T}=y,{args:b=[],children:B,...F}=v;if(!Array.isArray(M))throw new Error("R3F: the args prop must be an array!");if(M.some((z,G)=>z!==b[G]))return[!0];const N=bR(p,T,F,!0);return N.changes.length?[!1,N]:null}},commitUpdate(p,[m,v],y,A,w,M){m?l(p,y,w,M):Lx(p,v)},commitMount(p,m,v,y){var A;const w=(A=p.__r3f)!=null?A:{};p.raycast&&w.handlers&&w.eventCount&&sv(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>tf(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var m;const{attach:v,parent:y}=(m=p.__r3f)!=null?m:{};v&&y&&hC(y,p,v),p.isObject3D&&(p.visible=!1),nf(p)},unhideInstance(p,m){var v;const{attach:y,parent:A}=(v=p.__r3f)!=null?v:{};y&&A&&Dx(A,p,y),(p.isObject3D&&m.visible==null||m.visible)&&(p.visible=!0),nf(p)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>e?e():hf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Ln.fun(performance.now)?performance.now:Ln.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Ln.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ln.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Lx}}var aC,lC;const Ix=i=>"colorSpace"in i||"outputColorSpace"in i,SR=()=>{var i;return(i=oS.ColorManagement)!=null?i:null},MR=i=>i&&i.isOrthographicCamera,LG=i=>i&&i.hasOwnProperty("current"),em=typeof window<"u"&&((aC=window.document)!=null&&aC.createElement||((lC=window.navigator)==null?void 0:lC.product)==="ReactNative")?Z.useLayoutEffect:Z.useEffect;function ER(i){const e=Z.useRef(i);return em(()=>{e.current=i},[i]),e}function NG({set:i}){return em(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class wR extends Z.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}wR.getDerivedStateFromError=()=>({error:!0});const CR="__default",cC=new Map,FG=i=>i&&!!i.memoized&&!!i.changes;function TR(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}const Xd=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()};function sv(i){let e=i.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Ln={obj:i=>i===Object(i)&&!Ln.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Ln.str(i)||Ln.num(i)||Ln.boo(i))return i===e;const s=Ln.obj(i);if(s&&n==="reference")return i===e;const o=Ln.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let l;for(l in i)if(!(l in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(l in r?e:i)if(!Ln.equ(i[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:i)if(i[l]!==e[l])return!1;if(Ln.und(l)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function UG(i){const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function OG(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function tf(i,e){const t=i;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},i}function C_(i,e){let t=i;if(e.includes("-")){const n=e.split("-"),r=n.pop();return t=n.reduce((s,o)=>s[o],i),{target:t,key:r}}else return{target:t,key:e}}const uC=/-\d+$/;function Dx(i,e,t){if(Ln.str(t)){if(uC.test(t)){const s=t.replace(uC,""),{target:o,key:l}=C_(i,s);Array.isArray(o[l])||(o[l]=[])}const{target:n,key:r}=C_(i,t);e.__r3f.previousAttach=n[r],n[r]=e}else e.__r3f.previousAttach=t(i,e)}function hC(i,e,t){var n,r;if(Ln.str(t)){const{target:s,key:o}=C_(i,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(i,e);(r=e.__r3f)==null||delete r.previousAttach}function bR(i,{children:e,key:t,ref:n,...r},{children:s,key:o,ref:l,...u}={},d=!1){const p=i.__r3f,m=Object.entries(r),v=[];if(d){const A=Object.keys(u);for(let w=0;w<A.length;w++)r.hasOwnProperty(A[w])||m.unshift([A[w],CR+"remove"])}m.forEach(([A,w])=>{var M;if((M=i.__r3f)!=null&&M.primitive&&A==="object"||Ln.equ(w,u[A]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(A))return v.push([A,w,!0,[]]);let S=[];A.includes("-")&&(S=A.split("-")),v.push([A,w,!1,S]);for(const T in r){const b=r[T];T.startsWith(`${A}-`)&&v.push([T,b,!1,T.split("-")])}});const y={...r};return p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.args&&(y.args=p.memoizedProps.args),p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.attach&&(y.attach=p.memoizedProps.attach),{memoized:y,changes:v}}function Lx(i,e){var t;const n=i.__r3f,r=n?.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:l}=FG(e)?e:bR(i,e),u=n?.eventCount;i.__r3f&&(i.__r3f.memoizedProps=o);for(let v=0;v<l.length;v++){let[y,A,w,M]=l[v];if(Ix(i)){const B="srgb",F="srgb-linear";y==="encoding"?(y="colorSpace",A=A===3001?B:F):y==="outputEncoding"&&(y="outputColorSpace",A=A===3001?B:F)}let S=i,T=S[y];if(M.length&&(T=M.reduce((b,B)=>b[B],i),!(T&&T.set))){const[b,...B]=M.reverse();S=B.reverse().reduce((F,N)=>F[N],i),y=b}if(A===CR+"remove")if(S.constructor){let b=cC.get(S.constructor);b||(b=new S.constructor,cC.set(S.constructor,b)),A=b[y]}else A=0;if(w&&n)A?n.handlers[y]=A:delete n.handlers[y],n.eventCount=Object.keys(n.handlers).length;else if(T&&T.set&&(T.copy||T instanceof fu)){if(Array.isArray(A))T.fromArray?T.fromArray(A):T.set(...A);else if(T.copy&&A&&A.constructor&&T.constructor===A.constructor)T.copy(A);else if(A!==void 0){var d;const b=(d=T)==null?void 0:d.isColor;!b&&T.setScalar?T.setScalar(A):T instanceof fu&&A instanceof fu?T.mask=A.mask:T.set(A),!SR()&&s&&!s.linear&&b&&T.convertSRGBToLinear()}}else{var p;if(S[y]=A,(p=S[y])!=null&&p.isTexture&&S[y].format===ur&&S[y].type===go&&s){const b=S[y];Ix(b)&&Ix(s.gl)?b.colorSpace=s.gl.outputColorSpace:b.encoding=s.gl.outputEncoding}}nf(i)}if(n&&n.parent&&i.raycast&&u!==n.eventCount){const v=sv(i).getState().internal,y=v.interaction.indexOf(i);y>-1&&v.interaction.splice(y,1),n.eventCount&&v.interaction.push(i)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(t=i.__r3f)!=null&&t.parent&&T_(i),i}function nf(i){var e,t;const n=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function T_(i){i.onUpdate==null||i.onUpdate(i)}function kG(i,e){i.manual||(MR(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function Xg(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function HG(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return hf.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return hf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return hf.ContinuousEventPriority;default:return hf.DefaultEventPriority}}function RR(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function zG(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{RR(t.capturedMap,e,n,r)})}function GG(i){function e(u){const{internal:d}=i.getState(),p=u.offsetX-d.initialClick[0],m=u.offsetY-d.initialClick[1];return Math.round(Math.sqrt(p*p+m*m))}function t(u){return u.filter(d=>["Move","Over","Enter","Out","Leave"].some(p=>{var m;return(m=d.__r3f)==null?void 0:m.handlers["onPointer"+p]}))}function n(u,d){const p=i.getState(),m=new Set,v=[],y=d?d(p.internal.interaction):p.internal.interaction;for(let S=0;S<y.length;S++){const T=Xd(y[S]);T&&(T.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(u,p);function A(S){const T=Xd(S);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var b;T.events.compute==null||T.events.compute(u,T,(b=T.previousRoot)==null?void 0:b.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(S,!0):[]}let w=y.flatMap(A).sort((S,T)=>{const b=Xd(S.object),B=Xd(T.object);return!b||!B?S.distance-T.distance:B.events.priority-b.events.priority||S.distance-T.distance}).filter(S=>{const T=Xg(S);return m.has(T)?!1:(m.add(T),!0)});p.events.filter&&(w=p.events.filter(w,p));for(const S of w){let T=S.object;for(;T;){var M;(M=T.__r3f)!=null&&M.eventCount&&v.push({...S,eventObject:T}),T=T.parent}}if("pointerId"in u&&p.internal.capturedMap.has(u.pointerId))for(let S of p.internal.capturedMap.get(u.pointerId).values())m.has(Xg(S.intersection))||v.push(S.intersection);return v}function r(u,d,p,m){const v=i.getState();if(u.length){const y={stopped:!1};for(const A of u){const w=Xd(A.object)||v,{raycaster:M,pointer:S,camera:T,internal:b}=w,B=new J(S.x,S.y,0).unproject(T),F=L=>{var j,se;return(j=(se=b.capturedMap.get(L))==null?void 0:se.has(A.eventObject))!=null?j:!1},N=L=>{const j={intersection:A,target:d.target};b.capturedMap.has(L)?b.capturedMap.get(L).set(A.eventObject,j):b.capturedMap.set(L,new Map([[A.eventObject,j]])),d.target.setPointerCapture(L)},z=L=>{const j=b.capturedMap.get(L);j&&RR(b.capturedMap,A.eventObject,j,L)};let G={};for(let L in d){let j=d[L];typeof j!="function"&&(G[L]=j)}let U={...A,...G,pointer:S,intersections:u,stopped:y.stopped,delta:p,unprojectedPoint:B,ray:M.ray,camera:T,stopPropagation(){const L="pointerId"in d&&b.capturedMap.get(d.pointerId);if((!L||L.has(A.eventObject))&&(U.stopped=y.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(j=>j.eventObject===A.eventObject))){const j=u.slice(0,u.indexOf(A));s([...j,A])}},target:{hasPointerCapture:F,setPointerCapture:N,releasePointerCapture:z},currentTarget:{hasPointerCapture:F,setPointerCapture:N,releasePointerCapture:z},nativeEvent:d};if(m(U),y.stopped===!0)break}}return u}function s(u){const{internal:d}=i.getState();for(const p of d.hovered.values())if(!u.length||!u.find(m=>m.object===p.object&&m.index===p.index&&m.instanceId===p.instanceId)){const v=p.eventObject.__r3f,y=v?.handlers;if(d.hovered.delete(Xg(p)),v!=null&&v.eventCount){const A={...p,intersections:u};y.onPointerOut==null||y.onPointerOut(A),y.onPointerLeave==null||y.onPointerLeave(A)}}}function o(u,d){for(let p=0;p<d.length;p++){const m=d[p].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:p}=i.getState();"pointerId"in d&&p.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(d.pointerId)&&(p.capturedMap.delete(d.pointerId),s([]))})}}return function(p){const{onPointerMissed:m,internal:v}=i.getState();v.lastEvent.current=p;const y=u==="onPointerMove",A=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",M=n(p,y?t:void 0),S=A?e(p):0;u==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=M.map(b=>b.eventObject)),A&&!M.length&&S<=2&&(o(p,v.interaction),m&&m(p)),y&&s(M);function T(b){const B=b.eventObject,F=B.__r3f,N=F?.handlers;if(F!=null&&F.eventCount)if(y){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const z=Xg(b),G=v.hovered.get(z);G?G.stopped&&b.stopPropagation():(v.hovered.set(z,b),N.onPointerOver==null||N.onPointerOver(b),N.onPointerEnter==null||N.onPointerEnter(b))}N.onPointerMove==null||N.onPointerMove(b)}else{const z=N[u];z?(!A||v.initialHits.includes(B))&&(o(p,v.interaction.filter(G=>!v.initialHits.includes(G))),z(b)):A&&v.initialHits.includes(B)&&o(p,v.interaction.filter(G=>!v.initialHits.includes(G)))}}r(M,p,S,T)}}return{handlePointer:l}}const PR=i=>!!(i!=null&&i.render),BR=Z.createContext(null),VG=(i,e)=>{const t=xG((l,u)=>{const d=new J,p=new J,m=new J;function v(S=u().camera,T=p,b=u().size){const{width:B,height:F,top:N,left:z}=b,G=B/F;T.isVector3?m.copy(T):m.set(...T);const U=S.getWorldPosition(d).distanceTo(m);if(MR(S))return{width:B/S.zoom,height:F/S.zoom,top:N,left:z,factor:1,distance:U,aspect:G};{const L=S.fov*Math.PI/180,j=2*Math.tan(L/2)*U,se=j*(B/F);return{width:se,height:j,top:N,left:z,factor:B/se,distance:U,aspect:G}}}let y;const A=S=>l(T=>({performance:{...T.performance,current:S}})),w=new Le;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(S=1)=>i(u(),S),advance:(S,T)=>e(S,T,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new eS,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=u();y&&clearTimeout(y),S.performance.current!==S.performance.min&&A(S.performance.min),y=setTimeout(()=>A(u().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>l(T=>({...T,events:{...T.events,...S}})),setSize:(S,T,b,B,F)=>{const N=u().camera,z={width:S,height:T,top:B||0,left:F||0,updateStyle:b};l(G=>({size:z,viewport:{...G.viewport,...v(N,p,z)}}))},setDpr:S=>l(T=>{const b=TR(S);return{viewport:{...T.viewport,dpr:b,initialDpr:T.viewport.initialDpr||b}}}),setFrameloop:(S="always")=>{const T=u().clock;T.stop(),T.elapsedTime=0,S!=="never"&&(T.start(),T.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Z.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(S,T,b)=>{const B=u().internal;return B.priority=B.priority+(T>0?1:0),B.subscribers.push({ref:S,priority:T,store:b}),B.subscribers=B.subscribers.sort((F,N)=>F.priority-N.priority),()=>{const F=u().internal;F!=null&&F.subscribers&&(F.priority=F.priority-(T>0?1:0),F.subscribers=F.subscribers.filter(N=>N.ref!==S))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:l,size:u,viewport:d,gl:p,set:m}=t.getState();if(u.width!==r.width||u.height!==r.height||d.dpr!==s){var v;r=u,s=d.dpr,kG(l,u),p.setPixelRatio(d.dpr);const y=(v=u.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(u.width,u.height,y)}l!==o&&(o=l,m(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>i(l)),t};let Jg,WG=new Set,jG=new Set,XG=new Set;function Nx(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Jd(i,e){switch(i){case"before":return Nx(WG,e);case"after":return Nx(jG,e);case"tail":return Nx(XG,e)}}let Fx,Ux;function Ox(i,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),Fx=e.internal.subscribers,Jg=0;Jg<Fx.length;Jg++)Ux=Fx[Jg],Ux.ref.current(Ux.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function JG(i){let e=!1,t=!1,n,r,s;function o(d){r=requestAnimationFrame(o),e=!0,n=0,Jd("before",d),t=!0;for(const m of i.values()){var p;s=m.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(n+=Ox(d,s))}if(t=!1,Jd("after",d),n===0)return Jd("tail",d),e=!1,cancelAnimationFrame(r)}function l(d,p=1){var m;if(!d)return i.forEach(v=>l(v.store.getState(),p));(m=d.gl.xr)!=null&&m.isPresenting||!d.internal.active||d.frameloop==="never"||(p>1?d.internal.frames=Math.min(60,d.internal.frames+p):t?d.internal.frames=2:d.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function u(d,p=!0,m,v){if(p&&Jd("before",d),m)Ox(d,m,v);else for(const y of i.values())Ox(d,y.store.getState());p&&Jd("after",d)}return{loop:o,invalidate:l,advance:u}}function IR(){const i=Z.useContext(BR);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Lo(i=t=>t,e){return IR()(i,e)}function DR(i,e=0){const t=IR(),n=t.getState().internal.subscribe,r=ER(i);return em(()=>n(r,e,t),[e,n,t]),null}const fC=new WeakMap;function LR(i,e){return function(t,...n){let r=fC.get(t);return r||(r=new t,fC.set(t,r)),i&&i(r),Promise.all(n.map(s=>new Promise((o,l)=>r.load(s,u=>{u.scene&&Object.assign(u,UG(u.scene)),o(u)},e,u=>l(new Error(`Could not load ${s}: ${u?.message}`))))))}}function tm(i,e,t,n){const r=Array.isArray(e)?e:[e],s=AG(LR(t,n),[i,...r],{equal:Ln.equ});return Array.isArray(e)?s:s[0]}tm.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return SG(LR(t),[i,...n])};tm.clear=function(i,e){const t=Array.isArray(e)?e:[e];return MG([i,...t])};const Rf=new Map,{invalidate:dC,advance:pC}=JG(Rf),{reconciler:$v,applyProps:$h}=DG(Rf,HG),ef={objects:"shallow",strict:!1},KG=(i,e)=>{const t=typeof i=="function"?i(e):i;return PR(t)?t:new xR({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function YG(i,e){const t=typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement;if(e){const{width:n,height:r,top:s,left:o,updateStyle:l=t}=e;return{width:n,height:r,top:s,left:o,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:n,height:r,top:s,left:o}=i.parentElement.getBoundingClientRect();return{width:n,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function QG(i){const e=Rf.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||VG(dC,pC),o=t||$v.createContainer(s,hf.ConcurrentRoot,null,!1,null,"",r,null);e||Rf.set(i,{fiber:o,store:s});let l,u=!1,d;return{configure(p={}){let{gl:m,size:v,scene:y,events:A,onCreated:w,shadows:M=!1,linear:S=!1,flat:T=!1,legacy:b=!1,orthographic:B=!1,frameloop:F="always",dpr:N=[1,2],performance:z,raycaster:G,camera:U,onPointerMissed:L}=p,j=s.getState(),se=j.gl;j.gl||j.set({gl:se=KG(m,i)});let ie=j.raycaster;ie||j.set({raycaster:ie=new hR});const{params:he,...xe}=G||{};if(Ln.equ(xe,ie,ef)||$h(ie,{...xe}),Ln.equ(he,ie.params,ef)||$h(ie,{params:{...ie.params,...he}}),!j.camera||j.camera===d&&!Ln.equ(d,U,ef)){d=U;const Q=U instanceof jp,W=Q?U:B?new Oa(0,0,0,0,.1,1e3):new ti(75,0,.1,1e3);Q||(W.position.z=5,U&&($h(W,U),("aspect"in U||"left"in U||"right"in U||"bottom"in U||"top"in U)&&(W.manual=!0,W.updateProjectionMatrix())),!j.camera&&!(U!=null&&U.rotation)&&W.lookAt(0,0,0)),j.set({camera:W}),ie.camera=W}if(!j.scene){let Q;y!=null&&y.isScene?Q=y:(Q=new BA,y&&$h(Q,y)),j.set({scene:tf(Q)})}if(!j.xr){var me;const Q=(ke,fe)=>{const Ce=s.getState();Ce.frameloop!=="never"&&pC(ke,!0,Ce,fe)},W=()=>{const ke=s.getState();ke.gl.xr.enabled=ke.gl.xr.isPresenting,ke.gl.xr.setAnimationLoop(ke.gl.xr.isPresenting?Q:null),ke.gl.xr.isPresenting||dC(ke)},re={connect(){const ke=s.getState().gl;ke.xr.addEventListener("sessionstart",W),ke.xr.addEventListener("sessionend",W)},disconnect(){const ke=s.getState().gl;ke.xr.removeEventListener("sessionstart",W),ke.xr.removeEventListener("sessionend",W)}};typeof((me=se.xr)==null?void 0:me.addEventListener)=="function"&&re.connect(),j.set({xr:re})}if(se.shadowMap){const Q=se.shadowMap.enabled,W=se.shadowMap.type;if(se.shadowMap.enabled=!!M,Ln.boo(M))se.shadowMap.type=lp;else if(Ln.str(M)){var ge;const re={basic:wT,percentage:hy,soft:lp,variance:ho};se.shadowMap.type=(ge=re[M])!=null?ge:lp}else Ln.obj(M)&&Object.assign(se.shadowMap,M);(Q!==se.shadowMap.enabled||W!==se.shadowMap.type)&&(se.shadowMap.needsUpdate=!0)}const H=SR();H&&("enabled"in H?H.enabled=!b:"legacyMode"in H&&(H.legacyMode=b)),u||$h(se,{outputEncoding:S?3e3:3001,toneMapping:T?Oo:mA}),j.legacy!==b&&j.set(()=>({legacy:b})),j.linear!==S&&j.set(()=>({linear:S})),j.flat!==T&&j.set(()=>({flat:T})),m&&!Ln.fun(m)&&!PR(m)&&!Ln.equ(m,se,ef)&&$h(se,m),A&&!j.events.handlers&&j.set({events:A(s)});const q=YG(i,v);return Ln.equ(q,j.size,ef)||j.setSize(q.width,q.height,q.updateStyle,q.top,q.left),N&&j.viewport.dpr!==TR(N)&&j.setDpr(N),j.frameloop!==F&&j.setFrameloop(F),j.onPointerMissed||j.set({onPointerMissed:L}),z&&!Ln.equ(z,j.performance,ef)&&j.set(Q=>({performance:{...Q.performance,...z}})),l=w,u=!0,this},render(p){return u||this.configure(),$v.updateContainer(D.jsx(qG,{store:s,children:p,onCreated:l,rootElement:i}),o,null,()=>{}),s},unmount(){NR(i)}}}function qG({store:i,children:e,onCreated:t,rootElement:n}){return em(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),D.jsx(BR.Provider,{value:i,children:e})}function NR(i,e){const t=Rf.get(i),n=t?.fiber;if(n){const r=t?.store.getState();r&&(r.internal.active=!1),$v.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,o,l,u;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=r.gl)!=null&&u.xr&&r.xr.disconnect(),OG(r),Rf.delete(i)}catch{}},500)})}}$v.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Z.version});const kx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function ZG(i){const{handlePointer:e}=GG(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(kx).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:s}=i.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,l])=>{const[u,d]=kx[o];t.addEventListener(u,l,{passive:d})})},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){var r;Object.entries((r=n.handlers)!=null?r:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[l]=kx[s];n.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function mC(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function $G({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=Z.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=Z.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=i?typeof i=="number"?i:i.scroll:null,d=i?typeof i=="number"?i:i.resize:null,p=Z.useRef(!1);Z.useEffect(()=>(p.current=!0,()=>{p.current=!1}));const[m,v,y]=Z.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:T,top:b,width:B,height:F,bottom:N,right:z,x:G,y:U}=l.current.element.getBoundingClientRect(),L={left:T,top:b,width:B,height:F,bottom:N,right:z,x:G,y:U};l.current.element instanceof HTMLElement&&n&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),p.current&&!i4(l.current.lastBounds,L)&&o(l.current.lastBounds=L)};return[S,d?mC(S,d):S,u?mC(S,u):S]},[o,n,u,d]);function A(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function w(){l.current.element&&(l.current.resizeObserver=new r(y),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",y,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const M=S=>{!S||S===l.current.element||(A(),l.current.element=S,l.current.scrollContainers=FR(S),w())};return t4(y,!!e),e4(v),Z.useEffect(()=>{A(),w()},[e,y,v]),Z.useEffect(()=>A,[]),[M,s,m]}function e4(i){Z.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[i])}function t4(i,e){Z.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[i,e])}function FR(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...FR(i.parentElement)]}const n4=["x","y","top","bottom","left","right","width","height"],i4=(i,e)=>n4.every(t=>i[t]===e[t]);var r4=Object.defineProperty,s4=Object.defineProperties,o4=Object.getOwnPropertyDescriptors,gC=Object.getOwnPropertySymbols,a4=Object.prototype.hasOwnProperty,l4=Object.prototype.propertyIsEnumerable,vC=(i,e,t)=>e in i?r4(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,yC=(i,e)=>{for(var t in e||(e={}))a4.call(e,t)&&vC(i,t,e[t]);if(gC)for(var t of gC(e))l4.call(e,t)&&vC(i,t,e[t]);return i},c4=(i,e)=>s4(i,o4(e)),xC,_C;typeof window<"u"&&((xC=window.document)!=null&&xC.createElement||((_C=window.navigator)==null?void 0:_C.product)==="ReactNative")?Z.useLayoutEffect:Z.useEffect;function UR(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=i.child;for(;n;){const r=UR(n,e,t);if(r)return r;n=n.sibling}}function OR(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const AC=console.error;console.error=function(){const i=[...arguments].join("");if(i?.startsWith("Warning:")&&i.includes("useContext")){console.error=AC;return}return AC.apply(this,arguments)};const aS=OR(Z.createContext(null));class kR extends Z.Component{render(){return Z.createElement(aS.Provider,{value:this._reactInternals},this.props.children)}}function u4(){const i=Z.useContext(aS);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Z.useId();return Z.useMemo(()=>{for(const n of[i,i?.alternate]){if(!n)continue;const r=UR(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[i,e])}function h4(){const i=u4(),[e]=Z.useState(()=>new Map);e.clear();let t=i;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==aS&&!e.has(r)&&e.set(r,Z.useContext(OR(r)))}t=t.return}return e}function f4(){const i=h4();return Z.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>Z.createElement(e,null,Z.createElement(t.Provider,c4(yC({},n),{value:i.get(t)}))),e=>Z.createElement(kR,yC({},e))),[i])}const d4=Z.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:s,events:o=ZG,eventSource:l,eventPrefix:u,shadows:d,linear:p,flat:m,legacy:v,orthographic:y,frameloop:A,dpr:w,performance:M,raycaster:S,camera:T,scene:b,onPointerMissed:B,onCreated:F,...N},z){Z.useMemo(()=>IG(pG),[]);const G=f4(),[U,L]=$G({scroll:!0,debounce:{scroll:50,resize:0},...n}),j=Z.useRef(null),se=Z.useRef(null);Z.useImperativeHandle(z,()=>j.current);const ie=ER(B),[he,xe]=Z.useState(!1),[me,ge]=Z.useState(!1);if(he)throw he;if(me)throw me;const H=Z.useRef(null);em(()=>{const Q=j.current;L.width>0&&L.height>0&&Q&&(H.current||(H.current=QG(Q)),H.current.configure({gl:s,events:o,shadows:d,linear:p,flat:m,legacy:v,orthographic:y,frameloop:A,dpr:w,performance:M,raycaster:S,camera:T,scene:b,size:L,onPointerMissed:(...W)=>ie.current==null?void 0:ie.current(...W),onCreated:W=>{W.events.connect==null||W.events.connect(l?LG(l)?l.current:l:se.current),u&&W.setEvents({compute:(re,ke)=>{const fe=re[u+"X"],Ce=re[u+"Y"];ke.pointer.set(fe/ke.size.width*2-1,-(Ce/ke.size.height)*2+1),ke.raycaster.setFromCamera(ke.pointer,ke.camera)}}),F?.(W)}}),H.current.render(D.jsx(G,{children:D.jsx(wR,{set:ge,children:D.jsx(Z.Suspense,{fallback:D.jsx(NG,{set:xe}),children:e??null})})})))}),Z.useEffect(()=>{const Q=j.current;if(Q)return()=>NR(Q)},[]);const q=l?"none":"auto";return D.jsx("div",{ref:se,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:q,...r},...N,children:D.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:D.jsx("canvas",{ref:j,style:{display:"block"},children:t})})})}),p4=Z.forwardRef(function(e,t){return D.jsx(kR,{children:D.jsx(d4,{...e,ref:t})})});function ey(){return ey=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},ey.apply(null,arguments)}const m4=parseInt(zp.replace(/\D+/g,""));function SC(i,e){if(e===nb)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===Yv||e===CA){let t=i.getIndex();if(t===null){const o=[],l=i.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)o.push(u);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(t)if(e===Yv)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var g4=Object.defineProperty,v4=(i,e,t)=>e in i?g4(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,y4=(i,e,t)=>(v4(i,e+"",t),t);class x4{constructor(){y4(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var _4=Object.defineProperty,A4=(i,e,t)=>e in i?_4(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Lt=(i,e,t)=>(A4(i,typeof e!="symbol"?e+"":e,t),t);const Kg=new wu,MC=new Ra,S4=Math.cos(70*(Math.PI/180)),EC=(i,e)=>(i%e+e)%e;let M4=class extends x4{constructor(e,t){super(),Lt(this,"object"),Lt(this,"domElement"),Lt(this,"enabled",!0),Lt(this,"target",new J),Lt(this,"minDistance",0),Lt(this,"maxDistance",1/0),Lt(this,"minZoom",0),Lt(this,"maxZoom",1/0),Lt(this,"minPolarAngle",0),Lt(this,"maxPolarAngle",Math.PI),Lt(this,"minAzimuthAngle",-1/0),Lt(this,"maxAzimuthAngle",1/0),Lt(this,"enableDamping",!1),Lt(this,"dampingFactor",.05),Lt(this,"enableZoom",!0),Lt(this,"zoomSpeed",1),Lt(this,"enableRotate",!0),Lt(this,"rotateSpeed",1),Lt(this,"enablePan",!0),Lt(this,"panSpeed",1),Lt(this,"screenSpacePanning",!0),Lt(this,"keyPanSpeed",7),Lt(this,"zoomToCursor",!1),Lt(this,"autoRotate",!1),Lt(this,"autoRotateSpeed",2),Lt(this,"reverseOrbit",!1),Lt(this,"reverseHorizontalOrbit",!1),Lt(this,"reverseVerticalOrbit",!1),Lt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Lt(this,"mouseButtons",{LEFT:Qc.ROTATE,MIDDLE:Qc.DOLLY,RIGHT:Qc.PAN}),Lt(this,"touches",{ONE:qc.ROTATE,TWO:qc.DOLLY_PAN}),Lt(this,"target0"),Lt(this,"position0"),Lt(this,"zoom0"),Lt(this,"_domElementKeyEvents",null),Lt(this,"getPolarAngle"),Lt(this,"getAzimuthalAngle"),Lt(this,"setPolarAngle"),Lt(this,"setAzimuthalAngle"),Lt(this,"getDistance"),Lt(this,"getZoomScale"),Lt(this,"listenToKeyEvents"),Lt(this,"stopListenToKeyEvents"),Lt(this,"saveState"),Lt(this,"reset"),Lt(this,"update"),Lt(this,"connect"),Lt(this,"dispose"),Lt(this,"dollyIn"),Lt(this,"dollyOut"),Lt(this,"getScale"),Lt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=te=>{let Pe=EC(te,2*Math.PI),et=p.phi;et<0&&(et+=2*Math.PI),Pe<0&&(Pe+=2*Math.PI);let ee=Math.abs(Pe-et);2*Math.PI-ee<ee&&(Pe<et?Pe+=2*Math.PI:et+=2*Math.PI),m.phi=Pe-et,n.update()},this.setAzimuthalAngle=te=>{let Pe=EC(te,2*Math.PI),et=p.theta;et<0&&(et+=2*Math.PI),Pe<0&&(Pe+=2*Math.PI);let ee=Math.abs(Pe-et);2*Math.PI-ee<ee&&(Pe<et?Pe+=2*Math.PI:et+=2*Math.PI),m.theta=Pe-et,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=te=>{te.addEventListener("keydown",Xe),this._domElementKeyEvents=te},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Xe),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),u=l.NONE},this.update=(()=>{const te=new J,Pe=new J(0,1,0),et=new ki().setFromUnitVectors(e.up,Pe),ee=et.clone().invert(),We=new J,Me=new ki,De=2*Math.PI;return function(){const $e=n.object.position;et.setFromUnitVectors(e.up,Pe),ee.copy(et).invert(),te.copy($e).sub(n.target),te.applyQuaternion(et),p.setFromVector3(te),n.autoRotate&&u===l.NONE&&he(se()),n.enableDamping?(p.theta+=m.theta*n.dampingFactor,p.phi+=m.phi*n.dampingFactor):(p.theta+=m.theta,p.phi+=m.phi);let Tt=n.minAzimuthAngle,ln=n.maxAzimuthAngle;isFinite(Tt)&&isFinite(ln)&&(Tt<-Math.PI?Tt+=De:Tt>Math.PI&&(Tt-=De),ln<-Math.PI?ln+=De:ln>Math.PI&&(ln-=De),Tt<=ln?p.theta=Math.max(Tt,Math.min(ln,p.theta)):p.theta=p.theta>(Tt+ln)/2?Math.max(Tt,p.theta):Math.min(ln,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&U||n.object.isOrthographicCamera?p.radius=ke(p.radius):p.radius=ke(p.radius*v),te.setFromSpherical(p),te.applyQuaternion(ee),$e.copy(n.target).add(te),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),y.set(0,0,0));let Cn=!1;if(n.zoomToCursor&&U){let Kt=null;if(n.object instanceof ti&&n.object.isPerspectiveCamera){const Vn=te.length();Kt=ke(Vn*v);const Yn=Vn-Kt;n.object.position.addScaledVector(z,Yn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Vn=new J(G.x,G.y,0);Vn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),Cn=!0;const Yn=new J(G.x,G.y,0);Yn.unproject(n.object),n.object.position.sub(Yn).add(Vn),n.object.updateMatrixWorld(),Kt=te.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Kt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Kt).add(n.object.position):(Kg.origin.copy(n.object.position),Kg.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Kg.direction))<S4?e.lookAt(n.target):(MC.setFromNormalAndCoplanarPoint(n.object.up,n.target),Kg.intersectPlane(MC,n.target))))}else n.object instanceof Oa&&n.object.isOrthographicCamera&&(Cn=v!==1,Cn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,U=!1,Cn||We.distanceToSquared(n.object.position)>d||8*(1-Me.dot(n.object.quaternion))>d?(n.dispatchEvent(r),We.copy(n.object.position),Me.copy(n.object.quaternion),Cn=!1,!0):!1}})(),this.connect=te=>{n.domElement=te,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Ge),n.domElement.addEventListener("pointerdown",O),n.domElement.addEventListener("pointercancel",Ee),n.domElement.addEventListener("wheel",ut)},this.dispose=()=>{var te,Pe,et,ee,We,Me;n.domElement&&(n.domElement.style.touchAction="auto"),(te=n.domElement)==null||te.removeEventListener("contextmenu",Ge),(Pe=n.domElement)==null||Pe.removeEventListener("pointerdown",O),(et=n.domElement)==null||et.removeEventListener("pointercancel",Ee),(ee=n.domElement)==null||ee.removeEventListener("wheel",ut),(We=n.domElement)==null||We.ownerDocument.removeEventListener("pointermove",le),(Me=n.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",Ee),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Xe)};const n=this,r={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const d=1e-6,p=new S_,m=new S_;let v=1;const y=new J,A=new Le,w=new Le,M=new Le,S=new Le,T=new Le,b=new Le,B=new Le,F=new Le,N=new Le,z=new J,G=new Le;let U=!1;const L=[],j={};function se(){return 2*Math.PI/60/60*n.autoRotateSpeed}function ie(){return Math.pow(.95,n.zoomSpeed)}function he(te){n.reverseOrbit||n.reverseHorizontalOrbit?m.theta+=te:m.theta-=te}function xe(te){n.reverseOrbit||n.reverseVerticalOrbit?m.phi+=te:m.phi-=te}const me=(()=>{const te=new J;return function(et,ee){te.setFromMatrixColumn(ee,0),te.multiplyScalar(-et),y.add(te)}})(),ge=(()=>{const te=new J;return function(et,ee){n.screenSpacePanning===!0?te.setFromMatrixColumn(ee,1):(te.setFromMatrixColumn(ee,0),te.crossVectors(n.object.up,te)),te.multiplyScalar(et),y.add(te)}})(),H=(()=>{const te=new J;return function(et,ee){const We=n.domElement;if(We&&n.object instanceof ti&&n.object.isPerspectiveCamera){const Me=n.object.position;te.copy(Me).sub(n.target);let De=te.length();De*=Math.tan(n.object.fov/2*Math.PI/180),me(2*et*De/We.clientHeight,n.object.matrix),ge(2*ee*De/We.clientHeight,n.object.matrix)}else We&&n.object instanceof Oa&&n.object.isOrthographicCamera?(me(et*(n.object.right-n.object.left)/n.object.zoom/We.clientWidth,n.object.matrix),ge(ee*(n.object.top-n.object.bottom)/n.object.zoom/We.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function q(te){n.object instanceof ti&&n.object.isPerspectiveCamera||n.object instanceof Oa&&n.object.isOrthographicCamera?v=te:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Q(te){q(v/te)}function W(te){q(v*te)}function re(te){if(!n.zoomToCursor||!n.domElement)return;U=!0;const Pe=n.domElement.getBoundingClientRect(),et=te.clientX-Pe.left,ee=te.clientY-Pe.top,We=Pe.width,Me=Pe.height;G.x=et/We*2-1,G.y=-(ee/Me)*2+1,z.set(G.x,G.y,1).unproject(n.object).sub(n.object.position).normalize()}function ke(te){return Math.max(n.minDistance,Math.min(n.maxDistance,te))}function fe(te){A.set(te.clientX,te.clientY)}function Ce(te){re(te),B.set(te.clientX,te.clientY)}function Ne(te){S.set(te.clientX,te.clientY)}function Ue(te){w.set(te.clientX,te.clientY),M.subVectors(w,A).multiplyScalar(n.rotateSpeed);const Pe=n.domElement;Pe&&(he(2*Math.PI*M.x/Pe.clientHeight),xe(2*Math.PI*M.y/Pe.clientHeight)),A.copy(w),n.update()}function qe(te){F.set(te.clientX,te.clientY),N.subVectors(F,B),N.y>0?Q(ie()):N.y<0&&W(ie()),B.copy(F),n.update()}function vt(te){T.set(te.clientX,te.clientY),b.subVectors(T,S).multiplyScalar(n.panSpeed),H(b.x,b.y),S.copy(T),n.update()}function ft(te){re(te),te.deltaY<0?W(ie()):te.deltaY>0&&Q(ie()),n.update()}function Ut(te){let Pe=!1;switch(te.code){case n.keys.UP:H(0,n.keyPanSpeed),Pe=!0;break;case n.keys.BOTTOM:H(0,-n.keyPanSpeed),Pe=!0;break;case n.keys.LEFT:H(n.keyPanSpeed,0),Pe=!0;break;case n.keys.RIGHT:H(-n.keyPanSpeed,0),Pe=!0;break}Pe&&(te.preventDefault(),n.update())}function tn(){if(L.length==1)A.set(L[0].pageX,L[0].pageY);else{const te=.5*(L[0].pageX+L[1].pageX),Pe=.5*(L[0].pageY+L[1].pageY);A.set(te,Pe)}}function Ct(){if(L.length==1)S.set(L[0].pageX,L[0].pageY);else{const te=.5*(L[0].pageX+L[1].pageX),Pe=.5*(L[0].pageY+L[1].pageY);S.set(te,Pe)}}function $(){const te=L[0].pageX-L[1].pageX,Pe=L[0].pageY-L[1].pageY,et=Math.sqrt(te*te+Pe*Pe);B.set(0,et)}function Mn(){n.enableZoom&&$(),n.enablePan&&Ct()}function Fe(){n.enableZoom&&$(),n.enableRotate&&tn()}function Oe(te){if(L.length==1)w.set(te.pageX,te.pageY);else{const et=at(te),ee=.5*(te.pageX+et.x),We=.5*(te.pageY+et.y);w.set(ee,We)}M.subVectors(w,A).multiplyScalar(n.rotateSpeed);const Pe=n.domElement;Pe&&(he(2*Math.PI*M.x/Pe.clientHeight),xe(2*Math.PI*M.y/Pe.clientHeight)),A.copy(w)}function Be(te){if(L.length==1)T.set(te.pageX,te.pageY);else{const Pe=at(te),et=.5*(te.pageX+Pe.x),ee=.5*(te.pageY+Pe.y);T.set(et,ee)}b.subVectors(T,S).multiplyScalar(n.panSpeed),H(b.x,b.y),S.copy(T)}function Qe(te){const Pe=at(te),et=te.pageX-Pe.x,ee=te.pageY-Pe.y,We=Math.sqrt(et*et+ee*ee);F.set(0,We),N.set(0,Math.pow(F.y/B.y,n.zoomSpeed)),Q(N.y),B.copy(F)}function Re(te){n.enableZoom&&Qe(te),n.enablePan&&Be(te)}function X(te){n.enableZoom&&Qe(te),n.enableRotate&&Oe(te)}function O(te){var Pe,et;n.enabled!==!1&&(L.length===0&&((Pe=n.domElement)==null||Pe.ownerDocument.addEventListener("pointermove",le),(et=n.domElement)==null||et.ownerDocument.addEventListener("pointerup",Ee)),ht(te),te.pointerType==="touch"?ot(te):Ie(te))}function le(te){n.enabled!==!1&&(te.pointerType==="touch"?Ht(te):Te(te))}function Ee(te){var Pe,et,ee;bt(te),L.length===0&&((Pe=n.domElement)==null||Pe.releasePointerCapture(te.pointerId),(et=n.domElement)==null||et.ownerDocument.removeEventListener("pointermove",le),(ee=n.domElement)==null||ee.ownerDocument.removeEventListener("pointerup",Ee)),n.dispatchEvent(o),u=l.NONE}function Ie(te){let Pe;switch(te.button){case 0:Pe=n.mouseButtons.LEFT;break;case 1:Pe=n.mouseButtons.MIDDLE;break;case 2:Pe=n.mouseButtons.RIGHT;break;default:Pe=-1}switch(Pe){case Qc.DOLLY:if(n.enableZoom===!1)return;Ce(te),u=l.DOLLY;break;case Qc.ROTATE:if(te.ctrlKey||te.metaKey||te.shiftKey){if(n.enablePan===!1)return;Ne(te),u=l.PAN}else{if(n.enableRotate===!1)return;fe(te),u=l.ROTATE}break;case Qc.PAN:if(te.ctrlKey||te.metaKey||te.shiftKey){if(n.enableRotate===!1)return;fe(te),u=l.ROTATE}else{if(n.enablePan===!1)return;Ne(te),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(s)}function Te(te){if(n.enabled!==!1)switch(u){case l.ROTATE:if(n.enableRotate===!1)return;Ue(te);break;case l.DOLLY:if(n.enableZoom===!1)return;qe(te);break;case l.PAN:if(n.enablePan===!1)return;vt(te);break}}function ut(te){n.enabled===!1||n.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(te.preventDefault(),n.dispatchEvent(s),ft(te),n.dispatchEvent(o))}function Xe(te){n.enabled===!1||n.enablePan===!1||Ut(te)}function ot(te){switch(Rt(te),L.length){case 1:switch(n.touches.ONE){case qc.ROTATE:if(n.enableRotate===!1)return;tn(),u=l.TOUCH_ROTATE;break;case qc.PAN:if(n.enablePan===!1)return;Ct(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(n.touches.TWO){case qc.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Mn(),u=l.TOUCH_DOLLY_PAN;break;case qc.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Fe(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(s)}function Ht(te){switch(Rt(te),u){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;Oe(te),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;Be(te),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Re(te),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;X(te),n.update();break;default:u=l.NONE}}function Ge(te){n.enabled!==!1&&te.preventDefault()}function ht(te){L.push(te)}function bt(te){delete j[te.pointerId];for(let Pe=0;Pe<L.length;Pe++)if(L[Pe].pointerId==te.pointerId){L.splice(Pe,1);return}}function Rt(te){let Pe=j[te.pointerId];Pe===void 0&&(Pe=new Le,j[te.pointerId]=Pe),Pe.set(te.pageX,te.pageY)}function at(te){const Pe=te.pointerId===L[0].pointerId?L[1]:L[0];return j[Pe.pointerId]}this.dollyIn=(te=ie())=>{W(te),n.update()},this.dollyOut=(te=ie())=>{Q(te),n.update()},this.getScale=()=>v,this.setScale=te=>{q(te),n.update()},this.getZoomScale=()=>ie(),t!==void 0&&this.connect(t),this.update()}};function ty(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const au="srgb",ka="srgb-linear",wC=3001,E4=3e3;class lS extends dr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new R4(t)}),this.register(function(t){return new P4(t)}),this.register(function(t){return new k4(t)}),this.register(function(t){return new H4(t)}),this.register(function(t){return new z4(t)}),this.register(function(t){return new I4(t)}),this.register(function(t){return new D4(t)}),this.register(function(t){return new L4(t)}),this.register(function(t){return new N4(t)}),this.register(function(t){return new b4(t)}),this.register(function(t){return new F4(t)}),this.register(function(t){return new B4(t)}),this.register(function(t){return new O4(t)}),this.register(function(t){return new U4(t)}),this.register(function(t){return new C4(t)}),this.register(function(t){return new G4(t)}),this.register(function(t){return new V4(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const d=Fl.extractUrlBase(e);o=Fl.resolveURL(d,this.path)}else o=Fl.extractUrlBase(e);this.manager.itemStart(e);const l=function(d){r?r(d):console.error(d),s.manager.itemError(e),s.manager.itemEnd(e)},u=new ds(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){try{s.parse(d,o,function(p){t(p),s.manager.itemEnd(e)},l)}catch(p){l(p)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},l={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(ty(new Uint8Array(e.slice(0,4)))===HR){try{o[un.KHR_BINARY_GLTF]=new W4(e)}catch(p){r&&r(p);return}s=JSON.parse(o[un.KHR_BINARY_GLTF].content)}else s=JSON.parse(ty(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new iV(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const p=this.pluginCallbacks[d](u);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[p.name]=p,o[p.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const p=s.extensionsUsed[d],m=s.extensionsRequired||[];switch(p){case un.KHR_MATERIALS_UNLIT:o[p]=new T4;break;case un.KHR_DRACO_MESH_COMPRESSION:o[p]=new j4(s,this.dracoLoader);break;case un.KHR_TEXTURE_TRANSFORM:o[p]=new X4;break;case un.KHR_MESH_QUANTIZATION:o[p]=new J4;break;default:m.indexOf(p)>=0&&l[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}u.setExtensions(o),u.setPlugins(l),u.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function w4(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const un={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class C4{constructor(e){this.parser=e,this.name=un.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let d;const p=new nt(16777215);u.color!==void 0&&p.setRGB(u.color[0],u.color[1],u.color[2],ka);const m=u.range!==void 0?u.range:0;switch(u.type){case"directional":d=new ZA(p),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new qA(p),d.distance=m;break;case"spot":d=new QA(p),d.distance=m,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,d.angle=u.spot.outerConeAngle,d.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return d.position.set(0,0,0),d.decay=2,ba(d,u),u.intensity!==void 0&&(d.intensity=u.intensity),d.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(d),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return n._getNodeRef(t.cache,l,u)})}}class T4{constructor(){this.name=un.KHR_MATERIALS_UNLIT}getMaterialType(){return as}extendParams(e,t,n){const r=[];e.color=new nt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],ka),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,au))}return Promise.all(r)}}class b4{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class R4{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ns}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Le(l,l)}return Promise.all(s)}}class P4{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ns}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class B4{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ns}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class I4{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ns}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new nt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],ka)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,au)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class D4{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ns}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class L4{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ns}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new nt().setRGB(l[0],l[1],l[2],ka),Promise.all(s)}}class N4{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ns}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class F4{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ns}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new nt().setRGB(l[0],l[1],l[2],ka),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,au)),Promise.all(s)}}class U4{constructor(e){this.parser=e,this.name=un.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ns}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class O4{constructor(e){this.parser=e,this.name=un.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ns}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class k4{constructor(e){this.parser=e,this.name=un.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class H4{constructor(e){this.parser=e,this.name=un.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let u=n.textureLoader;if(l.uri){const d=n.options.manager.getHandler(l.uri);d!==null&&(u=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(e,o.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class z4{constructor(e){this.parser=e,this.name=un.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let u=n.textureLoader;if(l.uri){const d=n.options.manager.getHandler(l.uri);d!==null&&(u=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(e,o.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class G4{constructor(e){this.name=un.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const u=r.byteOffset||0,d=r.byteLength||0,p=r.count,m=r.byteStride,v=new Uint8Array(l,u,d);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(p,m,v,r.mode,r.filter).then(function(y){return y.buffer}):o.ready.then(function(){const y=new ArrayBuffer(p*m);return o.decodeGltfBuffer(new Uint8Array(y),p,m,v,r.mode,r.filter),y})})}else return null}}class V4{constructor(e){this.name=un.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const d of r.primitives)if(d.mode!==Is.TRIANGLES&&d.mode!==Is.TRIANGLE_STRIP&&d.mode!==Is.TRIANGLE_FAN&&d.mode!==void 0)return null;const o=n.extensions[this.name].attributes,l=[],u={};for(const d in o)l.push(this.parser.getDependency("accessor",o[d]).then(p=>(u[d]=p,u[d])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(d=>{const p=d.pop(),m=p.isGroup?p.children:[p],v=d[0].count,y=[];for(const A of m){const w=new Nt,M=new J,S=new ki,T=new J(1,1,1),b=new LA(A.geometry,A.material,v);for(let B=0;B<v;B++)u.TRANSLATION&&M.fromBufferAttribute(u.TRANSLATION,B),u.ROTATION&&S.fromBufferAttribute(u.ROTATION,B),u.SCALE&&T.fromBufferAttribute(u.SCALE,B),b.setMatrixAt(B,w.compose(M,S,T));for(const B in u)if(B==="_COLOR_0"){const F=u[B];b.instanceColor=new gu(F.array,F.itemSize,F.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&A.geometry.setAttribute(B,u[B]);dn.prototype.copy.call(b,A),this.parser.assignFinalMaterial(b),y.push(b)}return p.isGroup?(p.clear(),p.add(...y),p):y[0]}))}}const HR="glTF",Kd=12,CC={JSON:1313821514,BIN:5130562};class W4{constructor(e){this.name=un.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Kd);if(this.header={magic:ty(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==HR)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Kd,r=new DataView(e,Kd);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const l=r.getUint32(s,!0);if(s+=4,l===CC.JSON){const u=new Uint8Array(e,Kd+s,o);this.content=ty(u)}else if(l===CC.BIN){const u=Kd+s;this.body=e.slice(u,u+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class j4{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=un.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},u={},d={};for(const p in o){const m=b_[p]||p.toLowerCase();l[m]=o[p]}for(const p in e.attributes){const m=b_[p]||p.toLowerCase();if(o[p]!==void 0){const v=n.accessors[e.attributes[p]],y=pf[v.componentType];d[m]=y.name,u[m]=v.normalized===!0}}return t.getDependency("bufferView",s).then(function(p){return new Promise(function(m,v){r.decodeDracoFile(p,function(y){for(const A in y.attributes){const w=y.attributes[A],M=u[A];M!==void 0&&(w.normalized=M)}m(y)},l,d,ka,v)})})}}class X4{constructor(){this.name=un.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class J4{constructor(){this.name=un.KHR_MESH_QUANTIZATION}}class zR extends Ff{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=l*2,d=l*3,p=r-t,m=(n-t)/p,v=m*m,y=v*m,A=e*d,w=A-d,M=-2*y+3*v,S=y-v,T=1-M,b=S-v+m;for(let B=0;B!==l;B++){const F=o[w+B+l],N=o[w+B+u]*p,z=o[A+B+l],G=o[A+B]*p;s[B]=T*F+b*N+M*z+S*G}return s}}const K4=new ki;class Y4 extends zR{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return K4.fromArray(s).normalize().toArray(s),s}}const Is={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},pf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},TC={9728:Oi,9729:li,9984:dy,9985:ff,9986:nu,9987:Ds},bC={33071:os,33648:yf,10497:Hl},Hx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},b_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...m4>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Pl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Q4={CUBICSPLINE:void 0,LINEAR:Ef,STEP:Mf},zx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function q4(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new $p({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:zo})),i.DefaultMaterial}function jc(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function ba(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Z4(i,e,t){let n=!1,r=!1,s=!1;for(let d=0,p=e.length;d<p;d++){const m=e[d];if(m.POSITION!==void 0&&(n=!0),m.NORMAL!==void 0&&(r=!0),m.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],l=[],u=[];for(let d=0,p=e.length;d<p;d++){const m=e[d];if(n){const v=m.POSITION!==void 0?t.getDependency("accessor",m.POSITION):i.attributes.position;o.push(v)}if(r){const v=m.NORMAL!==void 0?t.getDependency("accessor",m.NORMAL):i.attributes.normal;l.push(v)}if(s){const v=m.COLOR_0!==void 0?t.getDependency("accessor",m.COLOR_0):i.attributes.color;u.push(v)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u)]).then(function(d){const p=d[0],m=d[1],v=d[2];return n&&(i.morphAttributes.position=p),r&&(i.morphAttributes.normal=m),s&&(i.morphAttributes.color=v),i.morphTargetsRelative=!0,i})}function $4(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function eV(i){let e;const t=i.extensions&&i.extensions[un.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Gx(t.attributes):e=i.indices+":"+Gx(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+Gx(i.targets[n]);return e}function Gx(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function R_(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function tV(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const nV=new Nt;class iV{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new w4,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&s<98?this.textureLoader=new Zb(this.options.manager):this.textureLoader=new oR(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ds(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const l={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return jc(s,l,r),ba(l,r),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let l=0,u=o.length;l<u;l++)e[o[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,l)=>{const u=this.associations.get(o);u!=null&&this.associations.set(l,u);for(const[d,p]of o.children.entries())s(p,l.children[d])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[un.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Fl.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=Hx[r.type],l=pf[r.componentType],u=r.normalized===!0,d=new l(r.count*o);return Promise.resolve(new xn(d,o,u))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],u=Hx[r.type],d=pf[r.componentType],p=d.BYTES_PER_ELEMENT,m=p*u,v=r.byteOffset||0,y=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,A=r.normalized===!0;let w,M;if(y&&y!==m){const S=Math.floor(v/y),T="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+S+":"+r.count;let b=t.cache.get(T);b||(w=new d(l,S*y,r.count*y/p),b=new Jp(w,y/p),t.cache.add(T,b)),M=new zl(b,u,v%y/p,A)}else l===null?w=new d(r.count*u):w=new d(l,v,r.count*u),M=new xn(w,u,A);if(r.sparse!==void 0){const S=Hx.SCALAR,T=pf[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,B=r.sparse.values.byteOffset||0,F=new T(o[1],b,r.sparse.count*S),N=new d(o[2],B,r.sparse.count*u);l!==null&&(M=new xn(M.array.slice(),M.itemSize,M.normalized));for(let z=0,G=F.length;z<G;z++){const U=F[z];if(M.setX(U,N[z*u]),u>=2&&M.setY(U,N[z*u+1]),u>=3&&M.setZ(U,N[z*u+2]),u>=4&&M.setW(U,N[z*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const u=n.manager.getHandler(o.uri);u!==null&&(l=u)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],l=s.images[t],u=(l.uri||l.bufferView)+":"+o.sampler;if(this.textureCache[u])return this.textureCache[u];const d=this.loadImageSource(t,n).then(function(p){p.flipY=!1,p.name=o.name||l.name||"",p.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(p.name=l.uri);const v=(s.samplers||{})[o.sampler]||{};return p.magFilter=TC[v.magFilter]||li,p.minFilter=TC[v.minFilter]||Ds,p.wrapS=bC[v.wrapS]||Hl,p.wrapT=bC[v.wrapT]||Hl,r.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[u]=d,d}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(m=>m.clone());const o=r.images[e],l=self.URL||self.webkitURL;let u=o.uri||"",d=!1;if(o.bufferView!==void 0)u=n.getDependency("bufferView",o.bufferView).then(function(m){d=!0;const v=new Blob([m],{type:o.mimeType});return u=l.createObjectURL(v),u});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(u).then(function(m){return new Promise(function(v,y){let A=v;t.isImageBitmapLoader===!0&&(A=function(w){const M=new Gn(w);M.needsUpdate=!0,v(M)}),t.load(Fl.resolveURL(m,s.path),A,void 0,y)})}).then(function(m){return d===!0&&l.revokeObjectURL(u),ba(m,o),m.userData.mimeType=o.mimeType||tV(o.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),m});return this.sourceCache[e]=p,p}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[un.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[un.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=s.associations.get(o);o=s.extensions[un.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,u)}}return r!==void 0&&(typeof r=="number"&&(r=r===wC?au:ka),"colorSpace"in o?o.colorSpace=r:o.encoding=r===au?wC:E4),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new Cy,bi.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new fr,bi.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(r||s||o){let l="ClonedMaterial:"+n.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=n.clone(),s&&(u.vertexColors=!0),o&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(n))),n=u}e.material=n}getMaterialType(){return $p}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const l={},u=s.extensions||{},d=[];if(u[un.KHR_MATERIALS_UNLIT]){const m=r[un.KHR_MATERIALS_UNLIT];o=m.getMaterialType(),d.push(m.extendParams(l,s,t))}else{const m=s.pbrMetallicRoughness||{};if(l.color=new nt(1,1,1),l.opacity=1,Array.isArray(m.baseColorFactor)){const v=m.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],ka),l.opacity=v[3]}m.baseColorTexture!==void 0&&d.push(t.assignTexture(l,"map",m.baseColorTexture,au)),l.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,l.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(d.push(t.assignTexture(l,"metalnessMap",m.metallicRoughnessTexture)),d.push(t.assignTexture(l,"roughnessMap",m.metallicRoughnessTexture))),o=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=po);const p=s.alphaMode||zx.OPAQUE;if(p===zx.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,p===zx.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==as&&(d.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new Le(1,1),s.normalTexture.scale!==void 0)){const m=s.normalTexture.scale;l.normalScale.set(m,m)}if(s.occlusionTexture!==void 0&&o!==as&&(d.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==as){const m=s.emissiveFactor;l.emissive=new nt().setRGB(m[0],m[1],m[2],ka)}return s.emissiveTexture!==void 0&&o!==as&&d.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,au)),Promise.all(d).then(function(){const m=new o(l);return s.name&&(m.name=s.name),ba(m,s),t.associations.set(m,{materials:e}),s.extensions&&jc(r,m,s),m})}createUniqueName(e){const t=mn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(l){return n[un.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return RC(u,l,t)})}const o=[];for(let l=0,u=e.length;l<u;l++){const d=e[l],p=eV(d),m=r[p];if(m)o.push(m.promise);else{let v;d.extensions&&d.extensions[un.KHR_DRACO_MESH_COMPRESSION]?v=s(d):v=RC(new Jt,d,t),r[p]={primitive:d,promise:v},o.push(v)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,l=[];for(let u=0,d=o.length;u<d;u++){const p=o[u].material===void 0?q4(this.cache):this.getDependency("material",o[u].material);l.push(p)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(u){const d=u.slice(0,u.length-1),p=u[u.length-1],m=[];for(let y=0,A=p.length;y<A;y++){const w=p[y],M=o[y];let S;const T=d[y];if(M.mode===Is.TRIANGLES||M.mode===Is.TRIANGLE_STRIP||M.mode===Is.TRIANGLE_FAN||M.mode===void 0)S=s.isSkinnedMesh===!0?new DA(w,T):new ni(w,T),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),M.mode===Is.TRIANGLE_STRIP?S.geometry=SC(S.geometry,CA):M.mode===Is.TRIANGLE_FAN&&(S.geometry=SC(S.geometry,Yv));else if(M.mode===Is.LINES)S=new vo(w,T);else if(M.mode===Is.LINE_STRIP)S=new Va(w,T);else if(M.mode===Is.LINE_LOOP)S=new NA(w,T);else if(M.mode===Is.POINTS)S=new FA(w,T);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(S.geometry.morphAttributes).length>0&&$4(S,s),S.name=t.createUniqueName(s.name||"mesh_"+e),ba(S,s),M.extensions&&jc(r,S,M),t.assignFinalMaterial(S),m.push(S)}for(let y=0,A=m.length;y<A;y++)t.associations.set(m[y],{meshes:e,primitives:y});if(m.length===1)return s.extensions&&jc(r,m[0],s),m[0];const v=new Ia;s.extensions&&jc(r,v,s),t.associations.set(v,{meshes:e});for(let y=0,A=m.length;y<A;y++)v.add(m[y]);return v})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new ti(db.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new Oa(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ba(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,l=[],u=[];for(let d=0,p=o.length;d<p;d++){const m=o[d];if(m){l.push(m);const v=new Nt;s!==null&&v.fromArray(s.array,d*16),u.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[d])}return new Kp(l,u)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],l=[],u=[],d=[],p=[];for(let m=0,v=r.channels.length;m<v;m++){const y=r.channels[m],A=r.samplers[y.sampler],w=y.target,M=w.node,S=r.parameters!==void 0?r.parameters[A.input]:A.input,T=r.parameters!==void 0?r.parameters[A.output]:A.output;w.node!==void 0&&(o.push(this.getDependency("node",M)),l.push(this.getDependency("accessor",S)),u.push(this.getDependency("accessor",T)),d.push(A),p.push(w))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(d),Promise.all(p)]).then(function(m){const v=m[0],y=m[1],A=m[2],w=m[3],M=m[4],S=[];for(let T=0,b=v.length;T<b;T++){const B=v[T],F=y[T],N=A[T],z=w[T],G=M[T];if(B===void 0)continue;B.updateMatrix&&B.updateMatrix();const U=n._createAnimationTracks(B,F,N,z,G);if(U)for(let L=0;L<U.length;L++)S.push(U[L])}return new bf(s,void 0,S)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(l){if(l.isMesh)for(let u=0,d=r.weights.length;u<d;u++)l.morphTargetInfluences[u]=r.weights[u]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],l=r.children||[];for(let d=0,p=l.length;d<p;d++)o.push(n.getDependency("node",l[d]));const u=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),u]).then(function(d){const p=d[0],m=d[1],v=d[2];v!==null&&p.traverse(function(y){y.isSkinnedMesh&&y.bind(v,nV)});for(let y=0,A=m.length;y<A;y++)p.add(m[y]);return p})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",l=[],u=r._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return u&&l.push(u),s.camera!==void 0&&l.push(r.getDependency("camera",s.camera).then(function(d){return r._getNodeRef(r.cameraCache,s.camera,d)})),r._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){l.push(d)}),this.nodeCache[e]=Promise.all(l).then(function(d){let p;if(s.isBone===!0?p=new wy:d.length>1?p=new Ia:d.length===1?p=d[0]:p=new dn,p!==d[0])for(let m=0,v=d.length;m<v;m++)p.add(d[m]);if(s.name&&(p.userData.name=s.name,p.name=o),ba(p,s),s.extensions&&jc(n,p,s),s.matrix!==void 0){const m=new Nt;m.fromArray(s.matrix),p.applyMatrix4(m)}else s.translation!==void 0&&p.position.fromArray(s.translation),s.rotation!==void 0&&p.quaternion.fromArray(s.rotation),s.scale!==void 0&&p.scale.fromArray(s.scale);return r.associations.has(p)||r.associations.set(p,{}),r.associations.get(p).nodes=e,p}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Ia;n.name&&(s.name=r.createUniqueName(n.name)),ba(s,n),n.extensions&&jc(t,s,n);const o=n.nodes||[],l=[];for(let u=0,d=o.length;u<d;u++)l.push(r.getDependency("node",o[u]));return Promise.all(l).then(function(u){for(let p=0,m=u.length;p<m;p++)s.add(u[p]);const d=p=>{const m=new Map;for(const[v,y]of r.associations)(v instanceof bi||v instanceof Gn)&&m.set(v,y);return p.traverse(v=>{const y=r.associations.get(v);y!=null&&m.set(v,y)}),m};return r.associations=d(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],l=e.name?e.name:e.uuid,u=[];Pl[s.path]===Pl.weights?e.traverse(function(v){v.morphTargetInfluences&&u.push(v.name?v.name:v.uuid)}):u.push(l);let d;switch(Pl[s.path]){case Pl.weights:d=yu;break;case Pl.rotation:d=xu;break;case Pl.position:case Pl.scale:d=_u;break;default:n.itemSize===1?d=yu:d=_u;break}const p=r.interpolation!==void 0?Q4[r.interpolation]:Ef,m=this._getArrayFromAccessor(n);for(let v=0,y=u.length;v<y;v++){const A=new d(u[v]+"."+Pl[s.path],t.array,m,p);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(A),o.push(A)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=R_(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof xu?Y4:zR;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function rV(i,e,t){const n=e.attributes,r=new hr;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],u=l.min,d=l.max;if(u!==void 0&&d!==void 0){if(r.set(new J(u[0],u[1],u[2]),new J(d[0],d[1],d[2])),l.normalized){const p=R_(pf[l.componentType]);r.min.multiplyScalar(p),r.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new J,u=new J;for(let d=0,p=s.length;d<p;d++){const m=s[d];if(m.POSITION!==void 0){const v=t.json.accessors[m.POSITION],y=v.min,A=v.max;if(y!==void 0&&A!==void 0){if(u.setX(Math.max(Math.abs(y[0]),Math.abs(A[0]))),u.setY(Math.max(Math.abs(y[1]),Math.abs(A[1]))),u.setZ(Math.max(Math.abs(y[2]),Math.abs(A[2]))),v.normalized){const w=R_(pf[v.componentType]);u.multiplyScalar(w)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}i.boundingBox=r;const o=new Qi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function RC(i,e,t){const n=e.attributes,r=[];function s(o,l){return t.getDependency("accessor",o).then(function(u){i.setAttribute(l,u)})}for(const o in n){const l=b_[o]||o.toLowerCase();l in i.attributes||r.push(s(n[o],l))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(l){i.setIndex(l)});r.push(o)}return ba(i,e),rV(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Z4(i,e.targets,t):i})}const sV={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},oV={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},Vx=new WeakMap;class aV extends dr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new ds(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,l).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const u in t.attributeTypes){const d=t.attributeTypes[u];d.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[u]=d.name)}const n=JSON.stringify(t);if(Vx.has(e)){const u=Vx.get(e);if(u.key===n)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,l=this._getWorker(s,o).then(u=>(r=u,new Promise((d,p)=>{r._callbacks[s]={resolve:d,reject:p},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Vx.set(e,{key:n,promise:l}),l}_createGeometry(e){const t=new Jt;e.index&&t.setIndex(new xn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,o=r.array,l=r.itemSize;t.setAttribute(s,new xn(o,l))}return t}_loadLibrary(e,t){const n=new ds(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=lV.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function lV(){let i,e;onmessage=function(o){const l=o.data;switch(l.type){case"init":i=l.decoderConfig,e=new Promise(function(p){i.onModuleLoaded=function(m){p({draco:m})},DracoDecoderModule(i)});break;case"decode":const u=l.buffer,d=l.taskConfig;e.then(p=>{const m=p.draco,v=new m.Decoder,y=new m.DecoderBuffer;y.Init(new Int8Array(u),u.byteLength);try{const A=t(m,v,y,d),w=A.attributes.map(M=>M.array.buffer);A.index&&w.push(A.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:A},w)}catch(A){console.error(A),self.postMessage({type:"error",id:l.id,error:A.message})}finally{m.destroy(y),m.destroy(v)}});break}};function t(o,l,u,d){const p=d.attributeIDs,m=d.attributeTypes;let v,y;const A=l.GetEncodedGeometryType(u);if(A===o.TRIANGULAR_MESH)v=new o.Mesh,y=l.DecodeBufferToMesh(u,v);else if(A===o.POINT_CLOUD)v=new o.PointCloud,y=l.DecodeBufferToPointCloud(u,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const w={index:null,attributes:[]};for(const M in p){const S=self[m[M]];let T,b;if(d.useUniqueIDs)b=p[M],T=l.GetAttributeByUniqueId(v,b);else{if(b=l.GetAttributeId(v,o[p[M]]),b===-1)continue;T=l.GetAttribute(v,b)}w.attributes.push(r(o,l,v,M,S,T))}return A===o.TRIANGULAR_MESH&&(w.index=n(o,l,v)),o.destroy(v),w}function n(o,l,u){const p=u.num_faces()*3,m=p*4,v=o._malloc(m);l.GetTrianglesUInt32Array(u,m,v);const y=new Uint32Array(o.HEAPF32.buffer,v,p).slice();return o._free(v),{array:y,itemSize:1}}function r(o,l,u,d,p,m){const v=m.num_components(),A=u.num_points()*v,w=A*p.BYTES_PER_ELEMENT,M=s(o,p),S=o._malloc(w);l.GetAttributeDataArrayForAllPoints(u,m,M,w,S);const T=new p(o.HEAPF32.buffer,S,A).slice();return o._free(S),{name:d,array:T,itemSize:v}}function s(o,l){switch(l){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Yg;const Wx=()=>{if(Yg)return Yg;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=i;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(l(r),{}).then(m=>{s=m.instance,s.exports.__wasm_call_ctors()});function l(m){const v=new Uint8Array(m.length);for(let A=0;A<m.length;++A){const w=m.charCodeAt(A);v[A]=w>96?w-71:w>64?w-65:w>47?w+4:w>46?63:62}let y=0;for(let A=0;A<m.length;++A)v[y++]=v[A]<60?n[v[A]]:(v[A]-60)*64+v[++A];return v.buffer.slice(0,y)}function u(m,v,y,A,w,M){const S=s.exports.sbrk,T=y+3&-4,b=S(T*A),B=S(w.length),F=new Uint8Array(s.exports.memory.buffer);F.set(w,B);const N=m(b,y,A,B,w.length);if(N===0&&M&&M(b,T,A),v.set(F.subarray(b,b+y*A)),S(b-S(0)),N!==0)throw new Error(`Malformed buffer data: ${N}`)}const d={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},p={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Yg={ready:o,supported:!0,decodeVertexBuffer(m,v,y,A,w){u(s.exports.meshopt_decodeVertexBuffer,m,v,y,A,s.exports[d[w]])},decodeIndexBuffer(m,v,y,A){u(s.exports.meshopt_decodeIndexBuffer,m,v,y,A)},decodeIndexSequence(m,v,y,A){u(s.exports.meshopt_decodeIndexSequence,m,v,y,A)},decodeGltfBuffer(m,v,y,A,w,M){u(s.exports[p[w]],m,v,y,A,s.exports[d[M]])}},Yg};let Qg=null,GR="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function VR(i=!0,e=!0,t){return n=>{t&&t(n),i&&(Qg||(Qg=new aV),Qg.setDecoderPath(typeof i=="string"?i:GR),n.setDRACOLoader(Qg)),e&&n.setMeshoptDecoder(typeof Wx=="function"?Wx():Wx)}}const nm=(i,e,t,n)=>tm(lS,i,VR(e,t,n));nm.preload=(i,e,t,n)=>tm.preload(lS,i,VR(e,t,n));nm.clear=i=>tm.clear(lS,i);nm.setDecoderPath=i=>{GR=i};const cV=Z.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:l,onEnd:u,...d},p)=>{const m=Lo(N=>N.invalidate),v=Lo(N=>N.camera),y=Lo(N=>N.gl),A=Lo(N=>N.events),w=Lo(N=>N.setEvents),M=Lo(N=>N.set),S=Lo(N=>N.get),T=Lo(N=>N.performance),b=e||v,B=n||A.connected||y.domElement,F=Z.useMemo(()=>new M4(b),[b]);return DR(()=>{F.enabled&&F.update()},-1),Z.useEffect(()=>(s&&F.connect(s===!0?B:s),F.connect(B),()=>{F.dispose()}),[s,B,t,F,m]),Z.useEffect(()=>{const N=U=>{m(),t&&T.regress(),o&&o(U)},z=U=>{l&&l(U)},G=U=>{u&&u(U)};return F.addEventListener("change",N),F.addEventListener("start",z),F.addEventListener("end",G),()=>{F.removeEventListener("start",z),F.removeEventListener("end",G),F.removeEventListener("change",N)}},[o,l,u,F,m,w]),Z.useEffect(()=>{if(i){const N=S().controls;return M({controls:F}),()=>M({controls:N})}},[i,F]),Z.createElement("primitive",ey({ref:p,object:F,enableDamping:r},d))}),uV=Z.forwardRef(({scale:i=10,frames:e=1/0,opacity:t=1,width:n=1,height:r=1,blur:s=1,near:o=0,far:l=10,resolution:u=512,smooth:d=!0,color:p="#000000",depthWrite:m=!1,renderOrder:v,...y},A)=>{const w=Z.useRef(null),M=Lo(he=>he.scene),S=Lo(he=>he.gl),T=Z.useRef(null);n=n*(Array.isArray(i)?i[0]:i||1),r=r*(Array.isArray(i)?i[1]:i||1);const[b,B,F,N,z,G,U]=Z.useMemo(()=>{const he=new Ls(u,u),xe=new Ls(u,u);xe.texture.generateMipmaps=he.texture.generateMipmaps=!1;const me=new Tu(n,r).rotateX(Math.PI/2),ge=new ni(me),H=new zy;H.depthTest=H.depthWrite=!1,H.onBeforeCompile=W=>{W.uniforms={...W.uniforms,ucolor:{value:new nt(p)}},W.fragmentShader=W.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),W.fragmentShader=W.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const q=new fs(sV),Q=new fs(oV);return Q.depthTest=q.depthTest=!1,[he,me,H,ge,q,Q,xe]},[u,n,r,i,p]),L=he=>{N.visible=!0,N.material=z,z.uniforms.tDiffuse.value=b.texture,z.uniforms.h.value=he*1/256,S.setRenderTarget(U),S.render(N,T.current),N.material=G,G.uniforms.tDiffuse.value=U.texture,G.uniforms.v.value=he*1/256,S.setRenderTarget(b),S.render(N,T.current),N.visible=!1};let j=0,se,ie;return DR(()=>{T.current&&(e===1/0||j<e)&&(j++,se=M.background,ie=M.overrideMaterial,w.current.visible=!1,M.background=null,M.overrideMaterial=F,S.setRenderTarget(b),S.render(M,T.current),L(s),d&&L(s*.4),S.setRenderTarget(null),w.current.visible=!0,M.overrideMaterial=ie,M.background=se)}),Z.useImperativeHandle(A,()=>w.current,[]),Z.createElement("group",ey({"rotation-x":Math.PI/2},y,{ref:w}),Z.createElement("mesh",{renderOrder:v,geometry:B,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},Z.createElement("meshBasicMaterial",{transparent:!0,map:b.texture,opacity:t,depthWrite:m})),Z.createElement("orthographicCamera",{ref:T,args:[-n/2,n/2,r/2,-r/2,o,l]}))}),hV=["body","paint","carpaint","exterior","bonnet","hood","door","fender","panel"],fV=["chrome","trim","rim","wheel","detail","grill","logo","metal","line"];function PC(i){return i.isMesh===!0}function BC(i,e){return e.some(t=>i.includes(t))}function dV({bodyColor:i,accentColor:e}){const{scene:t}=nm("/models/maybach.glb"),n=Z.useMemo(()=>{const r=t.clone(!0);return r.traverse(s=>{!PC(s)||!s.material||(Array.isArray(s.material)?s.material=s.material.map(o=>o.clone()):s.material=s.material.clone())}),r},[t]);return Z.useEffect(()=>{const r=new nt(i),s=new nt(e);n.traverse(o=>{if(!PC(o)||!o.material)return;(Array.isArray(o.material)?o.material:[o.material]).forEach(u=>{if(!("color"in u))return;const d=`${o.name} ${u.name}`.toLowerCase();if(BC(d,hV)){u.color.copy(r),u.metalness=Math.max(u.metalness??.25,.4),u.roughness=Math.min(u.roughness??.5,.34),u.needsUpdate=!0;return}BC(d,fV)&&(u.color.copy(s),u.metalness=Math.max(u.metalness??.4,.88),u.roughness=Math.min(u.roughness??.35,.22),u.needsUpdate=!0)})})},[n,i,e]),D.jsx("primitive",{object:n})}nm.preload("/models/maybach.glb");function pV({bodyColor:i,accentColor:e,heroLightOn:t}){return D.jsxs(p4,{dpr:[1,1.5],camera:{position:[4.8,1.42,4.9],fov:30},gl:{antialias:!0,alpha:!0},children:[D.jsx("ambientLight",{intensity:t?.78:.38}),D.jsx("directionalLight",{position:[8.5,7,3.5],intensity:t?3.65:.35,color:"#ffe4bb"}),D.jsx("directionalLight",{position:[-6,3.4,-6.3],intensity:t?1.7:.72,color:"#a8bfff"}),D.jsx("directionalLight",{position:[0,2.2,-8],intensity:t?1.28:.34,color:"#fff3de"}),D.jsx("directionalLight",{position:[-2.6,1.7,5.6],intensity:t?1.02:.34,color:"#f5f2eb"}),t?D.jsxs(D.Fragment,{children:[D.jsx("pointLight",{position:[2.95,-.28,2.55],distance:8,decay:1.35,intensity:1.68,color:"#f4efe2"}),D.jsx("pointLight",{position:[-3.25,-.2,-1.65],distance:8.5,decay:1.3,intensity:1.24,color:"#f2ead8"})]}):null,D.jsxs(Z.Suspense,{fallback:null,children:[D.jsx("group",{position:[0,-.92,0],scale:.88,children:D.jsx(dV,{bodyColor:i,accentColor:e})}),D.jsx(uV,{position:[0,-1.5,0],opacity:t?.36:.12,blur:2.15,scale:22,far:9})]}),D.jsx(cV,{enablePan:!1,enableZoom:!1,minDistance:4.2,maxDistance:6.3,minPolarAngle:Math.PI/3.3,maxPolarAngle:Math.PI/2.08,enableDamping:!0,dampingFactor:.08})]})}const IC=[{name:"Cartier Black",value:"#0A0A0A"},{name:"Satin Noir",value:"#151515"},{name:"Cartier Gold",value:"#C8A35A"},{name:"Antique Gold",value:"#B08A45"},{name:"Champagne Gold",value:"#D6BE8A"},{name:"Ivory Lacquer",value:"#F4F0E6"},{name:"Deep Burgundy",value:"#4A1014"},{name:"Ruby Oxblood",value:"#5A0F18"}];function mV({bodyColor:i,accentColor:e,heroLightOn:t,onBodyColor:n,onAccentColor:r,onReset:s,onToggleHeroLight:o}){return D.jsxs("div",{className:"cmControlsTray",children:[D.jsx("div",{className:"cmControlTitle",children:"Concept Finishes"}),D.jsxs("div",{className:"cmControlGroup",children:[D.jsx("div",{className:"cmControlTitle",children:"Body Finish"}),D.jsx("div",{className:"cmSwatchGrid",children:IC.map(l=>D.jsxs("button",{type:"button",className:`cmSwatch${i.toLowerCase()===l.value.toLowerCase()?" is-active":""}`,onClick:()=>n(l.value),"aria-label":`Set body finish to ${l.name}`,title:l.name,children:[D.jsx("span",{className:"cmSwatchDot",style:{backgroundColor:l.value}}),D.jsx("span",{children:l.name})]},`body-${l.value}`))})]}),D.jsxs("div",{className:"cmControlGroup",children:[D.jsx("div",{className:"cmControlTitle",children:"Accent Finish"}),D.jsx("div",{className:"cmSwatchGrid",children:IC.map(l=>D.jsxs("button",{type:"button",className:`cmSwatch${e.toLowerCase()===l.value.toLowerCase()?" is-active":""}`,onClick:()=>r(l.value),"aria-label":`Set accent finish to ${l.name}`,title:l.name,children:[D.jsx("span",{className:"cmSwatchDot",style:{backgroundColor:l.value}}),D.jsx("span",{children:l.name})]},`accent-${l.value}`))})]}),D.jsxs("div",{className:"cmControlRow",children:[D.jsxs("button",{type:"button",className:`cmLightToggle${t?" is-on":""}`,onClick:o,"aria-pressed":t,children:[D.jsxs("svg",{viewBox:"0 0 24 24",className:"cmBulbIcon","aria-hidden":"true",children:[D.jsx("path",{d:"M12 3.2a6.1 6.1 0 0 0-4.2 10.55c.8.75 1.4 1.72 1.64 2.75h5.16c.24-1.03.84-2 1.64-2.75A6.1 6.1 0 0 0 12 3.2Z"}),D.jsx("path",{d:"M9.6 18.1h4.8M10.2 20h3.6"}),D.jsx("path",{d:"M12 1.8v1.6M4.9 4.9l1.2 1.2M2 12h1.6M19.1 4.9l-1.2 1.2M20.4 12H22"})]}),D.jsx("span",{children:"Hero Light"})]}),D.jsx("button",{type:"button",className:"cmResetBtn",onClick:s,children:"Reset to Signature"})]})]})}const DC="#0A0A0A",LC="#C8A35A";function gV(){const i=Pf(),[e,t]=Z.useState(DC),[n,r]=Z.useState(LC),[s,o]=Z.useState(!0),[l,u]=Z.useState(!!i.state?.fromMaybachLoader),[d,p]=Z.useState(!0),[m,v]=Z.useState("Click and Drag");return Z.useEffect(()=>{if(!l)return;const y=window.setTimeout(()=>u(!1),300);return()=>window.clearTimeout(y)},[l]),Z.useEffect(()=>(document.body.classList.add("cmRoute"),()=>{document.body.classList.remove("cmRoute")}),[]),Z.useEffect(()=>{window.matchMedia("(pointer: coarse)").matches&&v("Drag to Rotate");const A=window.setTimeout(()=>p(!1),5e3);return()=>window.clearTimeout(A)},[]),D.jsxs("div",{className:"cmPage",children:[D.jsxs("header",{className:"cmHeader",children:[D.jsx("div",{children:"Cartier  Maybach"}),D.jsxs("nav",{children:[D.jsx("a",{href:"#model",children:"Model"}),D.jsx("a",{href:"#concept",children:"Concept"}),D.jsx("a",{href:"#activation",children:"Activation"}),D.jsx("a",{href:"#impact",children:"Impact"}),D.jsx(ip,{to:"/",children:"Back to Portfolio"})]})]}),D.jsxs("section",{className:"cmHero",children:[D.jsxs("div",{className:"cmHeroContent",children:[D.jsx("h1",{children:"Cartier  Maybach"}),D.jsx("p",{className:"cmSubtitle",children:"A mobile luxury gallery concept for high-net-worth urban audiences"}),D.jsx("p",{children:"The concept extends Cartier Rogue into a moving luxury stage: bespoke Maybach vehicles transformed into mobile Cartier galleries, merging ultra-luxury automotive design with high-jewelry storytelling in city environments."}),D.jsx("p",{children:"From luxury districts and private events to art fairs and nightlife corridors, the activation creates a premium encounter format that keeps Cartier visible where affluent audiences already gather, while maintaining high editorial control across each city drop."}),D.jsxs("div",{className:"cmMeta",children:[D.jsx("span",{children:"Format: Luxury Pop-Up Activation"}),D.jsx("span",{children:"Brand Direction: Cartier (Campaign Extension)"}),D.jsx("span",{children:"Mobility Platform: Maybach"}),D.jsx("span",{children:"Focus: Experience + Storytelling + Conversion"})]})]}),D.jsxs("div",{className:"cmChips",children:[D.jsx("span",{children:"Immersive"}),D.jsx("span",{children:"Mobile"}),D.jsx("span",{children:"High-touch"}),D.jsx("span",{children:"Luxury CRM"})]})]}),D.jsxs("section",{id:"model",className:"cmModelSection",children:[D.jsx(Nn.div,{className:"cmToolbarWrap",initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.35},transition:{duration:.35},children:D.jsx(mV,{bodyColor:e,accentColor:n,heroLightOn:s,onBodyColor:t,onAccentColor:r,onToggleHeroLight:()=>o(y=>!y),onReset:()=>{t(DC),r(LC),o(!0)}})}),D.jsxs("div",{className:"cmModelStage",children:[D.jsx(pV,{bodyColor:e,accentColor:n,heroLightOn:s}),d?D.jsx(Nn.div,{className:"cmDragHint",initial:{opacity:0},animate:{opacity:[.42,.95,.42],scale:[1,1.03,1]},transition:{duration:1.6,repeat:1/0,ease:"easeInOut"},children:m}):null]})]}),D.jsxs("section",{className:"cmFilmSection","aria-labelledby":"campaign-film-title",children:[D.jsx("h2",{id:"campaign-film-title",children:"Campaign Film"}),D.jsx("p",{className:"cmFilmSubtitle",children:"A cinematic preview of the mobile luxury gallery activation across city-night touchpoints."}),D.jsx("p",{className:"cmFilmLead",children:"This film communicates the mood, movement, and urban staging logic behind the Cartier x Maybach concept."}),D.jsx("div",{className:"cmFilmFrame",children:D.jsx("iframe",{title:"Cartier x Maybach Campaign Film",src:"https://www.youtube-nocookie.com/embed/6uw1hpW63Cg",loading:"lazy",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}),D.jsx("a",{className:"cmFilmLink",href:"https://youtu.be/6uw1hpW63Cg?si=UbntEOAya-QT-DJv",target:"_blank",rel:"noreferrer noopener",children:"Watch on YouTube"})]}),D.jsxs("section",{className:"cmSection",children:[D.jsx("h2",{children:"Strategic Concept"}),D.jsxs("div",{className:"cmGrid",children:[D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Campaign Intent"}),D.jsx("p",{children:"Cartier Rogues narrative is translated from static communication into a physical urban format. The car becomes a mobile expression of Cartier codes that can enter high-value cultural contexts."})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Audience Fit"}),D.jsx("p",{children:"The concept is built for HNW and culturally influential audiences who respond to private, discoverable experiences over traditional mass-format retail impressions."})]})]})]}),D.jsxs("section",{className:"cmSection",children:[D.jsx("h2",{children:"Experience Journey"}),D.jsxs("div",{className:"cmGrid",children:[D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"On-Site Sequence"}),D.jsxs("ul",{children:[D.jsx("li",{children:"Exterior hook and controlled arrival sequence establish rarity"}),D.jsx("li",{children:"Concierge-led movement into curated viewing and storytelling zones"}),D.jsx("li",{children:"Contextualized product narratives tied to identity and occasion"}),D.jsx("li",{children:"Private consultation capture and appointment handoff"})]})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Digital Companion Layer"}),D.jsxs("ul",{children:[D.jsx("li",{children:"Location-driven social clues and treasure-hunt reveal cadence"}),D.jsx("li",{children:"RSVP and QR touchpoints for intent capture and follow-up routing"}),D.jsx("li",{children:"Editorial content moments designed for premium social amplification"})]})]})]})]}),D.jsxs("section",{className:"cmSection",children:[D.jsx("h2",{children:"Concept Finishes"}),D.jsx("p",{className:"cmLead",children:"Cartier finish studies are calibrated for campaign mood control across city environments. Body and accent selections can be previewed live for deployment alignment."}),D.jsx("p",{className:"cmLead",children:"The toolbar above the vehicle controls signature finishes and key-light behavior in real time, allowing rapid concept calibration without interrupting narrative flow."})]}),D.jsxs("section",{id:"concept",className:"cmSection",children:[D.jsx("h2",{children:"Concept Narrative"}),D.jsxs("div",{className:"cmGrid",children:[D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Strategic Idea"}),D.jsx("p",{children:"A fleet-based luxury pop-up that converts mobility into brand theatre, turning each stop into a Cartier encounter rather than a passive display."})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Why Maybach  Cartier"}),D.jsx("p",{children:"Both brands operate at the intersection of craft, prestige, and emotional status signaling. The partnership creates immediate category adjacency without diluting either identity."})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Experience Language"}),D.jsx("p",{children:"Cinematic settings, curated displays within Maybach interiors, and editorial lighting cues reinforce luxury, rebellion, and emotional resonance consistent with the Cartier Rogue direction."})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Campaign Role"}),D.jsx("p",{children:"This activation extends campaign visibility from image to lived experience: premium attention capture, qualified relationship intake, and conversion handoff into clienteling."})]})]})]}),D.jsxs("section",{id:"activation",className:"cmSection",children:[D.jsx("h2",{children:"Pop-Up Activation Blueprint"}),D.jsxs("div",{className:"cmGrid",children:[D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Experience Journey"}),D.jsxs("ul",{children:[D.jsx("li",{children:"Arrival via strong exterior visual hook and chauffeur-led reveal"}),D.jsx("li",{children:"Guided discovery inside curated Cartier collection moments"}),D.jsx("li",{children:"Product storytelling mapped to style, occasion, and identity cues"}),D.jsx("li",{children:"VIP consult and appointment capture for private follow-up"}),D.jsx("li",{children:"Conversion pathway into post-event clienteling and concierge outreach"})]})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Activation Components"}),D.jsxs("ul",{children:[D.jsx("li",{children:"Bespoke vehicle exterior transformation for campaign consistency"}),D.jsx("li",{children:"Hero display zones and high-photogenic editorial moments"}),D.jsx("li",{children:"Street-light inspired lighting strategy for premium night visibility"}),D.jsx("li",{children:"Brand ambassadors trained for narrative and product context"}),D.jsx("li",{children:"QR, RSVP, CRM capture, and social treasure-hunt tie-ins"}),D.jsx("li",{children:"Deployable across luxury districts, VIP events, art fairs, and fashion-week satellites"})]})]})]})]}),D.jsxs("section",{className:"cmSection",children:[D.jsx("h2",{children:"Operations & Management"}),D.jsxs("div",{className:"cmGrid",children:[D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Execution Model"}),D.jsx("p",{children:"Run as a modular city circuit with pre-cleared permits, timed stop windows, and a daily route playbook. Each stop uses a concise setup protocol to preserve consistency and reduce downtime."})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Staffing & Security"}),D.jsx("p",{children:"Concierge lead, product specialist, crowd-flow support, and security team operate in fixed roles. Inventory handling uses controlled display rotation, locked storage, and custody logs."})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"CRM Workflow"}),D.jsx("p",{children:"Each interaction captures intent level, product interest, and follow-up preference. Leads are tagged by city and event context, then routed into boutique/client advisor follow-through."})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Partnership Layer"}),D.jsx("p",{children:"High-fit deployment partners include luxury hotels, private members clubs, art fairs, premium retail districts, and invitation-only previews to maintain audience quality."})]})]})]}),D.jsxs("section",{id:"impact",className:"cmSection",children:[D.jsx("h2",{children:"Impact & Brand Value"}),D.jsxs("div",{className:"cmGrid",children:[D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Expected Outcomes"}),D.jsxs("ul",{children:[D.jsx("li",{children:"Higher memorability through moving brand theatre, not static display"}),D.jsx("li",{children:"Deeper HNW engagement through intimate, high-touch interactions"}),D.jsx("li",{children:"Social amplification via location reveals and visual exclusivity"}),D.jsx("li",{children:"Appointment and consultation pipeline for boutique conversion"}),D.jsx("li",{children:"Clear top-of-funnel to clienteling handoff structure"}),D.jsx("li",{children:"Portable deployment model for multi-city luxury activations"})]})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Strategic Positioning"}),D.jsx("p",{children:"The concept positions Cartier Rogue as more than product communication: an emblem of modern elegance and fearless self-expression brought into live urban culture touchpoints."})]})]})]}),D.jsxs("section",{className:"cmSection",children:[D.jsx("h2",{children:"Closing Perspective"}),D.jsxs("div",{className:"cmGrid",children:[D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Why This Format Matters"}),D.jsx("p",{children:"A mobile luxury gallery offers controlled exclusivity, adaptive city deployment, and stronger memory value than static retail-only touchpoints, while feeding direct relationship workflows."})]}),D.jsxs("article",{className:"cmCard",children:[D.jsx("h3",{children:"Program Potential"}),D.jsx("p",{children:"The model supports repeatable launches across luxury districts, airports, art events, and invitation circuits, with each deployment tuned to audience density and campaign objective."})]})]})]}),D.jsxs("footer",{className:"cmFooter",children:[D.jsx(ip,{to:"/",children:"Back to Portfolio"}),D.jsx(ip,{to:"/",children:"Return to Cartier Exhibit"})]}),D.jsx(pA,{open:l,text:"ENTERING CARTIER  MAYBACH"})]})}const Xc="/assets/cartier-rogue/new%20photos",vV="/assets/cartier-rogue/old%20photos",yV="",Rs=i=>`${vV}/${encodeURIComponent(i)}`,Ps=i=>`Screenshot 2026-02-23 at ${i}${yV}PM.png`,Yd=[`${Xc}/Shreyash_a_victoria_era_lady_in_regal_clothing_and_regal_cart_4ecb160e-9879-4bbd-9769-71fb41ec1189_1.png`,`${Xc}/Shreyash_a_victoria_era_lady_in_regal_clothing_and_regal_cart_9096dd56-6bd1-4ff8-9b05-67b4cc0c05f9_1.png`,`${Xc}/Shreyash_a_victoria_era_lady_in_regal_clothing_and_regal_cart_9096dd56-6bd1-4ff8-9b05-67b4cc0c05f9_2.png`,`${Xc}/Shreyash_a_victoria_era_lady_in_regal_clothing_and_regal_cart_4ecb160e-9879-4bbd-9769-71fb41ec1189_3.png`,`${Xc}/Shreyash_a_victoria_era_lady_in_regal_clothing_and_regal_cart_c6d5c6af-2d41-4884-b76e-07b4d712a1b6_3.png`,`${Xc}/Shreyash_a_victoria_era_lady_in_regal_clothing_and_regal_cart_d9181ea4-ed70-48e3-bbdf-067941ba3824_3.png`,`${Xc}/Shreyash_slow_motion_240_fps_cinematic_steadycam_track_from_b_199ead9e-9e48-4ccd-849f-1f4305486e74_0.png`],wr={lookbook:Rs(Ps("11.50.16")),moodboard:Rs(Ps("11.50.28")),braceletA:Rs(Ps("11.50.37")),braceletB:Rs(Ps("11.50.48")),banner:Rs(Ps("11.50.59")),oohNight:Rs(Ps("11.51.11")),billboardVar:Rs(Ps("11.51.19")),phone:Rs(Ps("11.51.32")),streetBillboard:Rs(Ps("11.51.40")),busShelter:Rs(Ps("11.51.54")),cityScreen:Rs(Ps("11.52.01")),airport:Rs(Ps("11.52.10"))},Qd={hidden:{opacity:0,y:22},show:{opacity:1,y:0,transition:{duration:.52,ease:[.2,.65,.2,1]}}};function Jc({visual:i,className:e=""}){return D.jsxs(Nn.figure,{className:`crSupportCard ${i.kind==="portrait"?"is-portrait":"is-landscape"} ${i.fit==="contain"?"is-contain":""} ${e}`.trim(),whileHover:{scale:1.02},transition:{duration:.2,ease:"easeOut"},children:[D.jsx("img",{src:i.src,alt:i.alt,loading:"lazy",style:i.position?{objectPosition:i.position}:void 0}),D.jsx("figcaption",{children:i.caption})]})}function xV(){const i=D_(),e=Pf(),[t,n]=Z.useState(!!e.state?.fromRogueTransition),[r,s]=Z.useState(!1),o=Z.useRef(null);Z.useEffect(()=>(document.body.classList.add("crRoute"),()=>document.body.classList.remove("crRoute")),[]),Z.useEffect(()=>{if(!t)return;const m=window.setTimeout(()=>n(!1),760);return()=>window.clearTimeout(m)},[t]),Z.useEffect(()=>()=>{o.current!==null&&window.clearTimeout(o.current)},[]);const l=()=>{r||(s(!0),o.current=window.setTimeout(()=>{i("/cartier-maybach",{state:{fromMaybachLoader:!0}}),s(!1),o.current=null},950))},u=Z.useMemo(()=>[{key:"What",body:"Cartier Rogue is a speculative campaign platform spanning editorial, digital, OOH, and experiential touchpoints."},{key:"Who",body:"Culture-led younger luxury audiences: identity-driven, fashion-native, globally aware, and emotionally selective."},{key:"Why",body:"To reposition heritage symbols for contemporary relevance without diluting Cartier craft authority."},{key:"Where",body:"Urban luxury environments, premium OOH placements, and digital-first discovery channels in global cities."},{key:"When",body:"Seasonal cadence: tease, reveal, amplify, and activate with measurable narrative continuity."}],[]),d=Z.useMemo(()=>[{src:wr.lookbook,alt:"Cartier Rogue lookbook cover proof",caption:"Lookbook Cover",kind:"landscape",fit:"contain"},{src:wr.oohNight,alt:"Cartier Rogue OOH street placement proof",caption:"OOH Street Placement",kind:"landscape"},{src:wr.busShelter,alt:"Cartier Rogue transit poster proof",caption:"Transit Poster",kind:"portrait",fit:"contain"},{src:wr.braceletA,alt:"Cartier Rogue jewelry detail frame proof",caption:"Jewelry Detail Frame",kind:"landscape",fit:"contain"},{src:wr.phone,alt:"Cartier Rogue digital campaign panel proof",caption:"Digital Campaign Panel",kind:"portrait",fit:"contain"}],[]),p=Z.useMemo(()=>[{phase:"01",title:"Visual Tease",body:"Controlled early visuals establish tone and symbolic intrigue before narrative disclosure.",channels:["OOH","Social"],visual:{src:wr.banner,alt:"Cartier Rogue teaser banner proof",caption:"Teaser Banner",kind:"landscape",fit:"contain"}},{phase:"02",title:"Editorial Reveal",body:"Portrait-led campaign imagery introduces the new sovereign persona and product authority.",channels:["Editorial","Film"],visual:{src:wr.streetBillboard,alt:"Cartier Rogue editorial reveal billboard proof",caption:"Editorial Reveal Frame",kind:"landscape",fit:"contain"}},{phase:"03",title:"OOH Penetration",body:"High-traffic city placements scale visibility while preserving premium visual discipline.",channels:["OOH","Press"],visual:{src:wr.billboardVar,alt:"Cartier Rogue OOH penetration proof",caption:"City Billboard Variant",kind:"landscape",fit:"contain"}},{phase:"04",title:"Social Amplification",body:"Digital storytelling turns campaign symbols into repeatable cultural conversation moments.",channels:["Social","Digital"],visual:{src:wr.cityScreen,alt:"Cartier Rogue digital amplification proof",caption:"Digital City Screen",kind:"portrait",fit:"contain"}},{phase:"05",title:"Experiential Activation",body:"Narrative extends into physical luxury contexts through appointment-led, high-touch encounters.",channels:["Retail","Activation"],visual:{src:wr.airport,alt:"Cartier Rogue experiential activation proof",caption:"Airport Activation",kind:"portrait",fit:"contain"}}],[]);return D.jsxs("div",{className:"crPage",children:[D.jsxs("header",{className:"crHeader",children:[D.jsx("div",{className:"crBrand",children:"Cartier Rogue"}),D.jsx("nav",{children:D.jsx(ip,{to:"/",children:"Back to Portfolio"})})]}),D.jsx(Nn.section,{id:"what",className:"crSection crSection--what",initial:"hidden",animate:"show",variants:Qd,children:D.jsxs("div",{className:"crWhatLayout",children:[D.jsxs("div",{className:"crWhatCopyCol",children:[D.jsxs("div",{className:"crCopyPanel",children:[D.jsx("p",{className:"crKicker",children:"Cartier Rogue"}),D.jsx("h1",{children:"What is Cartier Rogue?"}),D.jsx("p",{className:"crSubtitle",children:"A luxury campaign concept for the era of cultural self-definition."}),D.jsx("p",{className:"crLead",children:"Cartier Rogue reframes Cartier heritage through contemporary rebellion, where jewelry is no longer a distant aristocratic symbol but expressive identity in motion. It bridges Cartiers precision, material richness, and timeless authority with editorial street energy designed for new icons of cultural power."}),D.jsx("p",{className:"crTagline",children:"Power doesnt look like it used to, but it still wears Cartier."}),D.jsxs("div",{className:"crChipRow",children:[D.jsx("span",{children:"Concept"}),D.jsx("span",{children:"Luxury Campaign"}),D.jsx("span",{children:"Editorial / OOH / Digital"}),D.jsx("span",{children:"Cultural Repositioning"}),D.jsx("span",{children:"Youth Luxury"})]})]}),D.jsxs("div",{className:"crWhatSupportPair",children:[D.jsx(Jc,{visual:{src:wr.lookbook,alt:"Cartier Rogue lookbook proof",caption:"Lookbook Cover",kind:"landscape",fit:"contain"}}),D.jsx(Jc,{visual:{src:wr.moodboard,alt:"Cartier Rogue concept moodboard proof",caption:"Concept Moodboard",kind:"landscape",fit:"contain"}})]})]}),D.jsx("div",{className:"crWhatVisual",children:D.jsx("figure",{className:"crHeroVisual crNewHeroFrame",children:D.jsx("img",{src:Yd[3],alt:"Cartier Rogue cinematic hero visual"})})})]})}),D.jsxs(Nn.section,{id:"language",className:"crSection crSection--language",variants:Qd,initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.2},children:[D.jsxs("figure",{className:"crFullHero crNewHeroFrame",children:[D.jsx("img",{src:Yd[0],alt:"Cartier Rogue campaign language hero image",loading:"lazy"}),D.jsxs("figcaption",{children:[D.jsx("p",{className:"crCaptionLabel",children:"Campaign Language"}),D.jsx("p",{children:"Heritage silhouettes, contemporary posture, and cinematic nocturnal contrast."})]})]}),D.jsx("div",{className:"crSupportGrid",children:d.map(m=>D.jsx(Jc,{visual:m,className:"crSupportGridCard"},`${m.caption}-${m.src}`))})]}),D.jsxs(Nn.section,{id:"framework",className:"crSection crSection--framework",variants:Qd,initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.2},children:[D.jsxs("div",{className:"crFrameworkLayout",children:[D.jsxs("div",{className:"crFrameworkContent",children:[D.jsxs("div",{className:"crSectionHeading",children:[D.jsx("h2",{children:"Campaign Framework"}),D.jsx("p",{className:"crSectionSub",children:"What / Who / Why / Where / When"})]}),D.jsx("div",{className:"crFrameworkCards",children:u.map(m=>D.jsxs("article",{className:"crFrameworkCard",children:[D.jsx("p",{className:"crCardLabel",children:m.key}),D.jsx("p",{children:m.body})]},m.key))})]}),D.jsxs("figure",{className:"crFrameworkHero crNewHeroFrame",children:[D.jsx("img",{src:Yd[5],alt:"Cartier Rogue framework hero visual",loading:"lazy"}),D.jsxs("figcaption",{children:[D.jsx("p",{className:"crCaptionLabel",children:"Framework Hero"}),D.jsx("p",{children:"Cartier codes translated into a contemporary campaign logic system."})]})]})]}),D.jsxs("div",{className:"crEvidenceStrip",children:[D.jsx(Jc,{visual:{src:wr.braceletB,alt:"Cartier Rogue bracelet detail proof",caption:"Bracelet Detail",kind:"landscape",fit:"contain"},className:"crEvidenceCard"}),D.jsx(Jc,{visual:{src:wr.oohNight,alt:"Cartier Rogue Times Square style OOH proof",caption:"OOH Night Frame",kind:"landscape"},className:"crEvidenceCard"}),D.jsx(Jc,{visual:{src:wr.airport,alt:"Cartier Rogue airport digital proof",caption:"Airport Digital",kind:"portrait",fit:"contain"},className:"crEvidenceCard"})]})]}),D.jsxs(Nn.section,{id:"rollout",className:"crSection crSection--rollout",variants:Qd,initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.2},children:[D.jsxs("figure",{className:"crRolloutHero crNewHeroFrame",children:[D.jsx("img",{src:Yd[4],alt:"Cartier Rogue rollout hero visual",loading:"lazy"}),D.jsxs("figcaption",{children:[D.jsx("p",{className:"crCaptionLabel",children:"How It Rolls Out"}),D.jsx("p",{children:"A phased luxury campaign system from visual tease to activation."})]})]}),D.jsxs("div",{className:"crRolloutGrid",children:[D.jsx("ol",{className:"crPhaseRail",children:p.map(m=>D.jsxs("li",{children:[D.jsx("span",{children:m.phase}),D.jsx("p",{children:m.title})]},m.phase))}),D.jsx("div",{className:"crPhaseCards",children:p.map(m=>D.jsxs("article",{className:"crPhaseCard",children:[D.jsxs("div",{className:"crPhaseCopy",children:[D.jsxs("p",{className:"crCardLabel",children:["Phase ",m.phase,"  ",m.title]}),D.jsx("p",{children:m.body}),D.jsx("div",{className:"crTagRow",children:m.channels.map(v=>D.jsx("span",{children:v},`${m.phase}-${v}`))})]}),D.jsx(Jc,{visual:m.visual,className:"crPhaseVisual"})]},m.phase))})]}),D.jsxs("article",{className:"crActivationCard",children:[D.jsxs("div",{children:[D.jsx("h3",{children:"Experiential Extension"}),D.jsx("p",{children:"The Cartier Rogue narrative expands into physical activation through the existing Cartier  Maybach mobile luxury gallery concept."})]}),D.jsx("button",{type:"button",className:"crBtn crBtn--gold",onClick:l,children:"Open Cartier  Maybach Experience"})]})]}),D.jsx(Nn.section,{id:"impact",className:"crSection crSection--impact",variants:Qd,initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},children:D.jsxs("div",{className:"crImpactHero crNewHeroFrame",children:[D.jsx("img",{src:Yd[6],alt:"Cartier Rogue impact closing visual",loading:"lazy"}),D.jsxs("div",{className:"crImpactOverlay",children:[D.jsx("div",{className:"crSectionHeading",children:D.jsx("h2",{children:"Impact & Strategic Value"})}),D.jsxs("div",{className:"crImpactColumns",children:[D.jsxs("article",{children:[D.jsx("h3",{children:"Brand Impact"}),D.jsx("p",{children:"Modernizes Cartiers symbolic language without losing prestige or craft authority."})]}),D.jsxs("article",{children:[D.jsx("h3",{children:"Audience Impact"}),D.jsx("p",{children:"Builds emotional relevance with culture-native luxury consumers and new icon communities."})]}),D.jsxs("article",{children:[D.jsx("h3",{children:"Platform Potential"}),D.jsx("p",{children:"Scales cleanly across editorial, social, OOH, and experiential activation modules."})]})]}),D.jsx("p",{className:"crClosingLine",children:"Heritage, re-authored."}),D.jsx("div",{className:"crHeroCtas",children:D.jsx(ip,{to:"/",className:"crBtn",children:"Back to Portfolio"})})]})]})}),D.jsx(lu,{children:t?D.jsx(Nn.div,{className:"crEntryVeil",initial:{opacity:1},animate:{opacity:0},exit:{opacity:0},transition:{duration:.5}}):null}),D.jsx(pA,{open:r})]})}EP.createRoot(document.getElementById("root")).render(D.jsx(NC.StrictMode,{children:D.jsx(MB,{children:D.jsxs(gB,{children:[D.jsx(qg,{path:"/",element:D.jsx(aN,{})}),D.jsx(qg,{path:"/cartier-maybach",element:D.jsx(gV,{})}),D.jsx(qg,{path:"/cartier-rogue",element:D.jsx(xV,{})})]})})}));
